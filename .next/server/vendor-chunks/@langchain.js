"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain";
exports.ids = ["vendor-chunks/@langchain"];
exports.modules = {

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/native.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/native.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    randomUUID: (node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID)\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvbmF0aXZlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNqQyxpRUFBZTtJQUNiQyxZQUFZRCwrREFBaUI7QUFDL0IsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvbmF0aXZlLmpzPzI2ODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSUQ6IGNyeXB0by5yYW5kb21VVUlEXG59OyJdLCJuYW1lcyI6WyJjcnlwdG8iLCJyYW5kb21VVUlEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/native.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/regex.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/regex.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcmVnZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLDBKQUEwSixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcmVnZXguanM/ZDNlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLThdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMHxmZmZmZmZmZi1mZmZmLWZmZmYtZmZmZi1mZmZmZmZmZmZmZmYpJC9pOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/regex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/rng.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/rng.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nfunction rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcm5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNqQyxNQUFNQyxZQUFZLElBQUlDLFdBQVcsTUFBTSxxQ0FBcUM7QUFDNUUsSUFBSUMsVUFBVUYsVUFBVUcsTUFBTTtBQUNmLFNBQVNDO0lBQ3RCLElBQUlGLFVBQVVGLFVBQVVHLE1BQU0sR0FBRyxJQUFJO1FBQ25DSixpRUFBcUIsQ0FBQ0M7UUFDdEJFLFVBQVU7SUFDWjtJQUNBLE9BQU9GLFVBQVVNLEtBQUssQ0FBQ0osU0FBU0EsV0FBVztBQUM3QyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3JuZy5qcz8zYjI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnbm9kZTpjcnlwdG8nO1xuY29uc3Qgcm5kczhQb29sID0gbmV3IFVpbnQ4QXJyYXkoMjU2KTsgLy8gIyBvZiByYW5kb20gdmFsdWVzIHRvIHByZS1hbGxvY2F0ZVxubGV0IHBvb2xQdHIgPSBybmRzOFBvb2wubGVuZ3RoO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICBpZiAocG9vbFB0ciA+IHJuZHM4UG9vbC5sZW5ndGggLSAxNikge1xuICAgIGNyeXB0by5yYW5kb21GaWxsU3luYyhybmRzOFBvb2wpO1xuICAgIHBvb2xQdHIgPSAwO1xuICB9XG4gIHJldHVybiBybmRzOFBvb2wuc2xpY2UocG9vbFB0ciwgcG9vbFB0ciArPSAxNik7XG59Il0sIm5hbWVzIjpbImNyeXB0byIsInJuZHM4UG9vbCIsIlVpbnQ4QXJyYXkiLCJwb29sUHRyIiwibGVuZ3RoIiwicm5nIiwicmFuZG9tRmlsbFN5bmMiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/rng.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/stringify.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/stringify.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/validate.js\");\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */ const byteToHex = [];\nfor(let i = 0; i < 256; ++i){\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n    // Note: Be careful editing this code!  It's been tuned for performance\n    // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n    //\n    // Note to future-self: No, you can't remove the `toLowerCase()` call.\n    // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n    return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \"-\" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \"-\" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \"-\" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \"-\" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    // Consistency check for valid UUID.  If this throws, it's likely due to one\n    // of the following:\n    // - One or more input array values don't map to a hex octet (leading to\n    // \"undefined\" in the uuid)\n    // - Invalid input values for the RFC `version` or `variant` fields\n    if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n        throw TypeError(\"Stringified UUID is invalid\");\n    }\n    return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvc3RyaW5naWZ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUVyQzs7O0NBR0MsR0FDRCxNQUFNQyxZQUFZLEVBQUU7QUFDcEIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUksS0FBSyxFQUFFQSxFQUFHO0lBQzVCRCxVQUFVRSxJQUFJLENBQUMsQ0FBQ0QsSUFBSSxLQUFJLEVBQUdFLFFBQVEsQ0FBQyxJQUFJQyxLQUFLLENBQUM7QUFDaEQ7QUFDTyxTQUFTQyxnQkFBZ0JDLEdBQUcsRUFBRUMsU0FBUyxDQUFDO0lBQzdDLHVFQUF1RTtJQUN2RSxvRkFBb0Y7SUFDcEYsRUFBRTtJQUNGLHNFQUFzRTtJQUN0RSx1RUFBdUU7SUFDdkUsT0FBTyxDQUFDUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBRyxNQUFNUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUcsTUFBTVAsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsRUFBRSxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHLE1BQU1QLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEVBQUUsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxFQUFFLENBQUMsR0FBRyxNQUFNUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxHQUFHLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsR0FBRyxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEdBQUcsQ0FBQyxHQUFHUCxTQUFTLENBQUNNLEdBQUcsQ0FBQ0MsU0FBUyxHQUFHLENBQUMsR0FBR1AsU0FBUyxDQUFDTSxHQUFHLENBQUNDLFNBQVMsR0FBRyxDQUFDLEdBQUdQLFNBQVMsQ0FBQ00sR0FBRyxDQUFDQyxTQUFTLEdBQUcsQ0FBQyxFQUFFQyxXQUFXO0FBQ2xnQjtBQUNBLFNBQVNDLFVBQVVILEdBQUcsRUFBRUMsU0FBUyxDQUFDO0lBQ2hDLE1BQU1HLE9BQU9MLGdCQUFnQkMsS0FBS0M7SUFDbEMsNEVBQTRFO0lBQzVFLG9CQUFvQjtJQUNwQix3RUFBd0U7SUFDeEUsMkJBQTJCO0lBQzNCLG1FQUFtRTtJQUNuRSxJQUFJLENBQUNSLHdEQUFRQSxDQUFDVyxPQUFPO1FBQ25CLE1BQU1DLFVBQVU7SUFDbEI7SUFDQSxPQUFPRDtBQUNUO0FBQ0EsaUVBQWVELFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zdHJpbmdpZnkuanM/ZTMxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG5cbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgLy9cbiAgLy8gTm90ZSB0byBmdXR1cmUtc2VsZjogTm8sIHlvdSBjYW4ndCByZW1vdmUgdGhlIGB0b0xvd2VyQ2FzZSgpYCBjYWxsLlxuICAvLyBSRUY6IGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzY3NyNpc3N1ZWNvbW1lbnQtMTc1NzM1MTM1MVxuICByZXR1cm4gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTtcbiAgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuICByZXR1cm4gdXVpZDtcbn1cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJieXRlVG9IZXgiLCJpIiwicHVzaCIsInRvU3RyaW5nIiwic2xpY2UiLCJ1bnNhZmVTdHJpbmdpZnkiLCJhcnIiLCJvZmZzZXQiLCJ0b0xvd2VyQ2FzZSIsInN0cmluZ2lmeSIsInV1aWQiLCJUeXBlRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/stringify.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/v4.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/v4.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/native.js\");\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n    if (_native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID && !buf && !options) {\n        return _native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = rnds[6] & 0x0f | 0x40;\n    rnds[8] = rnds[8] & 0x3f | 0x80;\n    // Copy bytes to buffer, if provided\n    if (buf) {\n        offset = offset || 0;\n        for(let i = 0; i < 16; ++i){\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNOO0FBQ3NCO0FBQ2pELFNBQVNHLEdBQUdDLE9BQU8sRUFBRUMsR0FBRyxFQUFFQyxNQUFNO0lBQzlCLElBQUlOLGtEQUFNQSxDQUFDTyxVQUFVLElBQUksQ0FBQ0YsT0FBTyxDQUFDRCxTQUFTO1FBQ3pDLE9BQU9KLGtEQUFNQSxDQUFDTyxVQUFVO0lBQzFCO0lBQ0FILFVBQVVBLFdBQVcsQ0FBQztJQUN0QixNQUFNSSxPQUFPSixRQUFRSyxNQUFNLElBQUksQ0FBQ0wsUUFBUUgsR0FBRyxJQUFJQSwrQ0FBRTtJQUVqRCxnRUFBZ0U7SUFDaEVPLElBQUksQ0FBQyxFQUFFLEdBQUdBLElBQUksQ0FBQyxFQUFFLEdBQUcsT0FBTztJQUMzQkEsSUFBSSxDQUFDLEVBQUUsR0FBR0EsSUFBSSxDQUFDLEVBQUUsR0FBRyxPQUFPO0lBRTNCLG9DQUFvQztJQUNwQyxJQUFJSCxLQUFLO1FBQ1BDLFNBQVNBLFVBQVU7UUFDbkIsSUFBSyxJQUFJSSxJQUFJLEdBQUdBLElBQUksSUFBSSxFQUFFQSxFQUFHO1lBQzNCTCxHQUFHLENBQUNDLFNBQVNJLEVBQUUsR0FBR0YsSUFBSSxDQUFDRSxFQUFFO1FBQzNCO1FBQ0EsT0FBT0w7SUFDVDtJQUNBLE9BQU9ILDhEQUFlQSxDQUFDTTtBQUN6QjtBQUNBLGlFQUFlTCxFQUFFQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdjQuanM/YzU2OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbmF0aXZlIGZyb20gJy4vbmF0aXZlLmpzJztcbmltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgaWYgKG5hdGl2ZS5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmF0aXZlLnJhbmRvbVVVSUQoKTtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3Qgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7XG5cbiAgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xuICB9XG4gIHJldHVybiB1bnNhZmVTdHJpbmdpZnkocm5kcyk7XG59XG5leHBvcnQgZGVmYXVsdCB2NDsiXSwibmFtZXMiOlsibmF0aXZlIiwicm5nIiwidW5zYWZlU3RyaW5naWZ5IiwidjQiLCJvcHRpb25zIiwiYnVmIiwib2Zmc2V0IiwicmFuZG9tVVVJRCIsInJuZHMiLCJyYW5kb20iLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/v4.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/validate.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/validate.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/regex.js\");\n\nfunction validate(uuid) {\n    return typeof uuid === \"string\" && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvdmFsaWRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0I7QUFDL0IsU0FBU0MsU0FBU0MsSUFBSTtJQUNwQixPQUFPLE9BQU9BLFNBQVMsWUFBWUYsaURBQUtBLENBQUNHLElBQUksQ0FBQ0Q7QUFDaEQ7QUFDQSxpRUFBZUQsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3ZhbGlkYXRlLmpzPzJhYTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIFJFR0VYLnRlc3QodXVpZCk7XG59XG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZTsiXSwibmFtZXMiOlsiUkVHRVgiLCJ2YWxpZGF0ZSIsInV1aWQiLCJ0ZXN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/validate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/caches.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/caches.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache),\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache),\n/* harmony export */   deserializeStoredGeneration: () => (/* binding */ deserializeStoredGeneration),\n/* harmony export */   getCacheKey: () => (/* binding */ getCacheKey),\n/* harmony export */   serializeGeneration: () => (/* binding */ serializeGeneration)\n/* harmony export */ });\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * This cache key should be consistent across all versions of langchain.\n * It is currently NOT consistent across versions of langchain.\n *\n * A huge benefit of having a remote cache (like redis) is that you can\n * access the cache from different processes/machines. The allows you to\n * seperate concerns and scale horizontally.\n *\n * TODO: Make cache key consistent across versions of langchain.\n */ const getCacheKey = (...strings)=>(0,_utils_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)(strings.join(\"_\"));\nfunction deserializeStoredGeneration(storedGeneration) {\n    if (storedGeneration.message !== undefined) {\n        return {\n            text: storedGeneration.text,\n            message: (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessageToChatMessage)(storedGeneration.message)\n        };\n    } else {\n        return {\n            text: storedGeneration.text\n        };\n    }\n}\nfunction serializeGeneration(generation) {\n    const serializedValue = {\n        text: generation.text\n    };\n    if (generation.message !== undefined) {\n        serializedValue.message = generation.message.toDict();\n    }\n    return serializedValue;\n}\n/**\n * Base class for all caches. All caches should extend this class.\n */ class BaseCache {\n}\nconst GLOBAL_MAP = new Map();\n/**\n * A cache for storing LLM generations that stores data in memory.\n */ class InMemoryCache extends BaseCache {\n    constructor(map){\n        super();\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.cache = map ?? new Map();\n    }\n    /**\n     * Retrieves data from the cache using a prompt and an LLM key. If the\n     * data is not found, it returns null.\n     * @param prompt The prompt used to find the data.\n     * @param llmKey The LLM key used to find the data.\n     * @returns The data corresponding to the prompt and LLM key, or null if not found.\n     */ lookup(prompt, llmKey) {\n        return Promise.resolve(this.cache.get(getCacheKey(prompt, llmKey)) ?? null);\n    }\n    /**\n     * Updates the cache with new data using a prompt and an LLM key.\n     * @param prompt The prompt used to store the data.\n     * @param llmKey The LLM key used to store the data.\n     * @param value The data to be stored.\n     */ async update(prompt, llmKey, value) {\n        this.cache.set(getCacheKey(prompt, llmKey), value);\n    }\n    /**\n     * Returns a global instance of InMemoryCache using a predefined global\n     * map as the initial cache.\n     * @returns A global instance of InMemoryCache.\n     */ static global() {\n        return new InMemoryCache(GLOBAL_MAP);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBK0M7QUFDc0I7QUFDckU7Ozs7Ozs7OztDQVNDLEdBQ00sTUFBTUUsY0FBYyxDQUFDLEdBQUdDLFVBQVlILDREQUFZQSxDQUFDRyxRQUFRQyxJQUFJLENBQUMsTUFBTTtBQUNwRSxTQUFTQyw0QkFBNEJDLGdCQUFnQjtJQUN4RCxJQUFJQSxpQkFBaUJDLE9BQU8sS0FBS0MsV0FBVztRQUN4QyxPQUFPO1lBQ0hDLE1BQU1ILGlCQUFpQkcsSUFBSTtZQUMzQkYsU0FBU04saUZBQTZCQSxDQUFDSyxpQkFBaUJDLE9BQU87UUFDbkU7SUFDSixPQUNLO1FBQ0QsT0FBTztZQUFFRSxNQUFNSCxpQkFBaUJHLElBQUk7UUFBQztJQUN6QztBQUNKO0FBQ08sU0FBU0Msb0JBQW9CQyxVQUFVO0lBQzFDLE1BQU1DLGtCQUFrQjtRQUNwQkgsTUFBTUUsV0FBV0YsSUFBSTtJQUN6QjtJQUNBLElBQUlFLFdBQVdKLE9BQU8sS0FBS0MsV0FBVztRQUNsQ0ksZ0JBQWdCTCxPQUFPLEdBQUdJLFdBQVdKLE9BQU8sQ0FBQ00sTUFBTTtJQUN2RDtJQUNBLE9BQU9EO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLE1BQU1FO0FBQ2I7QUFDQSxNQUFNQyxhQUFhLElBQUlDO0FBQ3ZCOztDQUVDLEdBQ00sTUFBTUMsc0JBQXNCSDtJQUMvQkksWUFBWUMsR0FBRyxDQUFFO1FBQ2IsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsS0FBSyxHQUFHUCxPQUFPLElBQUlIO0lBQzVCO0lBQ0E7Ozs7OztLQU1DLEdBQ0RXLE9BQU9DLE1BQU0sRUFBRUMsTUFBTSxFQUFFO1FBQ25CLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLENBQUNMLEtBQUssQ0FBQ00sR0FBRyxDQUFDOUIsWUFBWTBCLFFBQVFDLFlBQVk7SUFDMUU7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1JLE9BQU9MLE1BQU0sRUFBRUMsTUFBTSxFQUFFSixLQUFLLEVBQUU7UUFDaEMsSUFBSSxDQUFDQyxLQUFLLENBQUNRLEdBQUcsQ0FBQ2hDLFlBQVkwQixRQUFRQyxTQUFTSjtJQUNoRDtJQUNBOzs7O0tBSUMsR0FDRCxPQUFPVSxTQUFTO1FBQ1osT0FBTyxJQUFJbEIsY0FBY0Y7SUFDN0I7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhY2hlcy5qcz82NWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluc2VjdXJlSGFzaCB9IGZyb20gXCIuL3V0aWxzL2hhc2guanNcIjtcbmltcG9ydCB7IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlLCB9IGZyb20gXCIuL21lc3NhZ2VzL2luZGV4LmpzXCI7XG4vKipcbiAqIFRoaXMgY2FjaGUga2V5IHNob3VsZCBiZSBjb25zaXN0ZW50IGFjcm9zcyBhbGwgdmVyc2lvbnMgb2YgbGFuZ2NoYWluLlxuICogSXQgaXMgY3VycmVudGx5IE5PVCBjb25zaXN0ZW50IGFjcm9zcyB2ZXJzaW9ucyBvZiBsYW5nY2hhaW4uXG4gKlxuICogQSBodWdlIGJlbmVmaXQgb2YgaGF2aW5nIGEgcmVtb3RlIGNhY2hlIChsaWtlIHJlZGlzKSBpcyB0aGF0IHlvdSBjYW5cbiAqIGFjY2VzcyB0aGUgY2FjaGUgZnJvbSBkaWZmZXJlbnQgcHJvY2Vzc2VzL21hY2hpbmVzLiBUaGUgYWxsb3dzIHlvdSB0b1xuICogc2VwZXJhdGUgY29uY2VybnMgYW5kIHNjYWxlIGhvcml6b250YWxseS5cbiAqXG4gKiBUT0RPOiBNYWtlIGNhY2hlIGtleSBjb25zaXN0ZW50IGFjcm9zcyB2ZXJzaW9ucyBvZiBsYW5nY2hhaW4uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYWNoZUtleSA9ICguLi5zdHJpbmdzKSA9PiBpbnNlY3VyZUhhc2goc3RyaW5ncy5qb2luKFwiX1wiKSk7XG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uKHN0b3JlZEdlbmVyYXRpb24pIHtcbiAgICBpZiAoc3RvcmVkR2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHQ6IHN0b3JlZEdlbmVyYXRpb24udGV4dCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKHN0b3JlZEdlbmVyYXRpb24ubWVzc2FnZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geyB0ZXh0OiBzdG9yZWRHZW5lcmF0aW9uLnRleHQgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplR2VuZXJhdGlvbihnZW5lcmF0aW9uKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFZhbHVlID0ge1xuICAgICAgICB0ZXh0OiBnZW5lcmF0aW9uLnRleHQsXG4gICAgfTtcbiAgICBpZiAoZ2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VyaWFsaXplZFZhbHVlLm1lc3NhZ2UgPSBnZW5lcmF0aW9uLm1lc3NhZ2UudG9EaWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkVmFsdWU7XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBjYWNoZXMuIEFsbCBjYWNoZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNhY2hlIHtcbn1cbmNvbnN0IEdMT0JBTF9NQVAgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEEgY2FjaGUgZm9yIHN0b3JpbmcgTExNIGdlbmVyYXRpb25zIHRoYXQgc3RvcmVzIGRhdGEgaW4gbWVtb3J5LlxuICovXG5leHBvcnQgY2xhc3MgSW5NZW1vcnlDYWNoZSBleHRlbmRzIEJhc2VDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBtYXAgPz8gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgZGF0YSBmcm9tIHRoZSBjYWNoZSB1c2luZyBhIHByb21wdCBhbmQgYW4gTExNIGtleS4gSWYgdGhlXG4gICAgICogZGF0YSBpcyBub3QgZm91bmQsIGl0IHJldHVybnMgbnVsbC5cbiAgICAgKiBAcGFyYW0gcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBsbG1LZXkgVGhlIExMTSBrZXkgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21wdCBhbmQgTExNIGtleSwgb3IgbnVsbCBpZiBub3QgZm91bmQuXG4gICAgICovXG4gICAgbG9va3VwKHByb21wdCwgbGxtS2V5KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jYWNoZS5nZXQoZ2V0Q2FjaGVLZXkocHJvbXB0LCBsbG1LZXkpKSA/PyBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2FjaGUgd2l0aCBuZXcgZGF0YSB1c2luZyBhIHByb21wdCBhbmQgYW4gTExNIGtleS5cbiAgICAgKiBAcGFyYW0gcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCB0byBzdG9yZSB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gbGxtS2V5IFRoZSBMTE0ga2V5IHVzZWQgdG8gc3RvcmUgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBkYXRhIHRvIGJlIHN0b3JlZC5cbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGUocHJvbXB0LCBsbG1LZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGdldENhY2hlS2V5KHByb21wdCwgbGxtS2V5KSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZ2xvYmFsIGluc3RhbmNlIG9mIEluTWVtb3J5Q2FjaGUgdXNpbmcgYSBwcmVkZWZpbmVkIGdsb2JhbFxuICAgICAqIG1hcCBhcyB0aGUgaW5pdGlhbCBjYWNoZS5cbiAgICAgKiBAcmV0dXJucyBBIGdsb2JhbCBpbnN0YW5jZSBvZiBJbk1lbW9yeUNhY2hlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnbG9iYWwoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5NZW1vcnlDYWNoZShHTE9CQUxfTUFQKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaW5zZWN1cmVIYXNoIiwibWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UiLCJnZXRDYWNoZUtleSIsInN0cmluZ3MiLCJqb2luIiwiZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uIiwic3RvcmVkR2VuZXJhdGlvbiIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJ0ZXh0Iiwic2VyaWFsaXplR2VuZXJhdGlvbiIsImdlbmVyYXRpb24iLCJzZXJpYWxpemVkVmFsdWUiLCJ0b0RpY3QiLCJCYXNlQ2FjaGUiLCJHTE9CQUxfTUFQIiwiTWFwIiwiSW5NZW1vcnlDYWNoZSIsImNvbnN0cnVjdG9yIiwibWFwIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImNhY2hlIiwibG9va3VwIiwicHJvbXB0IiwibGxtS2V5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXQiLCJ1cGRhdGUiLCJzZXQiLCJnbG9iYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/caches.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.awaitHandlers = input._awaitHandler ?? this.awaitHandlers;\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QjtBQUMrQztBQUNuQjtBQUN6RDs7OztDQUlDLEdBQ0QsTUFBTUk7QUFDTjtBQUNBOzs7OztDQUtDLEdBQ00sTUFBTUMsNEJBQTRCRDtJQUNyQyxJQUFJRSxlQUFlO1FBQ2YsT0FBTztZQUFDO1lBQWtCO1lBQWEsSUFBSSxDQUFDQyxJQUFJO1NBQUM7SUFDckQ7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBT0M7SUFDWDtJQUNBLElBQUlDLGdCQUFnQjtRQUNoQixPQUFPRDtJQUNYO0lBQ0EsSUFBSUUsYUFBYTtRQUNiLE9BQU9GO0lBQ1g7SUFDQTs7Ozs7S0FLQyxHQUNELE9BQU9HLFVBQVU7UUFDYixPQUFPLElBQUksQ0FBQ0wsSUFBSTtJQUNwQjtJQUNBOztLQUVDLEdBQ0QsSUFBSU0sUUFBUTtRQUNSLE9BQU87ZUFDQSxJQUFJLENBQUNQLFlBQVk7WUFDcEJKLHlFQUFrQkEsQ0FBQyxJQUFJLENBQUNZLFdBQVc7U0FDdEM7SUFDTDtJQUNBQSxZQUFZQyxLQUFLLENBQUU7UUFDZixLQUFLO1FBQ0xDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT2xCLHFFQUFzQkEsQ0FBQyxzQ0FBc0M7UUFDeEU7UUFDQSxJQUFJLENBQUNtQixTQUFTLEdBQUdQLFNBQVMsQ0FBQztRQUMzQixJQUFJQSxPQUFPO1lBQ1AsSUFBSSxDQUFDUSxTQUFTLEdBQUdSLE1BQU1RLFNBQVMsSUFBSSxJQUFJLENBQUNBLFNBQVM7WUFDbEQsSUFBSSxDQUFDQyxXQUFXLEdBQUdULE1BQU1TLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVc7WUFDeEQsSUFBSSxDQUFDQyxXQUFXLEdBQUdWLE1BQU1VLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVc7WUFDeEQsSUFBSSxDQUFDQyxlQUFlLEdBQUdYLE1BQU1XLGVBQWUsSUFBSSxJQUFJLENBQUNBLGVBQWU7WUFDcEUsSUFBSSxDQUFDQyxhQUFhLEdBQUdaLE1BQU1hLGFBQWEsSUFBSSxJQUFJLENBQUNELGFBQWE7UUFDbEU7SUFDSjtJQUNBRSxPQUFPO1FBQ0gsT0FBTyxJQUFJLElBQUksQ0FBQ2YsV0FBVyxDQUFDLElBQUk7SUFDcEM7SUFDQWdCLFNBQVM7UUFDTCxPQUFPN0IsK0RBQVlBLENBQUM4QixTQUFTLENBQUNELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLElBQUk7SUFDbEQ7SUFDQUMsdUJBQXVCO1FBQ25CLE9BQU9oQywrREFBWUEsQ0FBQzhCLFNBQVMsQ0FBQ0Usb0JBQW9CLENBQUNELElBQUksQ0FBQyxJQUFJO0lBQ2hFO0lBQ0EsT0FBT0UsWUFBWUMsT0FBTyxFQUFFO1FBQ3hCLE1BQU1DLGdCQUFnQi9CO1lBQ2xCUyxhQUFjO2dCQUNWLEtBQUs7Z0JBQ0xFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtvQkFDaENDLFlBQVk7b0JBQ1pDLGNBQWM7b0JBQ2RDLFVBQVU7b0JBQ1ZDLE9BQU9yQiw0Q0FBTztnQkFDbEI7Z0JBQ0FnQixPQUFPc0IsTUFBTSxDQUFDLElBQUksRUFBRUg7WUFDeEI7UUFDSjtRQUNBLE9BQU8sSUFBSUM7SUFDZjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanM/NTE4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB1dWlkIGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUsIGdldF9sY191bmlxdWVfbmFtZSwgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHRoYXQgcHJvdmlkZXMgYSBzZXQgb2Ygb3B0aW9uYWwgbWV0aG9kcyB0aGF0IGNhbiBiZVxuICogb3ZlcnJpZGRlbiBpbiBkZXJpdmVkIGNsYXNzZXMgdG8gaGFuZGxlIHZhcmlvdXMgZXZlbnRzIGR1cmluZyB0aGVcbiAqIGV4ZWN1dGlvbiBvZiBhIExhbmdDaGFpbiBhcHBsaWNhdGlvbi5cbiAqL1xuY2xhc3MgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG59XG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGNyZWF0aW5nIGNhbGxiYWNrIGhhbmRsZXJzIGluIHRoZSBMYW5nQ2hhaW5cbiAqIGZyYW1ld29yay4gSXQgcHJvdmlkZXMgYSBzZXQgb2Ygb3B0aW9uYWwgbWV0aG9kcyB0aGF0IGNhbiBiZSBvdmVycmlkZGVuXG4gKiBpbiBkZXJpdmVkIGNsYXNzZXMgdG8gaGFuZGxlIHZhcmlvdXMgZXZlbnRzIGR1cmluZyB0aGUgZXhlY3V0aW9uIG9mIGFcbiAqIExhbmdDaGFpbiBhcHBsaWNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIHtcbiAgICBnZXQgbGNfbmFtZXNwYWNlKCkge1xuICAgICAgICByZXR1cm4gW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJjYWxsYmFja3NcIiwgdGhpcy5uYW1lXTtcbiAgICB9XG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBsY19hdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHNlcmlhbGl6YWJsZS4gT3ZlcnJpZGUgdG8gcHJvdmlkZSBhbiBhbGlhcyBvclxuICAgICAqIHRvIHByZXNlcnZlIHRoZSBzZXJpYWxpemVkIG1vZHVsZSBuYW1lIGluIG1pbmlmaWVkIGVudmlyb25tZW50cy5cbiAgICAgKlxuICAgICAqIEltcGxlbWVudGVkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBzdXBwb3J0IGxvYWRpbmcgbG9naWMuXG4gICAgICovXG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBzZXJpYWxpemVkIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUuXG4gICAgICovXG4gICAgZ2V0IGxjX2lkKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4udGhpcy5sY19uYW1lc3BhY2UsXG4gICAgICAgICAgICBnZXRfbGNfdW5pcXVlX25hbWUodGhpcy5jb25zdHJ1Y3RvciksXG4gICAgICAgIF07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVMTE1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVDaGFpblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUFnZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlUmV0cmlldmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXdhaXRIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORFwiKSAhPT0gXCJ0cnVlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGNfa3dhcmdzID0gaW5wdXQgfHwge307XG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVMTE0gPSBpbnB1dC5pZ25vcmVMTE0gPz8gdGhpcy5pZ25vcmVMTE07XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUNoYWluID0gaW5wdXQuaWdub3JlQ2hhaW4gPz8gdGhpcy5pZ25vcmVDaGFpbjtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQWdlbnQgPSBpbnB1dC5pZ25vcmVBZ2VudCA/PyB0aGlzLmlnbm9yZUFnZW50O1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVSZXRyaWV2ZXIgPSBpbnB1dC5pZ25vcmVSZXRyaWV2ZXIgPz8gdGhpcy5pZ25vcmVSZXRyaWV2ZXI7XG4gICAgICAgICAgICB0aGlzLmF3YWl0SGFuZGxlcnMgPSBpbnB1dC5fYXdhaXRIYW5kbGVyID8/IHRoaXMuYXdhaXRIYW5kbGVycztcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcyk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIHRvSlNPTk5vdEltcGxlbWVudGVkKCkge1xuICAgICAgICByZXR1cm4gU2VyaWFsaXphYmxlLnByb3RvdHlwZS50b0pTT05Ob3RJbXBsZW1lbnRlZC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU1ldGhvZHMobWV0aG9kcykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZC52NCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBtZXRob2RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZXIoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsidXVpZCIsIlNlcmlhbGl6YWJsZSIsImdldF9sY191bmlxdWVfbmFtZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIiwiQmFzZUNhbGxiYWNrSGFuZGxlciIsImxjX25hbWVzcGFjZSIsIm5hbWUiLCJsY19zZWNyZXRzIiwidW5kZWZpbmVkIiwibGNfYXR0cmlidXRlcyIsImxjX2FsaWFzZXMiLCJsY19uYW1lIiwibGNfaWQiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX2t3YXJncyIsImlnbm9yZUxMTSIsImlnbm9yZUNoYWluIiwiaWdub3JlQWdlbnQiLCJpZ25vcmVSZXRyaWV2ZXIiLCJhd2FpdEhhbmRsZXJzIiwiX2F3YWl0SGFuZGxlciIsImNvcHkiLCJ0b0pTT04iLCJwcm90b3R5cGUiLCJjYWxsIiwidG9KU09OTm90SW1wbGVtZW50ZWQiLCJmcm9tTWV0aG9kcyIsIm1ldGhvZHMiLCJIYW5kbGVyIiwidjQiLCJhc3NpZ24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/initialize.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\");\n\n\n\n\n\n\n\n\nif (/* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\" && /* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\") {\n    /* #__PURE__ */ console.warn([\n        \"[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.\",\n        \"[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,\",\n        `[WARN]: we suggest setting \"process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true\" to avoid additional latency.`\n    ].join(\"\\n\"));\n}\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    console.error(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            await handler.handleLLMStart?.(llm, [\n                                prompt\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            if (handler.handleChatModelStart) {\n                                await handler.handleChatModelStart?.(llm, [\n                                    messageGroup\n                                ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            } else if (handler.handleLLMStart) {\n                                const messageString = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_3__.getBufferString)(messageGroup);\n                                await handler.handleLLMStart?.(llm, [\n                                    messageString\n                                ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            }\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static async configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\";\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    callbackManager.addHandler(await (0,_tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__.getTracingV2CallbackHandler)(), true);\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(`What is the answer to {question}?`);\n *\n * // Example of using LLMChain to process a series of questions\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Process questions using the chain\n * const processQuestions = async (questions) => {\n *   for (const question of questions) {\n *     const result = await chain.call({ question });\n *     console.log(result);\n *   }\n * };\n *\n * // Example questions\n * const questions = [\n *   \"What is your name?\",\n *   \"What is your quest?\",\n *   \"What is your favorite color?\",\n * ];\n *\n * // Run the example\n * processQuestions(questions).catch(console.error);\n *\n * ```\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ2E7QUFDYztBQUNRO0FBQ2hCO0FBQ0U7QUFDUztBQUNsQjtBQUNoRCxJQUNBLGFBQWEsR0FBR00scUVBQXNCQSxDQUFDLDRCQUE0QixVQUMvRCxhQUFhLEdBQUdBLHFFQUFzQkEsQ0FBQyxzQ0FDbkMsUUFBUTtJQUNaLGFBQWEsR0FBR0csUUFBUUMsSUFBSSxDQUFDO1FBQ3pCO1FBQ0E7UUFDQSxDQUFDLHlHQUF5RyxDQUFDO0tBQzlHLENBQUNDLElBQUksQ0FBQztBQUNYO0FBQ08sU0FBU0MsdUJBQXVCQyxHQUFHO0lBQ3RDLElBQUksQ0FBQ0EsS0FBSztRQUNOLE9BQU8sQ0FBQztJQUNaLE9BQ0ssSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixRQUFRLFVBQVVBLEtBQUs7UUFDMUMsT0FBTztZQUFFRyxXQUFXSDtRQUFJO0lBQzVCLE9BQ0s7UUFDRCxPQUFPQTtJQUNYO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1JO0lBQ1RDLFdBQVdDLE9BQU8sRUFBRTtRQUNoQixPQUFPLElBQUksQ0FBQ0MsV0FBVyxDQUFDO1lBQUNEO1NBQVE7SUFDckM7QUFDSjtBQUNBOztDQUVDLEdBQ0QsTUFBTUU7SUFDRkMsWUFBWUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLG1CQUFtQixFQUFFQyxJQUFJLEVBQUVDLGVBQWUsRUFBRUMsUUFBUSxFQUFFQyxtQkFBbUIsRUFBRUMsWUFBWSxDQUFFO1FBQ2xIQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9iO1FBQ1g7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFP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b2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9tYW5hZ2VyLmpzPzA5ZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ29uc29sZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2NvbnNvbGUuanNcIjtcbmltcG9ydCB7IGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2luaXRpYWxpemUuanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlciwgfSBmcm9tIFwiLi4vdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBjb25zdW1lQ2FsbGJhY2sgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaWYgKFxuLyogI19fUFVSRV9fICovIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVFJBQ0lOR19WMlwiKSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAvKiAjX19QVVJFX18gKi8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORFwiKSAhPT1cbiAgICAgICAgXCJ0cnVlXCIpIHtcbiAgICAvKiAjX19QVVJFX18gKi8gY29uc29sZS53YXJuKFtcbiAgICAgICAgXCJbV0FSTl06IFlvdSBoYXZlIGVuYWJsZWQgTGFuZ1NtaXRoIHRyYWNpbmcgd2l0aG91dCBiYWNrZ3JvdW5kaW5nIGNhbGxiYWNrcy5cIixcbiAgICAgICAgXCJbV0FSTl06IElmIHlvdSBhcmUgbm90IHVzaW5nIGEgc2VydmVybGVzcyBlbnZpcm9ubWVudCB3aGVyZSB5b3UgbXVzdCB3YWl0IGZvciB0cmFjaW5nIGNhbGxzIHRvIGZpbmlzaCxcIixcbiAgICAgICAgYFtXQVJOXTogd2Ugc3VnZ2VzdCBzZXR0aW5nIFwicHJvY2Vzcy5lbnYuTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EPXRydWVcIiB0byBhdm9pZCBhZGRpdGlvbmFsIGxhdGVuY3kuYCxcbiAgICBdLmpvaW4oXCJcXG5cIikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoYXJnKSB7XG4gICAgaWYgKCFhcmcpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgfHwgXCJuYW1lXCIgaW4gYXJnKSB7XG4gICAgICAgIHJldHVybiB7IGNhbGxiYWNrczogYXJnIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlIGNhbGxiYWNrcyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzIG9mIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIHNldEhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRIYW5kbGVycyhbaGFuZGxlcl0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVuIG1hbmFnZXIgaW4gTGFuZ0NoYWluLlxuICovXG5jbGFzcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocnVuSWQsIGhhbmRsZXJzLCBpbmhlcml0YWJsZUhhbmRsZXJzLCB0YWdzLCBpbmhlcml0YWJsZVRhZ3MsIG1ldGFkYXRhLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBfcGFyZW50UnVuSWQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHJ1bklkXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlSGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlSGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRhZ3NcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5oZXJpdGFibGVUYWdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlTWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wYXJlbnRSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogX3BhcmVudFJ1bklkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUZXh0KHRleHQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVGV4dD8uKHRleHQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUZXh0OiAke2Vycn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlcyBjYWxsYmFja3MgZm9yIHJldHJpZXZlciBydW5zLlxuICovXG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVuZChkb2N1bWVudHMpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFbmQ/Lihkb2N1bWVudHMsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlckVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgYXN5bmMgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4sIGlkeCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1OZXdUb2tlbj8uKHRva2VuLCBpZHggPz8geyBwcm9tcHQ6IDAsIGNvbXBsZXRpb246IDAgfSwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgZmllbGRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNTmV3VG9rZW46ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRXJyb3IoZXJyLCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywga3dhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRW5kKG91dHB1dCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBrd2FyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRBY3Rpb24/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEFjdGlvbjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50RW5kKGFjdGlvbikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRFbmQ/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbEVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG4vKipcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9cIik7XG4gKlxuICogLy8gRXhhbXBsZSBvZiB1c2luZyBMTE1DaGFpbiB3aXRoIE9wZW5BSSBhbmQgYSBzaW1wbGUgcHJvbXB0XG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBSdW5uaW5nIHRoZSBjaGFpbiB3aXRoIGEgc2luZ2xlIHF1ZXN0aW9uXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5jYWxsKHtcbiAqICAgcXVlc3Rpb246IFwiV2hhdCBpcyB0aGUgYWlyc3BlZWQgdmVsb2NpdHkgb2YgYW4gdW5sYWRlbiBzd2FsbG93P1wiLFxuICogfSk7XG4gKiBjb25zb2xlLmxvZyhcIlRoZSBhbnN3ZXIgaXM6XCIsIHJlc3VsdCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlciBleHRlbmRzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFJ1bklkLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNhbGxiYWNrX21hbmFnZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BhcmVudFJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBvcHRpb25zPy5oYW5kbGVycyA/PyB0aGlzLmhhbmRsZXJzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPVxuICAgICAgICAgICAgb3B0aW9ucz8uaW5oZXJpdGFibGVIYW5kbGVycyA/PyB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgIHRoaXMudGFncyA9IG9wdGlvbnM/LnRhZ3MgPz8gdGhpcy50YWdzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlVGFncyA9IG9wdGlvbnM/LmluaGVyaXRhYmxlVGFncyA/PyB0aGlzLmluaGVyaXRhYmxlVGFncztcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnM/Lm1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9XG4gICAgICAgICAgICBvcHRpb25zPy5pbmhlcml0YWJsZU1ldGFkYXRhID8/IHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YTtcbiAgICAgICAgdGhpcy5fcGFyZW50UnVuSWQgPSBwYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcGFyZW50IHJ1biBJRCwgaWYgYW55LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBhcmVudCBydW4gSUQuXG4gICAgICovXG4gICAgZ2V0UGFyZW50UnVuSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCA9IHVuZGVmaW5lZCwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoYXN5bmMgKHByb21wdCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAvLyBDYW4ndCBoYXZlIGR1cGxpY2F0ZSBydW5zIHdpdGggdGhlIHNhbWUgcnVuIElEIChpZiBwcm92aWRlZClcbiAgICAgICAgICAgIGNvbnN0IHJ1bklkXyA9IGlkeCA9PT0gMCAmJiBydW5JZCA/IHJ1bklkIDogdXVpZHY0KCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0Py4obGxtLCBbcHJvbXB0XSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTVN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkXywgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCA9IHVuZGVmaW5lZCwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobWVzc2FnZXMubWFwKGFzeW5jIChtZXNzYWdlR3JvdXAsIGlkeCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2FuJ3QgaGF2ZSBkdXBsaWNhdGUgcnVucyB3aXRoIHRoZSBzYW1lIHJ1biBJRCAoaWYgcHJvdmlkZWQpXG4gICAgICAgICAgICBjb25zdCBydW5JZF8gPSBpZHggPT09IDAgJiYgcnVuSWQgPyBydW5JZCA6IHV1aWR2NCgpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIuaGFuZGxlQ2hhdE1vZGVsU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0Py4obGxtLCBbbWVzc2FnZUdyb3VwXSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVN0cmluZyA9IGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlR3JvdXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIFttZXNzYWdlU3RyaW5nXSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTVN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkXywgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkID0gdXVpZHY0KCksIHJ1blR5cGUgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluU3RhcnQ/LihjaGFpbiwgaW5wdXRzLCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuVHlwZSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkID0gdXVpZHY0KCksIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbFN0YXJ0Py4odG9vbCwgaW5wdXQsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbFN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJTdGFydD8uKHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvclJldHJpZXZlclJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIGlmIChpbmhlcml0KSB7XG4gICAgICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKChfaGFuZGxlcikgPT4gX2hhbmRsZXIgIT09IGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMuZmlsdGVyKChfaGFuZGxlcikgPT4gX2hhbmRsZXIgIT09IGhhbmRsZXIpO1xuICAgIH1cbiAgICBzZXRIYW5kbGVycyhoYW5kbGVycywgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVGFncyh0YWdzLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnJlbW92ZVRhZ3ModGFncyk7IC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgIHRoaXMudGFncy5wdXNoKC4uLnRhZ3MpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MucHVzaCguLi50YWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVUYWdzKHRhZ3MpIHtcbiAgICAgICAgdGhpcy50YWdzID0gdGhpcy50YWdzLmZpbHRlcigodGFnKSA9PiAhdGFncy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MgPSB0aGlzLmluaGVyaXRhYmxlVGFncy5maWx0ZXIoKHRhZykgPT4gIXRhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgfVxuICAgIGFkZE1ldGFkYXRhKG1ldGFkYXRhLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0geyAuLi50aGlzLm1ldGFkYXRhLCAuLi5tZXRhZGF0YSB9O1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhID0geyAuLi50aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIC4uLm1ldGFkYXRhIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlTWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobWV0YWRhdGEpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5tZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvcHkoYWRkaXRpb25hbEhhbmRsZXJzID0gW10sIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmluY2x1ZGVzKGhhbmRsZXIpO1xuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0aGlzLnRhZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuaW5jbHVkZXModGFnKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgaW5oZXJpdGFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubWV0YWRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IE9iamVjdC5rZXlzKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSkuaW5jbHVkZXMoa2V5KTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEoeyBba2V5XTogdGhpcy5tZXRhZGF0YVtrZXldIH0sIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgYWRkaXRpb25hbEhhbmRsZXJzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBQcmV2ZW50IG11bHRpcGxlIGNvcGllcyBvZiBjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcbiAgICAgICAgICAgIG1hbmFnZXIuaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChoKSA9PiBoLm5hbWUgPT09IFwiY29uc29sZV9jYWxsYmFja19oYW5kbGVyXCIpXG4gICAgICAgICAgICAgICAgLnNvbWUoKGgpID0+IGgubmFtZSA9PT0gaGFuZGxlci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUhhbmRsZXJzKGhhbmRsZXJzKSB7XG4gICAgICAgIGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkdjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaGFuZGxlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgdGhpcygpO1xuICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIobmV3IEhhbmRsZXIoKSk7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgY29uZmlndXJlKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIGluaGVyaXRhYmxlVGFncywgbG9jYWxUYWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBsb2NhbE1ldGFkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBjYWxsYmFja01hbmFnZXI7XG4gICAgICAgIGlmIChpbmhlcml0YWJsZUhhbmRsZXJzIHx8IGxvY2FsSGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGluaGVyaXRhYmxlSGFuZGxlcnMpIHx8ICFpbmhlcml0YWJsZUhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcigpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5zZXRIYW5kbGVycyhpbmhlcml0YWJsZUhhbmRsZXJzPy5tYXAoZW5zdXJlSGFuZGxlcikgPz8gW10sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gaW5oZXJpdGFibGVIYW5kbGVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IGNhbGxiYWNrTWFuYWdlci5jb3B5KEFycmF5LmlzQXJyYXkobG9jYWxIYW5kbGVycylcbiAgICAgICAgICAgICAgICA/IGxvY2FsSGFuZGxlcnMubWFwKGVuc3VyZUhhbmRsZXIpXG4gICAgICAgICAgICAgICAgOiBsb2NhbEhhbmRsZXJzPy5oYW5kbGVycywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZlcmJvc2VFbmFibGVkID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9WRVJCT1NFXCIpID09PSBcInRydWVcIiB8fFxuICAgICAgICAgICAgb3B0aW9ucz8udmVyYm9zZTtcbiAgICAgICAgY29uc3QgdHJhY2luZ1YyRW5hYmxlZCA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVFJBQ0lOR19WMlwiKSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdFbmFibGVkID0gdHJhY2luZ1YyRW5hYmxlZCB8fFxuICAgICAgICAgICAgKGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVFJBQ0lOR1wiKSA/PyBmYWxzZSk7XG4gICAgICAgIGlmICh2ZXJib3NlRW5hYmxlZCB8fCB0cmFjaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKCFjYWxsYmFja01hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmVyYm9zZUVuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gQ29uc29sZUNhbGxiYWNrSGFuZGxlci5wcm90b3R5cGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25zb2xlSGFuZGxlciA9IG5ldyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoY29uc29sZUhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYWNpbmdFbmFibGVkICYmXG4gICAgICAgICAgICAgICAgIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibGFuZ2NoYWluX3RyYWNlclwiKSkge1xuICAgICAgICAgICAgICAgIGlmICh0cmFjaW5nVjJFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKGF3YWl0IGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlcigpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluaGVyaXRhYmxlVGFncyB8fCBsb2NhbFRhZ3MpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFja01hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkVGFncyhpbmhlcml0YWJsZVRhZ3MgPz8gW10pO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRUYWdzKGxvY2FsVGFncyA/PyBbXSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmhlcml0YWJsZU1ldGFkYXRhIHx8IGxvY2FsTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFja01hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkTWV0YWRhdGEoaW5oZXJpdGFibGVNZXRhZGF0YSA/PyB7fSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZE1ldGFkYXRhKGxvY2FsTWV0YWRhdGEgPz8ge30sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2tNYW5hZ2VyO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICBpZiAoXCJuYW1lXCIgaW4gaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gaGFuZGxlcjtcbiAgICB9XG4gICAgcmV0dXJuIEJhc2VDYWxsYmFja0hhbmRsZXIuZnJvbU1ldGhvZHMoaGFuZGxlcik7XG59XG4vKipcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFdoYXQgaXMgdGhlIGFuc3dlciB0byB7cXVlc3Rpb259P2ApO1xuICpcbiAqIC8vIEV4YW1wbGUgb2YgdXNpbmcgTExNQ2hhaW4gdG8gcHJvY2VzcyBhIHNlcmllcyBvZiBxdWVzdGlvbnNcbiAqIGNvbnN0IGNoYWluID0gbmV3IExMTUNoYWluKHtcbiAqICAgbGxtOiBuZXcgQ2hhdE9wZW5BSSh7IHRlbXBlcmF0dXJlOiAwLjkgfSksXG4gKiAgIHByb21wdCxcbiAqIH0pO1xuICpcbiAqIC8vIFByb2Nlc3MgcXVlc3Rpb25zIHVzaW5nIHRoZSBjaGFpblxuICogY29uc3QgcHJvY2Vzc1F1ZXN0aW9ucyA9IGFzeW5jIChxdWVzdGlvbnMpID0+IHtcbiAqICAgZm9yIChjb25zdCBxdWVzdGlvbiBvZiBxdWVzdGlvbnMpIHtcbiAqICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5jYWxsKHsgcXVlc3Rpb24gfSk7XG4gKiAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAqICAgfVxuICogfTtcbiAqXG4gKiAvLyBFeGFtcGxlIHF1ZXN0aW9uc1xuICogY29uc3QgcXVlc3Rpb25zID0gW1xuICogICBcIldoYXQgaXMgeW91ciBuYW1lP1wiLFxuICogICBcIldoYXQgaXMgeW91ciBxdWVzdD9cIixcbiAqICAgXCJXaGF0IGlzIHlvdXIgZmF2b3JpdGUgY29sb3I/XCIsXG4gKiBdO1xuICpcbiAqIC8vIFJ1biB0aGUgZXhhbXBsZVxuICogcHJvY2Vzc1F1ZXN0aW9ucyhxdWVzdGlvbnMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICpcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgVHJhY2VHcm91cCB7XG4gICAgY29uc3RydWN0b3IoZ3JvdXBOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdyb3VwTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ3JvdXBOYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBvcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5NYW5hZ2VyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIoZ3JvdXBfbmFtZSwgaW5wdXRzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNiID0gbmV3IExhbmdDaGFpblRyYWNlcihvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY20gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKFtjYl0pO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY20/LmhhbmRsZUNoYWluU3RhcnQoe1xuICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICB0eXBlOiBcIm5vdF9pbXBsZW1lbnRlZFwiLFxuICAgICAgICAgICAgaWQ6IFtcImxhbmdjaGFpblwiLCBcImNhbGxiYWNrc1wiLCBcImdyb3Vwc1wiLCBncm91cF9uYW1lXSxcbiAgICAgICAgfSwgaW5wdXRzID8/IHt9KTtcbiAgICAgICAgaWYgKCFydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHJ1biBncm91cCBjYWxsYmFjayBtYW5hZ2VyLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVuTWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoaW5wdXRzKSB7XG4gICAgICAgIGlmICghdGhpcy5ydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICB0aGlzLnJ1bk1hbmFnZXIgPSBhd2FpdCB0aGlzLmdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIodGhpcy5ncm91cE5hbWUsIGlucHV0cywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ydW5NYW5hZ2VyLmdldENoaWxkKCk7XG4gICAgfVxuICAgIGFzeW5jIGVycm9yKGVycikge1xuICAgICAgICBpZiAodGhpcy5ydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1bk1hbmFnZXIuaGFuZGxlQ2hhaW5FcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGVuZChvdXRwdXQpIHtcbiAgICAgICAgaWYgKHRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5NYW5hZ2VyLmhhbmRsZUNoYWluRW5kKG91dHB1dCA/PyB7fSk7XG4gICAgICAgICAgICB0aGlzLnJ1bk1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJhY2VBc0dyb3VwKGdyb3VwT3B0aW9ucywgZW5jbG9zZWRDb2RlLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgdHJhY2VHcm91cCA9IG5ldyBUcmFjZUdyb3VwKGdyb3VwT3B0aW9ucy5uYW1lLCBncm91cE9wdGlvbnMpO1xuICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlciA9IGF3YWl0IHRyYWNlR3JvdXAuc3RhcnQoeyAuLi5hcmdzIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVuY2xvc2VkQ29kZShjYWxsYmFja01hbmFnZXIsIC4uLmFyZ3MpO1xuICAgICAgICBhd2FpdCB0cmFjZUdyb3VwLmVuZChfY29lcmNlVG9EaWN0KHJlc3VsdCwgXCJvdXRwdXRcIikpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGF3YWl0IHRyYWNlR3JvdXAuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ2NCIsInV1aWR2NCIsIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIiwiZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyIiwiZ2V0QnVmZmVyU3RyaW5nIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkxhbmdDaGFpblRyYWNlciIsImNvbnN1bWVDYWxsYmFjayIsImNvbnNvbGUiLCJ3YXJuIiwiam9pbiIsInBhcnNlQ2FsbGJhY2tDb25maWdBcmciLCJhcmciLCJBcnJheSIsImlzQXJyYXkiLCJjYWxsYmFja3MiLCJCYXNlQ2FsbGJhY2tNYW5hZ2VyIiwic2V0SGFuZGxlciIsImhhbmRsZXIiLCJzZXRIYW5kbGVycyIsIkJhc2VSdW5NYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJydW5JZCIsImhhbmRsZXJzIiwiaW5oZXJpdGFibGVIYW5kbGVycyIsInRhZ3MiLCJpbmhlcml0YWJsZVRhZ3MiLCJtZXRhZGF0YSIsImluaGVyaXRhYmxlTWV0YWRhdGEiLCJfcGFyZW50UnVuSWQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaGFuZGxlVGV4dCIsInRleHQiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiZXJyIiwiZXJyb3IiLCJuYW1lIiwiYXdhaXRIYW5kbGVycyIsIkNhbGxiYWNrTWFuYWdlckZvclJldHJpZXZlclJ1biIsImdldENoaWxkIiwidGFnIiwibWFuYWdlciIsIkNhbGxiYWNrTWFuYWdlciIsImFkZFRhZ3MiLCJhZGRNZXRhZGF0YSIsImhhbmRsZVJldHJpZXZlckVuZCIsImRvY3VtZW50cyIsImlnbm9yZVJldHJpZXZlciIsImhhbmRsZVJldHJpZXZlckVycm9yIiwiQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuIiwiaGFuZGxlTExNTmV3VG9rZW4iLCJ0b2tlbiIsImlkeCIsIl9ydW5JZCIsIl90YWdzIiwiZmllbGRzIiwiaWdub3JlTExNIiwicHJvbXB0IiwiY29tcGxldGlvbiIsImhhbmRsZUxMTUVycm9yIiwiaGFuZGxlTExNRW5kIiwib3V0cHV0IiwiQ2FsbGJhY2tNYW5hZ2VyRm9yQ2hhaW5SdW4iLCJoYW5kbGVDaGFpbkVycm9yIiwia3dhcmdzIiwiaWdub3JlQ2hhaW4iLCJoYW5kbGVDaGFpbkVuZCIsImhhbmRsZUFnZW50QWN0aW9uIiwiYWN0aW9uIiwiaWdub3JlQWdlbnQiLCJoYW5kbGVBZ2VudEVuZCIsIkNhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4iLCJoYW5kbGVUb29sRXJyb3IiLCJoYW5kbGVUb29sRW5kIiwicGFyZW50UnVuSWQiLCJvcHRpb25zIiwiZ2V0UGFyZW50UnVuSWQiLCJoYW5kbGVMTE1TdGFydCIsImxsbSIsInByb21wdHMiLCJ1bmRlZmluZWQiLCJleHRyYVBhcmFtcyIsIl9tZXRhZGF0YSIsInJ1bk5hbWUiLCJydW5JZF8iLCJoYW5kbGVDaGF0TW9kZWxTdGFydCIsIm1lc3NhZ2VzIiwibWVzc2FnZUdyb3VwIiwibWVzc2FnZVN0cmluZyIsImhhbmRsZUNoYWluU3RhcnQiLCJjaGFpbiIsImlucHV0cyIsInJ1blR5cGUiLCJoYW5kbGVUb29sU3RhcnQiLCJ0b29sIiwiaW5wdXQiLCJoYW5kbGVSZXRyaWV2ZXJTdGFydCIsInJldHJpZXZlciIsInF1ZXJ5IiwiYWRkSGFuZGxlciIsImluaGVyaXQiLCJwdXNoIiwicmVtb3ZlSGFuZGxlciIsImZpbHRlciIsIl9oYW5kbGVyIiwicmVtb3ZlVGFncyIsImluY2x1ZGVzIiwicmVtb3ZlTWV0YWRhdGEiLCJrZXkiLCJrZXlzIiwiY29weSIsImFkZGl0aW9uYWxIYW5kbGVycyIsImluaGVyaXRhYmxlIiwiaCIsInNvbWUiLCJmcm9tSGFuZGxlcnMiLCJIYW5kbGVyIiwiYXNzaWduIiwiY29uZmlndXJlIiwibG9jYWxIYW5kbGVycyIsImxvY2FsVGFncyIsImxvY2FsTWV0YWRhdGEiLCJjYWxsYmFja01hbmFnZXIiLCJlbnN1cmVIYW5kbGVyIiwidmVyYm9zZUVuYWJsZWQiLCJ2ZXJib3NlIiwidHJhY2luZ1YyRW5hYmxlZCIsInRyYWNpbmdFbmFibGVkIiwicHJvdG90eXBlIiwiY29uc29sZUhhbmRsZXIiLCJmcm9tTWV0aG9kcyIsIlRyYWNlR3JvdXAiLCJncm91cE5hbWUiLCJnZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyIiwiZ3JvdXBfbmFtZSIsImNiIiwiY20iLCJydW5NYW5hZ2VyIiwibGMiLCJ0eXBlIiwiaWQiLCJFcnJvciIsInN0YXJ0IiwiZW5kIiwiX2NvZXJjZVRvRGljdCIsImRlZmF1bHRLZXkiLCJ0cmFjZUFzR3JvdXAiLCJncm91cE9wdGlvbnMiLCJlbmNsb3NlZENvZGUiLCJhcmdzIiwidHJhY2VHcm91cCIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promise Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        await promiseFn();\n    } else {\n        if (typeof queue === \"undefined\") {\n            queue = createQueue();\n        }\n        void queue.add(promiseFn);\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUNoQyxJQUFJQztBQUNKOzs7O0NBSUMsR0FDRCxTQUFTQztJQUNMLE1BQU1DLFNBQVMsS0FBc0JILEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7SUFDckUsT0FBTyxJQUFJRyxPQUFPO1FBQ2RFLFdBQVc7UUFDWEMsYUFBYTtJQUNqQjtBQUNKO0FBQ0E7Ozs7Q0FJQyxHQUNNLGVBQWVDLGdCQUFnQkMsU0FBUyxFQUFFQyxJQUFJO0lBQ2pELElBQUlBLFNBQVMsTUFBTTtRQUNmLE1BQU1EO0lBQ1YsT0FDSztRQUNELElBQUksT0FBT1AsVUFBVSxhQUFhO1lBQzlCQSxRQUFRQztRQUNaO1FBQ0EsS0FBS0QsTUFBTVMsR0FBRyxDQUFDRjtJQUNuQjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sU0FBU0c7SUFDWixPQUFPLE9BQU9WLFVBQVUsY0FBY0EsTUFBTVcsTUFBTSxLQUFLQyxRQUFRQyxPQUFPO0FBQzFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzP2VjMzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBRdWV1ZU1vZCBmcm9tIFwicC1xdWV1ZVwiO1xubGV0IHF1ZXVlO1xuLyoqXG4gKiBDcmVhdGVzIGEgcXVldWUgdXNpbmcgdGhlIHAtcXVldWUgbGlicmFyeS4gVGhlIHF1ZXVlIGlzIGNvbmZpZ3VyZWQgdG9cbiAqIGF1dG8tc3RhcnQgYW5kIGhhcyBhIGNvbmN1cnJlbmN5IG9mIDEsIG1lYW5pbmcgaXQgd2lsbCBwcm9jZXNzIHRhc2tzXG4gKiBvbmUgYXQgYSB0aW1lLlxuICovXG5mdW5jdGlvbiBjcmVhdGVRdWV1ZSgpIHtcbiAgICBjb25zdCBQUXVldWUgPSBcImRlZmF1bHRcIiBpbiBQUXVldWVNb2QgPyBQUXVldWVNb2QuZGVmYXVsdCA6IFBRdWV1ZU1vZDtcbiAgICByZXR1cm4gbmV3IFBRdWV1ZSh7XG4gICAgICAgIGF1dG9TdGFydDogdHJ1ZSxcbiAgICAgICAgY29uY3VycmVuY3k6IDEsXG4gICAgfSk7XG59XG4vKipcbiAqIENvbnN1bWUgYSBwcm9taXNlLCBlaXRoZXIgYWRkaW5nIGl0IHRvIHRoZSBxdWV1ZSBvciB3YWl0aW5nIGZvciBpdCB0byByZXNvbHZlXG4gKiBAcGFyYW0gcHJvbWlzZSBQcm9taXNlIHRvIGNvbnN1bWVcbiAqIEBwYXJhbSB3YWl0IFdoZXRoZXIgdG8gd2FpdCBmb3IgdGhlIHByb21pc2UgdG8gcmVzb2x2ZSBvciByZXNvbHZlIGltbWVkaWF0ZWx5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25zdW1lQ2FsbGJhY2socHJvbWlzZUZuLCB3YWl0KSB7XG4gICAgaWYgKHdhaXQgPT09IHRydWUpIHtcbiAgICAgICAgYXdhaXQgcHJvbWlzZUZuKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIHF1ZXVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBxdWV1ZSA9IGNyZWF0ZVF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdm9pZCBxdWV1ZS5hZGQocHJvbWlzZUZuKTtcbiAgICB9XG59XG4vKipcbiAqIFdhaXRzIGZvciBhbGwgcHJvbWlzZXMgaW4gdGhlIHF1ZXVlIHRvIHJlc29sdmUuIElmIHRoZSBxdWV1ZSBpc1xuICogdW5kZWZpbmVkLCBpdCBpbW1lZGlhdGVseSByZXNvbHZlcyBhIHByb21pc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhd2FpdEFsbENhbGxiYWNrcygpIHtcbiAgICByZXR1cm4gdHlwZW9mIHF1ZXVlICE9PSBcInVuZGVmaW5lZFwiID8gcXVldWUub25JZGxlKCkgOiBQcm9taXNlLnJlc29sdmUoKTtcbn1cbiJdLCJuYW1lcyI6WyJQUXVldWVNb2QiLCJxdWV1ZSIsImNyZWF0ZVF1ZXVlIiwiUFF1ZXVlIiwiZGVmYXVsdCIsImF1dG9TdGFydCIsImNvbmN1cnJlbmN5IiwiY29uc3VtZUNhbGxiYWNrIiwicHJvbWlzZUZuIiwid2FpdCIsImFkZCIsImF3YWl0QWxsQ2FsbGJhY2tzIiwib25JZGxlIiwiUHJvbWlzZSIsInJlc29sdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/document.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/document.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n/**\n * Interface for interacting with a document.\n */ class Document {\n    constructor(fields){\n        Object.defineProperty(this, \"pageContent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pageContent = fields.pageContent ? fields.pageContent.toString() : this.pageContent;\n        this.metadata = fields.metadata ?? {};\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Q0FFQyxHQUNNLE1BQU1BO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFdBQVcsR0FBR1AsT0FBT08sV0FBVyxHQUMvQlAsT0FBT08sV0FBVyxDQUFDQyxRQUFRLEtBQzNCLElBQUksQ0FBQ0QsV0FBVztRQUN0QixJQUFJLENBQUNFLFFBQVEsR0FBR1QsT0FBT1MsUUFBUSxJQUFJLENBQUM7SUFDeEM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy9kb2N1bWVudC5qcz9iNGZhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZXJmYWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhZ2VDb250ZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGFnZUNvbnRlbnQgPSBmaWVsZHMucGFnZUNvbnRlbnRcbiAgICAgICAgICAgID8gZmllbGRzLnBhZ2VDb250ZW50LnRvU3RyaW5nKClcbiAgICAgICAgICAgIDogdGhpcy5wYWdlQ29udGVudDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IGZpZWxkcy5tZXRhZGF0YSA/PyB7fTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRG9jdW1lbnQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJwYWdlQ29udGVudCIsInRvU3RyaW5nIiwibWV0YWRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThCO0FBQ0kiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvaW5kZXguanM/MjYyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9kb2N1bWVudC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHJhbnNmb3JtZXJzLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/transformers.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* binding */ BaseDocumentTransformer),\n/* harmony export */   MappingDocumentTransformer: () => (/* binding */ MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n/**\n * Abstract base class for document transformation systems.\n *\n * A document transformation system takes an array of Documents and returns an\n * array of transformed Documents. These arrays do not necessarily have to have\n * the same length.\n *\n * One example of this is a text splitter that splits a large document into\n * many smaller documents.\n */ class BaseDocumentTransformer extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"documents\",\n                \"transformers\"\n            ]\n        });\n    }\n    /**\n     * Method to invoke the document transformation. This method calls the\n     * transformDocuments method with the provided input.\n     * @param input The input documents to be transformed.\n     * @param _options Optional configuration object to customize the behavior of callbacks.\n     * @returns A Promise that resolves to the transformed documents.\n     */ invoke(input, _options) {\n        return this.transformDocuments(input);\n    }\n}\n/**\n * Class for document transformers that return exactly one transformed document\n * for each input document.\n */ class MappingDocumentTransformer extends BaseDocumentTransformer {\n    async transformDocuments(documents) {\n        const newDocuments = [];\n        for (const document of documents){\n            const transformedDocument = await this._transformDocument(document);\n            newDocuments.push(transformedDocument);\n        }\n        return newDocuments;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0Q7QUFDaEQ7Ozs7Ozs7OztDQVNDLEdBQ00sTUFBTUMsZ0NBQWdDRCx3REFBUUE7SUFDakRFLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBYTthQUFlO1FBQzFEO0lBQ0o7SUFDQTs7Ozs7O0tBTUMsR0FDREMsT0FBT0MsS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDcEIsT0FBTyxJQUFJLENBQUNDLGtCQUFrQixDQUFDRjtJQUNuQztBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcsbUNBQW1DYjtJQUM1QyxNQUFNWSxtQkFBbUJFLFNBQVMsRUFBRTtRQUNoQyxNQUFNQyxlQUFlLEVBQUU7UUFDdkIsS0FBSyxNQUFNQyxZQUFZRixVQUFXO1lBQzlCLE1BQU1HLHNCQUFzQixNQUFNLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNGO1lBQzFERCxhQUFhSSxJQUFJLENBQUNGO1FBQ3RCO1FBQ0EsT0FBT0Y7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcz81MDAzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGRvY3VtZW50IHRyYW5zZm9ybWF0aW9uIHN5c3RlbXMuXG4gKlxuICogQSBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbiBzeXN0ZW0gdGFrZXMgYW4gYXJyYXkgb2YgRG9jdW1lbnRzIGFuZCByZXR1cm5zIGFuXG4gKiBhcnJheSBvZiB0cmFuc2Zvcm1lZCBEb2N1bWVudHMuIFRoZXNlIGFycmF5cyBkbyBub3QgbmVjZXNzYXJpbHkgaGF2ZSB0byBoYXZlXG4gKiB0aGUgc2FtZSBsZW5ndGguXG4gKlxuICogT25lIGV4YW1wbGUgb2YgdGhpcyBpcyBhIHRleHQgc3BsaXR0ZXIgdGhhdCBzcGxpdHMgYSBsYXJnZSBkb2N1bWVudCBpbnRvXG4gKiBtYW55IHNtYWxsZXIgZG9jdW1lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZURvY3VtZW50VHJhbnNmb3JtZXIgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJkb2N1bWVudHNcIiwgXCJ0cmFuc2Zvcm1lcnNcIl1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBpbnZva2UgdGhlIGRvY3VtZW50IHRyYW5zZm9ybWF0aW9uLiBUaGlzIG1ldGhvZCBjYWxscyB0aGVcbiAgICAgKiB0cmFuc2Zvcm1Eb2N1bWVudHMgbWV0aG9kIHdpdGggdGhlIHByb3ZpZGVkIGlucHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZG9jdW1lbnRzIHRvIGJlIHRyYW5zZm9ybWVkLlxuICAgICAqIEBwYXJhbSBfb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdCB0byBjdXN0b21pemUgdGhlIGJlaGF2aW9yIG9mIGNhbGxiYWNrcy5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgdHJhbnNmb3JtZWQgZG9jdW1lbnRzLlxuICAgICAqL1xuICAgIGludm9rZShpbnB1dCwgX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRG9jdW1lbnRzKGlucHV0KTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIGZvciBkb2N1bWVudCB0cmFuc2Zvcm1lcnMgdGhhdCByZXR1cm4gZXhhY3RseSBvbmUgdHJhbnNmb3JtZWQgZG9jdW1lbnRcbiAqIGZvciBlYWNoIGlucHV0IGRvY3VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgTWFwcGluZ0RvY3VtZW50VHJhbnNmb3JtZXIgZXh0ZW5kcyBCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciB7XG4gICAgYXN5bmMgdHJhbnNmb3JtRG9jdW1lbnRzKGRvY3VtZW50cykge1xuICAgICAgICBjb25zdCBuZXdEb2N1bWVudHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBkb2N1bWVudCBvZiBkb2N1bWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRG9jdW1lbnQgPSBhd2FpdCB0aGlzLl90cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCk7XG4gICAgICAgICAgICBuZXdEb2N1bWVudHMucHVzaCh0cmFuc2Zvcm1lZERvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3RG9jdW1lbnRzO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSdW5uYWJsZSIsIkJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaW52b2tlIiwiaW5wdXQiLCJfb3B0aW9ucyIsInRyYW5zZm9ybURvY3VtZW50cyIsIk1hcHBpbmdEb2N1bWVudFRyYW5zZm9ybWVyIiwiZG9jdW1lbnRzIiwibmV3RG9jdW1lbnRzIiwiZG9jdW1lbnQiLCJ0cmFuc2Zvcm1lZERvY3VtZW50IiwiX3RyYW5zZm9ybURvY3VtZW50IiwicHVzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/embeddings.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/embeddings.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* binding */ Embeddings)\n/* harmony export */ });\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n/**\n * An abstract class that provides methods for embedding documents and\n * queries using LangChain.\n */ class Embeddings {\n    constructor(params){\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller(params ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZW1iZWRkaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzRDtBQUN0RDs7O0NBR0MsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEI7OztTQUdDLEdBQ0RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSVYsK0RBQVdBLENBQUNHLFVBQVUsQ0FBQztJQUM3QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZW1iZWRkaW5ncy5qcz9lMTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4vdXRpbHMvYXN5bmNfY2FsbGVyLmpzXCI7XG4vKipcbiAqIEFuIGFic3RyYWN0IGNsYXNzIHRoYXQgcHJvdmlkZXMgbWV0aG9kcyBmb3IgZW1iZWRkaW5nIGRvY3VtZW50cyBhbmRcbiAqIHF1ZXJpZXMgdXNpbmcgTGFuZ0NoYWluLlxuICovXG5leHBvcnQgY2xhc3MgRW1iZWRkaW5ncyB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYXN5bmMgY2FsbGVyIHNob3VsZCBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gbWFrZSBhbnkgYXN5bmMgY2FsbHMsXG4gICAgICAgICAqIHdoaWNoIHdpbGwgdGh1cyBiZW5lZml0IGZyb20gdGhlIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNhbGxlciA9IG5ldyBBc3luY0NhbGxlcihwYXJhbXMgPz8ge30pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJBc3luY0NhbGxlciIsIkVtYmVkZGluZ3MiLCJjb25zdHJ1Y3RvciIsInBhcmFtcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJjYWxsZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/base.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/base.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* binding */ BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* binding */ BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* binding */ calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* binding */ getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* binding */ getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* binding */ getModelNameForTiktoken)\n/* harmony export */ });\n/* harmony import */ var _caches_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../caches.js */ \"(rsc)/./node_modules/@langchain/core/dist/caches.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n\n// https://www.npmjs.com/package/js-tiktoken\nconst getModelNameForTiktoken = (modelName)=>{\n    if (modelName.startsWith(\"gpt-3.5-turbo-16k\")) {\n        return \"gpt-3.5-turbo-16k\";\n    }\n    if (modelName.startsWith(\"gpt-3.5-turbo-\")) {\n        return \"gpt-3.5-turbo\";\n    }\n    if (modelName.startsWith(\"gpt-4-32k\")) {\n        return \"gpt-4-32k\";\n    }\n    if (modelName.startsWith(\"gpt-4-\")) {\n        return \"gpt-4\";\n    }\n    if (modelName.startsWith(\"gpt-4o\")) {\n        return \"gpt-4o\";\n    }\n    return modelName;\n};\nconst getEmbeddingContextSize = (modelName)=>{\n    switch(modelName){\n        case \"text-embedding-ada-002\":\n            return 8191;\n        default:\n            return 2046;\n    }\n};\nconst getModelContextSize = (modelName)=>{\n    switch(getModelNameForTiktoken(modelName)){\n        case \"gpt-3.5-turbo-16k\":\n            return 16384;\n        case \"gpt-3.5-turbo\":\n            return 4096;\n        case \"gpt-4-32k\":\n            return 32768;\n        case \"gpt-4\":\n            return 8192;\n        case \"text-davinci-003\":\n            return 4097;\n        case \"text-curie-001\":\n            return 2048;\n        case \"text-babbage-001\":\n            return 2048;\n        case \"text-ada-001\":\n            return 2048;\n        case \"code-davinci-002\":\n            return 8000;\n        case \"code-cushman-001\":\n            return 2048;\n        default:\n            return 4097;\n    }\n};\nconst calculateMaxTokens = async ({ prompt, modelName })=>{\n    let numTokens;\n    try {\n        numTokens = (await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(getModelNameForTiktoken(modelName))).encode(prompt).length;\n    } catch (error) {\n        console.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n        // fallback to approximate calculation if tiktoken is not available\n        // each token is ~4 characters: https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them#\n        numTokens = Math.ceil(prompt.length / 4);\n    }\n    const maxTokens = getModelContextSize(modelName);\n    return maxTokens - numTokens;\n};\nconst getVerbosity = ()=>false;\n/**\n * Base class for language models, chains, tools.\n */ class BaseLangChain extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.Runnable {\n    get lc_attributes() {\n        return {\n            callbacks: undefined,\n            verbose: undefined\n        };\n    }\n    constructor(params){\n        super(params);\n        /**\n         * Whether to print out response text.\n         */ Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.verbose = params.verbose ?? getVerbosity();\n        this.callbacks = params.callbacks;\n        this.tags = params.tags ?? [];\n        this.metadata = params.metadata ?? {};\n    }\n}\n/**\n * Base class for language models.\n */ class BaseLanguageModel extends BaseLangChain {\n    /**\n     * Keys that the language model accepts as call options.\n     */ get callKeys() {\n        return [\n            \"stop\",\n            \"timeout\",\n            \"signal\",\n            \"tags\",\n            \"metadata\",\n            \"callbacks\"\n        ];\n    }\n    constructor({ callbacks, callbackManager, ...params }){\n        super({\n            callbacks: callbacks ?? callbackManager,\n            ...params\n        });\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof params.cache === \"object\") {\n            this.cache = params.cache;\n        } else if (params.cache) {\n            this.cache = _caches_js__WEBPACK_IMPORTED_MODULE_0__.InMemoryCache.global();\n        } else {\n            this.cache = undefined;\n        }\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(params ?? {});\n    }\n    async getNumTokens(content) {\n        // TODO: Figure out correct value.\n        if (typeof content !== \"string\") {\n            return 0;\n        }\n        // fallback to approximate calculation if tiktoken is not available\n        let numTokens = Math.ceil(content.length / 4);\n        if (!this._encoding) {\n            try {\n                this._encoding = await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(\"modelName\" in this ? getModelNameForTiktoken(this.modelName) : \"gpt2\");\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        if (this._encoding) {\n            try {\n                numTokens = this._encoding.encode(content).length;\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        return numTokens;\n    }\n    static _convertInputToPromptValue(input) {\n        if (typeof input === \"string\") {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.StringPromptValue(input);\n        } else if (Array.isArray(input)) {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(input.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage));\n        } else {\n            return input;\n        }\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * Create a unique cache key for a specific call to a specific language model.\n     * @param callOptions Call options for the model\n     * @returns A unique cache key.\n     */ _getSerializedCacheKeyParametersForCall(// TODO: Fix when we remove the RunnableLambda backwards compatibility shim.\n    { config, ...callOptions }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const params = {\n            ...this._identifyingParams(),\n            ...callOptions,\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n        const filteredEntries = Object.entries(params).filter(([_, value])=>value !== undefined);\n        const serializedEntries = filteredEntries.map(([key, value])=>`${key}:${JSON.stringify(value)}`).sort().join(\",\");\n        return serializedEntries;\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * @deprecated\n     * Load an LLM from a json-like object describing it.\n     */ static async deserialize(_data) {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDO0FBQzZCO0FBQ1A7QUFDWjtBQUNDO0FBQ1I7QUFDaEQsNENBQTRDO0FBQ3JDLE1BQU1PLDBCQUEwQixDQUFDQztJQUNwQyxJQUFJQSxVQUFVQyxVQUFVLENBQUMsc0JBQXNCO1FBQzNDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxtQkFBbUI7UUFDeEMsT0FBTztJQUNYO0lBQ0EsSUFBSUQsVUFBVUMsVUFBVSxDQUFDLGNBQWM7UUFDbkMsT0FBTztJQUNYO0lBQ0EsSUFBSUQsVUFBVUMsVUFBVSxDQUFDLFdBQVc7UUFDaEMsT0FBTztJQUNYO0lBQ0EsSUFBSUQsVUFBVUMsVUFBVSxDQUFDLFdBQVc7UUFDaEMsT0FBTztJQUNYO0lBQ0EsT0FBT0Q7QUFDWCxFQUFFO0FBQ0ssTUFBTUUsMEJBQTBCLENBQUNGO0lBQ3BDLE9BQVFBO1FBQ0osS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKLEVBQUU7QUFDSyxNQUFNRyxzQkFBc0IsQ0FBQ0g7SUFDaEMsT0FBUUQsd0JBQXdCQztRQUM1QixLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYO1lBQ0ksT0FBTztJQUNmO0FBQ0osRUFBRTtBQUNLLE1BQU1JLHFCQUFxQixPQUFPLEVBQUVDLE1BQU0sRUFBRUwsU0FBUyxFQUFHO0lBQzNELElBQUlNO0lBQ0osSUFBSTtRQUNBQSxZQUFZLENBQUMs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RTtZQUM1QixHQUFHRyxXQUFXO1lBQ2RDLE9BQU8sSUFBSSxDQUFDQyxRQUFRO1lBQ3BCQyxRQUFRLElBQUksQ0FBQ0MsVUFBVTtRQUMzQjtRQUNBLE1BQU1DLGtCQUFrQjlCLE9BQU8rQixPQUFPLENBQUNoQyxRQUFRaUMsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsR0FBRzVCLE1BQU0sR0FBS0EsVUFBVVQ7UUFDaEYsTUFBTXNDLG9CQUFvQkosZ0JBQ3JCVCxHQUFHLENBQUMsQ0FBQyxDQUFDYyxLQUFLOUIsTUFBTSxHQUFLLENBQUMsRUFBRThCLElBQUksQ0FBQyxFQUFFQyxLQUFLQyxTQUFTLENBQUNoQyxPQUFPLENBQUMsRUFDdkRpQyxJQUFJLEdBQ0pDLElBQUksQ0FBQztRQUNWLE9BQU9MO0lBQ1g7SUFDQTs7O0tBR0MsR0FDRE0sWUFBWTtRQUNSLE9BQU87WUFDSCxHQUFHLElBQUksQ0FBQ2xCLGtCQUFrQixFQUFFO1lBQzVCSSxPQUFPLElBQUksQ0FBQ0MsUUFBUTtZQUNwQkMsUUFBUSxJQUFJLENBQUNDLFVBQVU7UUFDM0I7SUFDSjtJQUNBOzs7S0FHQyxHQUNELGFBQWFZLFlBQVlDLEtBQUssRUFBRTtRQUM1QixNQUFNLElBQUlDLE1BQU07SUFDcEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9iYXNlLmpzPzliZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCIuLi9jYWNoZXMuanNcIjtcbmltcG9ydCB7IFN0cmluZ1Byb21wdFZhbHVlLCBDaGF0UHJvbXB0VmFsdWUsIH0gZnJvbSBcIi4uL3Byb21wdF92YWx1ZXMuanNcIjtcbmltcG9ydCB7IGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlLCB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vdXRpbHMvYXN5bmNfY2FsbGVyLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGluZ0Zvck1vZGVsIH0gZnJvbSBcIi4uL3V0aWxzL3Rpa3Rva2VuLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvanMtdGlrdG9rZW5cbmV4cG9ydCBjb25zdCBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbiA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtMy41LXR1cmJvLTE2a1wiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtMy41LXR1cmJvLTE2a1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtMy41LXR1cmJvLVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtMy41LXR1cmJvXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LTMya1wiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNC0zMmtcIjtcbiAgICB9XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTQtXCIpKSB7XG4gICAgICAgIHJldHVybiBcImdwdC00XCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00b1wiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNG9cIjtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGVsTmFtZTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RW1iZWRkaW5nQ29udGV4dFNpemUgPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgc3dpdGNoIChtb2RlbE5hbWUpIHtcbiAgICAgICAgY2FzZSBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIjpcbiAgICAgICAgICAgIHJldHVybiA4MTkxO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDIwNDY7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBnZXRNb2RlbENvbnRleHRTaXplID0gKG1vZGVsTmFtZSkgPT4ge1xuICAgIHN3aXRjaCAoZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4obW9kZWxOYW1lKSkge1xuICAgICAgICBjYXNlIFwiZ3B0LTMuNS10dXJiby0xNmtcIjpcbiAgICAgICAgICAgIHJldHVybiAxNjM4NDtcbiAgICAgICAgY2FzZSBcImdwdC0zLjUtdHVyYm9cIjpcbiAgICAgICAgICAgIHJldHVybiA0MDk2O1xuICAgICAgICBjYXNlIFwiZ3B0LTQtMzJrXCI6XG4gICAgICAgICAgICByZXR1cm4gMzI3Njg7XG4gICAgICAgIGNhc2UgXCJncHQtNFwiOlxuICAgICAgICAgICAgcmV0dXJuIDgxOTI7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWRhdmluY2ktMDAzXCI6XG4gICAgICAgICAgICByZXR1cm4gNDA5NztcbiAgICAgICAgY2FzZSBcInRleHQtY3VyaWUtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcInRleHQtYmFiYmFnZS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwidGV4dC1hZGEtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcImNvZGUtZGF2aW5jaS0wMDJcIjpcbiAgICAgICAgICAgIHJldHVybiA4MDAwO1xuICAgICAgICBjYXNlIFwiY29kZS1jdXNobWFuLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gNDA5NztcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGNhbGN1bGF0ZU1heFRva2VucyA9IGFzeW5jICh7IHByb21wdCwgbW9kZWxOYW1lLCB9KSA9PiB7XG4gICAgbGV0IG51bVRva2VucztcbiAgICB0cnkge1xuICAgICAgICBudW1Ub2tlbnMgPSAoYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbihtb2RlbE5hbWUpKSkuZW5jb2RlKHByb21wdCkubGVuZ3RoO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zLCBmYWxsaW5nIGJhY2sgdG8gYXBwcm94aW1hdGUgY291bnRcIik7XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgLy8gZWFjaCB0b2tlbiBpcyB+NCBjaGFyYWN0ZXJzOiBodHRwczovL2hlbHAub3BlbmFpLmNvbS9lbi9hcnRpY2xlcy80OTM2ODU2LXdoYXQtYXJlLXRva2Vucy1hbmQtaG93LXRvLWNvdW50LXRoZW0jXG4gICAgICAgIG51bVRva2VucyA9IE1hdGguY2VpbChwcm9tcHQubGVuZ3RoIC8gNCk7XG4gICAgfVxuICAgIGNvbnN0IG1heFRva2VucyA9IGdldE1vZGVsQ29udGV4dFNpemUobW9kZWxOYW1lKTtcbiAgICByZXR1cm4gbWF4VG9rZW5zIC0gbnVtVG9rZW5zO1xufTtcbmNvbnN0IGdldFZlcmJvc2l0eSA9ICgpID0+IGZhbHNlO1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBsYW5ndWFnZSBtb2RlbHMsIGNoYWlucywgdG9vbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTGFuZ0NoYWluIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGdldCBsY19hdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FsbGJhY2tzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2ZXJib3NlOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBzdXBlcihwYXJhbXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0byBwcmludCBvdXQgcmVzcG9uc2UgdGV4dC5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcmJvc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGJhY2tzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52ZXJib3NlID0gcGFyYW1zLnZlcmJvc2UgPz8gZ2V0VmVyYm9zaXR5KCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gcGFyYW1zLmNhbGxiYWNrcztcbiAgICAgICAgdGhpcy50YWdzID0gcGFyYW1zLnRhZ3MgPz8gW107XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBwYXJhbXMubWV0YWRhdGEgPz8ge307XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBsYW5ndWFnZSBtb2RlbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTGFuZ3VhZ2VNb2RlbCBleHRlbmRzIEJhc2VMYW5nQ2hhaW4ge1xuICAgIC8qKlxuICAgICAqIEtleXMgdGhhdCB0aGUgbGFuZ3VhZ2UgbW9kZWwgYWNjZXB0cyBhcyBjYWxsIG9wdGlvbnMuXG4gICAgICovXG4gICAgZ2V0IGNhbGxLZXlzKCkge1xuICAgICAgICByZXR1cm4gW1wic3RvcFwiLCBcInRpbWVvdXRcIiwgXCJzaWduYWxcIiwgXCJ0YWdzXCIsIFwibWV0YWRhdGFcIiwgXCJjYWxsYmFja3NcIl07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsgY2FsbGJhY2tzLCBjYWxsYmFja01hbmFnZXIsIC4uLnBhcmFtcyB9KSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIGNhbGxiYWNrczogY2FsbGJhY2tzID8/IGNhbGxiYWNrTWFuYWdlcixcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYXN5bmMgY2FsbGVyIHNob3VsZCBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gbWFrZSBhbnkgYXN5bmMgY2FsbHMsXG4gICAgICAgICAqIHdoaWNoIHdpbGwgdGh1cyBiZW5lZml0IGZyb20gdGhlIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWNoZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfZW5jb2RpbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMuY2FjaGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBwYXJhbXMuY2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1zLmNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gSW5NZW1vcnlDYWNoZS5nbG9iYWwoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIocGFyYW1zID8/IHt9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TnVtVG9rZW5zKGNvbnRlbnQpIHtcbiAgICAgICAgLy8gVE9ETzogRmlndXJlIG91dCBjb3JyZWN0IHZhbHVlLlxuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgbGV0IG51bVRva2VucyA9IE1hdGguY2VpbChjb250ZW50Lmxlbmd0aCAvIDQpO1xuICAgICAgICBpZiAoIXRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VuY29kaW5nID0gYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChcIm1vZGVsTmFtZVwiIGluIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgPyBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbih0aGlzLm1vZGVsTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgOiBcImdwdDJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG51bVRva2VucyA9IHRoaXMuX2VuY29kaW5nLmVuY29kZShjb250ZW50KS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bVRva2VucztcbiAgICB9XG4gICAgc3RhdGljIF9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nUHJvbXB0VmFsdWUoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXRQcm9tcHRWYWx1ZShpbnB1dC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlkZW50aWZ5aW5nIHBhcmFtZXRlcnMgb2YgdGhlIExMTS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSB1bmlxdWUgY2FjaGUga2V5IGZvciBhIHNwZWNpZmljIGNhbGwgdG8gYSBzcGVjaWZpYyBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gY2FsbE9wdGlvbnMgQ2FsbCBvcHRpb25zIGZvciB0aGUgbW9kZWxcbiAgICAgKiBAcmV0dXJucyBBIHVuaXF1ZSBjYWNoZSBrZXkuXG4gICAgICovXG4gICAgX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsKFxuICAgIC8vIFRPRE86IEZpeCB3aGVuIHdlIHJlbW92ZSB0aGUgUnVubmFibGVMYW1iZGEgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgc2hpbS5cbiAgICB7IGNvbmZpZywgLi4uY2FsbE9wdGlvbnMgfSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgLi4uY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkRW50cmllcyA9IGZpbHRlcmVkRW50cmllc1xuICAgICAgICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9OiR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApXG4gICAgICAgICAgICAuc29ydCgpXG4gICAgICAgICAgICAuam9pbihcIixcIik7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVkRW50cmllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgX3R5cGU6IHRoaXMuX2xsbVR5cGUoKSxcbiAgICAgICAgICAgIF9tb2RlbDogdGhpcy5fbW9kZWxUeXBlKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogTG9hZCBhbiBMTE0gZnJvbSBhIGpzb24tbGlrZSBvYmplY3QgZGVzY3JpYmluZyBpdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoX2RhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlIC50b0pTT04oKSBpbnN0ZWFkXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJJbk1lbW9yeUNhY2hlIiwiU3RyaW5nUHJvbXB0VmFsdWUiLCJDaGF0UHJvbXB0VmFsdWUiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsIkFzeW5jQ2FsbGVyIiwiZW5jb2RpbmdGb3JNb2RlbCIsIlJ1bm5hYmxlIiwiZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4iLCJtb2RlbE5hbWUiLCJzdGFydHNXaXRoIiwiZ2V0RW1iZWRkaW5nQ29udGV4dFNpemUiLCJnZXRNb2RlbENvbnRleHRTaXplIiwiY2FsY3VsYXRlTWF4VG9rZW5zIiwicHJvbXB0IiwibnVtVG9rZW5zIiwiZW5jb2RlIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIk1hdGgiLCJjZWlsIiwibWF4VG9rZW5zIiwiZ2V0VmVyYm9zaXR5IiwiQmFzZUxhbmdDaGFpbiIsImxjX2F0dHJpYnV0ZXMiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJ2ZXJib3NlIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFncyIsIm1ldGFkYXRhIiwiQmFzZUxhbmd1YWdlTW9kZWwiLCJjYWxsS2V5cyIsImNhbGxiYWNrTWFuYWdlciIsImNhY2hlIiwiZ2xvYmFsIiwiY2FsbGVyIiwiZ2V0TnVtVG9rZW5zIiwiY29udGVudCIsIl9lbmNvZGluZyIsIl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlIiwiaW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJfaWRlbnRpZnlpbmdQYXJhbXMiLCJfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwiLCJjb25maWciLCJjYWxsT3B0aW9ucyIsIl90eXBlIiwiX2xsbVR5cGUiLCJfbW9kZWwiLCJfbW9kZWxUeXBlIiwiZmlsdGVyZWRFbnRyaWVzIiwiZW50cmllcyIsImZpbHRlciIsIl8iLCJzZXJpYWxpemVkRW50cmllcyIsImtleSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3J0Iiwiam9pbiIsInNlcmlhbGl6ZSIsImRlc2VyaWFsaXplIiwiX2RhdGEiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/chat_models.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* binding */ BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* binding */ SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* binding */ createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n\n\n\n\n/**\n * Creates a transform stream for encoding chat message chunks.\n * @deprecated Use {@link BytesOutputParser} instead\n * @returns A TransformStream instance that encodes chat message chunks.\n */ function createChatMessageChunkEncoderStream() {\n    const textEncoder = new TextEncoder();\n    return new TransformStream({\n        transform (chunk, controller) {\n            controller.enqueue(textEncoder.encode(typeof chunk.content === \"string\" ? chunk.content : JSON.stringify(chunk.content)));\n        }\n    });\n}\n/**\n * Base class for chat models. It extends the BaseLanguageModel class and\n * provides methods for generating chat based on input messages.\n */ class BaseChatModel extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLanguageModel {\n    constructor(fields){\n        super(fields);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"chat_models\",\n                this._llmType()\n            ]\n        });\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        if (callOptions?.timeout && !callOptions.signal) {\n            callOptions.signal = AbortSignal.timeout(callOptions.timeout);\n        }\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    /**\n     * Invokes the chat model with a single input.\n     * @param input The input for the language model.\n     * @param options The call options.\n     * @returns A Promise that resolves to a BaseMessageChunk.\n     */ async invoke(input, options) {\n        const promptValue = BaseChatModel._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([\n            promptValue\n        ], options, options?.callbacks);\n        const chatGeneration = result.generations[0][0];\n        // TODO: Remove cast after figuring out inheritance\n        return chatGeneration.message;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_messages, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseChatModel.prototype._streamResponseChunks) {\n            yield this.invoke(input, options);\n        } else {\n            const prompt = BaseChatModel._convertInputToPromptValue(input);\n            const messages = prompt.toChatMessages();\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(options);\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1\n            };\n            const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [\n                messages\n            ], runnableConfig.runId, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generationChunk;\n            try {\n                for await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])){\n                    chunk.message.response_metadata = {\n                        ...chunk.generationInfo,\n                        ...chunk.message.response_metadata\n                    };\n                    yield chunk.message;\n                    if (!generationChunk) {\n                        generationChunk = chunk;\n                    } else {\n                        generationChunk = generationChunk.concat(chunk);\n                    }\n                }\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({\n                    // TODO: Remove cast after figuring out inheritance\n                    generations: [\n                        [\n                            generationChunk\n                        ]\n                    ]\n                })));\n        }\n    }\n    /** @ignore */ async _generateUncached(messages, parsedOptions, handledOptions) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const results = await Promise.allSettled(baseMessages.map((messageList, i)=>this._generate(messageList, {\n                ...parsedOptions,\n                promptIndex: i\n            }, runManagers?.[i])));\n        // handle results\n        const generations = [];\n        const llmOutputs = [];\n        await Promise.all(results.map(async (pResult, i)=>{\n            if (pResult.status === \"fulfilled\") {\n                const result = pResult.value;\n                for (const generation of result.generations){\n                    generation.message.response_metadata = {\n                        ...generation.generationInfo,\n                        ...generation.message.response_metadata\n                    };\n                }\n                if (result.generations.length === 1) {\n                    result.generations[0].message.response_metadata = {\n                        ...result.llmOutput,\n                        ...result.generations[0].message.response_metadata\n                    };\n                }\n                generations[i] = result.generations;\n                llmOutputs[i] = result.llmOutput;\n                return runManagers?.[i]?.handleLLMEnd({\n                    generations: [\n                        result.generations\n                    ],\n                    llmOutput: result.llmOutput\n                });\n            } else {\n                // status === \"rejected\"\n                await runManagers?.[i]?.handleLLMError(pResult.reason);\n                return Promise.reject(pResult.reason);\n            }\n        }));\n        // create combined output\n        const output = {\n            generations,\n            llmOutput: llmOutputs.length ? this._combineLLMOutput?.(...llmOutputs) : undefined\n        };\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    async _generateCached({ messages, cache, llmStringKey, parsedOptions, handledOptions }) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1,\n            cached: true\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(baseMessages.map(async (baseMessage, index)=>{\n            // Join all content into one string for the prompt index\n            const prompt = BaseChatModel._convertInputToPromptValue(baseMessage).toString();\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results.map((result, index)=>({\n                result,\n                runManager: runManagers?.[index]\n            })).filter(({ result })=>result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i)=>{\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result;\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [\n                        result\n                    ]\n                });\n            } else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason);\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    /**\n     * Generates chat based on the input messages.\n     * @param messages An array of arrays of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generate(messages, options, callbacks) {\n        // parse call options\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = {\n                stop: options\n            };\n        } else {\n            parsedOptions = options;\n        }\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(baseMessages, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices } = await this._generateCached({\n            messages: baseMessages,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i)=>baseMessages[i]), callOptions, runnableConfig);\n            await Promise.all(results.generations.map(async (generation, index)=>{\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                // Join all content into one string for the prompt index\n                const prompt = BaseChatModel._convertInputToPromptValue(baseMessages[promptIndex]).toString();\n                return cache.update(prompt, llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return {\n            generations,\n            llmOutput\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _modelType() {\n        return \"base_chat_model\";\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this.invocationParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * Generates a prompt based on the input prompt values.\n     * @param promptValues An array of BasePromptValue instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generatePrompt(promptValues, options, callbacks) {\n        const promptMessages = promptValues.map((promptValue)=>promptValue.toChatMessages());\n        return this.generate(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async call(messages, options, callbacks) {\n        const result = await this.generate([\n            messages.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)\n        ], options, callbacks);\n        const generations = result.generations;\n        return generations[0][0].message;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model with a prompt value.\n     * @param promptValue The value of the prompt.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async callPrompt(promptValue, options, callbacks) {\n        const promptMessages = promptValue.toChatMessages();\n        return this.call(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on the input messages.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async predictMessages(messages, options, callbacks) {\n        return this.call(messages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on a text input.\n     * @param text The text input.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a string.\n     */ async predict(text, options, callbacks) {\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(text);\n        const result = await this.call([\n            message\n        ], options, callbacks);\n        if (typeof result.content !== \"string\") {\n            throw new Error(\"Cannot use predict when output is not a string.\");\n        }\n        return result.content;\n    }\n}\n/**\n * An abstract class that extends BaseChatModel and provides a simple\n * implementation of _generate.\n */ class SimpleChatModel extends BaseChatModel {\n    async _generate(messages, options, runManager) {\n        const text = await this._call(messages, options, runManager);\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(text);\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Cannot generate with a simple chat model when output is not a string.\");\n        }\n        return {\n            generations: [\n                {\n                    text: message.content,\n                    message\n                }\n            ]\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEY7QUFDbkQ7QUFDTTtBQUNZO0FBQzNEOzs7O0NBSUMsR0FDTSxTQUFTTTtJQUNaLE1BQU1DLGNBQWMsSUFBSUM7SUFDeEIsT0FBTyxJQUFJQyxnQkFBZ0I7UUFDdkJDLFdBQVVDLEtBQUssRUFBRUMsVUFBVTtZQUN2QkEsV0FBV0MsT0FBTyxDQUFDTixZQUFZTyxNQUFNLENBQUMsT0FBT0gsTUFBTUksT0FBTyxLQUFLLFdBQ3pESixNQUFNSSxPQUFPLEdBQ2JDLEtBQUtDLFNBQVMsQ0FBQ04sTUFBTUksT0FBTztRQUN0QztJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNRyxzQkFBc0JkLHVEQUFpQkE7SUFDaERlLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ04sMkNBQTJDO1FBQzNDQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBZSxJQUFJLENBQUNDLFFBQVE7YUFBRztRQUN4RDtJQUNKO0lBQ0FDLHVDQUF1Q0MsT0FBTyxFQUFFO1FBQzVDLE1BQU0sQ0FBQ0MsZ0JBQWdCQyxZQUFZLEdBQUcsS0FBSyxDQUFDSCx1Q0FBdUNDO1FBQ25GLElBQUlFLGFBQWFDLFdBQVcsQ0FBQ0QsWUFBWUUsTUFBTSxFQUFFO1lBQzdDRixZQUFZRSxNQUFNLEdBQUdDLFlBQVlGLE9BQU8sQ0FBQ0QsWUFBWUMsT0FBTztRQUNoRTtRQUNBLE9BQU87WUFBQ0Y7WUFBZ0JDO1NBQVk7SUFDeEM7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1JLE9BQU9DLEtBQUssRUFBRVAsT0FBTyxFQUFFO1FBQ3pCLE1BQU1RLGNBQWNuQixjQUFjb0IsMEJBQTBCLENBQUNG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O0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcz8yZDg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFJTWVzc2FnZSwgSHVtYW5NZXNzYWdlLCBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSwgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IFJVTl9LRVksIH0gZnJvbSBcIi4uL291dHB1dHMuanNcIjtcbmltcG9ydCB7IEJhc2VMYW5ndWFnZU1vZGVsLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbi8qKlxuICogQ3JlYXRlcyBhIHRyYW5zZm9ybSBzdHJlYW0gZm9yIGVuY29kaW5nIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIEJ5dGVzT3V0cHV0UGFyc2VyfSBpbnN0ZWFkXG4gKiBAcmV0dXJucyBBIFRyYW5zZm9ybVN0cmVhbSBpbnN0YW5jZSB0aGF0IGVuY29kZXMgY2hhdCBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNoYXRNZXNzYWdlQ2h1bmtFbmNvZGVyU3RyZWFtKCkge1xuICAgIGNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh0ZXh0RW5jb2Rlci5lbmNvZGUodHlwZW9mIGNodW5rLmNvbnRlbnQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICA/IGNodW5rLmNvbnRlbnRcbiAgICAgICAgICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGNodW5rLmNvbnRlbnQpKSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGNoYXQgbW9kZWxzLiBJdCBleHRlbmRzIHRoZSBCYXNlTGFuZ3VhZ2VNb2RlbCBjbGFzcyBhbmRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGdlbmVyYXRpbmcgY2hhdCBiYXNlZCBvbiBpbnB1dCBtZXNzYWdlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDaGF0TW9kZWwgZXh0ZW5kcyBCYXNlTGFuZ3VhZ2VNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIC8vIE9ubHkgZXZlciBpbnN0YW50aWF0ZWQgaW4gbWFpbiBMYW5nQ2hhaW5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJjaGF0X21vZGVsc1wiLCB0aGlzLl9sbG1UeXBlKCldXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdID0gc3VwZXIuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGlmIChjYWxsT3B0aW9ucz8udGltZW91dCAmJiAhY2FsbE9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICBjYWxsT3B0aW9ucy5zaWduYWwgPSBBYm9ydFNpZ25hbC50aW1lb3V0KGNhbGxPcHRpb25zLnRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgY2hhdCBtb2RlbCB3aXRoIGEgc2luZ2xlIGlucHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2VDaHVuay5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0VmFsdWUgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVByb21wdChbcHJvbXB0VmFsdWVdLCBvcHRpb25zLCBvcHRpb25zPy5jYWxsYmFja3MpO1xuICAgICAgICBjb25zdCBjaGF0R2VuZXJhdGlvbiA9IHJlc3VsdC5nZW5lcmF0aW9uc1swXVswXTtcbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3QgYWZ0ZXIgZmlndXJpbmcgb3V0IGluaGVyaXRhbmNlXG4gICAgICAgIHJldHVybiBjaGF0R2VuZXJhdGlvbi5tZXNzYWdlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS15aWVsZFxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoX21lc3NhZ2VzLCBfb3B0aW9ucywgX3J1bk1hbmFnZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBTdWJjbGFzcyBjaGVjayByZXF1aXJlZCB0byBhdm9pZCBkb3VibGUgY2FsbGJhY2tzIHdpdGggZGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICAgICAgICBpZiAodGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MgPT09XG4gICAgICAgICAgICBCYXNlQ2hhdE1vZGVsLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBwcm9tcHQudG9DaGF0TWVzc2FnZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdID0gdGhpcy5fc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIHJ1bm5hYmxlQ29uZmlnLnRhZ3MsIHRoaXMudGFncywgcnVubmFibGVDb25maWcubWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczogY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMoY2FsbE9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGF0TW9kZWxTdGFydCh0aGlzLnRvSlNPTigpLCBbbWVzc2FnZXNdLCBydW5uYWJsZUNvbmZpZy5ydW5JZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHJ1bm5hYmxlQ29uZmlnLnJ1bk5hbWUpO1xuICAgICAgICAgICAgbGV0IGdlbmVyYXRpb25DaHVuaztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgY2FsbE9wdGlvbnMsIHJ1bk1hbmFnZXJzPy5bMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaHVuay5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNodW5rLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2VuZXJhdGlvbkNodW5rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25DaHVuayA9IGdlbmVyYXRpb25DaHVuay5jb25jYXQoY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FcnJvcihlcnIpKSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoKHJ1bk1hbmFnZXJzID8/IFtdKS5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3QgYWZ0ZXIgZmlndXJpbmcgb3V0IGluaGVyaXRhbmNlXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtbZ2VuZXJhdGlvbkNodW5rXV0sXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgYXN5bmMgX2dlbmVyYXRlVW5jYWNoZWQobWVzc2FnZXMsIHBhcnNlZE9wdGlvbnMsIGhhbmRsZWRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGJhc2VNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QpID0+IG1lc3NhZ2VMaXN0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuICAgICAgICAvLyBjcmVhdGUgY2FsbGJhY2sgbWFuYWdlciBhbmQgc3RhcnQgcnVuXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGhhbmRsZWRPcHRpb25zLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGhhbmRsZWRPcHRpb25zLnRhZ3MsIHRoaXMudGFncywgaGFuZGxlZE9wdGlvbnMubWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICBjb25zdCBleHRyYSA9IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHBhcnNlZE9wdGlvbnMsXG4gICAgICAgICAgICBpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcyhwYXJzZWRPcHRpb25zKSxcbiAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhdE1vZGVsU3RhcnQodGhpcy50b0pTT04oKSwgYmFzZU1lc3NhZ2VzLCBoYW5kbGVkT3B0aW9ucy5ydW5JZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhhbmRsZWRPcHRpb25zLnJ1bk5hbWUpO1xuICAgICAgICAvLyBnZW5lcmF0ZSByZXN1bHRzXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmFzZU1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QsIGkpID0+IHRoaXMuX2dlbmVyYXRlKG1lc3NhZ2VMaXN0LCB7IC4uLnBhcnNlZE9wdGlvbnMsIHByb21wdEluZGV4OiBpIH0sIHJ1bk1hbmFnZXJzPy5baV0pKSk7XG4gICAgICAgIC8vIGhhbmRsZSByZXN1bHRzXG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gW107XG4gICAgICAgIGNvbnN0IGxsbU91dHB1dHMgPSBbXTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVzdWx0cy5tYXAoYXN5bmMgKHBSZXN1bHQsIGkpID0+IHtcbiAgICAgICAgICAgIGlmIChwUmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHBSZXN1bHQudmFsdWU7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBnZW5lcmF0aW9uIG9mIHJlc3VsdC5nZW5lcmF0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5nZW5lcmF0aW9uLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZ2VuZXJhdGlvbi5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmdlbmVyYXRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZ2VuZXJhdGlvbnNbMF0ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXN1bHQuZ2VuZXJhdGlvbnNbMF0ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnNbaV0gPSByZXN1bHQuZ2VuZXJhdGlvbnM7XG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0c1tpXSA9IHJlc3VsdC5sbG1PdXRwdXQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXJzPy5baV0/LmhhbmRsZUxMTUVuZCh7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbcmVzdWx0LmdlbmVyYXRpb25zXSxcbiAgICAgICAgICAgICAgICAgICAgbGxtT3V0cHV0OiByZXN1bHQubGxtT3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc3RhdHVzID09PSBcInJlamVjdGVkXCJcbiAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2Vycz8uW2ldPy5oYW5kbGVMTE1FcnJvcihwUmVzdWx0LnJlYXNvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHBSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBjcmVhdGUgY29tYmluZWQgb3V0cHV0XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiBsbG1PdXRwdXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgID8gdGhpcy5fY29tYmluZUxMTU91dHB1dD8uKC4uLmxsbU91dHB1dHMpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcbiAgICAgICAgICAgIHZhbHVlOiBydW5NYW5hZ2Vyc1xuICAgICAgICAgICAgICAgID8geyBydW5JZHM6IHJ1bk1hbmFnZXJzPy5tYXAoKG1hbmFnZXIpID0+IG1hbmFnZXIucnVuSWQpIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZUNhY2hlZCh7IG1lc3NhZ2VzLCBjYWNoZSwgbGxtU3RyaW5nS2V5LCBwYXJzZWRPcHRpb25zLCBoYW5kbGVkT3B0aW9ucywgfSkge1xuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgLy8gY3JlYXRlIGNhbGxiYWNrIG1hbmFnZXIgYW5kIHN0YXJ0IHJ1blxuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShoYW5kbGVkT3B0aW9ucy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBoYW5kbGVkT3B0aW9ucy50YWdzLCB0aGlzLnRhZ3MsIGhhbmRsZWRPcHRpb25zLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICBvcHRpb25zOiBwYXJzZWRPcHRpb25zLFxuICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMocGFyc2VkT3B0aW9ucyksXG4gICAgICAgICAgICBiYXRjaF9zaXplOiAxLFxuICAgICAgICAgICAgY2FjaGVkOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIGJhc2VNZXNzYWdlcywgaGFuZGxlZE9wdGlvbnMucnVuSWQsIHVuZGVmaW5lZCwgZXh0cmEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoYW5kbGVkT3B0aW9ucy5ydW5OYW1lKTtcbiAgICAgICAgLy8gZ2VuZXJhdGUgcmVzdWx0c1xuICAgICAgICBjb25zdCBtaXNzaW5nUHJvbXB0SW5kaWNlcyA9IFtdO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGJhc2VNZXNzYWdlcy5tYXAoYXN5bmMgKGJhc2VNZXNzYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gSm9pbiBhbGwgY29udGVudCBpbnRvIG9uZSBzdHJpbmcgZm9yIHRoZSBwcm9tcHQgaW5kZXhcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoYmFzZU1lc3NhZ2UpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWNoZS5sb29rdXAocHJvbXB0LCBsbG1TdHJpbmdLZXkpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZ1Byb21wdEluZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIE1hcCBydW4gbWFuYWdlcnMgdG8gdGhlIHJlc3VsdHMgYmVmb3JlIGZpbHRlcmluZyBvdXQgbnVsbCByZXN1bHRzXG4gICAgICAgIC8vIE51bGwgcmVzdWx0cyBhcmUganVzdCBhYnNlbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICAgIGNvbnN0IGNhY2hlZFJlc3VsdHMgPSByZXN1bHRzXG4gICAgICAgICAgICAubWFwKChyZXN1bHQsIGluZGV4KSA9PiAoeyByZXN1bHQsIHJ1bk1hbmFnZXI6IHJ1bk1hbmFnZXJzPy5baW5kZXhdIH0pKVxuICAgICAgICAgICAgLmZpbHRlcigoeyByZXN1bHQgfSkgPT4gKHJlc3VsdC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIgJiYgcmVzdWx0LnZhbHVlICE9IG51bGwpIHx8XG4gICAgICAgICAgICByZXN1bHQuc3RhdHVzID09PSBcInJlamVjdGVkXCIpO1xuICAgICAgICAvLyBIYW5kbGUgcmVzdWx0cyBhbmQgY2FsbCBydW4gbWFuYWdlcnNcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FjaGVkUmVzdWx0cy5tYXAoYXN5bmMgKHsgcmVzdWx0OiBwcm9taXNlUmVzdWx0LCBydW5NYW5hZ2VyIH0sIGkpID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9taXNlUmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHByb21pc2VSZXN1bHQudmFsdWU7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnNbaV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocmVzdWx0WzBdLnRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtyZXN1bHRdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc3RhdHVzID09PSBcInJlamVjdGVkXCJcbiAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FcnJvcihwcm9taXNlUmVzdWx0LnJlYXNvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHByb21pc2VSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICBnZW5lcmF0aW9ucyxcbiAgICAgICAgICAgIG1pc3NpbmdQcm9tcHRJbmRpY2VzLFxuICAgICAgICB9O1xuICAgICAgICAvLyBUaGlzIGRlZmluZXMgUlVOX0tFWSBhcyBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IG9uIHRoZSBvdXRwdXQgb2JqZWN0XG4gICAgICAgIC8vIHNvIHRoYXQgaXQgaXMgbm90IHNlcmlhbGl6ZWQgd2hlbiB0aGUgb3V0cHV0IGlzIHN0cmluZ2lmaWVkLCBhbmQgc28gdGhhdFxuICAgICAgICAvLyBpdCBpc250IGluY2x1ZGVkIHdoZW4gbGlzdGluZyB0aGUga2V5cyBvZiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dCwgUlVOX0tFWSwge1xuICAgICAgICAgICAgdmFsdWU6IHJ1bk1hbmFnZXJzXG4gICAgICAgICAgICAgICAgPyB7IHJ1bklkczogcnVuTWFuYWdlcnM/Lm1hcCgobWFuYWdlcikgPT4gbWFuYWdlci5ydW5JZCkgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGNoYXQgYmFzZWQgb24gdGhlIGlucHV0IG1lc3NhZ2VzLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBBbiBhcnJheSBvZiBhcnJheXMgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gTExNUmVzdWx0LlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgLy8gcGFyc2UgY2FsbCBvcHRpb25zXG4gICAgICAgIGxldCBwYXJzZWRPcHRpb25zO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICAgICAgcGFyc2VkT3B0aW9ucyA9IHsgc3RvcDogb3B0aW9ucyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VkT3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmFzZU1lc3NhZ2VzID0gbWVzc2FnZXMubWFwKChtZXNzYWdlTGlzdCkgPT4gbWVzc2FnZUxpc3QubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKSk7XG4gICAgICAgIGNvbnN0IFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdID0gdGhpcy5fc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhwYXJzZWRPcHRpb25zKTtcbiAgICAgICAgcnVubmFibGVDb25maWcuY2FsbGJhY2tzID0gcnVubmFibGVDb25maWcuY2FsbGJhY2tzID8/IGNhbGxiYWNrcztcbiAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChiYXNlTWVzc2FnZXMsIGNhbGxPcHRpb25zLCBydW5uYWJsZUNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBjYWNoZSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbGxtU3RyaW5nS2V5ID0gdGhpcy5fZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwoY2FsbE9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IGdlbmVyYXRpb25zLCBtaXNzaW5nUHJvbXB0SW5kaWNlcyB9ID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGVDYWNoZWQoe1xuICAgICAgICAgICAgbWVzc2FnZXM6IGJhc2VNZXNzYWdlcyxcbiAgICAgICAgICAgIGNhY2hlLFxuICAgICAgICAgICAgbGxtU3RyaW5nS2V5LFxuICAgICAgICAgICAgcGFyc2VkT3B0aW9uczogY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICBoYW5kbGVkT3B0aW9uczogcnVubmFibGVDb25maWcsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGxtT3V0cHV0ID0ge307XG4gICAgICAgIGlmIChtaXNzaW5nUHJvbXB0SW5kaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChtaXNzaW5nUHJvbXB0SW5kaWNlcy5tYXAoKGkpID0+IGJhc2VNZXNzYWdlc1tpXSksIGNhbGxPcHRpb25zLCBydW5uYWJsZUNvbmZpZyk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXN1bHRzLmdlbmVyYXRpb25zLm1hcChhc3luYyAoZ2VuZXJhdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHRJbmRleCA9IG1pc3NpbmdQcm9tcHRJbmRpY2VzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1twcm9tcHRJbmRleF0gPSBnZW5lcmF0aW9uO1xuICAgICAgICAgICAgICAgIC8vIEpvaW4gYWxsIGNvbnRlbnQgaW50byBvbmUgc3RyaW5nIGZvciB0aGUgcHJvbXB0IGluZGV4XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShiYXNlTWVzc2FnZXNbcHJvbXB0SW5kZXhdKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZS51cGRhdGUocHJvbXB0LCBsbG1TdHJpbmdLZXksIGdlbmVyYXRpb24pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgbGxtT3V0cHV0ID0gcmVzdWx0cy5sbG1PdXRwdXQgPz8ge307XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZ2VuZXJhdGlvbnMsIGxsbU91dHB1dCB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpbnZvY2F0aW9uUGFyYW1zKF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgX21vZGVsVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYmFzZV9jaGF0X21vZGVsXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogUmV0dXJuIGEganNvbi1saWtlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBMTE0uXG4gICAgICovXG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgcHJvbXB0IGJhc2VkIG9uIHRoZSBpbnB1dCBwcm9tcHQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBwcm9tcHRWYWx1ZXMgQW4gYXJyYXkgb2YgQmFzZVByb21wdFZhbHVlIGluc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIExMTVJlc3VsdC5cbiAgICAgKi9cbiAgICBhc3luYyBnZW5lcmF0ZVByb21wdChwcm9tcHRWYWx1ZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBwcm9tcHRNZXNzYWdlcyA9IHByb21wdFZhbHVlcy5tYXAoKHByb21wdFZhbHVlKSA9PiBwcm9tcHRWYWx1ZS50b0NoYXRNZXNzYWdlcygpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGUocHJvbXB0TWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqXG4gICAgICogTWFrZXMgYSBzaW5nbGUgY2FsbCB0byB0aGUgY2hhdCBtb2RlbC5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgQW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBCYXNlTWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBjYWxsKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZShbbWVzc2FnZXMubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKV0sIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gcmVzdWx0LmdlbmVyYXRpb25zO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvbnNbMF1bMF0ubWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBjYWxsIHRvIHRoZSBjaGF0IG1vZGVsIHdpdGggYSBwcm9tcHQgdmFsdWUuXG4gICAgICogQHBhcmFtIHByb21wdFZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgcHJvbXB0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBCYXNlTWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBjYWxsUHJvbXB0KHByb21wdFZhbHVlLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0TWVzc2FnZXMgPSBwcm9tcHRWYWx1ZS50b0NoYXRNZXNzYWdlcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKHByb21wdE1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjIuMC5cbiAgICAgKlxuICAgICAqIFByZWRpY3RzIHRoZSBuZXh0IG1lc3NhZ2UgYmFzZWQgb24gdGhlIGlucHV0IG1lc3NhZ2VzLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBBbiBhcnJheSBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3RNZXNzYWdlcyhtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqXG4gICAgICogUHJlZGljdHMgdGhlIG5leHQgbWVzc2FnZSBiYXNlZCBvbiBhIHRleHQgaW5wdXQuXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgaW5wdXQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBhc3luYyBwcmVkaWN0KHRleHQsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IEh1bWFuTWVzc2FnZSh0ZXh0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jYWxsKFttZXNzYWdlXSwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQuY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHVzZSBwcmVkaWN0IHdoZW4gb3V0cHV0IGlzIG5vdCBhIHN0cmluZy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5jb250ZW50O1xuICAgIH1cbn1cbi8qKlxuICogQW4gYWJzdHJhY3QgY2xhc3MgdGhhdCBleHRlbmRzIEJhc2VDaGF0TW9kZWwgYW5kIHByb3ZpZGVzIGEgc2ltcGxlXG4gKiBpbXBsZW1lbnRhdGlvbiBvZiBfZ2VuZXJhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTaW1wbGVDaGF0TW9kZWwgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIHtcbiAgICBhc3luYyBfZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMuX2NhbGwobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IEFJTWVzc2FnZSh0ZXh0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBnZW5lcmF0ZSB3aXRoIGEgc2ltcGxlIGNoYXQgbW9kZWwgd2hlbiBvdXRwdXQgaXMgbm90IGEgc3RyaW5nLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQUlNZXNzYWdlIiwiSHVtYW5NZXNzYWdlIiwiY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UiLCJSVU5fS0VZIiwiQmFzZUxhbmd1YWdlTW9kZWwiLCJDYWxsYmFja01hbmFnZXIiLCJjcmVhdGVDaGF0TWVzc2FnZUNodW5rRW5jb2RlclN0cmVhbSIsInRleHRFbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJUcmFuc2Zvcm1TdHJlYW0iLCJ0cmFuc2Zvcm0iLCJjaHVuayIsImNvbnRyb2xsZXIiLCJlbnF1ZXVlIiwiZW5jb2RlIiwiY29udGVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJCYXNlQ2hhdE1vZGVsIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiX2xsbVR5cGUiLCJfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyIsIm9wdGlvbnMiLCJydW5uYWJsZUNvbmZpZyIsImNhbGxPcHRpb25zIiwidGltZW91dCIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwiaW52b2tlIiwiaW5wdXQiLCJwcm9tcHRWYWx1ZSIsIl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlIiwicmVzdWx0IiwiZ2VuZXJhdGVQcm9tcHQiLCJjYWxsYmFja3MiLCJjaGF0R2VuZXJhdGlvbiIsImdlbmVyYXRpb25zIiwibWVzc2FnZSIsIl9zdHJlYW1SZXNwb25zZUNodW5rcyIsIl9tZXNzYWdlcyIsIl9vcHRpb25zIiwiX3J1bk1hbmFnZXIiLCJFcnJvciIsIl9zdHJlYW1JdGVyYXRvciIsInByb3RvdHlwZSIsInByb21wdCIsIm1lc3NhZ2VzIiwidG9DaGF0TWVzc2FnZXMiLCJjYWxsYmFja01hbmFnZXJfIiwiY29uZmlndXJlIiwidGFncyIsIm1ldGFkYXRhIiwidmVyYm9zZSIsImV4dHJhIiwiaW52b2NhdGlvbl9wYXJhbXMiLCJpbnZvY2F0aW9uUGFyYW1zIiwiYmF0Y2hfc2l6ZSIsInJ1bk1hbmFnZXJzIiwiaGFuZGxlQ2hhdE1vZGVsU3RhcnQiLCJ0b0pTT04iLCJydW5JZCIsInVuZGVmaW5lZCIsInJ1bk5hbWUiLCJnZW5lcmF0aW9uQ2h1bmsiLCJyZXNwb25zZV9tZXRhZGF0YSIsImdlbmVyYXRpb25JbmZvIiwiY29uY2F0IiwiZXJyIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInJ1bk1hbmFnZXIiLCJoYW5kbGVMTE1FcnJvciIsImhhbmRsZUxMTUVuZCIsIl9nZW5lcmF0ZVVuY2FjaGVkIiwicGFyc2VkT3B0aW9ucyIsImhhbmRsZWRPcHRpb25zIiwiYmFzZU1lc3NhZ2VzIiwibWVzc2FnZUxpc3QiLCJyZXN1bHRzIiwiYWxsU2V0dGxlZCIsImkiLCJfZ2VuZXJhdGUiLCJwcm9tcHRJbmRleCIsImxsbU91dHB1dHMiLCJwUmVzdWx0Iiwic3RhdHVzIiwiZ2VuZXJhdGlvbiIsImxlbmd0aCIsImxsbU91dHB1dCIsInJlYXNvbiIsInJlamVjdCIsIm91dHB1dCIsIl9jb21iaW5lTExNT3V0cHV0IiwicnVuSWRzIiwibWFuYWdlciIsIl9nZW5lcmF0ZUNhY2hlZCIsImNhY2hlIiwibGxtU3RyaW5nS2V5IiwiY2FjaGVkIiwibWlzc2luZ1Byb21wdEluZGljZXMiLCJiYXNlTWVzc2FnZSIsImluZGV4IiwidG9TdHJpbmciLCJsb29rdXAiLCJwdXNoIiwiY2FjaGVkUmVzdWx0cyIsImZpbHRlciIsInByb21pc2VSZXN1bHQiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRleHQiLCJnZW5lcmF0ZSIsIkFycmF5IiwiaXNBcnJheSIsInN0b3AiLCJfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwiLCJ1cGRhdGUiLCJfbW9kZWxUeXBlIiwic2VyaWFsaXplIiwiX3R5cGUiLCJfbW9kZWwiLCJwcm9tcHRWYWx1ZXMiLCJwcm9tcHRNZXNzYWdlcyIsImNhbGwiLCJjYWxsUHJvbXB0IiwicHJlZGljdE1lc3NhZ2VzIiwicHJlZGljdCIsIlNpbXBsZUNoYXRNb2RlbCIsIl9jYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/map_keys.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtQztBQUNEO0FBQzNCLFNBQVNFLFVBQVVDLEdBQUcsRUFBRUMsR0FBRztJQUM5QixPQUFPQSxLQUFLLENBQUNELElBQUksSUFBSUgsdUNBQVNBLENBQUNHO0FBQ25DO0FBQ08sU0FBU0UsWUFBWUYsR0FBRyxFQUFFQyxHQUFHO0lBQ2hDLE9BQU9BLEtBQUssQ0FBQ0QsSUFBSSxJQUFJRixzQ0FBU0EsQ0FBQ0U7QUFDbkM7QUFDTyxTQUFTRyxRQUFRQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUosR0FBRztJQUN2QyxNQUFNSyxTQUFTLENBQUM7SUFDaEIsSUFBSyxNQUFNTixPQUFPSSxPQUFRO1FBQ3RCLElBQUlHLE9BQU9DLE1BQU0sQ0FBQ0osUUFBUUosTUFBTTtZQUM1Qk0sTUFBTSxDQUFDRCxPQUFPTCxLQUFLQyxLQUFLLEdBQUdHLE1BQU0sQ0FBQ0osSUFBSTtRQUMxQztJQUNKO0lBQ0EsT0FBT007QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvbWFwX2tleXMuanM/MGY0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc25ha2VDYXNlIGZyb20gXCJkZWNhbWVsaXplXCI7XG5pbXBvcnQgY2FtZWxDYXNlIGZyb20gXCJjYW1lbGNhc2VcIjtcbmV4cG9ydCBmdW5jdGlvbiBrZXlUb0pzb24oa2V5LCBtYXApIHtcbiAgICByZXR1cm4gbWFwPy5ba2V5XSB8fCBzbmFrZUNhc2Uoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBrZXlGcm9tSnNvbihrZXksIG1hcCkge1xuICAgIHJldHVybiBtYXA/LltrZXldIHx8IGNhbWVsQ2FzZShrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1hcEtleXMoZmllbGRzLCBtYXBwZXIsIG1hcCkge1xuICAgIGNvbnN0IG1hcHBlZCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGZpZWxkcykge1xuICAgICAgICBpZiAoT2JqZWN0Lmhhc093bihmaWVsZHMsIGtleSkpIHtcbiAgICAgICAgICAgIG1hcHBlZFttYXBwZXIoa2V5LCBtYXApXSA9IGZpZWxkc1trZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXBwZWQ7XG59XG4iXSwibmFtZXMiOlsic25ha2VDYXNlIiwiY2FtZWxDYXNlIiwia2V5VG9Kc29uIiwia2V5IiwibWFwIiwia2V5RnJvbUpzb24iLCJtYXBLZXlzIiwiZmllbGRzIiwibWFwcGVyIiwibWFwcGVkIiwiT2JqZWN0IiwiaGFzT3duIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/serializable.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/serializable.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_kwargs = kwargs || {};\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ25ELFNBQVNFLFlBQVlDLEdBQUc7SUFDcEIsT0FBT0MsTUFBTUMsT0FBTyxDQUFDRixPQUFPO1dBQUlBO0tBQUksR0FBRztRQUFFLEdBQUdBLEdBQUc7SUFBQztBQUNwRDtBQUNBLFNBQVNHLGVBQWVDLElBQUksRUFBRUMsVUFBVTtJQUNwQyxNQUFNQyxTQUFTUCxZQUFZSztJQUMzQixLQUFLLE1BQU0sQ0FBQ0csTUFBTUMsU0FBUyxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFlBQWE7UUFDdkQsTUFBTSxDQUFDTSxNQUFNLEdBQUdDLGFBQWEsR0FBR0wsS0FBS00sS0FBSyxDQUFDLEtBQUtDLE9BQU87UUFDdkQsOERBQThEO1FBQzlELElBQUlDLFVBQVVUO1FBQ2QsS0FBSyxNQUFNVSxRQUFRSixhQUFhRSxPQUFPLEdBQUk7WUFDdkMsSUFBSUMsT0FBTyxDQUFDQyxLQUFLLEtBQUtDLFdBQVc7Z0JBQzdCO1lBQ0o7WUFDQUYsT0FBTyxDQUFDQyxLQUFLLEdBQUdqQixZQUFZZ0IsT0FBTyxDQUFDQyxLQUFLO1lBQ3pDRCxVQUFVQSxPQUFPLENBQUNDLEtBQUs7UUFDM0I7UUFDQSxJQUFJRCxPQUFPLENBQUNKLEtBQUssS0FBS00sV0FBVztZQUM3QkYsT0FBTyxDQUFDSixLQUFLLEdBQUc7Z0JBQ1pPLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLElBQUk7b0JBQUNaO2lCQUFTO1lBQ2xCO1FBQ0o7SUFDSjtJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7O0NBR0MsR0FDTSxTQUFTZSxtQkFDaEIsbUVBQW1FO0FBQ25FQyxpQkFBaUI7SUFDYixnRUFBZ0U7SUFDaEUsNEVBQTRFO0lBQzVFLE1BQU1DLGNBQWNkLE9BQU9lLGNBQWMsQ0FBQ0Y7SUFDMUMsTUFBTUcscUJBQXFCLE9BQU9ILGtCQUFrQkksT0FBTyxLQUFL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YUUsT0FBTyxHQUFJO2dCQUN0QyxJQUFJLENBQUVxQyxDQUFBQSxPQUFPTSxJQUFHLEtBQU1BLElBQUksQ0FBQ04sSUFBSSxLQUFLbEMsV0FDaEM7Z0JBQ0osSUFBSSxDQUFFa0MsQ0FBQUEsT0FBT08sS0FBSSxLQUFNQSxLQUFLLENBQUNQLElBQUksS0FBS2xDLFdBQVc7b0JBQzdDLElBQUksT0FBT3dDLElBQUksQ0FBQ04sSUFBSSxLQUFLLFlBQVlNLElBQUksQ0FBQ04sSUFBSSxJQUFJLE1BQU07d0JBQ3BETyxLQUFLLENBQUNQLElBQUksR0FBRyxDQUFDO29CQUNsQixPQUNLLElBQUlsRCxNQUFNQyxPQUFPLENBQUN1RCxJQUFJLENBQUNOLElBQUksR0FBRzt3QkFDL0JPLEtBQUssQ0FBQ1AsSUFBSSxHQUFHLEVBQUU7b0JBQ25CO2dCQUNKO2dCQUNBTSxPQUFPQSxJQUFJLENBQUNOLElBQUk7Z0JBQ2hCTyxRQUFRQSxLQUFLLENBQUNQLElBQUk7WUFDdEI7WUFDQSxJQUFJeEMsUUFBUThDLFFBQVFBLElBQUksQ0FBQzlDLEtBQUssS0FBS00sV0FBVztnQkFDMUN5QyxLQUFLLENBQUMvQyxLQUFLLEdBQUcrQyxLQUFLLENBQUMvQyxLQUFLLElBQUk4QyxJQUFJLENBQUM5QyxLQUFLO1lBQzNDO1FBQ0o7UUFDQSxPQUFPO1lBQ0hPLElBQUk7WUFDSkMsTUFBTTtZQUNOQyxJQUFJLElBQUksQ0FBQ1MsS0FBSztZQUNkTSxRQUFRckMscURBQU9BLENBQUNXLE9BQU91QyxJQUFJLENBQUNELFNBQVNZLE1BQU0sR0FBR3hELGVBQWVnQyxRQUFRWSxXQUFXWixRQUFRdEMsbURBQVNBLEVBQUVpRDtRQUN2RztJQUNKO0lBQ0FELHVCQUF1QjtRQUNuQixPQUFPO1lBQ0gzQixJQUFJO1lBQ0pDLE1BQU07WUFDTkMsSUFBSSxJQUFJLENBQUNTLEtBQUs7UUFDbEI7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanM/ZWUyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBrZXlUb0pzb24sIG1hcEtleXMgfSBmcm9tIFwiLi9tYXBfa2V5cy5qc1wiO1xuZnVuY3Rpb24gc2hhbGxvd0NvcHkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkob2JqKSA/IFsuLi5vYmpdIDogeyAuLi5vYmogfTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VTZWNyZXRzKHJvb3QsIHNlY3JldHNNYXApIHtcbiAgICBjb25zdCByZXN1bHQgPSBzaGFsbG93Q29weShyb290KTtcbiAgICBmb3IgKGNvbnN0IFtwYXRoLCBzZWNyZXRJZF0gb2YgT2JqZWN0LmVudHJpZXMoc2VjcmV0c01hcCkpIHtcbiAgICAgICAgY29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBwYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBjdXJyZW50ID0gcmVzdWx0O1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHNSZXZlcnNlLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRbcGFydF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFtwYXJ0XSA9IHNoYWxsb3dDb3B5KGN1cnJlbnRbcGFydF0pO1xuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnRbcGFydF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRbbGFzdF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY3VycmVudFtsYXN0XSA9IHtcbiAgICAgICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInNlY3JldFwiLFxuICAgICAgICAgICAgICAgIGlkOiBbc2VjcmV0SWRdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBHZXQgYSB1bmlxdWUgbmFtZSBmb3IgdGhlIG1vZHVsZSwgcmF0aGVyIHRoYW4gcGFyZW50IGNsYXNzIGltcGxlbWVudGF0aW9ucy5cbiAqIFNob3VsZCBub3QgYmUgc3ViY2xhc3NlZCwgc3ViY2xhc3MgbGNfbmFtZSBhYm92ZSBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0X2xjX3VuaXF1ZV9uYW1lKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuc2VyaWFsaXphYmxlQ2xhc3MpIHtcbiAgICAvLyBcInN1cGVyXCIgaGVyZSB3b3VsZCByZWZlciB0byB0aGUgcGFyZW50IGNsYXNzIG9mIFNlcmlhbGl6YWJsZSxcbiAgICAvLyB3aGVuIHdlIHdhbnQgdGhlIHBhcmVudCBjbGFzcyBvZiB0aGUgbW9kdWxlIGFjdHVhbGx5IGNhbGxpbmcgdGhpcyBtZXRob2QuXG4gICAgY29uc3QgcGFyZW50Q2xhc3MgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yoc2VyaWFsaXphYmxlQ2xhc3MpO1xuICAgIGNvbnN0IGxjTmFtZUlzU3ViY2xhc3NlZCA9IHR5cGVvZiBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgKHR5cGVvZiBwYXJlbnRDbGFzcy5sY19uYW1lICE9PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZUNsYXNzLmxjX25hbWUoKSAhPT0gcGFyZW50Q2xhc3MubGNfbmFtZSgpKTtcbiAgICBpZiAobGNOYW1lSXNTdWJjbGFzc2VkKSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXphYmxlQ2xhc3MubmFtZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2VyaWFsaXphYmxlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgc2VyaWFsaXphYmxlLiBPdmVycmlkZSB0byBwcm92aWRlIGFuIGFsaWFzIG9yXG4gICAgICogdG8gcHJlc2VydmUgdGhlIHNlcmlhbGl6ZWQgbW9kdWxlIG5hbWUgaW4gbWluaWZpZWQgZW52aXJvbm1lbnRzLlxuICAgICAqXG4gICAgICogSW1wbGVtZW50ZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIHN1cHBvcnQgbG9hZGluZyBsb2dpYy5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIHNlcmlhbGl6ZWQgaWRlbnRpZmllciBmb3IgdGhlIG1vZHVsZS5cbiAgICAgKi9cbiAgICBnZXQgbGNfaWQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi50aGlzLmxjX25hbWVzcGFjZSxcbiAgICAgICAgICAgIGdldF9sY191bmlxdWVfbmFtZSh0aGlzLmNvbnN0cnVjdG9yKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2Ygc2VjcmV0cywgd2hpY2ggd2lsbCBiZSBvbWl0dGVkIGZyb20gc2VyaWFsaXphdGlvbi5cbiAgICAgKiBLZXlzIGFyZSBwYXRocyB0byB0aGUgc2VjcmV0IGluIGNvbnN0cnVjdG9yIGFyZ3MsIGUuZy4gXCJmb28uYmFyLmJhelwiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIHNlY3JldCBpZHMsIHdoaWNoIHdpbGwgYmUgdXNlZCB3aGVuIGRlc2VyaWFsaXppbmcuXG4gICAgICovXG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGFkZGl0aW9uYWwgYXR0cmlidXRlcyB0byBtZXJnZSB3aXRoIGNvbnN0cnVjdG9yIGFyZ3MuXG4gICAgICogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMsIHdoaWNoIHdpbGwgYmUgc2VyaWFsaXplZC5cbiAgICAgKiBUaGVzZSBhdHRyaWJ1dGVzIG5lZWQgdG8gYmUgYWNjZXB0ZWQgYnkgdGhlIGNvbnN0cnVjdG9yIGFzIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgYWxpYXNlcyBmb3IgY29uc3RydWN0b3IgYXJncy5cbiAgICAgKiBLZXlzIGFyZSB0aGUgYXR0cmlidXRlIG5hbWVzLCBlLmcuIFwiZm9vXCIuXG4gICAgICogVmFsdWVzIGFyZSB0aGUgYWxpYXMgdGhhdCB3aWxsIHJlcGxhY2UgdGhlIGtleSBpbiBzZXJpYWxpemF0aW9uLlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byBlZy4gbWFrZSBhcmd1bWVudCBuYW1lcyBtYXRjaCBQeXRob24uXG4gICAgICovXG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGt3YXJncywgLi4uX2FyZ3MpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfa3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGNfa3dhcmdzID0ga3dhcmdzIHx8IHt9O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGlmICghdGhpcy5sY19zZXJpYWxpemFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIHRoaXMubGNfa3dhcmdzIGluc3RhbmNlb2YgU2VyaWFsaXphYmxlIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5sY19rd2FyZ3MgIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodGhpcy5sY19rd2FyZ3MpKSB7XG4gICAgICAgICAgICAvLyBXZSBkbyBub3Qgc3VwcG9ydCBzZXJpYWxpemF0aW9uIG9mIGNsYXNzZXMgd2l0aCBhcmcgbm90IGEgUE9KT1xuICAgICAgICAgICAgLy8gSSdtIGF3YXJlIHRoZSBjaGVjayBhYm92ZSBpc24ndCBhcyBzdHJpY3QgYXMgaXQgY291bGQgYmVcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxpYXNlcyA9IHt9O1xuICAgICAgICBjb25zdCBzZWNyZXRzID0ge307XG4gICAgICAgIGNvbnN0IGt3YXJncyA9IE9iamVjdC5rZXlzKHRoaXMubGNfa3dhcmdzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IGtleSBpbiB0aGlzID8gdGhpc1trZXldIDogdGhpcy5sY19rd2FyZ3Nba2V5XTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgLy8gZ2V0IHNlY3JldHMsIGF0dHJpYnV0ZXMgYW5kIGFsaWFzZXMgZnJvbSBhbGwgc3VwZXJjbGFzc2VzXG4gICAgICAgIGZvciAoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBsZXQgY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTsgY3VycmVudDsgY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjdXJyZW50KSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhbGlhc2VzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX2FsaWFzZXNcIiwgdGhpcykpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzZWNyZXRzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX3NlY3JldHNcIiwgdGhpcykpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihrd2FyZ3MsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfYXR0cmlidXRlc1wiLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5jbHVkZSBhbGwgc2VjcmV0cyB1c2VkLCBldmVuIGlmIG5vdCBpbiBrd2FyZ3MsXG4gICAgICAgIC8vIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCBzZW50aW5lbCB2YWx1ZSBpbiByZXBsYWNlU2VjcmV0c1xuICAgICAgICBPYmplY3Qua2V5cyhzZWNyZXRzKS5mb3JFYWNoKChrZXlQYXRoKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGxldCByZWFkID0gdGhpcztcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgd3JpdGUgPSBrd2FyZ3M7XG4gICAgICAgICAgICBjb25zdCBbbGFzdCwgLi4ucGFydHNSZXZlcnNlXSA9IGtleVBhdGguc3BsaXQoXCIuXCIpLnJldmVyc2UoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gcmVhZCkgfHwgcmVhZFtrZXldID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gd3JpdGUpIHx8IHdyaXRlW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlYWRba2V5XSA9PT0gXCJvYmplY3RcIiAmJiByZWFkW2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVba2V5XSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVhZFtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVba2V5XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlYWQgPSByZWFkW2tleV07XG4gICAgICAgICAgICAgICAgd3JpdGUgPSB3cml0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxhc3QgaW4gcmVhZCAmJiByZWFkW2xhc3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB3cml0ZVtsYXN0XSA9IHdyaXRlW2xhc3RdIHx8IHJlYWRbbGFzdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICB0eXBlOiBcImNvbnN0cnVjdG9yXCIsXG4gICAgICAgICAgICBpZDogdGhpcy5sY19pZCxcbiAgICAgICAgICAgIGt3YXJnczogbWFwS2V5cyhPYmplY3Qua2V5cyhzZWNyZXRzKS5sZW5ndGggPyByZXBsYWNlU2VjcmV0cyhrd2FyZ3MsIHNlY3JldHMpIDoga3dhcmdzLCBrZXlUb0pzb24sIGFsaWFzZXMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0pTT05Ob3RJbXBsZW1lbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJub3RfaW1wbGVtZW50ZWRcIixcbiAgICAgICAgICAgIGlkOiB0aGlzLmxjX2lkLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJrZXlUb0pzb24iLCJtYXBLZXlzIiwic2hhbGxvd0NvcHkiLCJvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJyZXBsYWNlU2VjcmV0cyIsInJvb3QiLCJzZWNyZXRzTWFwIiwicmVzdWx0IiwicGF0aCIsInNlY3JldElkIiwiT2JqZWN0IiwiZW50cmllcyIsImxhc3QiLCJwYXJ0c1JldmVyc2UiLCJzcGxpdCIsInJldmVyc2UiLCJjdXJyZW50IiwicGFydCIsInVuZGVmaW5lZCIsImxjIiwidHlwZSIsImlkIiwiZ2V0X2xjX3VuaXF1ZV9uYW1lIiwic2VyaWFsaXphYmxlQ2xhc3MiLCJwYXJlbnRDbGFzcyIsImdldFByb3RvdHlwZU9mIiwibGNOYW1lSXNTdWJjbGFzc2VkIiwibGNfbmFtZSIsIm5hbWUiLCJTZXJpYWxpemFibGUiLCJsY19pZCIsImxjX25hbWVzcGFjZSIsImNvbnN0cnVjdG9yIiwibGNfc2VjcmV0cyIsImxjX2F0dHJpYnV0ZXMiLCJsY19hbGlhc2VzIiwia3dhcmdzIiwiX2FyZ3MiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibGNfa3dhcmdzIiwidG9KU09OIiwibGNfc2VyaWFsaXphYmxlIiwidG9KU09OTm90SW1wbGVtZW50ZWQiLCJhbGlhc2VzIiwic2VjcmV0cyIsImtleXMiLCJyZWR1Y2UiLCJhY2MiLCJrZXkiLCJhc3NpZ24iLCJSZWZsZWN0IiwiZ2V0IiwiZm9yRWFjaCIsImtleVBhdGgiLCJyZWFkIiwid3JpdGUiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/ai.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/ai.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   isAIMessage: () => (/* binding */ isAIMessage)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\"\n        };\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                additional_kwargs: kwargs ?? {}\n            };\n        } else {\n            initParams = fields;\n            const rawToolCalls = initParams.additional_kwargs?.tool_calls;\n            const toolCalls = initParams.tool_calls;\n            if (!(rawToolCalls == null) && rawToolCalls.length > 0 && (toolCalls === undefined || toolCalls.length === 0)) {\n                console.warn([\n                    \"New LangChain packages are available that more efficiently handle\",\n                    \"tool calling.\\n\\nPlease upgrade your packages to versions that set\",\n                    \"message tool calls. e.g., `yarn add @langchain/anthropic`,\",\n                    \"yarn add @langchain/openai`, etc.\"\n                ].join(\" \"));\n            }\n            try {\n                if (!(rawToolCalls == null) && toolCalls === undefined) {\n                    const [toolCalls, invalidToolCalls] = (0,_tool_js__WEBPACK_IMPORTED_MODULE_2__.defaultToolCallParser)(rawToolCalls);\n                    initParams.tool_calls = toolCalls ?? [];\n                    initParams.invalid_tool_calls = invalidToolCalls ?? [];\n                } else {\n                    initParams.tool_calls = initParams.tool_calls ?? [];\n                    initParams.invalid_tool_calls = initParams.invalid_tool_calls ?? [];\n                }\n            } catch (e) {\n                // Do nothing if parsing fails\n                initParams.tool_calls = [];\n                initParams.invalid_tool_calls = [];\n            }\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        if (typeof initParams !== \"string\") {\n            this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n            this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        }\n    }\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n}\nfunction isAIMessage(x) {\n    return x._getType() === \"ai\";\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk {\n    constructor(fields){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else if (fields.tool_call_chunks === undefined) {\n            initParams = {\n                ...fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else {\n            const toolCalls = [];\n            const invalidToolCalls = [];\n            for (const toolCallChunk of fields.tool_call_chunks){\n                let parsedArgs = {};\n                try {\n                    parsedArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(toolCallChunk.args ?? \"{}\") ?? {};\n                    if (typeof parsedArgs !== \"object\" || Array.isArray(parsedArgs)) {\n                        throw new Error(\"Malformed tool call chunk args.\");\n                    }\n                    toolCalls.push({\n                        name: toolCallChunk.name ?? \"\",\n                        args: parsedArgs,\n                        id: toolCallChunk.id\n                    });\n                } catch (e) {\n                    invalidToolCalls.push({\n                        name: toolCallChunk.name,\n                        args: toolCallChunk.args,\n                        id: toolCallChunk.id,\n                        error: \"Malformed args.\"\n                    });\n                }\n            }\n            initParams = {\n                ...fields,\n                tool_calls: toolCalls,\n                invalid_tool_calls: invalidToolCalls\n            };\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // Must redeclare tool call fields since there is no multiple inheritance in JS.\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tool_call_chunks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.tool_call_chunks = initParams?.tool_call_chunks ?? this.tool_call_chunks;\n        this.tool_calls = initParams?.tool_calls ?? this.tool_calls;\n        this.invalid_tool_calls = initParams?.invalid_tool_calls ?? this.invalid_tool_calls;\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\",\n            tool_call_chunks: \"tool_call_chunks\"\n        };\n    }\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    concat(chunk) {\n        const combinedFields = {\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_chunks: []\n        };\n        if (this.tool_call_chunks !== undefined || chunk.tool_call_chunks !== undefined) {\n            const rawToolCalls = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists)(this.tool_call_chunks, chunk.tool_call_chunks);\n            if (rawToolCalls !== undefined && rawToolCalls.length > 0) {\n                combinedFields.tool_call_chunks = rawToolCalls;\n            }\n        }\n        return new AIMessageChunk(combinedFields);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYWkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9EO0FBQytDO0FBQ2hEO0FBQ25EOztDQUVDLEdBQ00sTUFBTU8sa0JBQWtCTixpREFBV0E7SUFDdEMsSUFBSU8sYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQ0gsR0FBRyxLQUFLLENBQUNBLFVBQVU7WUFDbkJDLFlBQVk7WUFDWkMsb0JBQW9CO1FBQ3hCO0lBQ0o7SUFDQUMsWUFBWUMsTUFBTSxFQUNsQixnQkFBZ0IsR0FDaEJDLE1BQU0sQ0FBRTtRQUNKLElBQUlDO1FBQ0osSUFBSSxPQUFPRixXQUFXLFVBQVU7WUFDNUJFLGFBQWE7Z0JBQ1RDLFNBQVNIO2dCQUNUSCxZQUFZLEVBQUU7Z0JBQ2RDLG9CQUFvQixFQUFFO2dCQUN0Qk0sbUJBQW1CSCxVQUFVLENBQUM7WUFDbEM7UUFDSixPQUNLO1lBQ0RDLGFBQWFGO1lBQ2IsTUFBTUssZUFBZUgsV0FBV0UsaUJBQWlCLEVBQUVQO1lBQ25ELE1BQU1TLFlBQVlKLFdBQVdMLFVBQVU7WUFDdkMsSUFBSSxDQUFFUSxDQUFBQSxnQkFBZ0IsSUFBRyxLQUNyQkEsYUFBYUUsTUFBTSxHQUFHLEtBQ3JCRCxDQUFBQSxjQUFjRSxhQUFhRixVQUFVQyxNQUFNLEtBQUssSUFBSTtnQkFDckRFLFFBQVFDLElBQUksQ0FBQztvQkFDVDtvQkFDQTtvQkFDQTtvQkFDQTtpQkFDSCxDQUFDQyxJQUFJLENBQUM7WUFDWDtZQUNBLElBQUk7Z0JBQ0EsSUFBSSxDQUFFTixDQUFBQSxnQkFBZ0IsSUFBRyxLQUFNQyxjQUFjRSxXQUFXO29CQUNwRCxNQUFNLENBQUNGLFdBQVdNLGlCQUFpQixHQUFHbEIsK0RBQXFCQSxDQUFDVztvQkFDNURILFdBQVdMLFVBQVUsR0FBR1MsYUFBYSxFQUFFO29CQUN2Q0osV0FBV0osa0JBQWtCLEdBQUdjLG9CQUFvQixFQUFFO2dCQUMxRCxPQUNL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QUFLakIsV0FBVztZQUN0QyxNQUFNSCxlQUFlWixxREFBV0EsQ0FBQyxJQUFJLENBQUNnQyxnQkFBZ0IsRUFBRVksTUFBTVosZ0JBQWdCO1lBQzlFLElBQUlwQixpQkFBaUJHLGFBQWFILGFBQWFFLE1BQU0sR0FBRyxHQUFHO2dCQUN2RCtCLGVBQWViLGdCQUFnQixHQUFHcEI7WUFDdEM7UUFDSjtRQUNBLE9BQU8sSUFBSW1CLGVBQWVjO0lBQzlCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9haS5qcz85Y2FlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlUGFydGlhbEpzb24gfSBmcm9tIFwiLi4vdXRpbHMvanNvbi5qc1wiO1xuaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIF9tZXJnZUxpc3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRUb29sQ2FsbFBhcnNlciwgfSBmcm9tIFwiLi90b29sLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYW4gQUkgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEFJTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmxjX2FsaWFzZXMsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiBcInRvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBrd2FyZ3MpIHtcbiAgICAgICAgbGV0IGluaXRQYXJhbXM7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBrd2FyZ3MgPz8ge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IGZpZWxkcztcbiAgICAgICAgICAgIGNvbnN0IHJhd1Rvb2xDYWxscyA9IGluaXRQYXJhbXMuYWRkaXRpb25hbF9rd2FyZ3M/LnRvb2xfY2FsbHM7XG4gICAgICAgICAgICBjb25zdCB0b29sQ2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHM7XG4gICAgICAgICAgICBpZiAoIShyYXdUb29sQ2FsbHMgPT0gbnVsbCkgJiZcbiAgICAgICAgICAgICAgICByYXdUb29sQ2FsbHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICh0b29sQ2FsbHMgPT09IHVuZGVmaW5lZCB8fCB0b29sQ2FsbHMubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihbXG4gICAgICAgICAgICAgICAgICAgIFwiTmV3IExhbmdDaGFpbiBwYWNrYWdlcyBhcmUgYXZhaWxhYmxlIHRoYXQgbW9yZSBlZmZpY2llbnRseSBoYW5kbGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0b29sIGNhbGxpbmcuXFxuXFxuUGxlYXNlIHVwZ3JhZGUgeW91ciBwYWNrYWdlcyB0byB2ZXJzaW9ucyB0aGF0IHNldFwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1lc3NhZ2UgdG9vbCBjYWxscy4gZS5nLiwgYHlhcm4gYWRkIEBsYW5nY2hhaW4vYW50aHJvcGljYCxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ5YXJuIGFkZCBAbGFuZ2NoYWluL29wZW5haWAsIGV0Yy5cIixcbiAgICAgICAgICAgICAgICBdLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmF3VG9vbENhbGxzID09IG51bGwpICYmIHRvb2xDYWxscyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFt0b29sQ2FsbHMsIGludmFsaWRUb29sQ2FsbHNdID0gZGVmYXVsdFRvb2xDYWxsUGFyc2VyKHJhd1Rvb2xDYWxscyk7XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMudG9vbF9jYWxscyA9IHRvb2xDYWxscyA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPSBpbnZhbGlkVG9vbENhbGxzID8/IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID8/IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiBwYXJzaW5nIGZhaWxzXG4gICAgICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxzID0gW107XG4gICAgICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTYWRseSwgVHlwZVNjcmlwdCBvbmx5IGFsbG93cyBzdXBlcigpIGNhbGxzIGF0IHJvb3QgaWYgdGhlIGNsYXNzIGhhc1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIHdpdGggaW5pdGlhbGl6ZXJzLCBzbyB3ZSBoYXZlIHRvIGNoZWNrIHR5cGVzIHR3aWNlLlxuICAgICAgICBzdXBlcihpbml0UGFyYW1zKTtcbiAgICAgICAgLy8gVGhlc2UgYXJlIHR5cGVkIGFzIG9wdGlvbmFsIHRvIGF2b2lkIGJyZWFraW5nIGNoYW5nZXMgYW5kIGFsbG93IGZvciBjYXN0aW5nXG4gICAgICAgIC8vIGZyb20gQmFzZU1lc3NhZ2UuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGluaXRQYXJhbXMgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMudG9vbF9jYWxscyA9IGluaXRQYXJhbXMudG9vbF9jYWxscyA/PyB0aGlzLnRvb2xfY2FsbHM7XG4gICAgICAgICAgICB0aGlzLmludmFsaWRfdG9vbF9jYWxscyA9XG4gICAgICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkFJTWVzc2FnZVwiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYWlcIjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBSU1lc3NhZ2UoeCkge1xuICAgIHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwiYWlcIjtcbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGFuIEFJIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuICogb3RoZXIgQUkgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBBSU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBsZXQgaW5pdFBhcmFtcztcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgY29udGVudDogZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZpZWxkcy50b29sX2NhbGxfY2h1bmtzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkVG9vbENhbGxzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2xDYWxsQ2h1bmsgb2YgZmllbGRzLnRvb2xfY2FsbF9jaHVua3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VkQXJncyA9IHt9O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBwYXJzZVBhcnRpYWxKc29uKHRvb2xDYWxsQ2h1bmsuYXJncyA/PyBcInt9XCIpID8/IHt9O1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhcnNlZEFyZ3MgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShwYXJzZWRBcmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFsZm9ybWVkIHRvb2wgY2FsbCBjaHVuayBhcmdzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbENodW5rLm5hbWUgPz8gXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IHBhcnNlZEFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGxDaHVuay5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUb29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbENodW5rLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiB0b29sQ2FsbENodW5rLmFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGxDaHVuay5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBcIk1hbGZvcm1lZCBhcmdzLlwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiB0b29sQ2FsbHMsXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBpbnZhbGlkVG9vbENhbGxzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTYWRseSwgVHlwZVNjcmlwdCBvbmx5IGFsbG93cyBzdXBlcigpIGNhbGxzIGF0IHJvb3QgaWYgdGhlIGNsYXNzIGhhc1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIHdpdGggaW5pdGlhbGl6ZXJzLCBzbyB3ZSBoYXZlIHRvIGNoZWNrIHR5cGVzIHR3aWNlLlxuICAgICAgICBzdXBlcihpbml0UGFyYW1zKTtcbiAgICAgICAgLy8gTXVzdCByZWRlY2xhcmUgdG9vbCBjYWxsIGZpZWxkcyBzaW5jZSB0aGVyZSBpcyBubyBtdWx0aXBsZSBpbmhlcml0YW5jZSBpbiBKUy5cbiAgICAgICAgLy8gVGhlc2UgYXJlIHR5cGVkIGFzIG9wdGlvbmFsIHRvIGF2b2lkIGJyZWFraW5nIGNoYW5nZXMgYW5kIGFsbG93IGZvciBjYXN0aW5nXG4gICAgICAgIC8vIGZyb20gQmFzZU1lc3NhZ2UuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfY2h1bmtzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfY2h1bmtzID1cbiAgICAgICAgICAgIGluaXRQYXJhbXM/LnRvb2xfY2FsbF9jaHVua3MgPz8gdGhpcy50b29sX2NhbGxfY2h1bmtzO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zPy50b29sX2NhbGxzID8/IHRoaXMudG9vbF9jYWxscztcbiAgICAgICAgdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcz8uaW52YWxpZF90b29sX2NhbGxzID8/IHRoaXMuaW52YWxpZF90b29sX2NhbGxzO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmxjX2FsaWFzZXMsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiBcInRvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFwidG9vbF9jYWxsX2NodW5rc1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICBjb25zdCBjb21iaW5lZEZpZWxkcyA9IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMudG9vbF9jYWxsX2NodW5rcyAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjaHVuay50b29sX2NhbGxfY2h1bmtzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhd1Rvb2xDYWxscyA9IF9tZXJnZUxpc3RzKHRoaXMudG9vbF9jYWxsX2NodW5rcywgY2h1bmsudG9vbF9jYWxsX2NodW5rcyk7XG4gICAgICAgICAgICBpZiAocmF3VG9vbENhbGxzICE9PSB1bmRlZmluZWQgJiYgcmF3VG9vbENhbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb21iaW5lZEZpZWxkcy50b29sX2NhbGxfY2h1bmtzID0gcmF3VG9vbENhbGxzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlQ2h1bmsoY29tYmluZWRGaWVsZHMpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwYXJzZVBhcnRpYWxKc29uIiwiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJfbWVyZ2VMaXN0cyIsImRlZmF1bHRUb29sQ2FsbFBhcnNlciIsIkFJTWVzc2FnZSIsImxjX2FsaWFzZXMiLCJ0b29sX2NhbGxzIiwiaW52YWxpZF90b29sX2NhbGxzIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJrd2FyZ3MiLCJpbml0UGFyYW1zIiwiY29udGVudCIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmF3VG9vbENhbGxzIiwidG9vbENhbGxzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29uc29sZSIsIndhcm4iLCJqb2luIiwiaW52YWxpZFRvb2xDYWxscyIsImUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibGNfbmFtZSIsIl9nZXRUeXBlIiwiaXNBSU1lc3NhZ2UiLCJ4IiwiQUlNZXNzYWdlQ2h1bmsiLCJ0b29sX2NhbGxfY2h1bmtzIiwidG9vbENhbGxDaHVuayIsInBhcnNlZEFyZ3MiLCJhcmdzIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJwdXNoIiwibmFtZSIsImlkIiwiZXJyb3IiLCJjb25jYXQiLCJjaHVuayIsImNvbWJpbmVkRmllbGRzIiwicmVzcG9uc2VfbWV0YWRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/base.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/base.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* binding */ _mergeDicts),\n/* harmony export */   _mergeLists: () => (/* binding */ _mergeLists),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* binding */ isOpenAIToolCallArray),\n/* harmony export */   mergeContent: () => (/* binding */ mergeContent)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return [\n            ...firstContent,\n            ...secondContent\n        ];\n    // If the first content is a list and second is a string\n    } else {\n        // Otherwise, add the second content as a new element of the list\n        return [\n            ...firstContent,\n            {\n                type: \"text\",\n                text: secondContent\n            }\n        ];\n    }\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\",\n            response_metadata: \"response_metadata\"\n        };\n    }\n    /**\n     * @deprecated\n     * Use {@link BaseMessage.content} instead.\n     */ get text() {\n        return typeof this.content === \"string\" ? this.content : \"\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs,\n                response_metadata: {}\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        if (!fields.response_metadata) {\n            // eslint-disable-next-line no-param-reassign\n            fields.response_metadata = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Response metadata. For example: response headers, logprobs, token counts. */ Object.defineProperty(this, \"response_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n        this.response_metadata = fields.response_metadata;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\nfunction _mergeDicts(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nleft, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nright) {\n    const merged = {\n        ...left\n    };\n    for (const [key, value] of Object.entries(right)){\n        if (merged[key] == null) {\n            merged[key] = value;\n        } else if (value == null) {\n            continue;\n        } else if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) {\n            throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n        } else if (typeof merged[key] === \"string\") {\n            merged[key] = merged[key] + value;\n        } else if (!Array.isArray(merged[key]) && typeof merged[key] === \"object\") {\n            merged[key] = _mergeDicts(merged[key], value);\n        } else if (Array.isArray(merged[key])) {\n            merged[key] = _mergeLists(merged[key], value);\n        } else if (merged[key] === value) {\n            continue;\n        } else {\n            console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n        }\n    }\n    return merged;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeLists(left, right) {\n    if (left === undefined && right === undefined) {\n        return undefined;\n    } else if (left === undefined || right === undefined) {\n        return left || right;\n    } else {\n        const merged = [\n            ...left\n        ];\n        for (const item of right){\n            if (typeof item === \"object\" && \"index\" in item && typeof item.index === \"number\") {\n                const toMerge = merged.findIndex((leftItem)=>leftItem.index === item.index);\n                if (toMerge !== -1) {\n                    merged[toMerge] = _mergeDicts(merged[toMerge], item);\n                } else {\n                    merged.push(item);\n                }\n            } else {\n                merged.push(item);\n            }\n        }\n        return merged;\n    }\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDaEQsU0FBU0MsYUFBYUMsWUFBWSxFQUFFQyxhQUFhO0lBQ3BELCtCQUErQjtJQUMvQixJQUFJLE9BQU9ELGlCQUFpQixVQUFVO1FBQ2xDLElBQUksT0FBT0Msa0JBQWtCLFVBQVU7WUFDbkMsT0FBT0QsZUFBZUM7UUFDMUIsT0FDSztZQUNELE9BQU87Z0JBQUM7b0JBQUVDLE1BQU07b0JBQVFDLE1BQU1IO2dCQUFhO21CQUFNQzthQUFjO1FBQ25FO0lBQ0EscUJBQXFCO0lBQ3pCLE9BQ0ssSUFBSUcsTUFBTUMsT0FBTyxDQUFDSixnQkFBZ0I7UUFDbkMsT0FBTztlQUFJRDtlQUFpQkM7U0FBYztJQUMxQyx3REFBd0Q7SUFDNUQsT0FDSztRQUNELGlFQUFpRTtRQUNqRSxPQUFPO2VBQUlEO1lBQWM7Z0JBQUVFLE1BQU07Z0JBQVFDLE1BQU1GO1lBQWM7U0FBRTtJQUNuRTtBQUNKO0FBQ0E7Ozs7Q0FJQyxHQUNNLE1BQU1LLG9CQUFvQlIsK0RBQVlBO0lBQ3pDLElBQUlTLGFBQWE7UUFDYiwrQ0FBK0M7UUFDL0MsT0FBTztZQUNIQyxtQkFBbUI7WUFDbkJDLG1CQUFtQjtRQUN2QjtJQUNKO0lBQ0E7OztLQUdDLEdBQ0QsSUFBSU4sT0FBTztRQUNQLE9BQU8sT0FBTyxJQUFJLENBQUNPLE9BQU8sS0FBSyxXQUFXLElBQUksQ0FBQ0EsT0FBTyxHQUFHO0lBQzdEO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxNQUFNLENBQUU7UUFDSixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQ0xGLFNBQVNFO2dCQUNUSixtQkFBbUJLO2dCQUNuQkosbUJBQW1CLENBQUM7WUFDeEI7UUFDSjtRQUNBLDZGQUE2RjtRQUM3RixJQUFJLENBQUNHLE9BQU9K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QUN0QztBQUNPLFNBQVN3QyxjQUFjQyxXQUFXO0lBQ3JDLE9BQU8sT0FBT0EsYUFBYXpCLGFBQWE7QUFDNUM7QUFDTyxTQUFTMEIsbUJBQW1CRCxXQUFXO0lBQzFDLE9BQVFELGNBQWNDLGdCQUNsQixPQUFPQSxZQUFZRSxNQUFNLEtBQUs7QUFDdEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9iYXNlLmpzPzAzYzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4uL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VDb250ZW50KGZpcnN0Q29udGVudCwgc2Vjb25kQ29udGVudCkge1xuICAgIC8vIElmIGZpcnN0IGNvbnRlbnQgaXMgYSBzdHJpbmdcbiAgICBpZiAodHlwZW9mIGZpcnN0Q29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAodHlwZW9mIHNlY29uZENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdENvbnRlbnQgKyBzZWNvbmRDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBmaXJzdENvbnRlbnQgfSwgLi4uc2Vjb25kQ29udGVudF07XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgYm90aCBhcmUgYXJyYXlzXG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc2Vjb25kQ29udGVudCkpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5maXJzdENvbnRlbnQsIC4uLnNlY29uZENvbnRlbnRdO1xuICAgICAgICAvLyBJZiB0aGUgZmlyc3QgY29udGVudCBpcyBhIGxpc3QgYW5kIHNlY29uZCBpcyBhIHN0cmluZ1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBhZGQgdGhlIHNlY29uZCBjb250ZW50IGFzIGEgbmV3IGVsZW1lbnQgb2YgdGhlIGxpc3RcbiAgICAgICAgcmV0dXJuIFsuLi5maXJzdENvbnRlbnQsIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IHNlY29uZENvbnRlbnQgfV07XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgdHlwZXMgb2YgbWVzc2FnZXMgaW4gYSBjb252ZXJzYXRpb24uIEl0IGluY2x1ZGVzXG4gKiBwcm9wZXJ0aWVzIGxpa2UgYGNvbnRlbnRgLCBgbmFtZWAsIGFuZCBgYWRkaXRpb25hbF9rd2FyZ3NgLiBJdCBhbHNvXG4gKiBpbmNsdWRlcyBtZXRob2RzIGxpa2UgYHRvRGljdCgpYCBhbmQgYF9nZXRUeXBlKClgLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2UgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IFwiYWRkaXRpb25hbF9rd2FyZ3NcIixcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBcInJlc3BvbnNlX21ldGFkYXRhXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogVXNlIHtAbGluayBCYXNlTWVzc2FnZS5jb250ZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IHRoaXMuY29udGVudCA6IFwiXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAga3dhcmdzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGt3YXJncyxcbiAgICAgICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YToge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYWRkaXRpb25hbF9rd2FyZ3MgaXMgcGFzc2VkIGludG8gc3VwZXIoKSBmb3Igc2VyaWFsaXphdGlvblxuICAgICAgICBpZiAoIWZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMuYWRkaXRpb25hbF9rd2FyZ3MgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwibWVzc2FnZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb250ZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgbWVzc2FnZSBzZW5kZXIgaW4gYSBtdWx0aS11c2VyIGNoYXQuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEFkZGl0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRkaXRpb25hbF9rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFJlc3BvbnNlIG1ldGFkYXRhLiBGb3IgZXhhbXBsZTogcmVzcG9uc2UgaGVhZGVycywgbG9ncHJvYnMsIHRva2VuIGNvdW50cy4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVzcG9uc2VfbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGZpZWxkcy5jb250ZW50O1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxfa3dhcmdzID0gZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzO1xuICAgICAgICB0aGlzLnJlc3BvbnNlX21ldGFkYXRhID0gZmllbGRzLnJlc3BvbnNlX21ldGFkYXRhO1xuICAgIH1cbiAgICB0b0RpY3QoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLl9nZXRUeXBlKCksXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnRvSlNPTigpXG4gICAgICAgICAgICAgICAgLmt3YXJncyxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNPcGVuQUlUb29sQ2FsbEFycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgICB2YWx1ZS5ldmVyeSgodikgPT4gdHlwZW9mIHYuaW5kZXggPT09IFwibnVtYmVyXCIpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VEaWN0cyhcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5sZWZ0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5yaWdodFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbikge1xuICAgIGNvbnN0IG1lcmdlZCA9IHsgLi4ubGVmdCB9O1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJpZ2h0KSkge1xuICAgICAgICBpZiAobWVyZ2VkW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbWVyZ2VkW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gIT09IHR5cGVvZiB2YWx1ZSB8fFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkgIT09IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpZWxkWyR7a2V5fV0gYWxyZWFkeSBleGlzdHMgaW4gdGhlIG1lc3NhZ2UgY2h1bmssIGJ1dCB3aXRoIGEgZGlmZmVyZW50IHR5cGUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lcmdlZFtrZXldID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IG1lcmdlZFtrZXldICsgdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pICYmIHR5cGVvZiBtZXJnZWRba2V5XSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgbWVyZ2VkW2tleV0gPSBfbWVyZ2VEaWN0cyhtZXJnZWRba2V5XSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IF9tZXJnZUxpc3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVyZ2VkW2tleV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgZmllbGRbJHtrZXl9XSBhbHJlYWR5IGV4aXN0cyBpbiB0aGlzIG1lc3NhZ2UgY2h1bmsgYW5kIHZhbHVlIGhhcyB1bnN1cHBvcnRlZCB0eXBlLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWQ7XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIF9tZXJnZUxpc3RzKGxlZnQsIHJpZ2h0KSB7XG4gICAgaWYgKGxlZnQgPT09IHVuZGVmaW5lZCAmJiByaWdodCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxlZnQgPT09IHVuZGVmaW5lZCB8fCByaWdodCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWZ0IHx8IHJpZ2h0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gWy4uLmxlZnRdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmlnaHQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIFwiaW5kZXhcIiBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGl0ZW0uaW5kZXggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b01lcmdlID0gbWVyZ2VkLmZpbmRJbmRleCgobGVmdEl0ZW0pID0+IGxlZnRJdGVtLmluZGV4ID09PSBpdGVtLmluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodG9NZXJnZSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkW3RvTWVyZ2VdID0gX21lcmdlRGljdHMobWVyZ2VkW3RvTWVyZ2VdLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lcmdlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbiAqIG1lc3NhZ2UgY2h1bmtzLiBJdCBpbmNsdWRlcyBhIG1ldGhvZCBgX21lcmdlX2t3YXJnc19kaWN0KClgIGZvciBtZXJnaW5nXG4gKiBhZGRpdGlvbmFsIGtleXdvcmQgYXJndW1lbnRzIGZyb20gYW5vdGhlciBgQmFzZU1lc3NhZ2VDaHVua2AgaW50byB0aGlzXG4gKiBvbmUuIEl0IGFsc28gb3ZlcnJpZGVzIHRoZSBgX19hZGRfXygpYCBtZXRob2QgdG8gc3VwcG9ydCBjb25jYXRlbmF0aW9uXG4gKiBvZiBgQmFzZU1lc3NhZ2VDaHVua2AgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtZXNzYWdlTGlrZT8uX2dldFR5cGUgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VNZXNzYWdlQ2h1bmsobWVzc2FnZUxpa2UpIHtcbiAgICByZXR1cm4gKGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpICYmXG4gICAgICAgIHR5cGVvZiBtZXNzYWdlTGlrZS5jb25jYXQgPT09IFwiZnVuY3Rpb25cIik7XG59XG4iXSwibmFtZXMiOlsiU2VyaWFsaXphYmxlIiwibWVyZ2VDb250ZW50IiwiZmlyc3RDb250ZW50Iiwic2Vjb25kQ29udGVudCIsInR5cGUiLCJ0ZXh0IiwiQXJyYXkiLCJpc0FycmF5IiwiQmFzZU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImNvbnRlbnQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImt3YXJncyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJuYW1lIiwidG9EaWN0IiwiX2dldFR5cGUiLCJkYXRhIiwidG9KU09OIiwiaXNPcGVuQUlUb29sQ2FsbEFycmF5IiwiZXZlcnkiLCJ2IiwiaW5kZXgiLCJfbWVyZ2VEaWN0cyIsImxlZnQiLCJyaWdodCIsIm1lcmdlZCIsImtleSIsImVudHJpZXMiLCJFcnJvciIsIl9tZXJnZUxpc3RzIiwiY29uc29sZSIsIndhcm4iLCJ1bmRlZmluZWQiLCJpdGVtIiwidG9NZXJnZSIsImZpbmRJbmRleCIsImxlZnRJdGVtIiwicHVzaCIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJpc0Jhc2VNZXNzYWdlIiwibWVzc2FnZUxpa2UiLCJpc0Jhc2VNZXNzYWdlQ2h1bmsiLCJjb25jYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/chat.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/chat.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            role: this.role\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY2hhdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSxvQkFBb0JKLGlEQUFXQTtJQUN4QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsT0FBT0Msb0JBQW9CO1FBQ3ZCLE9BQU9GO0lBQ1g7SUFDQUcsWUFBWUMsTUFBTSxFQUFFQyxJQUFJLENBQUU7UUFDdEIsSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsdUZBQXVGO1lBQ3ZGQSxTQUFTO2dCQUFFRSxTQUFTRjtnQkFBUUMsTUFBTUE7WUFBSztRQUMzQztRQUNBLEtBQUssQ0FBQ0Q7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNQLElBQUksR0FBR0QsT0FBT0MsSUFBSTtJQUMzQjtJQUNBUSxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0EsT0FBT0MsV0FBV0MsT0FBTyxFQUFFO1FBQ3ZCLE9BQU9BLFFBQVFGLFFBQVEsT0FBTztJQUNsQztBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcseUJBQXlCbkIsc0RBQWdCQTtJQUNsRCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FFLFlBQVlDLE1BQU0sRUFBRUMsSUFBSSxDQUFFO1FBQ3RCLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLHVGQUF1RjtZQUN2RkEsU0FBUztnQkFBRUUsU0FBU0Y7Z0JBQVFDLE1BQU1BO1lBQUs7UUFDM0M7UUFDQSxLQUFLLENBQUNEO1FBQ05HLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDUCxJQUFJLEdBQUdELE9BQU9DLElBQUk7SUFDM0I7SUFDQVEsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBSSxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlGLGlCQUFpQjtZQUN4QlYsU0FBU1Isc0RBQVlBLENBQUMsSUFBSSxDQUFDUSxPQUFPLEVBQUVZLE1BQU1aLE9BQU87WUFDakRhLG1CQUFtQnBCLHFEQUFXQSxDQUFDLElBQUksQ0FBQ29CLGlCQUFpQixFQUFFRCxNQUFNQyxpQkFBaUI7WUFDOUVDLG1CQUFtQnJCLHFEQUFXQSxDQUFDLElBQUksQ0FBQ3FCLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVmLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1FBQ25CO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2NoYXQuanM/YzE3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGF0IG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdE1lc3NhZ2VcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jaGF0TWVzc2FnZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gQ2hhdE1lc3NhZ2U7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgcm9sZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgcm9sZTogcm9sZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJnZW5lcmljXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBjaGF0IG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuICogb3RoZXIgY2hhdCBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdE1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIHJvbGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIHJvbGU6IHJvbGUgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb2xlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucm9sZSA9IGZpZWxkcy5yb2xlO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZ2VuZXJpY1wiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICByb2xlOiB0aGlzLnJvbGUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIkNoYXRNZXNzYWdlIiwibGNfbmFtZSIsIl9jaGF0TWVzc2FnZUNsYXNzIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJyb2xlIiwiY29udGVudCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJtZXNzYWdlIiwiQ2hhdE1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/function.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/function.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            name: this.name ?? \"\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvZnVuY3Rpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUksd0JBQXdCSixpREFBV0E7SUFDNUMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxNQUFNLEVBQ2xCLGdCQUFnQixHQUNoQkMsSUFBSSxDQUFFO1FBQ0YsSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsdUZBQXVGO1lBQ3ZGQSxTQUFTO2dCQUFFRSxTQUFTRjtnQkFBUUMsTUFBTUE7WUFBSztRQUMzQztRQUNBLEtBQUssQ0FBQ0Q7SUFDVjtJQUNBRyxXQUFXO1FBQ1AsT0FBTztJQUNYO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQyw2QkFBNkJWLHNEQUFnQkE7SUFDdEQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBSyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FFLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYscUJBQXFCO1lBQzVCRixTQUFTUCxzREFBWUEsQ0FBQyxJQUFJLENBQUNPLE9BQU8sRUFBRUksTUFBTUosT0FBTztZQUNqREssbUJBQW1CWCxxREFBV0EsQ0FBQyxJQUFJLENBQUNXLGlCQUFpQixFQUFFRCxNQUFNQyxpQkFBaUI7WUFDOUVDLG1CQUFtQloscURBQVdBLENBQUMsSUFBSSxDQUFDWSxpQkFBaUIsRUFBRUYsTUFBTUUsaUJBQWlCO1lBQzlFUCxNQUFNLElBQUksQ0FBQ0EsSUFBSSxJQUFJO1FBQ3ZCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Z1bmN0aW9uLmpzPzg5YTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZnVuY3Rpb24gbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVuY3Rpb25NZXNzYWdlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAgbmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgbmFtZTogbmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgZnVuY3Rpb24gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZFxuICogd2l0aCBvdGhlciBmdW5jdGlvbiBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkZ1bmN0aW9uTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IFwiXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIkZ1bmN0aW9uTWVzc2FnZSIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIm5hbWUiLCJjb250ZW50IiwiX2dldFR5cGUiLCJGdW5jdGlvbk1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/function.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/human.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/human.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaHVtYW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUkscUJBQXFCSixpREFBV0E7SUFDekMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQywwQkFBMEJOLHNEQUFnQkE7SUFDbkQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FFLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsa0JBQWtCO1lBQ3pCRyxTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRUQsTUFBTUMsT0FBTztZQUNqREMsbUJBQW1CUixxREFBV0EsQ0FBQyxJQUFJLENBQUNRLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVDLG1CQUFtQlQscURBQVdBLENBQUMsSUFBSSxDQUFDUyxpQkFBaUIsRUFBRUgsTUFBTUcsaUJBQWlCO1FBQ2xGO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2h1bWFuLmpzPzcyMTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgaHVtYW4gbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSHVtYW5NZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJodW1hblwiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgaHVtYW4gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBodW1hbiBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJodW1hblwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJIdW1hbk1lc3NhZ2UiLCJsY19uYW1lIiwiX2dldFR5cGUiLCJIdW1hbk1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiY29udGVudCIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/human.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.convertToChunk),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isOpenAIToolCallArray),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)\n/* harmony export */ });\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n// TODO: Use a star export when we deprecate the\n// existing \"ToolCall\" type in \"base.js\".\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFDRTtBQUNBO0FBQ0k7QUFDSDtBQUNDO0FBQ0Q7QUFDM0IsZ0RBQWdEO0FBQ2hELHlDQUF5QztBQUNrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2luZGV4LmpzP2IxYzgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYWkuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NoYXQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9odW1hbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3lzdGVtLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91dGlscy5qc1wiO1xuLy8gVE9ETzogVXNlIGEgc3RhciBleHBvcnQgd2hlbiB3ZSBkZXByZWNhdGUgdGhlXG4vLyBleGlzdGluZyBcIlRvb2xDYWxsXCIgdHlwZSBpbiBcImJhc2UuanNcIi5cbmV4cG9ydCB7IFRvb2xNZXNzYWdlLCBUb29sTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbiJdLCJuYW1lcyI6WyJUb29sTWVzc2FnZSIsIlRvb2xNZXNzYWdlQ2h1bmsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/system.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/system.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvc3lzdGVtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLHNCQUFzQkosaURBQVdBO0lBQzFDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsV0FBVztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMsMkJBQTJCTixzREFBZ0JBO0lBQ3BELE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBRSxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlGLG1CQUFtQjtZQUMxQkcsU0FBU1Isc0RBQVlBLENBQUMsSUFBSSxDQUFDUSxPQUFPLEVBQUVELE1BQU1DLE9BQU87WUFDakRDLG1CQUFtQlIscURBQVdBLENBQUMsSUFBSSxDQUFDUSxpQkFBaUIsRUFBRUYsTUFBTUUsaUJBQWlCO1lBQzlFQyxtQkFBbUJULHFEQUFXQSxDQUFDLElBQUksQ0FBQ1MsaUJBQWlCLEVBQUVILE1BQU1HLGlCQUFpQjtRQUNsRjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9zeXN0ZW0uanM/ZTViNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBzeXN0ZW0gbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbU1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN5c3RlbU1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgc3lzdGVtIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuICogb3RoZXIgc3lzdGVtIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN5c3RlbU1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJTeXN0ZW1NZXNzYWdlIiwibGNfbmFtZSIsIl9nZXRUeXBlIiwiU3lzdGVtTWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJjb250ZW50IiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/system.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/tool.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/tool.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   defaultToolCallParser: () => (/* binding */ defaultToolCallParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_id: this.tool_call_id\n        });\n    }\n}\nfunction defaultToolCallParser(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCalls) {\n    const toolCalls = [];\n    const invalidToolCalls = [];\n    for (const toolCall of rawToolCalls){\n        if (!toolCall.function) {\n            continue;\n        } else {\n            const functionName = toolCall.function.name;\n            try {\n                const functionArgs = JSON.parse(toolCall.function.arguments);\n                const parsed = {\n                    name: functionName || \"\",\n                    args: functionArgs || {},\n                    id: toolCall.id\n                };\n                toolCalls.push(parsed);\n            } catch (error) {\n                invalidToolCalls.push({\n                    name: functionName,\n                    args: toolCall.function.arguments,\n                    id: toolCall.id,\n                    error: \"Malformed args.\"\n                });\n            }\n        }\n    }\n    return [\n        toolCalls,\n        invalidToolCalls\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdG9vbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUksb0JBQW9CSixpREFBV0E7SUFDeEMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBLElBQUlDLGFBQWE7UUFDYiwrQ0FBK0M7UUFDL0MsT0FBTztZQUFFQyxjQUFjO1FBQWU7SUFDMUM7SUFDQUMsWUFBWUMsTUFBTSxFQUFFRixZQUFZLEVBQUVHLElBQUksQ0FBRTtRQUNwQyxJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQztnQkFBTUgsY0FBY0E7WUFBYTtRQUNqRTtRQUNBLEtBQUssQ0FBQ0U7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1YsWUFBWSxHQUFHRSxPQUFPRixZQUFZO0lBQzNDO0lBQ0FXLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQSxPQUFPQyxXQUFXQyxPQUFPLEVBQUU7UUFDdkIsT0FBT0EsUUFBUUYsUUFBUSxPQUFPO0lBQ2xDO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNRyx5QkFBeUJwQixzREFBZ0JBO0lBQ2xETyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDVixZQUFZLEdBQUdFLE9BQU9GLFlBQVk7SUFDM0M7SUFDQSxPQUFPRixVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FhLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUksT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixpQkFBaUI7WUFDeEJWLFNBQVNULHNEQUFZQSxDQUFDLElBQUksQ0FBQ1MsT0FBTyxFQUFFWSxNQUFNWixPQUFPO1lBQ2pEYSxtQkFBbUJyQixxREFBV0EsQ0FBQyxJQUFJLENBQUNxQixpQkFBaUIsRUFBRUQsTUFBTUMsaUJBQWlCO1lBQzlFQyxtQkFBbUJ0QixxREFBV0EsQ0FBQyxJQUFJLENBQUNzQixpQkFBaUIsRUFBRUYsTUFBTUUsaUJBQWlCO1lBQzlFbEIsY0FBYyxJQUFJLENBQUNBLFlBQVk7UUFDbkM7SUFDSjtBQUNKO0FBQ08sU0FBU21CLHNCQUNoQiw4REFBOEQ7QUFDOURDLFlBQVk7SUFDUixNQUFNQyxZQUFZLEVBQUU7SUFDcEIsTUFBTUMsbUJBQW1CLEVBQUU7SUFDM0IsS0FBSyxNQUFNQyxZQUFZSCxhQUFjO1FBQ2pDLElBQUksQ0FBQ0csU0FBU0MsUUFBUSxFQUFFO1lBQ3BCO1FBQ0osT0FDSztZQUNELE1BQU1DLGVBQWVGLFNBQVNDLFFBQVEsQ0FBQ3JCLElBQUk7WUFDM0MsSUFBSTtnQkFDQSxNQUFNdUIsZUFBZUMsS0FBS0MsS0FBSyxDQUFDTCxTQUFTQyxRQUFRLENBQUNLLFNBQVM7Z0JBQzNELE1BQU1DLFNBQVM7b0JBQ1gzQixNQUFNc0IsZ0JBQWdCO29CQUN0Qk0sTUFBTUwsZ0JBQWdCLENBQUM7b0JBQ3ZCTSxJQUFJVCxTQUFTUyxFQUFFO2dCQUNuQjtnQkFDQVgsVUFBVVksSUFBSSxDQUFDSDtZQUNuQixFQUNBLE9BQU9JLE9BQU87Z0JBQ1ZaLGlCQUFpQlcsSUFBSSxDQUFDO29CQUNsQjlCLE1BQU1zQjtvQkFDTk0sTUFBTVIsU0FBU0MsUUFBUSxDQUFDSyxTQUFTO29CQUNqQ0csSUFBSVQsU0FBU1MsRUFBRTtvQkFDZkUsT0FBTztnQkFDWDtZQUNKO1FBQ0o7SUFDSjtJQUNBLE9BQU87UUFBQ2I7UUFBV0M7S0FBaUI7QUFDeEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy90b29sLmpzPzMwMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgdG9vbCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlRvb2xNZXNzYWdlXCI7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4geyB0b29sX2NhbGxfaWQ6IFwidG9vbF9jYWxsX2lkXCIgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCB0b29sX2NhbGxfaWQsIG5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIG5hbWUsIHRvb2xfY2FsbF9pZDogdG9vbF9jYWxsX2lkIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsX2lkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbF9jYWxsX2lkID0gZmllbGRzLnRvb2xfY2FsbF9pZDtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInRvb2xcIjtcbiAgICB9XG4gICAgc3RhdGljIGlzSW5zdGFuY2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcInRvb2xcIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHRvb2wgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZFxuICogd2l0aCBvdGhlciB0b29sIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfaWQgPSBmaWVsZHMudG9vbF9jYWxsX2lkO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVG9vbE1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG9vbFwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHRoaXMudG9vbF9jYWxsX2lkLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFRvb2xDYWxsUGFyc2VyKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnJhd1Rvb2xDYWxscykge1xuICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgIGNvbnN0IGludmFsaWRUb29sQ2FsbHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRvb2xDYWxsIG9mIHJhd1Rvb2xDYWxscykge1xuICAgICAgICBpZiAoIXRvb2xDYWxsLmZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uQXJncyA9IEpTT04ucGFyc2UodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBmdW5jdGlvbkFyZ3MgfHwge30sXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRvb2xDYWxscy5wdXNoKHBhcnNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpbnZhbGlkVG9vbENhbGxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogXCJNYWxmb3JtZWQgYXJncy5cIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW3Rvb2xDYWxscywgaW52YWxpZFRvb2xDYWxsc107XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJUb29sTWVzc2FnZSIsImxjX25hbWUiLCJsY19hbGlhc2VzIiwidG9vbF9jYWxsX2lkIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJuYW1lIiwiY29udGVudCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJtZXNzYWdlIiwiVG9vbE1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImRlZmF1bHRUb29sQ2FsbFBhcnNlciIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsImludmFsaWRUb29sQ2FsbHMiLCJ0b29sQ2FsbCIsImZ1bmN0aW9uIiwiZnVuY3Rpb25OYW1lIiwiZnVuY3Rpb25BcmdzIiwiSlNPTiIsInBhcnNlIiwiYXJndW1lbnRzIiwicGFyc2VkIiwiYXJncyIsImlkIiwicHVzaCIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/utils.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/utils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* binding */ convertToChunk),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(messageLike);\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messageLike)) {\n        return messageLike;\n    }\n    const [type, content] = messageLike;\n    if (type === \"human\" || type === \"user\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n            content\n        });\n    } else if (type === \"ai\" || type === \"assistant\") {\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage({\n            content\n        });\n    } else if (type === \"system\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessage({\n            content\n        });\n    } else {\n        throw new Error(`Unable to coerce message from array: only human, AI, or system message coercion is currently supported.`);\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        string_messages.push(`${role}: ${nameStr}${m.content}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(storedMessage.data);\n        case \"system\":\n            return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new _tool_js__WEBPACK_IMPORTED_MODULE_6__.ToolMessage(storedMessage.data);\n        case \"chat\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\nfunction convertToChunk(message) {\n    const type = message._getType();\n    if (type === \"human\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessageChunk({\n            ...message\n        });\n    } else if (type === \"ai\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n            ...message\n        });\n    } else if (type === \"system\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessageChunk({\n            ...message\n        });\n    } else if (type === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessageChunk({\n            ...message\n        });\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    } else if (_chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage.isInstance(message)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessageChunk({\n            ...message\n        });\n    } else {\n        throw new Error(\"Unknown message type.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUEyQztBQUNrQjtBQUNUO0FBQ1k7QUFDTDtBQUNZO0FBQy9CO0FBQ2pDLFNBQVNZLDJCQUEyQkMsV0FBVztJQUNsRCxJQUFJLE9BQU9BLGdCQUFnQixVQUFVO1FBQ2pDLE9BQU8sSUFBSVosbURBQVlBLENBQUNZO0lBQzVCLE9BQ0ssSUFBSWIsdURBQWFBLENBQUNhLGNBQWM7UUFDakMsT0FBT0E7SUFDWDtJQUNBLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHRjtJQUN4QixJQUFJQyxTQUFTLFdBQVdBLFNBQVMsUUFBUTtRQUNyQyxPQUFPLElBQUliLG1EQUFZQSxDQUFDO1lBQUVjO1FBQVE7SUFDdEMsT0FDSyxJQUFJRCxTQUFTLFFBQVFBLFNBQVMsYUFBYTtRQUM1QyxPQUFPLElBQUlYLDZDQUFTQSxDQUFDO1lBQUVZO1FBQVE7SUFDbkMsT0FDSyxJQUFJRCxTQUFTLFVBQVU7UUFDeEIsT0FBTyxJQUFJVCxxREFBYUEsQ0FBQztZQUFFVTtRQUFRO0lBQ3ZDLE9BQ0s7UUFDRCxNQUFNLElBQUlDLE1BQU0sQ0FBQyx1R0FBdUcsQ0FBQztJQUM3SDtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sU0FBU0MsZ0JBQWdCQyxRQUFRLEVBQUVDLGNBQWMsT0FBTyxFQUFFQyxXQUFXLElBQUk7SUFDNUUsTUFBTUMsa0JBQWtCLEVBQUU7SUFDMUIsS0FBSyxNQUFNQyxLQUFLSixTQUFVO1FBQ3RCLElBQUlLO1FBQ0osSUFBSUQsRUFBRUUsUUFBUSxPQUFPLFNBQVM7WUFDMUJELE9BQU9KO1FBQ1gsT0FDSyxJQUFJRyxFQUFFRSxRQUFRLE9BQU8sTUFBTTtZQUM1QkQsT0FBT0g7UUFDWCxPQUNLLElBQUlFLEVBQUVFLFFBQVEsT0FBTyxVQUFVO1lBQ2hDRCxPQUFPO1FBQ1gsT0FDSyxJQUFJRCxFQUFFRSxRQUFRLE9B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Q0ssSUFBSWhCLFNBQVMsVUFBVTtRQUN4QixtRUFBbUU7UUFDbkUsT0FBTyxJQUFJUiwwREFBa0JBLENBQUM7WUFBRSxHQUFHd0IsT0FBTztRQUFDO0lBQy9DLE9BQ0ssSUFBSWhCLFNBQVMsWUFBWTtRQUMxQixtRUFBbUU7UUFDbkUsT0FBTyxJQUFJSiw4REFBb0JBLENBQUM7WUFBRSxHQUFHb0IsT0FBTztRQUFDO0lBQzdDLG1FQUFtRTtJQUN2RSxPQUNLLElBQUl2QixpREFBV0EsQ0FBQ29DLFVBQVUsQ0FBQ2IsVUFBVTtRQUN0QyxtRUFBbUU7UUFDbkUsT0FBTyxJQUFJdEIsc0RBQWdCQSxDQUFDO1lBQUUsR0FBR3NCLE9BQU87UUFBQztJQUM3QyxPQUNLO1FBQ0QsTUFBTSxJQUFJZCxNQUFNO0lBQ3BCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy91dGlscy5qcz9lOTdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzQmFzZU1lc3NhZ2UsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlLCBIdW1hbk1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2h1bWFuLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vYWkuanNcIjtcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL3N5c3RlbS5qc1wiO1xuaW1wb3J0IHsgQ2hhdE1lc3NhZ2UsIENoYXRNZXNzYWdlQ2h1bmssIH0gZnJvbSBcIi4vY2hhdC5qc1wiO1xuaW1wb3J0IHsgRnVuY3Rpb25NZXNzYWdlLCBGdW5jdGlvbk1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi9mdW5jdGlvbi5qc1wiO1xuaW1wb3J0IHsgVG9vbE1lc3NhZ2UgfSBmcm9tIFwiLi90b29sLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UobWVzc2FnZUxpa2UpIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VMaWtlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKG1lc3NhZ2VMaWtlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNCYXNlTWVzc2FnZShtZXNzYWdlTGlrZSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VMaWtlO1xuICAgIH1cbiAgICBjb25zdCBbdHlwZSwgY29udGVudF0gPSBtZXNzYWdlTGlrZTtcbiAgICBpZiAodHlwZSA9PT0gXCJodW1hblwiIHx8IHR5cGUgPT09IFwidXNlclwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKHsgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJhaVwiIHx8IHR5cGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2UoeyBjb250ZW50IH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZSh7IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBjb2VyY2UgbWVzc2FnZSBmcm9tIGFycmF5OiBvbmx5IGh1bWFuLCBBSSwgb3Igc3lzdGVtIG1lc3NhZ2UgY29lcmNpb24gaXMgY3VycmVudGx5IHN1cHBvcnRlZC5gKTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBieSBtZW1vcnkgY2xhc3NlcyB0byBnZXQgYSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAqIG9mIHRoZSBjaGF0IG1lc3NhZ2UgaGlzdG9yeSwgYmFzZWQgb24gdGhlIG1lc3NhZ2UgY29udGVudCBhbmQgcm9sZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlcywgaHVtYW5QcmVmaXggPSBcIkh1bWFuXCIsIGFpUHJlZml4ID0gXCJBSVwiKSB7XG4gICAgY29uc3Qgc3RyaW5nX21lc3NhZ2VzID0gW107XG4gICAgZm9yIChjb25zdCBtIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGxldCByb2xlO1xuICAgICAgICBpZiAobS5fZ2V0VHlwZSgpID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBodW1hblByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiYWlcIikge1xuICAgICAgICAgICAgcm9sZSA9IGFpUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiU3lzdGVtXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIkZ1bmN0aW9uXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcInRvb2xcIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiVG9vbFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBtLnJvbGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bnN1cHBvcnRlZCBtZXNzYWdlIHR5cGU6ICR7bS5fZ2V0VHlwZSgpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWVTdHIgPSBtLm5hbWUgPyBgJHttLm5hbWV9LCBgIDogXCJcIjtcbiAgICAgICAgc3RyaW5nX21lc3NhZ2VzLnB1c2goYCR7cm9sZX06ICR7bmFtZVN0cn0ke20uY29udGVudH1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZ19tZXNzYWdlcy5qb2luKFwiXFxuXCIpO1xufVxuLyoqXG4gKiBNYXBzIG1lc3NhZ2VzIGZyb20gYW4gb2xkZXIgZm9ybWF0IChWMSkgdG8gdGhlIGN1cnJlbnQgYFN0b3JlZE1lc3NhZ2VgXG4gKiBmb3JtYXQuIElmIHRoZSBtZXNzYWdlIGlzIGFscmVhZHkgaW4gdGhlIGBTdG9yZWRNZXNzYWdlYCBmb3JtYXQsIGl0IGlzXG4gKiByZXR1cm5lZCBhcyBpcy4gT3RoZXJ3aXNlLCBpdCB0cmFuc2Zvcm1zIHRoZSBWMSBtZXNzYWdlIGludG8gYVxuICogYFN0b3JlZE1lc3NhZ2VgLiBUaGlzIGZ1bmN0aW9uIGlzIGltcG9ydGFudCBmb3IgbWFpbnRhaW5pbmdcbiAqIGNvbXBhdGliaWxpdHkgd2l0aCBvbGRlciBtZXNzYWdlIGZvcm1hdHMuXG4gKi9cbmZ1bmN0aW9uIG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgbWFwcGVyIHdoZW4gd2UgZGVwcmVjYXRlIHRoZSBvbGQgbWVzc2FnZSBmb3JtYXQuXG4gICAgaWYgKG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdjFNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHYxTWVzc2FnZS50eXBlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHYxTWVzc2FnZS50ZXh0LFxuICAgICAgICAgICAgICAgIHJvbGU6IHYxTWVzc2FnZS5yb2xlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBzdG9yZWRNZXNzYWdlID0gbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIHN3aXRjaCAoc3RvcmVkTWVzc2FnZS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJodW1hblwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcImFpXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwic3lzdGVtXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICBpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5hbWUgbXVzdCBiZSBkZWZpbmVkIGZvciBmdW5jdGlvbiBtZXNzYWdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICAgICAgICBpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLnRvb2xfY2FsbF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vbCBjYWxsIElEIG11c3QgYmUgZGVmaW5lZCBmb3IgdG9vbCBtZXNzYWdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgVG9vbE1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcImNoYXRcIjoge1xuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS5yb2xlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSb2xlIG11c3QgYmUgZGVmaW5lZCBmb3IgY2hhdCBtZXNzYWdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5leHBlY3RlZCB0eXBlOiAke3N0b3JlZE1lc3NhZ2UudHlwZX1gKTtcbiAgICB9XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYXJyYXkgb2YgYFN0b3JlZE1lc3NhZ2VgIGluc3RhbmNlcyBpbnRvIGFuIGFycmF5IG9mXG4gKiBgQmFzZU1lc3NhZ2VgIGluc3RhbmNlcy4gSXQgdXNlcyB0aGUgYG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZWBcbiAqIGZ1bmN0aW9uIHRvIGVuc3VyZSBhbGwgbWVzc2FnZXMgYXJlIGluIHRoZSBgU3RvcmVkTWVzc2FnZWAgZm9ybWF0LCB0aGVuXG4gKiBjcmVhdGVzIG5ldyBpbnN0YW5jZXMgb2YgdGhlIGFwcHJvcHJpYXRlIGBCYXNlTWVzc2FnZWAgc3ViY2xhc3MgYmFzZWRcbiAqIG9uIHRoZSB0eXBlIG9mIGVhY2ggbWVzc2FnZS4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHByZXBhcmUgc3RvcmVkXG4gKiBtZXNzYWdlcyBmb3IgdXNlIGluIGEgY2hhdCBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwU3RvcmVkTWVzc2FnZXNUb0NoYXRNZXNzYWdlcyhtZXNzYWdlcykge1xuICAgIHJldHVybiBtZXNzYWdlcy5tYXAobWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGFycmF5IG9mIGBCYXNlTWVzc2FnZWAgaW5zdGFuY2VzIGludG8gYW4gYXJyYXkgb2ZcbiAqIGBTdG9yZWRNZXNzYWdlYCBpbnN0YW5jZXMuIEl0IGRvZXMgdGhpcyBieSBjYWxsaW5nIHRoZSBgdG9EaWN0YCBtZXRob2RcbiAqIG9uIGVhY2ggYEJhc2VNZXNzYWdlYCwgd2hpY2ggcmV0dXJucyBhIGBTdG9yZWRNZXNzYWdlYC4gVGhpcyBmdW5jdGlvblxuICogaXMgdXNlZCB0byBwcmVwYXJlIGNoYXQgbWVzc2FnZXMgZm9yIHN0b3JhZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBDaGF0TWVzc2FnZXNUb1N0b3JlZE1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4gbWVzc2FnZS50b0RpY3QoKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvQ2h1bmsobWVzc2FnZSkge1xuICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLl9nZXRUeXBlKCk7XG4gICAgaWYgKHR5cGUgPT09IFwiaHVtYW5cIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImFpXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICB9XG4gICAgZWxzZSBpZiAoQ2hhdE1lc3NhZ2UuaXNJbnN0YW5jZShtZXNzYWdlKSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG1lc3NhZ2UgdHlwZS5cIik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzQmFzZU1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2VDaHVuayIsIkFJTWVzc2FnZSIsIkFJTWVzc2FnZUNodW5rIiwiU3lzdGVtTWVzc2FnZSIsIlN5c3RlbU1lc3NhZ2VDaHVuayIsIkNoYXRNZXNzYWdlIiwiQ2hhdE1lc3NhZ2VDaHVuayIsIkZ1bmN0aW9uTWVzc2FnZSIsIkZ1bmN0aW9uTWVzc2FnZUNodW5rIiwiVG9vbE1lc3NhZ2UiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsIm1lc3NhZ2VMaWtlIiwidHlwZSIsImNvbnRlbnQiLCJFcnJvciIsImdldEJ1ZmZlclN0cmluZyIsIm1lc3NhZ2VzIiwiaHVtYW5QcmVmaXgiLCJhaVByZWZpeCIsInN0cmluZ19tZXNzYWdlcyIsIm0iLCJyb2xlIiwiX2dldFR5cGUiLCJuYW1lU3RyIiwibmFtZSIsInB1c2giLCJqb2luIiwibWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlIiwibWVzc2FnZSIsImRhdGEiLCJ1bmRlZmluZWQiLCJ2MU1lc3NhZ2UiLCJ0ZXh0IiwidG9vbF9jYWxsX2lkIiwibWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UiLCJzdG9yZWRNZXNzYWdlIiwibWFwU3RvcmVkTWVzc2FnZXNUb0NoYXRNZXNzYWdlcyIsIm1hcCIsIm1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMiLCJ0b0RpY3QiLCJjb252ZXJ0VG9DaHVuayIsImlzSW5zdGFuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/outputs.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/dist/outputs.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* binding */ ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* binding */ GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* binding */ RUN_KEY)\n/* harmony export */ });\nconst RUN_KEY = \"__run\";\n/**\n * Chunk of a single generation. Used for streaming.\n */ class GenerationChunk {\n    constructor(fields){\n        Object.defineProperty(this, \"text\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"generationInfo\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.text = fields.text;\n        this.generationInfo = fields.generationInfo;\n    }\n    concat(chunk) {\n        return new GenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            }\n        });\n    }\n}\nclass ChatGenerationChunk extends GenerationChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"message\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.message = fields.message;\n    }\n    concat(chunk) {\n        return new ChatGenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            },\n            message: this.message.concat(chunk.message)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxVQUFVLFFBQVE7QUFDL0I7O0NBRUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsOERBQThEO1FBQzlETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxJQUFJLEdBQUdQLE9BQU9PLElBQUk7UUFDdkIsSUFBSSxDQUFDQyxjQUFjLEdBQUdSLE9BQU9RLGNBQWM7SUFDL0M7SUFDQUMsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJWixnQkFBZ0I7WUFDdkJTLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtRQUNKO0lBQ0o7QUFDSjtBQUNPLE1BQU1HLDRCQUE0QmI7SUFDckNDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTSxPQUFPLEdBQUdaLE9BQU9ZLE9BQU87SUFDakM7SUFDQUgsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJQyxvQkFBb0I7WUFDM0JKLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtZQUNBSSxTQUFTLElBQUksQ0FBQ0EsT0FBTyxDQUFDSCxNQUFNLENBQUNDLE1BQU1FLE9BQU87UUFDOUM7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0cy5qcz9kNzgwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBSVU5fS0VZID0gXCJfX3J1blwiO1xuLyoqXG4gKiBDaHVuayBvZiBhIHNpbmdsZSBnZW5lcmF0aW9uLiBVc2VkIGZvciBzdHJlYW1pbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBHZW5lcmF0aW9uQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZXh0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdlbmVyYXRpb25JbmZvXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGV4dCA9IGZpZWxkcy50ZXh0O1xuICAgICAgICB0aGlzLmdlbmVyYXRpb25JbmZvID0gZmllbGRzLmdlbmVyYXRpb25JbmZvO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0ICsgY2h1bmsudGV4dCxcbiAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAuLi5jaHVuay5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDaGF0R2VuZXJhdGlvbkNodW5rIGV4dGVuZHMgR2VuZXJhdGlvbkNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWVzc2FnZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBmaWVsZHMubWVzc2FnZTtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHQgKyBjaHVuay50ZXh0LFxuICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm86IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgIC4uLmNodW5rLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZS5jb25jYXQoY2h1bmsubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSVU5fS0VZIiwiR2VuZXJhdGlvbkNodW5rIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGV4dCIsImdlbmVyYXRpb25JbmZvIiwiY29uY2F0IiwiY2h1bmsiLCJDaGF0R2VuZXJhdGlvbkNodW5rIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompt_values.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompt_values.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptValue: () => (/* binding */ BasePromptValue),\n/* harmony export */   ChatPromptValue: () => (/* binding */ ChatPromptValue),\n/* harmony export */   ImagePromptValue: () => (/* binding */ ImagePromptValue),\n/* harmony export */   StringPromptValue: () => (/* binding */ StringPromptValue)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * Base PromptValue class. All prompt values should extend this class.\n */ class BasePromptValue extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n}\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */ class StringPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"StringPromptValue\";\n    }\n    constructor(value){\n        super({\n            value\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(this.value)\n        ];\n    }\n}\n/**\n * Class that represents a chat prompt value. It extends the\n * BasePromptValue and includes an array of BaseMessage instances.\n */ class ChatPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ChatPromptValue\";\n    }\n    constructor(fields){\n        if (Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                messages: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.messages = fields.messages;\n    }\n    toString() {\n        return (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.getBufferString)(this.messages);\n    }\n    toChatMessages() {\n        return this.messages;\n    }\n}\n/**\n * Class that represents an image prompt value. It extends the\n * BasePromptValue and includes an ImageURL instance.\n */ class ImagePromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ImagePromptValue\";\n    }\n    constructor(fields){\n        if (!(\"imageUrl\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                imageUrl: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"imageUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @ignore */ Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.imageUrl = fields.imageUrl;\n    }\n    toString() {\n        return this.imageUrl.url;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n                content: [\n                    {\n                        type: \"image_url\",\n                        image_url: {\n                            detail: this.imageUrl.detail,\n                            url: this.imageUrl.url\n                        }\n                    }\n                ]\n            })\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBc0Q7QUFDZTtBQUNyRTs7Q0FFQyxHQUNNLE1BQU1HLHdCQUF3QkgsK0RBQVlBO0FBQ2pEO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUksMEJBQTBCRDtJQUNuQyxPQUFPRSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQztZQUFFQTtRQUFNO1FBQ2RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2pCO0lBQ0FNLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ04sS0FBSztJQUNyQjtJQUNBTyxpQkFBaUI7UUFDYixPQUFPO1lBQUMsSUFBSWIsNERBQVlBLENBQUMsSUFBSSxDQUFDTSxLQUFLO1NBQUU7SUFDekM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1RLHdCQUF3Qlo7SUFDakMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixTQUFTO1lBQ3ZCLDZDQUE2QztZQUM3Q0EsU0FBUztnQkFBRUcsVUFBVUg7WUFBTztRQUNoQztRQUNBLEtBQUssQ0FBQ0E7UUFDTlIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWdCO1FBQzlDO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNZLFFBQVEsR0FBR0gsT0FBT0csUUFBUTtJQUNuQztJQUNBTixXQUFXO1FBQ1AsT0FBT1gsbUVBQWVBLENBQUMsSUFBSSxDQUFDaUIsUUFBUTtJQUN4QztJQUNBTCxpQkFBaUI7UUFDYixPQUFPLElBQUksQ0FBQ0ssUUFBUTtJQUN4QjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMseUJBQXlCakI7SUFDbEMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFFLGVBQWNBLE1BQUssR0FBSTtZQUN6Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQUVLLFVBQVVMO1lBQU87UUFDaEM7UUFDQSxLQUFLLENBQUNBO1FBQ05SLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsWUFBWSxHQUNaQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ2MsUUFBUSxHQUFHTCxPQUFPSyxRQUFRO0lBQ25DO0lBQ0FSLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ1EsUUFBUSxDQUFDQyxHQUFHO0lBQzVCO0lBQ0FSLGlCQUFpQjtRQUNiLE9BQU87WUFDSCxJQUFJYiw0REFBWUEsQ0FBQztnQkFDYnNCLFNBQVM7b0JBQ0w7d0JBQ0lDLE1BQU07d0JBQ05DLFdBQVc7NEJBQ1BDLFFBQVEsSUFBSSxDQUFDTCxRQUFRLENBQUNLLE1BQU07NEJBQzVCSixLQUFLLElBQUksQ0FBQ0QsUUFBUSxDQUFDQyxHQUFHO3dCQUMxQjtvQkFDSjtpQkFDSDtZQUNMO1NBQ0g7SUFDTDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcz8wMzIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UsIGdldEJ1ZmZlclN0cmluZywgfSBmcm9tIFwiLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuLyoqXG4gKiBCYXNlIFByb21wdFZhbHVlIGNsYXNzLiBBbGwgcHJvbXB0IHZhbHVlcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvbXB0VmFsdWUgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcHJvbXB0IHZhbHVlIGFzIGEgc3RyaW5nLiBJdCBleHRlbmRzIHRoZSBCYXNlUHJvbXB0VmFsdWVcbiAqIGNsYXNzIGFuZCBvdmVycmlkZXMgdGhlIHRvU3RyaW5nIGFuZCB0b0NoYXRNZXNzYWdlcyBtZXRob2RzLlxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nUHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTdHJpbmdQcm9tcHRWYWx1ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgICAgICBzdXBlcih7IHZhbHVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0X3ZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG4gICAgdG9DaGF0TWVzc2FnZXMoKSB7XG4gICAgICAgIHJldHVybiBbbmV3IEh1bWFuTWVzc2FnZSh0aGlzLnZhbHVlKV07XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBjaGF0IHByb21wdCB2YWx1ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VQcm9tcHRWYWx1ZSBhbmQgaW5jbHVkZXMgYW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdFByb21wdFZhbHVlIGV4dGVuZHMgQmFzZVByb21wdFZhbHVlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdFByb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgbWVzc2FnZXM6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVzc2FnZXMgPSBmaWVsZHMubWVzc2FnZXM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gZ2V0QnVmZmVyU3RyaW5nKHRoaXMubWVzc2FnZXMpO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXM7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZVByb21wdFZhbHVlIGFuZCBpbmNsdWRlcyBhbiBJbWFnZVVSTCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEltYWdlUHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJJbWFnZVByb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoIShcImltYWdlVXJsXCIgaW4gZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGltYWdlVXJsOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0X3ZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbWFnZVVybFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gZmllbGRzLmltYWdlVXJsO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VVcmwudXJsO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBIdW1hbk1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogdGhpcy5pbWFnZVVybC5kZXRhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmltYWdlVXJsLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJTZXJpYWxpemFibGUiLCJIdW1hbk1lc3NhZ2UiLCJnZXRCdWZmZXJTdHJpbmciLCJCYXNlUHJvbXB0VmFsdWUiLCJTdHJpbmdQcm9tcHRWYWx1ZSIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ0b1N0cmluZyIsInRvQ2hhdE1lc3NhZ2VzIiwiQ2hhdFByb21wdFZhbHVlIiwiZmllbGRzIiwiQXJyYXkiLCJpc0FycmF5IiwibWVzc2FnZXMiLCJJbWFnZVByb21wdFZhbHVlIiwiaW1hZ2VVcmwiLCJ1cmwiLCJjb250ZW50IiwidHlwZSIsImltYWdlX3VybCIsImRldGFpbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/retrievers/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/retrievers/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseRetriever: () => (/* binding */ BaseRetriever)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runnables/config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n/**\n * Abstract base class for a Document retrieval system. A retrieval system\n * is defined as something that can take string queries and return the\n * most 'relevant' Documents from some source.\n */ class BaseRetriever extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callbacks = fields?.callbacks;\n        this.tags = fields?.tags ?? [];\n        this.metadata = fields?.metadata ?? {};\n        this.verbose = fields?.verbose ?? false;\n    }\n    /**\n     * TODO: This should be an abstract method, but we'd like to avoid breaking\n     * changes to people currently using subclassed custom retrievers.\n     * Change it on next major release.\n     */ _getRelevantDocuments(_query, _callbacks) {\n        throw new Error(\"Not implemented!\");\n    }\n    async invoke(input, options) {\n        return this.getRelevantDocuments(input, (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options));\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.3.0.\n     *\n     * Main method used to retrieve relevant documents. It takes a query\n     * string and an optional configuration object, and returns a promise that\n     * resolves to an array of `Document` objects. This method handles the\n     * retrieval process, including starting and ending callbacks, and error\n     * handling.\n     * @param query The query string to retrieve relevant documents for.\n     * @param config Optional configuration object for the retrieval process.\n     * @returns A promise that resolves to an array of `Document` objects.\n     */ async getRelevantDocuments(query, config) {\n        const parsedConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(config));\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(parsedConfig.callbacks, this.callbacks, parsedConfig.tags, this.tags, parsedConfig.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const runManager = await callbackManager_?.handleRetrieverStart(this.toJSON(), query, parsedConfig.runId, undefined, undefined, undefined, parsedConfig.runName);\n        try {\n            const results = await this._getRelevantDocuments(query, runManager);\n            await runManager?.handleRetrieverEnd(results);\n            return results;\n        } catch (error) {\n            await runManager?.handleRetrieverError(error);\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcmV0cmlldmVycy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1GO0FBQ25DO0FBQ007QUFDdEQ7Ozs7Q0FJQyxHQUNNLE1BQU1JLHNCQUFzQkYsd0RBQVFBO0lBQ3ZDRyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsU0FBUyxHQUFHUCxRQUFRTztRQUN6QixJQUFJLENBQUNDLElBQUksR0FBR1IsUUFBUVEsUUFBUSxFQUFFO1FBQzlCLElBQUksQ0FBQ0MsUUFBUSxHQUFHVCxRQUFRUyxZQUFZLENBQUM7UUFDckMsSUFBSSxDQUFDQyxPQUFPLEdBQUdWLFFBQVFVLFdBQVc7SUFDdEM7SUFDQTs7OztLQUlDLEdBQ0RDLHNCQUFzQkMsTUFBTSxFQUFFQyxVQUFVLEVBQUU7UUFDdEMsTUFBTSxJQUFJQyxNQUFNO0lBQ3BCO0lBQ0EsTUFBTUMsT0FBT0MsS0FBSyxFQUFFQyxPQUFPLEVBQUU7UUFDekIsT0FBTyxJQUFJLENBQUNDLG9CQUFvQixDQUFDRixPQUFPbkIsa0VBQVlBLENBQUNvQjtJQUN6RDtJQUNBOzs7Ozs7Ozs7OztLQVdDLEdBQ0QsTUFBTUMscUJBQXFCQyxLQUFLLEVBQUVDLE1BQU0sRUFBRTtRQUN0QyxNQUFNQyxlQUFleEIsa0VBQVlBLENBQUNGLDZFQUFzQkEsQ0FBQ3lCO1FBQ3pELE1BQU1FLG1CQUFtQixNQUFNNUIsa0VBQWVBLENBQUM2QixTQUFTLENBQUNGLGFBQWFkLFNBQVMsRUFBRSxJQUFJLENBQUNBLFNBQVMsRUFBRWMsYUFBYWIsSUFBSSxFQUFFLElBQUksQ0FBQ0EsSUFBSSxFQUFFYSxhQUFhWixRQUFRLEVBQUUsSUFBSSxDQUFDQSxRQUFRLEVBQUU7WUFBRUMsU0FBUyxJQUFJLENBQUNBLE9BQU87UUFBQztRQUM3TCxNQUFNYyxhQUFhLE1BQU1GLGtCQUFrQkcscUJBQXFCLElBQUksQ0FBQ0MsTUFBTSxJQUFJUCxPQUFPRSxhQUFhTSxLQUFLLEVBQUVDLFdBQVdBLFdBQVdBLFdBQVdQLGFBQWFRLE9BQU87UUFDL0osSUFBSTtZQUNBLE1BQU1DLFVBQVUsTUFBTSxJQUFJLENBQUNuQixxQkFBcUIsQ0FBQ1EsT0FBT0s7WUFDeEQsTUFBTUEsWUFBWU8sbUJBQW1CRDtZQUNyQyxPQUFPQTtRQUNYLEVBQ0EsT0FBT0UsT0FBTztZQUNWLE1BQU1SLFlBQVlTLHFCQUFxQkQ7WUFDdkMsTUFBTUE7UUFDVjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9yZXRyaWV2ZXJzL2luZGV4LmpzPzhkZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyLCBwYXJzZUNhbGxiYWNrQ29uZmlnQXJnLCB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGVuc3VyZUNvbmZpZyB9IGZyb20gXCIuLi9ydW5uYWJsZXMvY29uZmlnLmpzXCI7XG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGEgRG9jdW1lbnQgcmV0cmlldmFsIHN5c3RlbS4gQSByZXRyaWV2YWwgc3lzdGVtXG4gKiBpcyBkZWZpbmVkIGFzIHNvbWV0aGluZyB0aGF0IGNhbiB0YWtlIHN0cmluZyBxdWVyaWVzIGFuZCByZXR1cm4gdGhlXG4gKiBtb3N0ICdyZWxldmFudCcgRG9jdW1lbnRzIGZyb20gc29tZSBzb3VyY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUmV0cmlldmVyIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJib3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gZmllbGRzPy5jYWxsYmFja3M7XG4gICAgICAgIHRoaXMudGFncyA9IGZpZWxkcz8udGFncyA/PyBbXTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IGZpZWxkcz8ubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IGZpZWxkcz8udmVyYm9zZSA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVE9ETzogVGhpcyBzaG91bGQgYmUgYW4gYWJzdHJhY3QgbWV0aG9kLCBidXQgd2UnZCBsaWtlIHRvIGF2b2lkIGJyZWFraW5nXG4gICAgICogY2hhbmdlcyB0byBwZW9wbGUgY3VycmVudGx5IHVzaW5nIHN1YmNsYXNzZWQgY3VzdG9tIHJldHJpZXZlcnMuXG4gICAgICogQ2hhbmdlIGl0IG9uIG5leHQgbWFqb3IgcmVsZWFzZS5cbiAgICAgKi9cbiAgICBfZ2V0UmVsZXZhbnREb2N1bWVudHMoX3F1ZXJ5LCBfY2FsbGJhY2tzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZCFcIik7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZWxldmFudERvY3VtZW50cyhpbnB1dCwgZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4zLjAuXG4gICAgICpcbiAgICAgKiBNYWluIG1ldGhvZCB1c2VkIHRvIHJldHJpZXZlIHJlbGV2YW50IGRvY3VtZW50cy4gSXQgdGFrZXMgYSBxdWVyeVxuICAgICAqIHN0cmluZyBhbmQgYW4gb3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QsIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0XG4gICAgICogcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgYERvY3VtZW50YCBvYmplY3RzLiBUaGlzIG1ldGhvZCBoYW5kbGVzIHRoZVxuICAgICAqIHJldHJpZXZhbCBwcm9jZXNzLCBpbmNsdWRpbmcgc3RhcnRpbmcgYW5kIGVuZGluZyBjYWxsYmFja3MsIGFuZCBlcnJvclxuICAgICAqIGhhbmRsaW5nLlxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgc3RyaW5nIHRvIHJldHJpZXZlIHJlbGV2YW50IGRvY3VtZW50cyBmb3IuXG4gICAgICogQHBhcmFtIGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIHJldHJpZXZhbCBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIGBEb2N1bWVudGAgb2JqZWN0cy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRSZWxldmFudERvY3VtZW50cyhxdWVyeSwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbmZpZyA9IGVuc3VyZUNvbmZpZyhwYXJzZUNhbGxiYWNrQ29uZmlnQXJnKGNvbmZpZykpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShwYXJzZWRDb25maWcuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgcGFyc2VkQ29uZmlnLnRhZ3MsIHRoaXMudGFncywgcGFyc2VkQ29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZVJldHJpZXZlclN0YXJ0KHRoaXMudG9KU09OKCksIHF1ZXJ5LCBwYXJzZWRDb25maWcucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHBhcnNlZENvbmZpZy5ydW5OYW1lKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLl9nZXRSZWxldmFudERvY3VtZW50cyhxdWVyeSwgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVSZXRyaWV2ZXJFbmQocmVzdWx0cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZVJldHJpZXZlckVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkNhbGxiYWNrTWFuYWdlciIsInBhcnNlQ2FsbGJhY2tDb25maWdBcmciLCJSdW5uYWJsZSIsImVuc3VyZUNvbmZpZyIsIkJhc2VSZXRyaWV2ZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJjYWxsYmFja3MiLCJ0YWdzIiwibWV0YWRhdGEiLCJ2ZXJib3NlIiwiX2dldFJlbGV2YW50RG9jdW1lbnRzIiwiX3F1ZXJ5IiwiX2NhbGxiYWNrcyIsIkVycm9yIiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwiZ2V0UmVsZXZhbnREb2N1bWVudHMiLCJxdWVyeSIsImNvbmZpZyIsInBhcnNlZENvbmZpZyIsImNhbGxiYWNrTWFuYWdlcl8iLCJjb25maWd1cmUiLCJydW5NYW5hZ2VyIiwiaGFuZGxlUmV0cmlldmVyU3RhcnQiLCJ0b0pTT04iLCJydW5JZCIsInVuZGVmaW5lZCIsInJ1bk5hbWUiLCJyZXN1bHRzIiwiaGFuZGxlUmV0cmlldmVyRW5kIiwiZXJyb3IiLCJoYW5kbGVSZXRyaWV2ZXJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/retrievers/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\");\n/* harmony import */ var _wrappers_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./wrappers.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js\");\n/* harmony import */ var _iter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./iter.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param kwargs\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks: fields.fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options) && options.length !== length) {\n            throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n        }\n        if (Array.isArray(options)) {\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig);\n        }\n        if (length > 1 && !Array.isArray(options) && options.runId) {\n            console.warn(\"Provided runId will be used only for the first element of the batch.\");\n            const subsequent = Object.fromEntries(Object.entries(options).filter(([key])=>key !== \"runId\"));\n            return Array.from({\n                length\n            }, (_, i)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(i === 0 ? options : subsequent));\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this._streamIterator(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options)));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        let runnableConfig;\n        if (options === undefined) {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        } else {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)({\n                callbacks: options.callbacks,\n                tags: options.tags,\n                metadata: options.metadata,\n                runName: options.runName,\n                configurable: options.configurable,\n                recursionLimit: options.recursionLimit,\n                maxConcurrency: options.maxConcurrency,\n                runId: options.runId\n            });\n        }\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        delete callOptions.runId;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        delete config.runId;\n        let output;\n        try {\n            output = await func.call(this, input, config, runManager);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), optionsList[i].runId, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName());\n            delete optionsList[i].runId;\n            return handleStartRes;\n        }));\n        let outputs;\n        try {\n            outputs = await func.call(this, inputs, optionsList, runManagers, batchOptions);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalInput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalInput, chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, config.runId, config.runType, undefined, undefined, config.runName ?? this.getName()), config);\n            delete config.runId;\n            runManager = pipe.setup;\n            const isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n            const streamLogHandler = runManager?.handlers.find(isLogStreamHandler);\n            let iterator = pipe.output;\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = await streamLogHandler.tapOutputIterable(runManager.runId, pipe.output);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    getGraph(_) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // TODO: Add input schema for runnables\n        const inputNode = graph.addNode({\n            name: `${this.getName()}Input`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_13__.z.any()\n        });\n        const runnableNode = graph.addNode(this);\n        // TODO: Add output schemas for runnables\n        const outputNode = graph.addNode({\n            name: `${this.getName()}Output`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_13__.z.any()\n        });\n        graph.addEdge(inputNode, runnableNode);\n        graph.addEdge(runnableNode, outputNode);\n        return graph;\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.inheritableHandlers.push(logStreamCallbackHandler);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    async *streamEvents(input, options, streamOptions) {\n        if (options.encoding === \"text/event-stream\") {\n            const stream = await this._streamEvents(input, options, streamOptions);\n            yield* (0,_wrappers_js__WEBPACK_IMPORTED_MODULE_11__.convertToHttpEventStream)(stream);\n        } else {\n            yield* this._streamEvents(input, options, streamOptions);\n        }\n    }\n    async *_streamEvents(input, options, streamOptions) {\n        if (options.version !== \"v1\") {\n            throw new Error(`Only version \"v1\" of the events schema is currently supported.`);\n        }\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_8__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.isRunnableInterface)(thing);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable with a set of kwargs.\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound.withRetry(fields),\n            kwargs: this.kwargs,\n            config: this.config\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(individualOption), this.kwargs))) : await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async *transform(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async *streamEvents(input, options, streamOptions) {\n        yield* this.bound.streamEvents(input, {\n            ...await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs),\n            version: options.version\n        }, streamOptions);\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke, inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            onFailedAttempt: (error)=>this.onFailedAttempt(error, input),\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            firstException.input = remainingInputs[i];\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onFailedAttempt: (error)=>this.onFailedAttempt(error, error.input),\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({})]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                nextStepInput = await step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                nextStepInputs = await step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(`seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                callbacks: runManager?.getChild(`seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    getGraph(config) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let currentLastNode = null;\n        this.steps.forEach((step, index)=>{\n            const stepGraph = step.getGraph(config);\n            if (index !== 0) {\n                stepGraph.trimFirstNode();\n            }\n            if (index !== this.steps.length - 1) {\n                stepGraph.trimLastNode();\n            }\n            graph.extend(stepGraph);\n            const stepFirstNode = stepGraph.firstNode();\n            if (!stepFirstNode) {\n                throw new Error(`Runnable ${step} has no first node`);\n            }\n            if (currentLastNode) {\n                graph.addEdge(currentLastNode, stepFirstNode);\n            }\n            currentLastNode = stepGraph.lastNode();\n        });\n        return graph;\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], name) {\n        return new RunnableSequence({\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1]),\n            name\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            await Promise.all(Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const { key, result, gen } = await Promise.race(tasks.values());\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that runs a callable.\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(childConfig, async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.isAsyncIterable)(output)) {\n                        let finalOutput;\n                        for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.consumeAsyncIterableInContext)(childConfig, output)){\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.isIterator)(output)) {\n                        let finalOutput;\n                        for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.consumeIteratorInContext)(childConfig, output)){\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke, input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(config, async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...config,\n                        config\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            }));\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.isAsyncIterable)(output)) {\n            for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.consumeAsyncIterableInContext)(config, output)){\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.isIterator)(output)) {\n            for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_12__.consumeIteratorInContext)(config, output)){\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(options?.callbacks, undefined, options?.tags, undefined, options?.metadata);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const output = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild()\n                }));\n                await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                return output;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (firstError === undefined) {\n            throw new Error(\"No error stored at end of fallback.\");\n        }\n        await runManager?.handleChainError(firstError);\n        throw firstError;\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata)));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0s7QUFDOEI7QUFDK0I7QUFDbkM7QUFDcUU7QUFDQztBQUN0RTtBQUNXO0FBQ0M7QUFDUztBQUN6QztBQUNzQjtBQUN5RDtBQUNsSCw4REFBOEQ7QUFDdkQsU0FBUzRCLGNBQWNDLEtBQUssRUFBRUMsVUFBVTtJQUMzQyxPQUFPRCxTQUNILENBQUNFLE1BQU1DLE9BQU8sQ0FBQ0gsVUFDZix1REFBdUQ7SUFDdkQsQ0FBRUEsQ0FBQUEsaUJBQWlCSSxJQUFHLEtBQ3RCLE9BQU9KLFVBQVUsV0FDZkEsUUFDQTtRQUFFLENBQUNDLFdBQVcsRUFBRUQ7SUFBTTtBQUNoQztBQUNBOzs7Q0FHQyxHQUNNLE1BQU1LLGlCQUFpQjVCLCtEQUFZQTtJQUN0QzZCLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTztRQUNYO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTyxLQUFLO1FBQ2hCO0lBQ0o7SUFDQWEsUUFBUUMsTUFBTSxFQUFFO1FBQ1osTUFBTUMsT0FDTiw4REFBOEQ7UUFDOUQsSUFBSSxDQUFDQSxJQUFJLElBQUksSUFBSSxDQUFDVCxXQUFXLENBQUNVLE9BQU8sTUFBTSxJQUFJLENBQUNWLFdBQVcsQ0FBQ1MsSUFBSTtRQUNoRSxPQUFPRCxTQUFTLENBQUMsRUFBRUMsS0FBSyxFQUFFRCxPQUFPLENBQUMsR0FBR0M7SUFDekM7SUFDQTs7OztLQUlDLEdBQ0RFLEtBQUtDLE1BQU0sRUFBRTtRQUNULG1FQUFtRTtRQUNuRSxPQUFPLElB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aGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanM/NDU2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHBSZXRyeSBmcm9tIFwicC1yZXRyeVwiO1xuaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyLCB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBSdW5Mb2csIFJ1bkxvZ1BhdGNoLCB9IGZyb20gXCIuLi90cmFjZXJzL2xvZ19zdHJlYW0uanNcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSwgY29uY2F0LCBhdGVlLCBwaXBlR2VuZXJhdG9yV2l0aFNldHVwLCBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCwgfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCwgZW5zdXJlQ29uZmlnLCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIG1lcmdlQ29uZmlncywgcGF0Y2hDb25maWcsIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IFJvb3RMaXN0ZW5lcnNUcmFjZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzXCI7XG5pbXBvcnQgeyBfUm9vdEV2ZW50RmlsdGVyLCBpc1J1bm5hYmxlSW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgR3JhcGggfSBmcm9tIFwiLi9ncmFwaC5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvSHR0cEV2ZW50U3RyZWFtIH0gZnJvbSBcIi4vd3JhcHBlcnMuanNcIjtcbmltcG9ydCB7IGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0LCBjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQsIGlzQXN5bmNJdGVyYWJsZSwgaXNJdGVyYXRvciwgfSBmcm9tIFwiLi9pdGVyLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiZcbiAgICAgICAgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgISh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vKipcbiAqIEEgUnVubmFibGUgaXMgYSBnZW5lcmljIHVuaXQgb2Ygd29yayB0aGF0IGNhbiBiZSBpbnZva2VkLCBiYXRjaGVkLCBzdHJlYW1lZCwgYW5kL29yXG4gKiB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfcnVubmFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0TmFtZShzdWZmaXgpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0aGlzLm5hbWUgPz8gdGhpcy5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPz8gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICByZXR1cm4gc3VmZml4ID8gYCR7bmFtZX0ke3N1ZmZpeH1gIDogbmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBhcmd1bWVudHMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBrd2FyZ3NcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZUJpbmRpbmcgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIGFwcGx5IHRoZSBib3VuZCBhcmdzLlxuICAgICAqL1xuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoeyBib3VuZDogdGhpcywga3dhcmdzLCBjb25maWc6IHt9IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBuZXcgUnVubmFibGUgdGhhdCBtYXBzIGEgbGlzdCBvZiBpbnB1dHMgdG8gYSBsaXN0IG9mIG91dHB1dHMsXG4gICAgICogYnkgY2FsbGluZyBpbnZva2UoKSB3aXRoIGVhY2ggaW5wdXQuXG4gICAgICovXG4gICAgbWFwKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHsgYm91bmQ6IHRoaXMgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCByZXRyeSBsb2dpYyB0byBhbiBleGlzdGluZyBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ga3dhcmdzXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVSZXRyeSB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgcmV0cnkgYWNjb3JkaW5nIHRvIHRoZSBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHdpdGhSZXRyeShmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlUmV0cnkoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBrd2FyZ3M6IHt9LFxuICAgICAgICAgICAgY29uZmlnOiB7fSxcbiAgICAgICAgICAgIG1heEF0dGVtcHROdW1iZXI6IGZpZWxkcz8uc3RvcEFmdGVyQXR0ZW1wdCxcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgY29uZmlnIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE5ldyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgdG8gYXR0YWNoIHRvIHRoZSBuZXcgcnVubmFibGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCaW5kaW5nIHdpdGggYSBjb25maWcgbWF0Y2hpbmcgd2hhdCdzIHBhc3NlZC5cbiAgICAgKi9cbiAgICB3aXRoQ29uZmlnKGNvbmZpZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAga3dhcmdzOiB7fSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBydW5uYWJsZSBmcm9tIHRoZSBjdXJyZW50IG9uZSB0aGF0IHdpbGwgdHJ5IGludm9raW5nXG4gICAgICogb3RoZXIgcGFzc2VkIGZhbGxiYWNrIHJ1bm5hYmxlcyBpZiB0aGUgaW5pdGlhbCBpbnZvY2F0aW9uIGZhaWxzLlxuICAgICAqIEBwYXJhbSBmaWVsZHMuZmFsbGJhY2tzIE90aGVyIHJ1bm5hYmxlcyB0byBjYWxsIGlmIHRoZSBydW5uYWJsZSBlcnJvcnMuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzLlxuICAgICAqL1xuICAgIHdpdGhGYWxsYmFja3MoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3Moe1xuICAgICAgICAgICAgcnVubmFibGU6IHRoaXMsXG4gICAgICAgICAgICBmYWxsYmFja3M6IGZpZWxkcy5mYWxsYmFja3MsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucywgbGVuZ3RoID0gMCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhc3NlZCBcIm9wdGlvbnNcIiBtdXN0IGJlIGFuIGFycmF5IHdpdGggdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBpbnB1dHMsIGJ1dCBnb3QgJHtvcHRpb25zLmxlbmd0aH0gb3B0aW9ucyBmb3IgJHtsZW5ndGh9IGlucHV0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoZW5zdXJlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID4gMSAmJiAhQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLnJ1bklkKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJQcm92aWRlZCBydW5JZCB3aWxsIGJlIHVzZWQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJhdGNoLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNlcXVlbnQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob3B0aW9ucykuZmlsdGVyKChba2V5XSkgPT4ga2V5ICE9PSBcInJ1bklkXCIpKTtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiBlbnN1cmVDb25maWcoaSA9PT0gMCA/IG9wdGlvbnMgOiBzdWJzZXF1ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBtYXhDb25jdXJyZW5jeSA9IGNvbmZpZ0xpc3RbMF0/Lm1heENvbmN1cnJlbmN5ID8/IGJhdGNoT3B0aW9ucz8ubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGNvbnN0IGNhbGxlciA9IG5ldyBBc3luY0NhbGxlcih7XG4gICAgICAgICAgICBtYXhDb25jdXJyZW5jeSxcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJhdGNoQ2FsbHMgPSBpbnB1dHMubWFwKChpbnB1dCwgaSkgPT4gY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmludm9rZShpbnB1dCwgY29uZmlnTGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYmF0Y2hDYWxscyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgc3RyZWFtaW5nIGltcGxlbWVudGF0aW9uLlxuICAgICAqIFN1YmNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGlmIHRoZXkgc3VwcG9ydCBzdHJlYW1pbmcgb3V0cHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCB0aGlzLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBvdXRwdXQgaW4gY2h1bmtzLlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gdGhhdCBpcyBhbHNvIGFuIGl0ZXJhYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBCdWZmZXIgdGhlIGZpcnN0IHN0cmVhbWVkIGNodW5rIHRvIGFsbG93IGZvciBpbml0aWFsIGVycm9yc1xuICAgICAgICAvLyB0byBzdXJmYWNlIGltbWVkaWF0ZWx5LlxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBlbnN1cmVDb25maWcob3B0aW9ucykpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbiAgICBfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGxldCBydW5uYWJsZUNvbmZpZztcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVubmFibGVDb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBydW5uYWJsZUNvbmZpZyA9IGVuc3VyZUNvbmZpZyh7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBvcHRpb25zLmNhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICB0YWdzOiBvcHRpb25zLnRhZ3MsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IG9wdGlvbnMubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgcnVuTmFtZTogb3B0aW9ucy5ydW5OYW1lLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogb3B0aW9ucy5jb25maWd1cmFibGUsXG4gICAgICAgICAgICAgICAgcmVjdXJzaW9uTGltaXQ6IG9wdGlvbnMucmVjdXJzaW9uTGltaXQsXG4gICAgICAgICAgICAgICAgbWF4Q29uY3VycmVuY3k6IG9wdGlvbnMubWF4Q29uY3VycmVuY3ksXG4gICAgICAgICAgICAgICAgcnVuSWQ6IG9wdGlvbnMucnVuSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWxsT3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMuY2FsbGJhY2tzO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMudGFncztcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLm1ldGFkYXRhO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucnVuTmFtZTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLmNvbmZpZ3VyYWJsZTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnJlY3Vyc2lvbkxpbWl0O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5ydW5JZDtcbiAgICAgICAgcmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuICAgIH1cbiAgICBhc3luYyBfY2FsbFdpdGhDb25maWcoZnVuYywgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIGNvbmZpZy5ydW5JZCwgY29uZmlnPy5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgaGFuZGxlcyBiYXRjaGluZyBhbmQgY29uZmlndXJhdGlvbiBmb3IgYSBydW5uYWJsZVxuICAgICAqIEl0IHRha2VzIGEgZnVuY3Rpb24sIGlucHV0IHZhbHVlcywgYW5kIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24sIGFuZFxuICAgICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGlucHV0IHZhbHVlLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdmFsdWVzIHRvIGJlIHByb2Nlc3NlZC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBmdW5jdGlvbiBleGVjdXRpb24uXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICovXG4gICAgYXN5bmMgX2JhdGNoV2l0aENvbmZpZyhmdW5jLCBpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBvcHRpb25zTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9uc0xpc3QubWFwKGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZykpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKGFzeW5jIChjYWxsYmFja01hbmFnZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVN0YXJ0UmVzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCBvcHRpb25zTGlzdFtpXS5ydW5JZCwgb3B0aW9uc0xpc3RbaV0ucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9wdGlvbnNMaXN0W2ldLnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpO1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnNMaXN0W2ldLnJ1bklkO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVN0YXJ0UmVzO1xuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBvdXRwdXRzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0cHV0cyA9IGF3YWl0IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dHMsIG9wdGlvbnNMaXN0LCBydW5NYW5hZ2VycywgYmF0Y2hPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXRzLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gdHJhbnNmb3JtIGFuIEl0ZXJhdG9yIG9mIElucHV0IHZhbHVlcyBpbnRvIGFuIEl0ZXJhdG9yIG9mXG4gICAgICogT3V0cHV0IHZhbHVlcywgd2l0aCBjYWxsYmFja3MuXG4gICAgICogVXNlIHRoaXMgdG8gaW1wbGVtZW50IGBzdHJlYW0oKWAgb3IgYHRyYW5zZm9ybSgpYCBpbiBSdW5uYWJsZSBzdWJjbGFzc2VzLlxuICAgICAqL1xuICAgIGFzeW5jICpfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhpbnB1dEdlbmVyYXRvciwgdHJhbnNmb3JtZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGZpbmFsSW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbElucHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIHdyYXBJbnB1dEZvclRyYWNpbmcoKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSBjb25jYXQoZmluYWxJbnB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBydW5NYW5hZ2VyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGlwZSA9IGF3YWl0IHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodHJhbnNmb3JtZXIuYmluZCh0aGlzKSwgd3JhcElucHV0Rm9yVHJhY2luZygpLCBhc3luYyAoKSA9PiBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHsgaW5wdXQ6IFwiXCIgfSwgY29uZmlnLnJ1bklkLCBjb25maWcucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKSwgY29uZmlnKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgICAgICBydW5NYW5hZ2VyID0gcGlwZS5zZXR1cDtcbiAgICAgICAgICAgIGNvbnN0IGlzTG9nU3RyZWFtSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbUxvZ0hhbmRsZXIgPSBydW5NYW5hZ2VyPy5oYW5kbGVycy5maW5kKGlzTG9nU3RyZWFtSGFuZGxlcik7XG4gICAgICAgICAgICBsZXQgaXRlcmF0b3IgPSBwaXBlLm91dHB1dDtcbiAgICAgICAgICAgIGlmIChzdHJlYW1Mb2dIYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgcnVuTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBhd2FpdCBzdHJlYW1Mb2dIYW5kbGVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bk1hbmFnZXIucnVuSWQsIHBpcGUub3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSB9KTtcbiAgICB9XG4gICAgZ2V0R3JhcGgoXykge1xuICAgICAgICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgaW5wdXQgc2NoZW1hIGZvciBydW5uYWJsZXNcbiAgICAgICAgY29uc3QgaW5wdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1JbnB1dGAsXG4gICAgICAgICAgICBzY2hlbWE6IHouYW55KCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBydW5uYWJsZU5vZGUgPSBncmFwaC5hZGROb2RlKHRoaXMpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgb3V0cHV0IHNjaGVtYXMgZm9yIHJ1bm5hYmxlc1xuICAgICAgICBjb25zdCBvdXRwdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1PdXRwdXRgLFxuICAgICAgICAgICAgc2NoZW1hOiB6LmFueSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgZ3JhcGguYWRkRWRnZShpbnB1dE5vZGUsIHJ1bm5hYmxlTm9kZSk7XG4gICAgICAgIGdyYXBoLmFkZEVkZ2UocnVubmFibGVOb2RlLCBvdXRwdXROb2RlKTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcnVubmFibGUgc2VxdWVuY2UgdGhhdCBydW5zIGVhY2ggaW5kaXZpZHVhbCBydW5uYWJsZSBpbiBzZXJpZXMsXG4gICAgICogcGlwaW5nIHRoZSBvdXRwdXQgb2Ygb25lIHJ1bm5hYmxlIGludG8gYW5vdGhlciBydW5uYWJsZSBvciBydW5uYWJsZS1saWtlLlxuICAgICAqIEBwYXJhbSBjb2VyY2VhYmxlIEEgcnVubmFibGUsIGZ1bmN0aW9uLCBvciBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBmdW5jdGlvbnMgb3IgcnVubmFibGVzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIHBpcGUoY29lcmNlYWJsZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICBmaXJzdDogdGhpcyxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGljayBrZXlzIGZyb20gdGhlIGRpY3Qgb3V0cHV0IG9mIHRoaXMgcnVubmFibGUuIFJldHVybnMgYSBuZXcgcnVubmFibGUuXG4gICAgICovXG4gICAgcGljayhrZXlzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZShuZXcgUnVubmFibGVQaWNrKGtleXMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBuZXcgZmllbGRzIHRvIHRoZSBkaWN0IG91dHB1dCBvZiB0aGlzIHJ1bm5hYmxlLiBSZXR1cm5zIGEgbmV3IHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzc2lnbihtYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpcGUoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgbmV3IFJ1bm5hYmxlQXNzaWduKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzOiBtYXBwaW5nIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdHJhbnNmb3JtLCB3aGljaCBidWZmZXJzIGlucHV0IGFuZCB0aGVuIGNhbGxzIHN0cmVhbS5cbiAgICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IGNhbiBzdGFydCBwcm9kdWNpbmcgb3V0cHV0IHdoaWxlXG4gICAgICogaW5wdXQgaXMgc3RpbGwgYmVpbmcgZ2VuZXJhdGVkLlxuICAgICAqIEBwYXJhbSBnZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICp0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBmaW5hbENodW5rO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBiZXN0IGVmZm9ydCB0byBnYXRoZXIsIGZvciBhbnkgdHlwZSB0aGF0IHN1cHBvcnRzIGNvbmNhdC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgZ2F0aGVyaW5nIGZhaWxzLlxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGZpbmFsQ2h1bmssIGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBhbGwgb3V0cHV0IGZyb20gYSBydW5uYWJsZSwgYXMgcmVwb3J0ZWQgdG8gdGhlIGNhbGxiYWNrIHN5c3RlbS5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIGFsbCBpbm5lciBydW5zIG9mIExMTXMsIFJldHJpZXZlcnMsIFRvb2xzLCBldGMuXG4gICAgICogT3V0cHV0IGlzIHN0cmVhbWVkIGFzIExvZyBvYmplY3RzLCB3aGljaCBpbmNsdWRlIGEgbGlzdCBvZlxuICAgICAqIGpzb25wYXRjaCBvcHMgdGhhdCBkZXNjcmliZSBob3cgdGhlIHN0YXRlIG9mIHRoZSBydW4gaGFzIGNoYW5nZWQgaW4gZWFjaFxuICAgICAqIHN0ZXAsIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIHJ1bi5cbiAgICAgKiBUaGUganNvbnBhdGNoIG9wcyBjYW4gYmUgYXBwbGllZCBpbiBvcmRlciB0byBjb25zdHJ1Y3Qgc3RhdGUuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gc3RyZWFtT3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICpzdHJlYW1Mb2coaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyID0gbmV3IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIF9zY2hlbWFGb3JtYXQ6IFwib3JpZ2luYWxcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpIHtcbiAgICAgICAgY29uc3QgeyBjYWxsYmFja3MgfSA9IGNvbmZpZztcbiAgICAgICAgaWYgKGNhbGxiYWNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb25jYXQoW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgIGNvcGllZENhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2gobG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbVByb21pc2UgPSB0aGlzLnN0cmVhbShpbnB1dCwgY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbSA9IGF3YWl0IHJ1bm5hYmxlU3RyZWFtUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJ1bm5hYmxlU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiL3N0cmVhbWVkX291dHB1dC8tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlID0gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGxvZyBvZiBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBsb2c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhd2FpdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICpzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuZW5jb2RpbmcgPT09IFwidGV4dC9ldmVudC1zdHJlYW1cIikge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5fc3RyZWFtRXZlbnRzKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKTtcbiAgICAgICAgICAgIHlpZWxkKiBjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0oc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHlpZWxkKiB0aGlzLl9zdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtRXZlbnRzKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnZlcnNpb24gIT09IFwidjFcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPbmx5IHZlcnNpb24gXCJ2MVwiIG9mIHRoZSBldmVudHMgc2NoZW1hIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJ1bkxvZztcbiAgICAgICAgbGV0IGhhc0VuY291bnRlcmVkU3RhcnRFdmVudCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHJvb3RUYWdzID0gY29uZmlnLnRhZ3MgPz8gW107XG4gICAgICAgIGNvbnN0IHJvb3RNZXRhZGF0YSA9IGNvbmZpZy5tZXRhZGF0YSA/PyB7fTtcbiAgICAgICAgY29uc3Qgcm9vdE5hbWUgPSBjb25maWcucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKTtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyID0gbmV3IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIF9zY2hlbWFGb3JtYXQ6IFwic3RyZWFtaW5nX2V2ZW50c1wiLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgcm9vdEV2ZW50RmlsdGVyID0gbmV3IF9Sb290RXZlbnRGaWx0ZXIoe1xuICAgICAgICAgICAgLi4uc3RyZWFtT3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxvZ1N0cmVhbSA9IHRoaXMuX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGxvZyBvZiBsb2dTdHJlYW0pIHtcbiAgICAgICAgICAgIGlmICghcnVuTG9nKSB7XG4gICAgICAgICAgICAgICAgcnVuTG9nID0gUnVuTG9nLmZyb21SdW5Mb2dQYXRjaChsb2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcnVuTG9nID0gcnVuTG9nLmNvbmNhdChsb2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bkxvZy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBlcnJvcjogXCJzdHJlYW1FdmVudHNcIiBzdGF0ZSBpcyBtaXNzaW5nLiBQbGVhc2Ugb3BlbiBhIGJ1ZyByZXBvcnQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBZaWVsZCB0aGUgc3RhcnQgZXZlbnQgZm9yIHRoZSByb290IHJ1bm5hYmxlIGlmIGl0IGhhc24ndCBiZWVuIHNlZW4uXG4gICAgICAgICAgICAvLyBUaGUgcm9vdCBydW4gaXMgbmV2ZXIgZmlsdGVyZWQgb3V0XG4gICAgICAgICAgICBpZiAoIWhhc0VuY291bnRlcmVkU3RhcnRFdmVudCkge1xuICAgICAgICAgICAgICAgIGhhc0VuY291bnRlcmVkU3RhcnRFdmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB7IC4uLnJ1bkxvZy5zdGF0ZSB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBydW5faWQ6IHN0YXRlLmlkLFxuICAgICAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fc3RhcnRgLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGFnczogcm9vdFRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RFdmVudEZpbHRlci5pbmNsdWRlRXZlbnQoZXZlbnQsIHN0YXRlLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGV2ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhdGhzID0gbG9nLm9wc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoKG9wKSA9PiBvcC5wYXRoLnN0YXJ0c1dpdGgoXCIvbG9ncy9cIikpXG4gICAgICAgICAgICAgICAgLm1hcCgob3ApID0+IG9wLnBhdGguc3BsaXQoXCIvXCIpWzJdKTtcbiAgICAgICAgICAgIGNvbnN0IGRlZHVwZWRQYXRocyA9IFsuLi5uZXcgU2V0KHBhdGhzKV07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhdGggb2YgZGVkdXBlZFBhdGhzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50VHlwZTtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0gcnVuTG9nLnN0YXRlLmxvZ3NbcGF0aF07XG4gICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LmVuZF90aW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LnN0cmVhbWVkX291dHB1dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBcInN0cmVhbVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gXCJzdGFydFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBcImVuZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRUeXBlID09PSBcInN0YXJ0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5jbHVkZSB0aGUgaW5wdXRzIHdpdGggdGhlIHN0YXJ0IGV2ZW50IGlmIHRoZXkgYXJlIGF2YWlsYWJsZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXN1YWxseSB0aGV5IHdpbGwgTk9UIGJlIGF2YWlsYWJsZSBmb3IgY29tcG9uZW50cyB0aGF0IG9wZXJhdGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gc3RyZWFtcywgc2luY2UgdGhvc2UgY29tcG9uZW50cyBzdHJlYW0gdGhlIGlucHV0IGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBrbm93IGl0cyBmaW5hbCB2YWx1ZSB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzdHJlYW0uXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dFbnRyeS5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnB1dCA9IGxvZ0VudHJ5LmlucHV0cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudFR5cGUgPT09IFwiZW5kXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0ID0gbG9nRW50cnkuaW5wdXRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEub3V0cHV0ID0gbG9nRW50cnkuZmluYWxfb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudFR5cGUgPT09IFwic3RyZWFtXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmtDb3VudCA9IGxvZ0VudHJ5LnN0cmVhbWVkX291dHB1dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHVua0NvdW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGV4YWN0bHkgb25lIGNodW5rIG9mIHN0cmVhbWVkIG91dHB1dCwgZ290ICR7Y2h1bmtDb3VudH0gaW5zdGVhZC4gRW5jb3VudGVyZWQgaW46IFwiJHtsb2dFbnRyeS5uYW1lfVwiYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsgY2h1bms6IGxvZ0VudHJ5LnN0cmVhbWVkX291dHB1dFswXSB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgc3RyZWFtLCB3ZSBkb24ndCBuZWVkIGl0IGFueW1vcmUuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFuZCB0aGlzIGF2b2lkcyBkdXBsaWNhdGVzIGFzIHdlbGwhXG4gICAgICAgICAgICAgICAgICAgIGxvZ0VudHJ5LnN0cmVhbWVkX291dHB1dCA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtsb2dFbnRyeS50eXBlfV8ke2V2ZW50VHlwZX1gLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBsb2dFbnRyeS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBydW5faWQ6IGxvZ0VudHJ5LmlkLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiBsb2dFbnRyeS50YWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogbG9nRW50cnkubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbmFsbHksIHdlIHRha2UgY2FyZSBvZiB0aGUgc3RyZWFtaW5nIG91dHB1dCBmcm9tIHRoZSByb290IGNoYWluXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhbnkuXG4gICAgICAgICAgICBjb25zdCB7IHN0YXRlIH0gPSBydW5Mb2c7XG4gICAgICAgICAgICBpZiAoc3RhdGUuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVua0NvdW50ID0gc3RhdGUuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmtDb3VudCAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGV4YWN0bHkgb25lIGNodW5rIG9mIHN0cmVhbWVkIG91dHB1dCwgZ290ICR7Y2h1bmtDb3VudH0gaW5zdGVhZC4gRW5jb3VudGVyZWQgaW46IFwiJHtzdGF0ZS5uYW1lfVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7IGNodW5rOiBzdGF0ZS5zdHJlYW1lZF9vdXRwdXRbMF0gfTtcbiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgc3RyZWFtLCB3ZSBkb24ndCBuZWVkIGl0IGFueW1vcmUuXG4gICAgICAgICAgICAgICAgc3RhdGUuc3RyZWFtZWRfb3V0cHV0ID0gW107XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9zdHJlYW1gLFxuICAgICAgICAgICAgICAgICAgICBydW5faWQ6IHN0YXRlLmlkLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiByb290VGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9vdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlID0gcnVuTG9nPy5zdGF0ZTtcbiAgICAgICAgaWYgKHN0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIEZpbmFsbHksIHlpZWxkIHRoZSBlbmQgZXZlbnQgZm9yIHRoZSByb290IHJ1bm5hYmxlLlxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X2VuZGAsXG4gICAgICAgICAgICAgICAgbmFtZTogcm9vdE5hbWUsXG4gICAgICAgICAgICAgICAgcnVuX2lkOiBzdGF0ZS5pZCxcbiAgICAgICAgICAgICAgICB0YWdzOiByb290VGFncyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBzdGF0ZS5maW5hbF9vdXRwdXQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUudHlwZSkpXG4gICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgaXNSdW5uYWJsZSh0aGluZykge1xuICAgICAgICByZXR1cm4gaXNSdW5uYWJsZUludGVyZmFjZSh0aGluZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBjb25maWc6IHt9LFxuICAgICAgICAgICAgY29uZmlnRmFjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgKGNvbmZpZykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUm9vdExpc3RlbmVyc1RyYWNlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgZGVsZWdhdGVzIGNhbGxzIHRvIGFub3RoZXIgcnVubmFibGUgd2l0aCBhIHNldCBvZiBrd2FyZ3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUJpbmRpbmcgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQmluZGluZ1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ0ZhY3Rvcmllc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJvdW5kID0gZmllbGRzLmJvdW5kO1xuICAgICAgICB0aGlzLmt3YXJncyA9IGZpZWxkcy5rd2FyZ3M7XG4gICAgICAgIHRoaXMuY29uZmlnID0gZmllbGRzLmNvbmZpZztcbiAgICAgICAgdGhpcy5jb25maWdGYWN0b3JpZXMgPSBmaWVsZHMuY29uZmlnRmFjdG9yaWVzO1xuICAgIH1cbiAgICBnZXROYW1lKHN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5nZXROYW1lKHN1ZmZpeCk7XG4gICAgfVxuICAgIGFzeW5jIF9tZXJnZUNvbmZpZyguLi5vcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IG1lcmdlQ29uZmlncyh0aGlzLmNvbmZpZywgLi4ub3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBtZXJnZUNvbmZpZ3MoY29uZmlnLCAuLi4odGhpcy5jb25maWdGYWN0b3JpZXNcbiAgICAgICAgICAgID8gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5jb25maWdGYWN0b3JpZXMubWFwKGFzeW5jIChjb25maWdGYWN0b3J5KSA9PiBhd2FpdCBjb25maWdGYWN0b3J5KGNvbmZpZykpKVxuICAgICAgICAgICAgOiBbXSkpO1xuICAgIH1cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQsXG4gICAgICAgICAgICBrd2FyZ3M6IHsgLi4udGhpcy5rd2FyZ3MsIC4uLmt3YXJncyB9LFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhDb25maWcoY29uZmlnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHsgLi4udGhpcy5jb25maWcsIC4uLmNvbmZpZyB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2l0aFJldHJ5KGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQud2l0aFJldHJ5KGZpZWxkcyksXG4gICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5pbnZva2UoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucylcbiAgICAgICAgICAgID8gYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKGluZGl2aWR1YWxPcHRpb24pID0+IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhpbmRpdmlkdWFsT3B0aW9uKSwgdGhpcy5rd2FyZ3MpKSlcbiAgICAgICAgICAgIDogYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmJhdGNoKGlucHV0cywgbWVyZ2VkT3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLnN0cmVhbShpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyAqdHJhbnNmb3JtKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLmJvdW5kLnRyYW5zZm9ybShnZW5lcmF0b3IsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgKnN0cmVhbUV2ZW50cyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC5zdHJlYW1FdmVudHMoaW5wdXQsIHtcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSksXG4gICAgICAgICAgICB2ZXJzaW9uOiBvcHRpb25zLnZlcnNpb24sXG4gICAgICAgIH0sIHN0cmVhbU9wdGlvbnMpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNSdW5uYWJsZUJpbmRpbmcoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0aGluZ1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGluZy5ib3VuZCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nLmJvdW5kKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBsaWZlY3ljbGUgbGlzdGVuZXJzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBUaGUgUnVuIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcnVuLCBpbmNsdWRpbmcgaXRzIGlkLFxuICAgICAqIHR5cGUsIGlucHV0LCBvdXRwdXQsIGVycm9yLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFuZCBhbnkgdGFncyBvciBtZXRhZGF0YVxuICAgICAqIGFkZGVkIHRvIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vblN0YXJ0IC0gQ2FsbGVkIGJlZm9yZSB0aGUgcnVubmFibGUgc3RhcnRzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVuZCAtIENhbGxlZCBhZnRlciB0aGUgcnVubmFibGUgZmluaXNoZXMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRXJyb3IgLSBDYWxsZWQgaWYgdGhlIHJ1bm5hYmxlIHRocm93cyBhbiBlcnJvciwgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKi9cbiAgICB3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQsXG4gICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgIGNvbmZpZ0ZhY3RvcmllczogW1xuICAgICAgICAgICAgICAgIChjb25maWcpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJvb3RMaXN0ZW5lcnNUcmFjZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGRlbGVnYXRlcyBjYWxscyB0byBhbm90aGVyIHJ1bm5hYmxlXG4gKiB3aXRoIGVhY2ggZWxlbWVudCBvZiB0aGUgaW5wdXQgc2VxdWVuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUVhY2ggZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlRWFjaFwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJvdW5kID0gZmllbGRzLmJvdW5kO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0ga3dhcmdzIFRoZSBhcmd1bWVudHMgdG8gYmluZCB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFJ1bm5hYmxlRWFjaGAgY2xhc3MgdGhhdCBpcyBib3VuZCB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzLlxuICAgICAqL1xuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLmJpbmQoa3dhcmdzKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCBhbmQgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWd1cmF0aW9uIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXRzLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXRzLCBjb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZ3VyYXRpb24gdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIF9pbnZva2UoaW5wdXRzLCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuYmF0Y2goaW5wdXRzLCBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBsaWZlY3ljbGUgbGlzdGVuZXJzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBUaGUgUnVuIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcnVuLCBpbmNsdWRpbmcgaXRzIGlkLFxuICAgICAqIHR5cGUsIGlucHV0LCBvdXRwdXQsIGVycm9yLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFuZCBhbnkgdGFncyBvciBtZXRhZGF0YVxuICAgICAqIGFkZGVkIHRvIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vblN0YXJ0IC0gQ2FsbGVkIGJlZm9yZSB0aGUgcnVubmFibGUgc3RhcnRzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVuZCAtIENhbGxlZCBhZnRlciB0aGUgcnVubmFibGUgZmluaXNoZXMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRXJyb3IgLSBDYWxsZWQgaWYgdGhlIHJ1bm5hYmxlIHRocm93cyBhbiBlcnJvciwgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKi9cbiAgICB3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUVhY2goe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQud2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHJ1bm5hYmxlcyB0aGF0IGNhbiBiZSByZXRyaWVkIGFcbiAqIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVJldHJ5IGV4dGVuZHMgUnVubmFibGVCaW5kaW5nIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVSZXRyeVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4QXR0ZW1wdE51bWJlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogM1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib25GYWlsZWRBdHRlbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAoKSA9PiB7IH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWF4QXR0ZW1wdE51bWJlciA9IGZpZWxkcy5tYXhBdHRlbXB0TnVtYmVyID8/IHRoaXMubWF4QXR0ZW1wdE51bWJlcjtcbiAgICAgICAgdGhpcy5vbkZhaWxlZEF0dGVtcHQgPSBmaWVsZHMub25GYWlsZWRBdHRlbXB0ID8/IHRoaXMub25GYWlsZWRBdHRlbXB0O1xuICAgIH1cbiAgICBfcGF0Y2hDb25maWdGb3JSZXRyeShhdHRlbXB0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgdGFnID0gYXR0ZW1wdCA+IDEgPyBgcmV0cnk6YXR0ZW1wdDoke2F0dGVtcHR9YCA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHBhdGNoQ29uZmlnKGNvbmZpZywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKHRhZykgfSk7XG4gICAgfVxuICAgIGFzeW5jIF9pbnZva2UoaW5wdXQsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICByZXR1cm4gcFJldHJ5KChhdHRlbXB0TnVtYmVyKSA9PiBzdXBlci5pbnZva2UoaW5wdXQsIHRoaXMuX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdE51bWJlciwgY29uZmlnLCBydW5NYW5hZ2VyKSksIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IChlcnJvcikgPT4gdGhpcy5vbkZhaWxlZEF0dGVtcHQoZXJyb3IsIGlucHV0KSxcbiAgICAgICAgICAgIHJldHJpZXM6IE1hdGgubWF4KHRoaXMubWF4QXR0ZW1wdE51bWJlciAtIDEsIDApLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgaW52b2tlcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0LCBydW4gbWFuYWdlcixcbiAgICAgKiBhbmQgY29uZmlnLiBJdCBoYW5kbGVzIHRoZSByZXRyeSBsb2dpYyBieSBjYXRjaGluZyBhbnkgZXJyb3JzIGFuZFxuICAgICAqIHJlY3Vyc2l2ZWx5IGludm9raW5nIGl0c2VsZiB3aXRoIHRoZSB1cGRhdGVkIGNvbmZpZyBmb3IgdGhlIG5leHQgcmV0cnlcbiAgICAgKiBhdHRlbXB0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gcnVuTWFuYWdlciBUaGUgcnVuIG1hbmFnZXIgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWcgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLCBpbnB1dCwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgX2JhdGNoKGlucHV0cywgY29uZmlncywgcnVuTWFuYWdlcnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHRzTWFwID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwUmV0cnkoYXN5bmMgKGF0dGVtcHROdW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdJbmRleGVzID0gaW5wdXRzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKF8sIGkpID0+IGkpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGkpID0+IHJlc3VsdHNNYXBbaS50b1N0cmluZygpXSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01hcFtpLnRvU3RyaW5nKCldIGluc3RhbmNlb2YgRXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0lucHV0cyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiBpbnB1dHNbaV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoZWRDb25maWdzID0gcmVtYWluaW5nSW5kZXhlcy5tYXAoKGkpID0+IHRoaXMuX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdE51bWJlciwgY29uZmlncz8uW2ldLCBydW5NYW5hZ2Vycz8uW2ldKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHN1cGVyLmJhdGNoKHJlbWFpbmluZ0lucHV0cywgcGF0Y2hlZENvbmZpZ3MsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYmF0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5FeGNlcHRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxldCBmaXJzdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0TWFwSW5kZXggPSByZW1haW5pbmdJbmRleGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RXhjZXB0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEV4Y2VwdGlvbiA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RXhjZXB0aW9uLmlucHV0ID0gcmVtYWluaW5nSW5wdXRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXBbcmVzdWx0TWFwSW5kZXgudG9TdHJpbmcoKV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaXJzdEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmaXJzdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IChlcnJvcikgPT4gdGhpcy5vbkZhaWxlZEF0dGVtcHQoZXJyb3IsIGVycm9yLmlucHV0KSxcbiAgICAgICAgICAgICAgICByZXRyaWVzOiBNYXRoLm1heCh0aGlzLm1heEF0dGVtcHROdW1iZXIgLSAxLCAwKSxcbiAgICAgICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHJlc3VsdHNNYXApXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYSwgMTApIC0gcGFyc2VJbnQoYiwgMTApKVxuICAgICAgICAgICAgLm1hcCgoa2V5KSA9PiByZXN1bHRzTWFwW3BhcnNlSW50KGtleSwgMTApXSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYXRjaFdpdGhDb25maWcodGhpcy5fYmF0Y2guYmluZCh0aGlzKSwgaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzZXF1ZW5jZSBvZiBydW5uYWJsZXMsIHdoZXJlIHRoZSBvdXRwdXQgb2YgZWFjaCBpcyB0aGUgaW5wdXQgb2YgdGhlIG5leHQuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0VGVtcGxhdGUgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgIFwiVGVsbCBtZSBhIGpva2UgYWJvdXQge3RvcGljfVwiLFxuICogKTtcbiAqIGNvbnN0IGNoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtwcm9tcHRUZW1wbGF0ZSwgbmV3IENoYXRPcGVuQUkoe30pXSk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyc1wiIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVNlcXVlbmNlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVNlcXVlbmNlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaXJzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtaWRkbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXN0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5maXJzdCA9IGZpZWxkcy5maXJzdDtcbiAgICAgICAgdGhpcy5taWRkbGUgPSBmaWVsZHMubWlkZGxlID8/IHRoaXMubWlkZGxlO1xuICAgICAgICB0aGlzLmxhc3QgPSBmaWVsZHMubGFzdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG4gICAgfVxuICAgIGdldCBzdGVwcygpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBjb25maWcucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgIGxldCBuZXh0U3RlcElucHV0ID0gaW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxTdGVwcyA9IFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZV07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluaXRpYWxTdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBpbml0aWFsU3RlcHNbaV07XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXBJbnB1dCA9IGF3YWl0IHN0ZXAuaW52b2tlKG5leHRTdGVwSW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFR5cGVTY3JpcHQgY2FuJ3QgZGV0ZWN0IHRoYXQgdGhlIGxhc3Qgb3V0cHV0IG9mIHRoZSBzZXF1ZW5jZSByZXR1cm5zIFJ1bk91dHB1dCwgc28gY2FsbCBpdCBvdXQgb2YgdGhlIGxvb3AgaGVyZVxuICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBhd2FpdCB0aGlzLmxhc3QuaW52b2tlKG5leHRTdGVwSW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYHNlcTpzdGVwOiR7dGhpcy5zdGVwcy5sZW5ndGh9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QoZmluYWxPdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIGZpbmFsT3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25maWdMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja01hbmFnZXJzLm1hcChhc3luYyAoY2FsbGJhY2tNYW5hZ2VyLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVTdGFydFJlcyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgY29uZmlnTGlzdFtpXS5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnTGlzdFtpXS5ydW5OYW1lKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb25maWdMaXN0W2ldLnJ1bklkO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVN0YXJ0UmVzO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBuZXh0U3RlcElucHV0cyA9IGlucHV0cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSB0aGlzLnN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwSW5wdXRzID0gYXdhaXQgc3RlcC5iYXRjaChuZXh0U3RlcElucHV0cywgcnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBqKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkUnVuTWFuYWdlciA9IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke2kgKyAxfWApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0Y2hDb25maWcoY29uZmlnTGlzdFtqXSwgeyBjYWxsYmFja3M6IGNoaWxkUnVuTWFuYWdlciB9KTtcbiAgICAgICAgICAgICAgICB9KSwgYmF0Y2hPcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChuZXh0U3RlcElucHV0cywgXCJvdXRwdXRcIikpKSk7XG4gICAgICAgIHJldHVybiBuZXh0U3RlcElucHV0cztcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5vdGhlck9wdGlvbnMgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlck9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBjb25zdCBzdGVwcyA9IFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XTtcbiAgICAgICAgbGV0IGNvbmNhdFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGlucHV0R2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBmaW5hbEdlbmVyYXRvciA9IHN0ZXBzWzBdLnRyYW5zZm9ybShpbnB1dEdlbmVyYXRvcigpLCBwYXRjaENvbmZpZyhvdGhlck9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoxYCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGZpbmFsR2VuZXJhdG9yID0gYXdhaXQgc3RlcC50cmFuc2Zvcm0oZmluYWxHZW5lcmF0b3IsIHBhdGNoQ29uZmlnKG90aGVyT3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZmluYWxHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoY29uY2F0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmNhdFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KGZpbmFsT3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgfVxuICAgIGdldEdyYXBoKGNvbmZpZykge1xuICAgICAgICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgY3VycmVudExhc3ROb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGVwcy5mb3JFYWNoKChzdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RlcEdyYXBoID0gc3RlcC5nZXRHcmFwaChjb25maWcpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgc3RlcEdyYXBoLnRyaW1GaXJzdE5vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gdGhpcy5zdGVwcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgc3RlcEdyYXBoLnRyaW1MYXN0Tm9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JhcGguZXh0ZW5kKHN0ZXBHcmFwaCk7XG4gICAgICAgICAgICBjb25zdCBzdGVwRmlyc3ROb2RlID0gc3RlcEdyYXBoLmZpcnN0Tm9kZSgpO1xuICAgICAgICAgICAgaWYgKCFzdGVwRmlyc3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSdW5uYWJsZSAke3N0ZXB9IGhhcyBubyBmaXJzdCBub2RlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudExhc3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgZ3JhcGguYWRkRWRnZShjdXJyZW50TGFzdE5vZGUsIHN0ZXBGaXJzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudExhc3ROb2RlID0gc3RlcEdyYXBoLmxhc3ROb2RlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZ3JhcGg7XG4gICAgfVxuICAgIHBpcGUoY29lcmNlYWJsZSkge1xuICAgICAgICBpZiAoUnVubmFibGVTZXF1ZW5jZS5pc1J1bm5hYmxlU2VxdWVuY2UoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgZmlyc3Q6IHRoaXMuZmlyc3QsXG4gICAgICAgICAgICAgICAgbWlkZGxlOiB0aGlzLm1pZGRsZS5jb25jYXQoW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3QsXG4gICAgICAgICAgICAgICAgICAgIGNvZXJjZWFibGUuZmlyc3QsXG4gICAgICAgICAgICAgICAgICAgIC4uLmNvZXJjZWFibGUubWlkZGxlLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIGxhc3Q6IGNvZXJjZWFibGUubGFzdCxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUgPz8gY29lcmNlYWJsZS5uYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogWy4uLnRoaXMubWlkZGxlLCB0aGlzLmxhc3RdLFxuICAgICAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgc3RhdGljIGlzUnVubmFibGVTZXF1ZW5jZSh0aGluZykge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGluZy5taWRkbGUpICYmIFJ1bm5hYmxlLmlzUnVubmFibGUodGhpbmcpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBmcm9tKFtmaXJzdCwgLi4ucnVubmFibGVzXSwgbmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgZmlyc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGZpcnN0KSxcbiAgICAgICAgICAgIG1pZGRsZTogcnVubmFibGVzLnNsaWNlKDAsIC0xKS5tYXAoX2NvZXJjZVRvUnVubmFibGUpLFxuICAgICAgICAgICAgbGFzdDogX2NvZXJjZVRvUnVubmFibGUocnVubmFibGVzW3J1bm5hYmxlcy5sZW5ndGggLSAxXSksXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgbWFwcGluZyBvZiBydW5uYWJsZXMgaW4gcGFyYWxsZWwsXG4gKiBhbmQgcmV0dXJucyBhIG1hcHBpbmcgb2YgdGhlaXIgb3V0cHV0cy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtYXBDaGFpbiA9IFJ1bm5hYmxlTWFwLmZyb20oe1xuICogICBqb2tlOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJUZWxsIG1lIGEgam9rZSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogICBwb2VtOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ3cml0ZSBhIDItbGluZSBwb2VtIGFib3V0IHt0b3BpY31cIikucGlwZShcbiAqICAgICBuZXcgQ2hhdEFudGhyb3BpYyh7fSksXG4gKiAgICksXG4gKiB9KTtcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hcENoYWluLmludm9rZSh7IHRvcGljOiBcImJlYXJcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVNYXAgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlTWFwXCI7XG4gICAgfVxuICAgIGdldFN0ZXBzS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuc3RlcHMpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGVwc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0ZXBzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcy5zdGVwcykpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcHNba2V5XSA9IF9jb2VyY2VUb1J1bm5hYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbShzdGVwcykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTWFwKHsgc3RlcHMgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwge1xuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgIH0sIGNvbmZpZy5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lKTtcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyh0aGlzLnN0ZXBzKS5tYXAoYXN5bmMgKFtrZXksIHJ1bm5hYmxlXSkgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gYXdhaXQgcnVubmFibGUuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgbWFwOmtleToke2tleX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKG91dHB1dCk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvciwgcnVuTWFuYWdlciwgb3B0aW9ucykge1xuICAgICAgICAvLyBzaGFsbG93IGNvcHkgc3RlcHMgdG8gaWdub3JlIGNoYW5nZXMgd2hpbGUgaXRlcmF0aW5nXG4gICAgICAgIGNvbnN0IHN0ZXBzID0geyAuLi50aGlzLnN0ZXBzIH07XG4gICAgICAgIC8vIGVhY2ggc3RlcCBnZXRzIGEgY29weSBvZiB0aGUgaW5wdXQgaXRlcmF0b3JcbiAgICAgICAgY29uc3QgaW5wdXRDb3BpZXMgPSBhdGVlKGdlbmVyYXRvciwgT2JqZWN0LmtleXMoc3RlcHMpLmxlbmd0aCk7XG4gICAgICAgIC8vIHN0YXJ0IHRoZSBmaXJzdCBpdGVyYXRpb24gb2YgZWFjaCBvdXRwdXQgaXRlcmF0b3JcbiAgICAgICAgY29uc3QgdGFza3MgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHN0ZXBzKS5tYXAoKFtrZXksIHJ1bm5hYmxlXSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ2VuID0gcnVubmFibGUudHJhbnNmb3JtKGlucHV0Q29waWVzW2ldLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgbWFwOmtleToke2tleX1gKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBba2V5LCBnZW4ubmV4dCgpLnRoZW4oKHJlc3VsdCkgPT4gKHsga2V5LCBnZW4sIHJlc3VsdCB9KSldO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIHlpZWxkIGNodW5rcyBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsXG4gICAgICAgIC8vIHN0YXJ0aW5nIG5ldyBpdGVyYXRpb25zIGFzIG5lZWRlZCxcbiAgICAgICAgLy8gdW50aWwgYWxsIGl0ZXJhdG9ycyBhcmUgZG9uZVxuICAgICAgICB3aGlsZSAodGFza3Muc2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHJlc3VsdCwgZ2VuIH0gPSBhd2FpdCBQcm9taXNlLnJhY2UodGFza3MudmFsdWVzKCkpO1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgeyBba2V5XTogcmVzdWx0LnZhbHVlIH07XG4gICAgICAgICAgICAgICAgdGFza3Muc2V0KGtleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIG9wdGlvbnMpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHJ1bnMgYSBjYWxsYWJsZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlTGFtYmRhIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUxhbWJkYVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnVuY1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICB9XG4gICAgc3RhdGljIGZyb20oZnVuYykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTGFtYmRhKHtcbiAgICAgICAgICAgIGZ1bmMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2b2lkIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0SW5zdGFuY2UoKS5ydW4oY2hpbGRDb25maWcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0cHV0ID0gYXdhaXQgdGhpcy5mdW5jKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0ICYmIFJ1bm5hYmxlLmlzUnVubmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWN1cnNpb24gbGltaXQgcmVhY2hlZC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBvdXRwdXQuaW52b2tlKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaW9uTGltaXQ6IChjaGlsZENvbmZpZy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNBc3luY0l0ZXJhYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQoY2hpbGRDb25maWcsIG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBhIGJlc3QgZWZmb3J0IHRvIGdhdGhlciwgZm9yIGFueSB0eXBlIHRoYXQgc3VwcG9ydHMgY29uY2F0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBmaW5hbE91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0l0ZXJhdG9yKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBiZXN0IGVmZm9ydCB0byBnYXRoZXIsIGZvciBhbnkgdHlwZSB0aGF0IHN1cHBvcnRzIGNvbmNhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gZmluYWxPdXRwdXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvdXRwdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIGNvbmZpZykge1xuICAgICAgICBsZXQgZmluYWxDaHVuaztcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmIChmaW5hbENodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkucnVuKGNvbmZpZywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuZnVuYyhmaW5hbENodW5rLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvdXRwdXQgJiYgUnVubmFibGUuaXNSdW5uYWJsZShvdXRwdXQpKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY3Vyc2lvbiBsaW1pdCByZWFjaGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG91dHB1dC5zdHJlYW0oZmluYWxDaHVuaywgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0FzeW5jSXRlcmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dChjb25maWcsIG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0l0ZXJhdG9yKG91dHB1dCkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNvbmZpZywgb3V0cHV0KSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeWllbGQgb3V0cHV0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogZ2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgb3B0aW9ucykpO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUGFyYWxsZWwgZXh0ZW5kcyBSdW5uYWJsZU1hcCB7XG59XG4vKipcbiAqIEEgUnVubmFibGUgdGhhdCBjYW4gZmFsbGJhY2sgdG8gb3RoZXIgUnVubmFibGVzIGlmIGl0IGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVXaXRoRmFsbGJhY2tzIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVdpdGhGYWxsYmFja3NcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVubmFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmFsbGJhY2tzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucnVubmFibGUgPSBmaWVsZHMucnVubmFibGU7XG4gICAgICAgIHRoaXMuZmFsbGJhY2tzID0gZmllbGRzLmZhbGxiYWNrcztcbiAgICB9XG4gICAgKnJ1bm5hYmxlcygpIHtcbiAgICAgICAgeWllbGQgdGhpcy5ydW5uYWJsZTtcbiAgICAgICAgZm9yIChjb25zdCBmYWxsYmFjayBvZiB0aGlzLmZhbGxiYWNrcykge1xuICAgICAgICAgICAgeWllbGQgZmFsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKG9wdGlvbnM/LmNhbGxiYWNrcywgdW5kZWZpbmVkLCBvcHRpb25zPy50YWdzLCB1bmRlZmluZWQsIG9wdGlvbnM/Lm1ldGFkYXRhKTtcbiAgICAgICAgY29uc3QgeyBydW5JZCwgLi4ub3RoZXJPcHRpb25zIH0gPSBvcHRpb25zID8/IHt9O1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3RoZXJPcHRpb25zPy5ydW5OYW1lKTtcbiAgICAgICAgbGV0IGZpcnN0RXJyb3I7XG4gICAgICAgIGZvciAoY29uc3QgcnVubmFibGUgb2YgdGhpcy5ydW5uYWJsZXMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCBydW5uYWJsZS5pbnZva2UoaW5wdXQsIHBhdGNoQ29uZmlnKG90aGVyT3B0aW9ucywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihmaXJzdEVycm9yKTtcbiAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25maWdMaXN0Lm1hcCgoY29uZmlnKSA9PiBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGNvbmZpZz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIGNvbmZpZz8udGFncywgdW5kZWZpbmVkLCBjb25maWc/Lm1ldGFkYXRhKSkpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKGFzeW5jIChjYWxsYmFja01hbmFnZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVN0YXJ0UmVzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCBjb25maWdMaXN0W2ldLnJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWdMaXN0W2ldLnJ1bk5hbWUpO1xuICAgICAgICAgICAgZGVsZXRlIGNvbmZpZ0xpc3RbaV0ucnVuSWQ7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlU3RhcnRSZXM7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGZpcnN0RXJyb3I7XG4gICAgICAgIGZvciAoY29uc3QgcnVubmFibGUgb2YgdGhpcy5ydW5uYWJsZXMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRzID0gYXdhaXQgcnVubmFibGUuYmF0Y2goaW5wdXRzLCBydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGopID0+IHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgICAgIH0pKSwgYmF0Y2hPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGkpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0c1tpXSwgXCJvdXRwdXRcIikpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFcnJvciA9IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZmlyc3RFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFja3MuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihmaXJzdEVycm9yKSkpO1xuICAgICAgICB0aHJvdyBmaXJzdEVycm9yO1xuICAgIH1cbn1cbi8vIFRPRE86IEZpZ3VyZSBvdXQgd2h5IHRoZSBjb21waWxlciBuZWVkcyBoZWxwIGVsaW1pbmF0aW5nIEVycm9yIGFzIGEgUnVuT3V0cHV0IHR5cGVcbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSB7XG4gICAgaWYgKHR5cGVvZiBjb2VyY2VhYmxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUxhbWJkYSh7IGZ1bmM6IGNvZXJjZWFibGUgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFJ1bm5hYmxlLmlzUnVubmFibGUoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgcmV0dXJuIGNvZXJjZWFibGU7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGNvZXJjZWFibGUpICYmIHR5cGVvZiBjb2VyY2VhYmxlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IHJ1bm5hYmxlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb2VyY2VhYmxlKSkge1xuICAgICAgICAgICAgcnVubmFibGVzW2tleV0gPSBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZU1hcCh7XG4gICAgICAgICAgICBzdGVwczogcnVubmFibGVzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYSBSdW5uYWJsZSwgZnVuY3Rpb24gb3Igb2JqZWN0Llxcbkluc3RlYWQgZ290IGFuIHVuc3VwcG9ydGVkIHR5cGUuYCk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgYXNzaWducyBrZXktdmFsdWUgcGFpcnMgdG8gaW5wdXRzIG9mIHR5cGUgYFJlY29yZDxzdHJpbmcsIHVua25vd24+YC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlQXNzaWduIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUFzc2lnblwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICBpZiAoZmllbGRzIGluc3RhbmNlb2YgUnVubmFibGVNYXApIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBtYXBwZXI6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWFwcGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFwcGVyID0gZmllbGRzLm1hcHBlcjtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlclJlc3VsdCA9IGF3YWl0IHRoaXMubWFwcGVyLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pbnB1dCxcbiAgICAgICAgICAgIC4uLm1hcHBlclJlc3VsdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIGNvbGxlY3QgbWFwcGVyIGtleXNcbiAgICAgICAgY29uc3QgbWFwcGVyS2V5cyA9IHRoaXMubWFwcGVyLmdldFN0ZXBzS2V5cygpO1xuICAgICAgICAvLyBjcmVhdGUgdHdvIGlucHV0IGdlbnMsIG9uZSBmb3IgdGhlIG1hcHBlciwgb25lIGZvciB0aGUgaW5wdXRcbiAgICAgICAgY29uc3QgW2ZvclBhc3N0aHJvdWdoLCBmb3JNYXBwZXJdID0gYXRlZShnZW5lcmF0b3IpO1xuICAgICAgICAvLyBjcmVhdGUgbWFwcGVyIG91dHB1dCBnZW5cbiAgICAgICAgY29uc3QgbWFwcGVyT3V0cHV0ID0gdGhpcy5tYXBwZXIudHJhbnNmb3JtKGZvck1hcHBlciwgcGF0Y2hDb25maWcob3B0aW9ucywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgICAgICAvLyBzdGFydCB0aGUgbWFwcGVyXG4gICAgICAgIGNvbnN0IGZpcnN0TWFwcGVyQ2h1bmtQcm9taXNlID0gbWFwcGVyT3V0cHV0Lm5leHQoKTtcbiAgICAgICAgLy8geWllbGQgdGhlIHBhc3N0aHJvdWdoXG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZm9yUGFzc3Rocm91Z2gpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShjaHVuaykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJ1bm5hYmxlQXNzaWduIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBvYmplY3RzIGFzIGlucHV0LCBnb3QgJHt0eXBlb2YgY2h1bmt9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhjaHVuaykuZmlsdGVyKChba2V5XSkgPT4gIW1hcHBlcktleXMuaW5jbHVkZXMoa2V5KSkpO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGZpbHRlcmVkKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgZmlsdGVyZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8geWllbGQgdGhlIG1hcHBlciBvdXRwdXRcbiAgICAgICAgeWllbGQgKGF3YWl0IGZpcnN0TWFwcGVyQ2h1bmtQcm9taXNlKS52YWx1ZTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBtYXBwZXJPdXRwdXQpIHtcbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogZ2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgb3B0aW9ucykpO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgYXNzaWducyBrZXktdmFsdWUgcGFpcnMgdG8gaW5wdXRzIG9mIHR5cGUgYFJlY29yZDxzdHJpbmcsIHVua25vd24+YC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUGljayBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVQaWNrXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBrZXlzOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtleXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5rZXlzID0gZmllbGRzLmtleXM7XG4gICAgfVxuICAgIGFzeW5jIF9waWNrKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRbdGhpcy5rZXlzXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBpY2tlZCA9IHRoaXMua2V5c1xuICAgICAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gW2tleSwgaW5wdXRba2V5XV0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdlsxXSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHJldHVybiBwaWNrZWQubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogT2JqZWN0LmZyb21FbnRyaWVzKHBpY2tlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9waWNrLmJpbmQodGhpcyksIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yKSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBwaWNrZWQgPSBhd2FpdCB0aGlzLl9waWNrKGNodW5rKTtcbiAgICAgICAgICAgIGlmIChwaWNrZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHBpY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIG9wdGlvbnMpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ6IiwicFJldHJ5IiwiQ2FsbGJhY2tNYW5hZ2VyIiwiTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiUnVuTG9nIiwiUnVuTG9nUGF0Y2giLCJTZXJpYWxpemFibGUiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiY29uY2F0IiwiYXRlZSIsInBpcGVHZW5lcmF0b3JXaXRoU2V0dXAiLCJBc3luY0dlbmVyYXRvcldpdGhTZXR1cCIsIkRFRkFVTFRfUkVDVVJTSU9OX0xJTUlUIiwiZW5zdXJlQ29uZmlnIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwibWVyZ2VDb25maWdzIiwicGF0Y2hDb25maWciLCJBc3luY0NhbGxlciIsIlJvb3RMaXN0ZW5lcnNUcmFjZXIiLCJfUm9vdEV2ZW50RmlsdGVyIiwiaXNSdW5uYWJsZUludGVyZmFjZSIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJHcmFwaCIsImNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbSIsImNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0IiwiY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0IiwiaXNBc3luY0l0ZXJhYmxlIiwiaXNJdGVyYXRvciIsIl9jb2VyY2VUb0RpY3QiLCJ2YWx1ZSIsImRlZmF1bHRLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJEYXRlIiwiUnVubmFibGUiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2V0TmFtZSIsInN1ZmZpeCIsIm5hbWUiLCJsY19uYW1lIiwiYmluZCIsImt3YXJncyIsIlJ1bm5hYmxlQmluZGluZyIsImJvdW5kIiwiY29uZmlnIiwibWFwIiwiUnVubmFibGVFYWNoIiwid2l0aFJldHJ5IiwiZmllbGRzIiwiUnVubmFibGVSZXRyeSIsIm1heEF0dGVtcHROdW1iZXIiLCJzdG9wQWZ0ZXJBdHRlbXB0Iiwid2l0aENvbmZpZyIsIndpdGhGYWxsYmFja3MiLCJSdW5uYWJsZVdpdGhGYWxsYmFja3MiLCJydW5uYWJsZSIsImZhbGxiYWNrcyIsIl9nZXRPcHRpb25zTGlzdCIsIm9wdGlvbnMiLCJsZW5ndGgiLCJFcnJvciIsInJ1bklkIiwiY29uc29sZSIsIndhcm4iLCJzdWJzZXF1ZW50IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiZmlsdGVyIiwia2V5IiwiZnJvbSIsIl8iLCJpIiwiYmF0Y2giLCJpbnB1dHMiLCJiYXRjaE9wdGlvbnMiLCJjb25maWdMaXN0IiwibWF4Q29uY3VycmVuY3kiLCJjYWxsZXIiLCJvbkZhaWxlZEF0dGVtcHQiLCJlIiwiYmF0Y2hDYWxscyIsImlucHV0IiwiY2FsbCIsInJlc3VsdCIsImludm9rZSIsInJldHVybkV4Y2VwdGlvbnMiLCJQcm9taXNlIiwiYWxsIiwiX3N0cmVhbUl0ZXJhdG9yIiwic3RyZWFtIiwid3JhcHBlZEdlbmVyYXRvciIsInNldHVwIiwiZnJvbUFzeW5jR2VuZXJhdG9yIiwiX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMiLCJydW5uYWJsZUNvbmZpZyIsInVuZGVmaW5lZCIsImNhbGxiYWNrcyIsInRhZ3MiLCJtZXRhZGF0YSIsInJ1bk5hbWUiLCJyZWN1cnNpb25MaW1pdCIsImNhbGxPcHRpb25zIiwiX2NhbGxXaXRoQ29uZmlnIiwiZnVuYyIsImNhbGxiYWNrTWFuYWdlcl8iLCJydW5NYW5hZ2VyIiwiaGFuZGxlQ2hhaW5TdGFydCIsInRvSlNPTiIsInJ1blR5cGUiLCJvdXRwdXQiLCJoYW5kbGVDaGFpbkVycm9yIiwiaGFuZGxlQ2hhaW5FbmQiLCJfYmF0Y2hXaXRoQ29uZmlnIiwib3B0aW9uc0xpc3QiLCJjYWxsYmFja01hbmFnZXJzIiwicnVuTWFuYWdlcnMiLCJjYWxsYmFja01hbmFnZXIiLCJoYW5kbGVTdGFydFJlcyIsIm91dHB1dHMiLCJfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyIsImlucHV0R2VuZXJhdG9yIiwidHJhbnNmb3JtZXIiLCJmaW5hbElucHV0IiwiZmluYWxJbnB1dFN1cHBvcnRlZCIsImZpbmFsT3V0cHV0IiwiZmluYWxPdXRwdXRTdXBwb3J0ZWQiLCJ3cmFwSW5wdXRGb3JUcmFjaW5nIiwiY2h1bmsiLCJwaXBlIiwiaXNMb2dTdHJlYW1IYW5kbGVyIiwiaGFuZGxlciIsInN0cmVhbUxvZ0hhbmRsZXIiLCJoYW5kbGVycyIsImZpbmQiLCJpdGVyYXRvciIsInRhcE91dHB1dEl0ZXJhYmxlIiwiZ2V0R3JhcGgiLCJncmFwaCIsImlucHV0Tm9kZSIsImFkZE5vZGUiLCJzY2hlbWEiLCJhbnkiLCJydW5uYWJsZU5vZGUiLCJvdXRwdXROb2RlIiwiYWRkRWRnZSIsImNvZXJjZWFibGUiLCJSdW5uYWJsZVNlcXVlbmNlIiwiZmlyc3QiLCJsYXN0IiwiX2NvZXJjZVRvUnVubmFibGUiLCJwaWNrIiwia2V5cyIsIlJ1bm5hYmxlUGljayIsImFzc2lnbiIsIm1hcHBpbmciLCJSdW5uYWJsZUFzc2lnbiIsIlJ1bm5hYmxlTWFwIiwic3RlcHMiLCJ0cmFuc2Zvcm0iLCJnZW5lcmF0b3IiLCJmaW5hbENodW5rIiwic3RyZWFtTG9nIiwic3RyZWFtT3B0aW9ucyIsImxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciIsImF1dG9DbG9zZSIsIl9zY2hlbWFGb3JtYXQiLCJfc3RyZWFtTG9nIiwiY29waWVkQ2FsbGJhY2tzIiwiY29weSIsImluaGVyaXRhYmxlSGFuZGxlcnMiLCJwdXNoIiwicnVubmFibGVTdHJlYW1Qcm9taXNlIiwiY29uc3VtZVJ1bm5hYmxlU3RyZWFtIiwicnVubmFibGVTdHJlYW0iLCJwYXRjaCIsIm9wcyIsIm9wIiwicGF0aCIsIndyaXRlciIsIndyaXRlIiwiY2xvc2UiLCJydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlIiwibG9nIiwic3RyZWFtRXZlbnRzIiwiZW5jb2RpbmciLCJfc3RyZWFtRXZlbnRzIiwidmVyc2lvbiIsInJ1bkxvZyIsImhhc0VuY291bnRlcmVkU3RhcnRFdmVudCIsInJvb3RUYWdzIiwicm9vdE1ldGFkYXRhIiwicm9vdE5hbWUiLCJyb290RXZlbnRGaWx0ZXIiLCJsb2dTdHJlYW0iLCJmcm9tUnVuTG9nUGF0Y2giLCJzdGF0ZSIsImV2ZW50IiwicnVuX2lkIiwiaWQiLCJ0eXBlIiwiZGF0YSIsImluY2x1ZGVFdmVudCIsInBhdGhzIiwic3RhcnRzV2l0aCIsInNwbGl0IiwiZGVkdXBlZFBhdGhzIiwiU2V0IiwiZXZlbnRUeXBlIiwibG9nRW50cnkiLCJsb2dzIiwiZW5kX3RpbWUiLCJzdHJlYW1lZF9vdXRwdXQiLCJmaW5hbF9vdXRwdXQiLCJjaHVua0NvdW50IiwiaXNSdW5uYWJsZSIsInRoaW5nIiwid2l0aExpc3RlbmVycyIsIm9uU3RhcnQiLCJvbkVuZCIsIm9uRXJyb3IiLCJjb25maWdGYWN0b3JpZXMiLCJfbWVyZ2VDb25maWciLCJjb25maWdGYWN0b3J5IiwibWVyZ2VkT3B0aW9ucyIsImluZGl2aWR1YWxPcHRpb24iLCJpc1J1bm5hYmxlQmluZGluZyIsIl9pbnZva2UiLCJnZXRDaGlsZCIsIl9wYXRjaENvbmZpZ0ZvclJldHJ5IiwiYXR0ZW1wdCIsInRhZyIsImF0dGVtcHROdW1iZXIiLCJlcnJvciIsInJldHJpZXMiLCJNYXRoIiwibWF4IiwicmFuZG9taXplIiwiX2JhdGNoIiwiY29uZmlncyIsInJlc3VsdHNNYXAiLCJyZW1haW5pbmdJbmRleGVzIiwidG9TdHJpbmciLCJyZW1haW5pbmdJbnB1dHMiLCJwYXRjaGVkQ29uZmlncyIsInJlc3VsdHMiLCJmaXJzdEV4Y2VwdGlvbiIsInJlc3VsdE1hcEluZGV4Iiwic29ydCIsImEiLCJiIiwicGFyc2VJbnQiLCJtaWRkbGUiLCJuZXh0U3RlcElucHV0IiwiaW5pdGlhbFN0ZXBzIiwic3RlcCIsIm5leHRTdGVwSW5wdXRzIiwiaiIsImNoaWxkUnVuTWFuYWdlciIsIm90aGVyT3B0aW9ucyIsImNvbmNhdFN1cHBvcnRlZCIsImZpbmFsR2VuZXJhdG9yIiwiY3VycmVudExhc3ROb2RlIiwiZm9yRWFjaCIsImluZGV4Iiwic3RlcEdyYXBoIiwidHJpbUZpcnN0Tm9kZSIsInRyaW1MYXN0Tm9kZSIsImV4dGVuZCIsInN0ZXBGaXJzdE5vZGUiLCJmaXJzdE5vZGUiLCJsYXN0Tm9kZSIsImlzUnVubmFibGVTZXF1ZW5jZSIsInJ1bm5hYmxlcyIsInNsaWNlIiwiZ2V0U3RlcHNLZXlzIiwiX3RyYW5zZm9ybSIsImlucHV0Q29waWVzIiwidGFza3MiLCJNYXAiLCJnZW4iLCJuZXh0IiwidGhlbiIsInNpemUiLCJyYWNlIiwidmFsdWVzIiwiZGVsZXRlIiwiZG9uZSIsInNldCIsIlJ1bm5hYmxlTGFtYmRhIiwicmVzb2x2ZSIsInJlamVjdCIsImNoaWxkQ29uZmlnIiwiZ2V0SW5zdGFuY2UiLCJydW4iLCJyZXMiLCJSdW5uYWJsZVBhcmFsbGVsIiwiZmFsbGJhY2siLCJjb25maWd1cmUiLCJmaXJzdEVycm9yIiwibWFwcGVyIiwibWFwcGVyUmVzdWx0IiwibWFwcGVyS2V5cyIsImZvclBhc3N0aHJvdWdoIiwiZm9yTWFwcGVyIiwibWFwcGVyT3V0cHV0IiwiZmlyc3RNYXBwZXJDaHVua1Byb21pc2UiLCJmaWx0ZXJlZCIsImluY2x1ZGVzIiwiX3BpY2siLCJwaWNrZWQiLCJ2Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/config.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/config.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // We do not want to call ensureConfig on the empty state here as this may cause\n    // double loading of callbacks if async local storage is being used.\n    const copy = {};\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                const baseKeys = copy[key] ?? [];\n                copy[key] = [\n                    ...new Set(baseKeys.concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n *\n * Note: To make sure async local storage loading works correctly, this\n * should not be called with a default or prepopulated config argument.\n */ function ensureConfig(config) {\n    const loadedConfig = config ?? _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getInstance().getStore();\n    let empty = {\n        tags: [],\n        metadata: {},\n        callbacks: undefined,\n        recursionLimit: 25,\n        runId: undefined\n    };\n    if (loadedConfig) {\n        empty = {\n            ...empty,\n            ...loadedConfig\n        };\n    }\n    if (loadedConfig?.configurable) {\n        for (const key of Object.keys(loadedConfig.configurable)){\n            if (PRIMITIVES.has(typeof loadedConfig.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = loadedConfig.configurable[key];\n            }\n        }\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable, runId } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    if (runId !== undefined) {\n        delete newConfig.runId;\n    }\n    return newConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBFO0FBQ0U7QUFDckUsTUFBTUcsMEJBQTBCLEdBQUc7QUFDbkMsZUFBZUMsNEJBQTRCQyxNQUFNO0lBQ3BELE9BQU9MLGtFQUFlQSxDQUFDTSxTQUFTLENBQUNELFFBQVFFLFdBQVdDLFdBQVdILFFBQVFJLE1BQU1ELFdBQVdILFFBQVFLO0FBQ3BHO0FBQ08sU0FBU0MsYUFBYSxHQUFHQyxPQUFPO0lBQ25DLGdGQUFnRjtJQUNoRixvRUFBb0U7SUFDcEUsTUFBTUMsT0FBTyxDQUFDO0lBQ2QsS0FBSyxNQUFNQyxXQUFXRixRQUFRRyxNQUFNLENBQUMsQ0FBQ0MsSUFBTSxDQUFDLENBQUNBLEdBQUk7UUFDOUMsS0FBSyxNQUFNQyxPQUFPQyxPQUFPQyxJQUFJLENBQUNMLFNBQVU7WUFDcEMsSUFBSUcsUUFBUSxZQUFZO2dCQUNwQkosSUFBSSxDQUFDSSxJQUFJLEdBQUc7b0JBQUUsR0FBR0osSUFBSSxDQUFDSSxJQUFJO29CQUFFLEdBQUdILE9BQU8sQ0FBQ0csSUFBSTtnQkFBQztZQUNoRCxPQUNLLElBQUlBLFFBQVEsUUFBUTtnQkFDckIsTUFBTUcsV0FBV1AsSUFBSSxDQUFDSSxJQUFJLElBQUksRUFBRTtnQkFDaENKLElBQUksQ0FBQ0ksSUFBSSxHQUFHO3VCQUFJLElBQUlJLElBQUlELFNBQVNFLE1BQU0sQ0FBQ1IsT0FBTyxDQUFDRyxJQUFJLElBQUksRUFBRTtpQkFBRztZQUNqRSxPQUNLLElBQUlBLFFBQVEsZ0JBQWdCO2dCQUM3QkosSUFBSSxDQUFDSSxJQUFJLEdBQUc7b0JBQUUsR0FBR0osSUFBSSxDQUFDSSxJQUFJO29CQUFFLEdBQUdILE9BQU8sQ0FBQ0csSUFBSTtnQkFBQztZQUNoRCxPQUNLLElBQUlBLFFBQVEsYUFBYTtnQkFDMUIsTUFBTU0sZ0JBQWdCVixLQUFLTixTQUFTO2dCQUNw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LE1BQU0vQixRQUFRLEdBQUcsQ0FBQztnQkFDdEI7Z0JBQ0ErQixNQUFNL0IsUUFBUSxDQUFDTyxJQUFJLEdBQUdxQixhQUFhTSxZQUFZLENBQUMzQixJQUFJO1lBQ3hEO1FBQ0o7SUFDSjtJQUNBLE9BQU93QjtBQUNYO0FBQ0E7O0NBRUMsR0FDTSxTQUFTSyxZQUFZekMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFRSxTQUFTLEVBQUV3QyxjQUFjLEVBQUVMLGNBQWMsRUFBRU0sT0FBTyxFQUFFSixZQUFZLEVBQUVELEtBQUssRUFBRyxHQUFHLENBQUMsQ0FBQztJQUN0SCxNQUFNTSxZQUFZWixhQUFhaEM7SUFDL0IsSUFBSUUsY0FBY0MsV0FBVztRQUN6Qjs7O1NBR0MsR0FDRCxPQUFPeUMsVUFBVUQsT0FBTztRQUN4QkMsVUFBVTFDLFNBQVMsR0FBR0E7SUFDMUI7SUFDQSxJQUFJbUMsbUJBQW1CbEMsV0FBVztRQUM5QnlDLFVBQVVQLGNBQWMsR0FBR0E7SUFDL0I7SUFDQSxJQUFJSyxtQkFBbUJ2QyxXQUFXO1FBQzlCeUMsVUFBVUYsY0FBYyxHQUFHQTtJQUMvQjtJQUNBLElBQUlDLFlBQVl4QyxXQUFXO1FBQ3ZCeUMsVUFBVUQsT0FBTyxHQUFHQTtJQUN4QjtJQUNBLElBQUlKLGlCQUFpQnBDLFdBQVc7UUFDNUJ5QyxVQUFVTCxZQUFZLEdBQUc7WUFBRSxHQUFHSyxVQUFVTCxZQUFZO1lBQUUsR0FBR0EsWUFBWTtRQUFDO0lBQzFFO0lBQ0EsSUFBSUQsVUFBVW5DLFdBQVc7UUFDckIsT0FBT3lDLFVBQVVOLEtBQUs7SUFDMUI7SUFDQSxPQUFPTTtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcz8yN2VhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgZW5zdXJlSGFuZGxlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlUID0gMjU7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGNvbmZpZz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIGNvbmZpZz8udGFncywgdW5kZWZpbmVkLCBjb25maWc/Lm1ldGFkYXRhKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbmZpZ3MoLi4uY29uZmlncykge1xuICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIGNhbGwgZW5zdXJlQ29uZmlnIG9uIHRoZSBlbXB0eSBzdGF0ZSBoZXJlIGFzIHRoaXMgbWF5IGNhdXNlXG4gICAgLy8gZG91YmxlIGxvYWRpbmcgb2YgY2FsbGJhY2tzIGlmIGFzeW5jIGxvY2FsIHN0b3JhZ2UgaXMgYmVpbmcgdXNlZC5cbiAgICBjb25zdCBjb3B5ID0ge307XG4gICAgZm9yIChjb25zdCBvcHRpb25zIG9mIGNvbmZpZ3MuZmlsdGVyKChjKSA9PiAhIWMpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcIm1ldGFkYXRhXCIpIHtcbiAgICAgICAgICAgICAgICBjb3B5W2tleV0gPSB7IC4uLmNvcHlba2V5XSwgLi4ub3B0aW9uc1trZXldIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwidGFnc1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUtleXMgPSBjb3B5W2tleV0gPz8gW107XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0gWy4uLm5ldyBTZXQoYmFzZUtleXMuY29uY2F0KG9wdGlvbnNba2V5XSA/PyBbXSkpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJjb25maWd1cmFibGVcIikge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHsgLi4uY29weVtrZXldLCAuLi5vcHRpb25zW2tleV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJjYWxsYmFja3NcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VDYWxsYmFja3MgPSBjb3B5LmNhbGxiYWNrcztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlZENhbGxiYWNrcyA9IG9wdGlvbnMuY2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrcyBjYW4gYmUgZWl0aGVyIHVuZGVmaW5lZCwgQXJyYXk8aGFuZGxlcj4gb3IgbWFuYWdlclxuICAgICAgICAgICAgICAgIC8vIHNvIG1lcmdpbmcgdHdvIGNhbGxiYWNrcyB2YWx1ZXMgaGFzIDYgY2FzZXNcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm92aWRlZENhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IHByb3ZpZGVkQ2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYmFzZUNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gYmFzZUNhbGxiYWNrcy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFzZUNhbGxiYWNrcyBpcyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZXIgPSBiYXNlQ2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgcHJvdmlkZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIoZW5zdXJlSGFuZGxlcihjYWxsYmFjayksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBtYW5hZ2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3ZpZGVkQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3ZpZGVkQ2FsbGJhY2tzIGlzIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gcHJvdmlkZWRDYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiYXNlQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFuYWdlciA9IHByb3ZpZGVkQ2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihlbnN1cmVIYW5kbGVyKGNhbGxiYWNrKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG1hbmFnZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlQ2FsbGJhY2tzIGlzIGFsc28gYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG5ldyBDYWxsYmFja01hbmFnZXIocHJvdmlkZWRDYWxsYmFja3MuX3BhcmVudFJ1bklkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnM6IGJhc2VDYWxsYmFja3MuaGFuZGxlcnMuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmhhbmRsZXJzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0YWJsZUhhbmRsZXJzOiBiYXNlQ2FsbGJhY2tzLmluaGVyaXRhYmxlSGFuZGxlcnMuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmluaGVyaXRhYmxlSGFuZGxlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLnRhZ3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLnRhZ3MpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGFibGVUYWdzOiBBcnJheS5mcm9tKG5ldyBTZXQoYmFzZUNhbGxiYWNrcy5pbmhlcml0YWJsZVRhZ3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmluaGVyaXRhYmxlVGFncykpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iYXNlQ2FsbGJhY2tzLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm92aWRlZENhbGxiYWNrcy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBjb3B5W3R5cGVkS2V5XSA9IG9wdGlvbnNbdHlwZWRLZXldID8/IGNvcHlbdHlwZWRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xufVxuY29uc3QgUFJJTUlUSVZFUyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYm9vbGVhblwiXSk7XG4vKipcbiAqIEVuc3VyZSB0aGF0IGEgcGFzc2VkIGNvbmZpZyBpcyBhbiBvYmplY3Qgd2l0aCBhbGwgcmVxdWlyZWQga2V5cyBwcmVzZW50LlxuICpcbiAqIE5vdGU6IFRvIG1ha2Ugc3VyZSBhc3luYyBsb2NhbCBzdG9yYWdlIGxvYWRpbmcgd29ya3MgY29ycmVjdGx5LCB0aGlzXG4gKiBzaG91bGQgbm90IGJlIGNhbGxlZCB3aXRoIGEgZGVmYXVsdCBvciBwcmVwb3B1bGF0ZWQgY29uZmlnIGFyZ3VtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlQ29uZmlnKGNvbmZpZykge1xuICAgIGNvbnN0IGxvYWRlZENvbmZpZyA9IGNvbmZpZyA/PyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkuZ2V0U3RvcmUoKTtcbiAgICBsZXQgZW1wdHkgPSB7XG4gICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICAgIGNhbGxiYWNrczogdW5kZWZpbmVkLFxuICAgICAgICByZWN1cnNpb25MaW1pdDogMjUsXG4gICAgICAgIHJ1bklkOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICBpZiAobG9hZGVkQ29uZmlnKSB7XG4gICAgICAgIGVtcHR5ID0geyAuLi5lbXB0eSwgLi4ubG9hZGVkQ29uZmlnIH07XG4gICAgfVxuICAgIGlmIChsb2FkZWRDb25maWc/LmNvbmZpZ3VyYWJsZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhsb2FkZWRDb25maWcuY29uZmlndXJhYmxlKSkge1xuICAgICAgICAgICAgaWYgKFBSSU1JVElWRVMuaGFzKHR5cGVvZiBsb2FkZWRDb25maWcuY29uZmlndXJhYmxlW2tleV0pICYmXG4gICAgICAgICAgICAgICAgIWVtcHR5Lm1ldGFkYXRhPy5ba2V5XSkge1xuICAgICAgICAgICAgICAgIGlmICghZW1wdHkubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1wdHkubWV0YWRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZW1wdHkubWV0YWRhdGFba2V5XSA9IGxvYWRlZENvbmZpZy5jb25maWd1cmFibGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW1wdHk7XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHBhdGNoZXMgcnVubmFibGUgY29uZmlncyB3aXRoIHVwZGF0ZWQgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoQ29uZmlnKGNvbmZpZyA9IHt9LCB7IGNhbGxiYWNrcywgbWF4Q29uY3VycmVuY3ksIHJlY3Vyc2lvbkxpbWl0LCBydW5OYW1lLCBjb25maWd1cmFibGUsIHJ1bklkLCB9ID0ge30pIHtcbiAgICBjb25zdCBuZXdDb25maWcgPSBlbnN1cmVDb25maWcoY29uZmlnKTtcbiAgICBpZiAoY2FsbGJhY2tzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHdlJ3JlIHJlcGxhY2luZyBjYWxsYmFja3Mgd2UgbmVlZCB0byB1bnNldCBydW5OYW1lXG4gICAgICAgICAqIHNpbmNlIHRoYXQgc2hvdWxkIGFwcGx5IG9ubHkgdG8gdGhlIHNhbWUgcnVuIGFzIHRoZSBvcmlnaW5hbCBjYWxsYmFja3NcbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZSBuZXdDb25maWcucnVuTmFtZTtcbiAgICAgICAgbmV3Q29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcbiAgICB9XG4gICAgaWYgKHJlY3Vyc2lvbkxpbWl0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLnJlY3Vyc2lvbkxpbWl0ID0gcmVjdXJzaW9uTGltaXQ7XG4gICAgfVxuICAgIGlmIChtYXhDb25jdXJyZW5jeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5tYXhDb25jdXJyZW5jeSA9IG1heENvbmN1cnJlbmN5O1xuICAgIH1cbiAgICBpZiAocnVuTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5ydW5OYW1lID0gcnVuTmFtZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZ3VyYWJsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5jb25maWd1cmFibGUgPSB7IC4uLm5ld0NvbmZpZy5jb25maWd1cmFibGUsIC4uLmNvbmZpZ3VyYWJsZSB9O1xuICAgIH1cbiAgICBpZiAocnVuSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWxldGUgbmV3Q29uZmlnLnJ1bklkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3Q29uZmlnO1xufVxuIl0sIm5hbWVzIjpbIkNhbGxiYWNrTWFuYWdlciIsImVuc3VyZUhhbmRsZXIiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwiREVGQVVMVF9SRUNVUlNJT05fTElNSVQiLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJjb25maWciLCJjb25maWd1cmUiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJ0YWdzIiwibWV0YWRhdGEiLCJtZXJnZUNvbmZpZ3MiLCJjb25maWdzIiwiY29weSIsIm9wdGlvbnMiLCJmaWx0ZXIiLCJjIiwia2V5IiwiT2JqZWN0Iiwia2V5cyIsImJhc2VLZXlzIiwiU2V0IiwiY29uY2F0IiwiYmFzZUNhbGxiYWNrcyIsInByb3ZpZGVkQ2FsbGJhY2tzIiwiQXJyYXkiLCJpc0FycmF5IiwibWFuYWdlciIsImNhbGxiYWNrIiwiYWRkSGFuZGxlciIsIl9wYXJlbnRSdW5JZCIsImhhbmRsZXJzIiwiaW5oZXJpdGFibGVIYW5kbGVycyIsImZyb20iLCJpbmhlcml0YWJsZVRhZ3MiLCJ0eXBlZEtleSIsIlBSSU1JVElWRVMiLCJlbnN1cmVDb25maWciLCJsb2FkZWRDb25maWciLCJnZXRJbnN0YW5jZSIsImdldFN0b3JlIiwiZW1wdHkiLCJyZWN1cnNpb25MaW1pdCIsInJ1bklkIiwiY29uZmlndXJhYmxlIiwiaGFzIiwicGF0Y2hDb25maWciLCJtYXhDb25jdXJyZW5jeSIsInJ1bk5hbWUiLCJuZXdDb25maWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph),\n/* harmony export */   nodeDataStr: () => (/* binding */ nodeDataStr)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n\n\n\nconst MAX_DATA_DISPLAY_NAME_LENGTH = 42;\nfunction nodeDataStr(node) {\n    if (!(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id)) {\n        return node.id;\n    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        try {\n            let data = node.data.toString();\n            if (data.startsWith(\"<\") || data[0] !== data[0].toUpperCase() || data.split(\"\\n\").length > 1) {\n                data = node.data.getName();\n            } else if (data.length > MAX_DATA_DISPLAY_NAME_LENGTH) {\n                data = `${data.substring(0, MAX_DATA_DISPLAY_NAME_LENGTH)}...`;\n            }\n            return data.startsWith(\"Runnable\") ? data.slice(\"Runnable\".length) : data;\n        } catch (error) {\n            return node.data.getName();\n        }\n    } else {\n        return node.data.name ?? \"UnknownSchema\";\n    }\n}\nfunction nodeDataJson(node) {\n    // if node.data is implements Runnable\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        return {\n            type: \"runnable\",\n            data: {\n                id: node.data.lc_id,\n                name: node.data.getName()\n            }\n        };\n    } else {\n        return {\n            type: \"schema\",\n            data: {\n                ...(0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(node.data.schema),\n                title: node.data.name\n            }\n        };\n    }\n}\nclass Graph {\n    constructor(){\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    // Convert the graph to a JSON-serializable format.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const stableNodeIds = {};\n        Object.values(this.nodes).forEach((node, i)=>{\n            stableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id) ? i : node.id;\n        });\n        return {\n            nodes: Object.values(this.nodes).map((node)=>({\n                    id: stableNodeIds[node.id],\n                    ...nodeDataJson(node)\n                })),\n            edges: this.edges.map((edge)=>edge.data ? {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target],\n                    data: edge.data\n                } : {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target]\n                })\n        };\n    }\n    addNode(data, id) {\n        if (id !== undefined && this.nodes[id] !== undefined) {\n            throw new Error(`Node with id ${id} already exists`);\n        }\n        const nodeId = id || (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        const node = {\n            id: nodeId,\n            data\n        };\n        this.nodes[nodeId] = node;\n        return node;\n    }\n    removeNode(node) {\n        // Remove the node from the nodes map\n        delete this.nodes[node.id];\n        // Filter out edges connected to the node\n        this.edges = this.edges.filter((edge)=>edge.source !== node.id && edge.target !== node.id);\n    }\n    addEdge(source, target, data) {\n        if (this.nodes[source.id] === undefined) {\n            throw new Error(`Source node ${source.id} not in graph`);\n        }\n        if (this.nodes[target.id] === undefined) {\n            throw new Error(`Target node ${target.id} not in graph`);\n        }\n        const edge = {\n            source: source.id,\n            target: target.id,\n            data\n        };\n        this.edges.push(edge);\n        return edge;\n    }\n    firstNode() {\n        const targets = new Set(this.edges.map((edge)=>edge.target));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!targets.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    lastNode() {\n        const sources = new Set(this.edges.map((edge)=>edge.source));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!sources.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    extend(graph) {\n        // Add all nodes from the other graph, taking care to avoid duplicates\n        Object.entries(graph.nodes).forEach(([key, value])=>{\n            this.nodes[key] = value;\n        });\n        // Add all edges from the other graph\n        this.edges = [\n            ...this.edges,\n            ...graph.edges\n        ];\n    }\n    trimFirstNode() {\n        const firstNode = this.firstNode();\n        if (firstNode) {\n            const outgoingEdges = this.edges.filter((edge)=>edge.source === firstNode.id);\n            if (Object.keys(this.nodes).length === 1 || outgoingEdges.length === 1) {\n                this.removeNode(firstNode);\n            }\n        }\n    }\n    trimLastNode() {\n        const lastNode = this.lastNode();\n        if (lastNode) {\n            const incomingEdges = this.edges.filter((edge)=>edge.target === lastNode.id);\n            if (Object.keys(this.nodes).length === 1 || incomingEdges.length === 1) {\n                this.removeNode(lastNode);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxRDtBQUNHO0FBQ1A7QUFDakQsTUFBTU0sK0JBQStCO0FBQzlCLFNBQVNDLFlBQVlDLElBQUk7SUFDNUIsSUFBSSxDQUFDSixnREFBTUEsQ0FBQ0ksS0FBS0MsRUFBRSxHQUFHO1FBQ2xCLE9BQU9ELEtBQUtDLEVBQUU7SUFDbEIsT0FDSyxJQUFJSiw4REFBbUJBLENBQUNHLEtBQUtFLElBQUksR0FBRztRQUNyQyxJQUFJO1lBQ0EsSUFBSUEsT0FBT0YsS0FBS0UsSUFBSSxDQUFDQyxRQUFRO1lBQzdCLElBQUlELEtBQUtFLFVBQVUsQ0FBQyxRQUNoQkYsSUFBSSxDQUFDLEVBQUUsS0FBS0EsSUFBSSxDQUFDLEVBQUUsQ0FBQ0csV0FBVyxNQUMvQkgsS0FBS0ksS0FBSyxDQUFDLE1BQU1DLE1BQU0sR0FBRyxHQUFHO2dCQUM3QkwsT0FBT0YsS0FBS0UsSUFBSSxDQUFDTSxPQUFPO1lBQzVCLE9BQ0ssSUFBSU4sS0FBS0ssTUFBTSxHQUFHVCw4QkFBOEI7Z0JBQ2pESSxPQUFPLENBQUMsRUFBRUEsS0FBS08sU0FBUyxDQUFDLEdBQUdYLDhCQUE4QixHQUFHLENBQUM7WUFDbEU7WUFDQSxPQUFPSSxLQUFLRSxVQUFVLENBQUMsY0FBY0YsS0FBS1EsS0FBSyxDQUFDLFdBQVdILE1BQU0sSUFBSUw7UUFDekUsRUFDQSxPQUFPUyxPQUFPO1lBQ1YsT0FBT1gsS0FBS0UsSUFBSSxDQUFDTSxPQUFPO1FBQzVCO0lBQ0osT0FDSztRQUNELE9BQU9SLEtBQUtFLElBQUksQ0FBQ1UsSUFBSSxJQUFJO0lBQzdCO0FBQ0o7QUFDQSxTQUFTQyxhQUFhYixJQUFJO0lBQ3RCLHNDQUFzQztJQUN0QyxJQUFJSCw4REFBbUJBLENBQUNHLEtBQUtFLElBQUksR0FBRztRQUNoQyxPQUFPO1lBQ0hZLE1BQU07WUFDTlosTUFBTTtnQkFD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aGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzPzM0MTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcInpvZC10by1qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0LCB2YWxpZGF0ZSBhcyBpc1V1aWQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgaXNSdW5uYWJsZUludGVyZmFjZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5jb25zdCBNQVhfREFUQV9ESVNQTEFZX05BTUVfTEVOR1RIID0gNDI7XG5leHBvcnQgZnVuY3Rpb24gbm9kZURhdGFTdHIobm9kZSkge1xuICAgIGlmICghaXNVdWlkKG5vZGUuaWQpKSB7XG4gICAgICAgIHJldHVybiBub2RlLmlkO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1J1bm5hYmxlSW50ZXJmYWNlKG5vZGUuZGF0YSkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBkYXRhID0gbm9kZS5kYXRhLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoZGF0YS5zdGFydHNXaXRoKFwiPFwiKSB8fFxuICAgICAgICAgICAgICAgIGRhdGFbMF0gIT09IGRhdGFbMF0udG9VcHBlckNhc2UoKSB8fFxuICAgICAgICAgICAgICAgIGRhdGEuc3BsaXQoXCJcXG5cIikubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBub2RlLmRhdGEuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5sZW5ndGggPiBNQVhfREFUQV9ESVNQTEFZX05BTUVfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGAke2RhdGEuc3Vic3RyaW5nKDAsIE1BWF9EQVRBX0RJU1BMQVlfTkFNRV9MRU5HVEgpfS4uLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5zdGFydHNXaXRoKFwiUnVubmFibGVcIikgPyBkYXRhLnNsaWNlKFwiUnVubmFibGVcIi5sZW5ndGgpIDogZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmRhdGEuZ2V0TmFtZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9kZS5kYXRhLm5hbWUgPz8gXCJVbmtub3duU2NoZW1hXCI7XG4gICAgfVxufVxuZnVuY3Rpb24gbm9kZURhdGFKc29uKG5vZGUpIHtcbiAgICAvLyBpZiBub2RlLmRhdGEgaXMgaW1wbGVtZW50cyBSdW5uYWJsZVxuICAgIGlmIChpc1J1bm5hYmxlSW50ZXJmYWNlKG5vZGUuZGF0YSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwicnVubmFibGVcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogbm9kZS5kYXRhLmxjX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5vZGUuZGF0YS5nZXROYW1lKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwic2NoZW1hXCIsXG4gICAgICAgICAgICBkYXRhOiB7IC4uLnpvZFRvSnNvblNjaGVtYShub2RlLmRhdGEuc2NoZW1hKSwgdGl0bGU6IG5vZGUuZGF0YS5uYW1lIH0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEdyYXBoIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibm9kZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlZGdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdGhlIGdyYXBoIHRvIGEgSlNPTi1zZXJpYWxpemFibGUgZm9ybWF0LlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBzdGFibGVOb2RlSWRzID0ge307XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykuZm9yRWFjaCgobm9kZSwgaSkgPT4ge1xuICAgICAgICAgICAgc3RhYmxlTm9kZUlkc1tub2RlLmlkXSA9IGlzVXVpZChub2RlLmlkKSA/IGkgOiBub2RlLmlkO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vZGVzOiBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLm1hcCgobm9kZSkgPT4gKHtcbiAgICAgICAgICAgICAgICBpZDogc3RhYmxlTm9kZUlkc1tub2RlLmlkXSxcbiAgICAgICAgICAgICAgICAuLi5ub2RlRGF0YUpzb24obm9kZSksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBlZGdlczogdGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+IGVkZ2UuZGF0YVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHN0YWJsZU5vZGVJZHNbZWRnZS5zb3VyY2VdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHN0YWJsZU5vZGVJZHNbZWRnZS50YXJnZXRdLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBlZGdlLmRhdGEsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHN0YWJsZU5vZGVJZHNbZWRnZS5zb3VyY2VdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHN0YWJsZU5vZGVJZHNbZWRnZS50YXJnZXRdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGROb2RlKGRhdGEsIGlkKSB7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMubm9kZXNbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm9kZSB3aXRoIGlkICR7aWR9IGFscmVhZHkgZXhpc3RzYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZUlkID0gaWQgfHwgdXVpZHY0KCk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB7IGlkOiBub2RlSWQsIGRhdGEgfTtcbiAgICAgICAgdGhpcy5ub2Rlc1tub2RlSWRdID0gbm9kZTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIHJlbW92ZU5vZGUobm9kZSkge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIG5vZGUgZnJvbSB0aGUgbm9kZXMgbWFwXG4gICAgICAgIGRlbGV0ZSB0aGlzLm5vZGVzW25vZGUuaWRdO1xuICAgICAgICAvLyBGaWx0ZXIgb3V0IGVkZ2VzIGNvbm5lY3RlZCB0byB0aGUgbm9kZVxuICAgICAgICB0aGlzLmVkZ2VzID0gdGhpcy5lZGdlcy5maWx0ZXIoKGVkZ2UpID0+IGVkZ2Uuc291cmNlICE9PSBub2RlLmlkICYmIGVkZ2UudGFyZ2V0ICE9PSBub2RlLmlkKTtcbiAgICB9XG4gICAgYWRkRWRnZShzb3VyY2UsIHRhcmdldCwgZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5ub2Rlc1tzb3VyY2UuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU291cmNlIG5vZGUgJHtzb3VyY2UuaWR9IG5vdCBpbiBncmFwaGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGVzW3RhcmdldC5pZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUYXJnZXQgbm9kZSAke3RhcmdldC5pZH0gbm90IGluIGdyYXBoYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWRnZSA9IHsgc291cmNlOiBzb3VyY2UuaWQsIHRhcmdldDogdGFyZ2V0LmlkLCBkYXRhIH07XG4gICAgICAgIHRoaXMuZWRnZXMucHVzaChlZGdlKTtcbiAgICAgICAgcmV0dXJuIGVkZ2U7XG4gICAgfVxuICAgIGZpcnN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IG5ldyBTZXQodGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+IGVkZ2UudGFyZ2V0KSk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0YXJnZXRzLmhhcyhub2RlLmlkKSkge1xuICAgICAgICAgICAgICAgIGZvdW5kLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZm91bmRbMF07XG4gICAgfVxuICAgIGxhc3ROb2RlKCkge1xuICAgICAgICBjb25zdCBzb3VyY2VzID0gbmV3IFNldCh0aGlzLmVkZ2VzLm1hcCgoZWRnZSkgPT4gZWRnZS5zb3VyY2UpKTtcbiAgICAgICAgY29uc3QgZm91bmQgPSBbXTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZXMuaGFzKG5vZGUuaWQpKSB7XG4gICAgICAgICAgICAgICAgZm91bmQucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3VuZFswXTtcbiAgICB9XG4gICAgZXh0ZW5kKGdyYXBoKSB7XG4gICAgICAgIC8vIEFkZCBhbGwgbm9kZXMgZnJvbSB0aGUgb3RoZXIgZ3JhcGgsIHRha2luZyBjYXJlIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoZ3JhcGgubm9kZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ub2Rlc1trZXldID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBBZGQgYWxsIGVkZ2VzIGZyb20gdGhlIG90aGVyIGdyYXBoXG4gICAgICAgIHRoaXMuZWRnZXMgPSBbLi4udGhpcy5lZGdlcywgLi4uZ3JhcGguZWRnZXNdO1xuICAgIH1cbiAgICB0cmltRmlyc3ROb2RlKCkge1xuICAgICAgICBjb25zdCBmaXJzdE5vZGUgPSB0aGlzLmZpcnN0Tm9kZSgpO1xuICAgICAgICBpZiAoZmlyc3ROb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRnb2luZ0VkZ2VzID0gdGhpcy5lZGdlcy5maWx0ZXIoKGVkZ2UpID0+IGVkZ2Uuc291cmNlID09PSBmaXJzdE5vZGUuaWQpO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubm9kZXMpLmxlbmd0aCA9PT0gMSB8fCBvdXRnb2luZ0VkZ2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTm9kZShmaXJzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRyaW1MYXN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3QgbGFzdE5vZGUgPSB0aGlzLmxhc3ROb2RlKCk7XG4gICAgICAgIGlmIChsYXN0Tm9kZSkge1xuICAgICAgICAgICAgY29uc3QgaW5jb21pbmdFZGdlcyA9IHRoaXMuZWRnZXMuZmlsdGVyKChlZGdlKSA9PiBlZGdlLnRhcmdldCA9PT0gbGFzdE5vZGUuaWQpO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubm9kZXMpLmxlbmd0aCA9PT0gMSB8fCBpbmNvbWluZ0VkZ2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTm9kZShsYXN0Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiem9kVG9Kc29uU2NoZW1hIiwidjQiLCJ1dWlkdjQiLCJ2YWxpZGF0ZSIsImlzVXVpZCIsImlzUnVubmFibGVJbnRlcmZhY2UiLCJNQVhfREFUQV9ESVNQTEFZX05BTUVfTEVOR1RIIiwibm9kZURhdGFTdHIiLCJub2RlIiwiaWQiLCJkYXRhIiwidG9TdHJpbmciLCJzdGFydHNXaXRoIiwidG9VcHBlckNhc2UiLCJzcGxpdCIsImxlbmd0aCIsImdldE5hbWUiLCJzdWJzdHJpbmciLCJzbGljZSIsImVycm9yIiwibmFtZSIsIm5vZGVEYXRhSnNvbiIsInR5cGUiLCJsY19pZCIsInNjaGVtYSIsInRpdGxlIiwiR3JhcGgiLCJjb25zdHJ1Y3RvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJ0b0pTT04iLCJzdGFibGVOb2RlSWRzIiwidmFsdWVzIiwibm9kZXMiLCJmb3JFYWNoIiwiaSIsIm1hcCIsImVkZ2VzIiwiZWRnZSIsInNvdXJjZSIsInRhcmdldCIsImFkZE5vZGUiLCJ1bmRlZmluZWQiLCJFcnJvciIsIm5vZGVJZCIsInJlbW92ZU5vZGUiLCJmaWx0ZXIiLCJhZGRFZGdlIiwicHVzaCIsImZpcnN0Tm9kZSIsInRhcmdldHMiLCJTZXQiLCJmb3VuZCIsImhhcyIsImxhc3ROb2RlIiwic291cmNlcyIsImV4dGVuZCIsImdyYXBoIiwiZW50cmllcyIsImtleSIsInRyaW1GaXJzdE5vZGUiLCJvdXRnb2luZ0VkZ2VzIiwia2V5cyIsInRyaW1MYXN0Tm9kZSIsImluY29taW5nRWRnZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/iter.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   consumeAsyncIterableInContext: () => (/* binding */ consumeAsyncIterableInContext),\n/* harmony export */   consumeIteratorInContext: () => (/* binding */ consumeIteratorInContext),\n/* harmony export */   isAsyncIterable: () => (/* binding */ isAsyncIterable),\n/* harmony export */   isIterator: () => (/* binding */ isIterator)\n/* harmony export */ });\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\nfunction isIterator(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.iterator] === \"function\" && // avoid detecting array/set as iterator\n    typeof thing.next === \"function\";\n}\nfunction isAsyncIterable(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.asyncIterator] === \"function\";\n}\nfunction* consumeIteratorInContext(context, iter) {\n    const storage = _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getInstance();\n    while(true){\n        const { value, done } = storage.run(context, iter.next.bind(iter));\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\nasync function* consumeAsyncIterableInContext(context, iter) {\n    const storage = _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.getInstance();\n    const iterator = iter[Symbol.asyncIterator]();\n    while(true){\n        const { value, done } = await storage.run(context, iterator.next.bind(iter));\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2l0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEU7QUFDckUsU0FBU0MsV0FBV0MsS0FBSztJQUM1QixPQUFRLE9BQU9BLFVBQVUsWUFDckJBLFVBQVUsUUFDVixPQUFPQSxLQUFLLENBQUNDLE9BQU9DLFFBQVEsQ0FBQyxLQUFLLGNBQ2xDLHdDQUF3QztJQUN4QyxPQUFPRixNQUFNRyxJQUFJLEtBQUs7QUFDOUI7QUFDTyxTQUFTQyxnQkFBZ0JKLEtBQUs7SUFDakMsT0FBUSxPQUFPQSxVQUFVLFlBQ3JCQSxVQUFVLFFBQ1YsT0FBT0EsS0FBSyxDQUFDQyxPQUFPSSxhQUFhLENBQUMsS0FDOUI7QUFDWjtBQUNPLFVBQVVDLHlCQUF5QkMsT0FBTyxFQUFFQyxJQUFJO0lBQ25ELE1BQU1DLFVBQVVYLG9GQUFrQ0EsQ0FBQ1ksV0FBVztJQUM5RCxNQUFPLEtBQU07UUFDVCxNQUFNLEVBQUVDLEtBQUssRUFBRUMsSUFBSSxFQUFFLEdBQUdILFFBQVFJLEdBQUcsQ0FBQ04sU0FBU0MsS0FBS0wsSUFBSSxDQUFDVyxJQUFJLENBQUNOO1FBQzVELElBQUlJLE1BQU07WUFDTjtRQUNKLE9BQ0s7WUFDRCxNQUFNRDtRQUNWO0lBQ0o7QUFDSjtBQUNPLGdCQUFnQkksOEJBQThCUixPQUFPLEVBQUVDLElBQUk7SUFDOUQsTUFBTUMsVUFBVVgsb0ZBQWtDQSxDQUFDWSxXQUFXO0lBQzlELE1BQU1SLFdBQVdNLElBQUksQ0FBQ1AsT0FBT0ksYUFBYSxDQUFDO0lBQzNDLE1BQU8sS0FBTTtRQUNULE1BQU0sRUFBRU0sS0FBSyxFQUFFQyxJQUFJLEVBQUUsR0FBRyxNQUFNSCxRQUFRSSxHQUFHLENBQUNOLFNBQVNMLFNBQVNDLElBQUksQ0FBQ1csSUFBSSxDQUFDTjtRQUN0RSxJQUFJSSxNQUFNO1lBQ047UUFDSixPQUNLO1lBQ0QsTUFBTUQ7UUFDVjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvaXRlci5qcz9lYTVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzSXRlcmF0b3IodGhpbmcpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB0aGluZyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB0aGluZyAhPT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgdGhpbmdbU3ltYm9sLml0ZXJhdG9yXSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIC8vIGF2b2lkIGRldGVjdGluZyBhcnJheS9zZXQgYXMgaXRlcmF0b3JcbiAgICAgICAgdHlwZW9mIHRoaW5nLm5leHQgPT09IFwiZnVuY3Rpb25cIik7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBc3luY0l0ZXJhYmxlKHRoaW5nKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdGhpbmcgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdGhpbmcgIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT1cbiAgICAgICAgICAgIFwiZnVuY3Rpb25cIik7XG59XG5leHBvcnQgZnVuY3Rpb24qIGNvbnN1bWVJdGVyYXRvckluQ29udGV4dChjb250ZXh0LCBpdGVyKSB7XG4gICAgY29uc3Qgc3RvcmFnZSA9IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0SW5zdGFuY2UoKTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBzdG9yYWdlLnJ1bihjb250ZXh0LCBpdGVyLm5leHQuYmluZChpdGVyKSk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dChjb250ZXh0LCBpdGVyKSB7XG4gICAgY29uc3Qgc3RvcmFnZSA9IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zdCBpdGVyYXRvciA9IGl0ZXJbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgc3RvcmFnZS5ydW4oY29udGV4dCwgaXRlcmF0b3IubmV4dC5iaW5kKGl0ZXIpKTtcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsImlzSXRlcmF0b3IiLCJ0aGluZyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImlzQXN5bmNJdGVyYWJsZSIsImFzeW5jSXRlcmF0b3IiLCJjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQiLCJjb250ZXh0IiwiaXRlciIsInN0b3JhZ2UiLCJnZXRJbnN0YW5jZSIsInZhbHVlIiwiZG9uZSIsInJ1biIsImJpbmQiLCJjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/iter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/utils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableInterface(thing) {\n    return thing ? thing.lc_runnable : false;\n}\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsOERBQThEO0FBQ3ZELFNBQVNBLG9CQUFvQkMsS0FBSztJQUNyQyxPQUFPQSxRQUFRQSxNQUFNQyxXQUFXLEdBQUc7QUFDdkM7QUFDQTs7Ozs7O0NBTUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFlBQVksR0FBR1AsT0FBT08sWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1IsT0FBT1EsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1QsT0FBT1MsV0FBVztRQUNyQyxJQUFJLENBQUNDLFlBQVksR0FBR1YsT0FBT1UsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1gsT0FBT1csWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1osT0FBT1ksV0FBVztJQUN6QztJQUNBQyxhQUFhQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtRQUMxQixJQUFJQyxVQUFVLElBQUksQ0FBQ1QsWUFBWSxLQUFLVSxhQUNoQyxJQUFJLENBQUNULFlBQVksS0FBS1MsYUFDdEIsSUFBSSxDQUFDUixXQUFXLEtBQUtRO1FBQ3pCLE1BQU1DLFlBQVlKLE1BQU1LLElBQUksSUFBSSxFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDWixZQUFZLEtBQUtVLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDVCxZQUFZLENBQUNhLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUM5RDtRQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEtBQUtTLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDUixZQUFZLENBQUNZLFFBQVEsQ0FBQ0w7UUFDcEQ7UUFDQSxJQUFJLElBQUksQ0FBQ04sV0FBVyxLQUFLUSxXQUFXO1lBQ2hDRCxVQUNJQSxXQUFXRSxVQUFVSSxJQUFJLENBQUMsQ0FBQ0MsTUFBUSxJQUFJLENBQUNkLFdBQVcsRUFBRVcsU0FBU0c7UUFDdEU7UUFDQSxJQUFJLElBQUksQ0FBQ2IsWUFBWSxLQUFLTyxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLENBQUMsSUFBSSxDQUFDTixZQUFZLENBQUNVLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUMvRDtRQUNBLElBQUksSUFBSSxDQUFDVixZQUFZLEtBQUtNLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNMLFlBQVksQ0FBQ1MsUUFBUSxDQUFDTDtRQUNyRDtRQUNBLElBQUksSUFBSSxDQUFDSCxXQUFXLEtBQUtLLFdBQVc7WUFDaENELFVBQ0lBLFdBQVdFLFVBQVVNLEtBQUssQ0FBQyxDQUFDRCxNQUFRLENBQUMsSUFBSSxDQUFDWCxXQUFXLEVBQUVRLFNBQVNHO1FBQ3hFO1FBQ0EsT0FBT1A7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzPzgxZmIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBpc1J1bm5hYmxlSW50ZXJmYWNlKHRoaW5nKSB7XG4gICAgcmV0dXJuIHRoaW5nID8gdGhpbmcubGNfcnVubmFibGUgOiBmYWxzZTtcbn1cbi8qKlxuICogVXRpbGl0eSB0byBmaWx0ZXIgdGhlIHJvb3QgZXZlbnQgaW4gdGhlIHN0cmVhbUV2ZW50cyBpbXBsZW1lbnRhdGlvbi5cbiAqIFRoaXMgaXMgc2ltcGx5IGJpbmRpbmcgdGhlIGFyZ3VtZW50cyB0byB0aGUgbmFtZXNwYWNlIHRvIG1ha2Ugc2F2ZSBvblxuICogYSBiaXQgb2YgdHlwaW5nIGluIHRoZSBzdHJlYW1FdmVudHMgaW1wbGVtZW50YXRpb24uXG4gKlxuICogVE9ETzogUmVmYWN0b3IgYW5kIHJlbW92ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIF9Sb290RXZlbnRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbmNsdWRlTmFtZXMgPSBmaWVsZHMuaW5jbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9IGZpZWxkcy5pbmNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPSBmaWVsZHMuaW5jbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMuZXhjbHVkZU5hbWVzID0gZmllbGRzLmV4Y2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5leGNsdWRlVHlwZXMgPSBmaWVsZHMuZXhjbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUYWdzID0gZmllbGRzLmV4Y2x1ZGVUYWdzO1xuICAgIH1cbiAgICBpbmNsdWRlRXZlbnQoZXZlbnQsIHJvb3RUeXBlKSB7XG4gICAgICAgIGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9PT0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBldmVudFRhZ3MgPSBldmVudC50YWdzID8/IFtdO1xuICAgICAgICBpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMoZXZlbnQubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKHJvb3RUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlIHx8IGV2ZW50VGFncy5zb21lKCh0YWcpID0+IHRoaXMuaW5jbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlTmFtZXMuaW5jbHVkZXMoZXZlbnQubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVUeXBlcy5pbmNsdWRlcyhyb290VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSAmJiBldmVudFRhZ3MuZXZlcnkoKHRhZykgPT4gIXRoaXMuZXhjbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNsdWRlO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJpc1J1bm5hYmxlSW50ZXJmYWNlIiwidGhpbmciLCJsY19ydW5uYWJsZSIsIl9Sb290RXZlbnRGaWx0ZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJpbmNsdWRlTmFtZXMiLCJpbmNsdWRlVHlwZXMiLCJpbmNsdWRlVGFncyIsImV4Y2x1ZGVOYW1lcyIsImV4Y2x1ZGVUeXBlcyIsImV4Y2x1ZGVUYWdzIiwiaW5jbHVkZUV2ZW50IiwiZXZlbnQiLCJyb290VHlwZSIsImluY2x1ZGUiLCJ1bmRlZmluZWQiLCJldmVudFRhZ3MiLCJ0YWdzIiwiaW5jbHVkZXMiLCJuYW1lIiwic29tZSIsInRhZyIsImV2ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/wrappers.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToHttpEventStream: () => (/* binding */ convertToHttpEventStream)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\nfunction convertToHttpEventStream(stream) {\n    const encoder = new TextEncoder();\n    const finalStream = new ReadableStream({\n        async start (controller) {\n            for await (const chunk of stream){\n                controller.enqueue(encoder.encode(`event: data\\ndata: ${JSON.stringify(chunk)}\\n\\n`));\n            }\n            controller.enqueue(encoder.encode(\"event: end\\n\\n\"));\n            controller.close();\n        }\n    });\n    return _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream.fromReadableStream(finalStream);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3dyYXBwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTREO0FBQ3JELFNBQVNDLHlCQUF5QkMsTUFBTTtJQUMzQyxNQUFNQyxVQUFVLElBQUlDO0lBQ3BCLE1BQU1DLGNBQWMsSUFBSUMsZUFBZTtRQUNuQyxNQUFNQyxPQUFNQyxVQUFVO1lBQ2xCLFdBQVcsTUFBTUMsU0FBU1AsT0FBUTtnQkFDOUJNLFdBQVdFLE9BQU8sQ0FBQ1AsUUFBUVEsTUFBTSxDQUFDLENBQUMsbUJBQW1CLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ0osT0FBTyxJQUFJLENBQUM7WUFDdkY7WUFDQUQsV0FBV0UsT0FBTyxDQUFDUCxRQUFRUSxNQUFNLENBQUM7WUFDbENILFdBQVdNLEtBQUs7UUFDcEI7SUFDSjtJQUNBLE9BQU9kLG9FQUFzQkEsQ0FBQ2Usa0JBQWtCLENBQUNWO0FBQ3JEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3dyYXBwZXJzLmpzPzA1OWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0oc3RyZWFtKSB7XG4gICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGNvbnN0IGZpbmFsU3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgYXN5bmMgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoYGV2ZW50OiBkYXRhXFxuZGF0YTogJHtKU09OLnN0cmluZ2lmeShjaHVuayl9XFxuXFxuYCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKFwiZXZlbnQ6IGVuZFxcblxcblwiKSk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtKGZpbmFsU3RyZWFtKTtcbn1cbiJdLCJuYW1lcyI6WyJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiY29udmVydFRvSHR0cEV2ZW50U3RyZWFtIiwic3RyZWFtIiwiZW5jb2RlciIsIlRleHRFbmNvZGVyIiwiZmluYWxTdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsImNodW5rIiwiZW5xdWV1ZSIsImVuY29kZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbG9zZSIsImZyb21SZWFkYWJsZVN0cmVhbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/wrappers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ class MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        return callback();\n    }\n}\nclass AsyncLocalStorageProvider {\n    constructor(){\n        Object.defineProperty(this, \"asyncLocalStorage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new MockAsyncLocalStorage()\n        });\n        Object.defineProperty(this, \"hasBeenInitialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    getInstance() {\n        return this.asyncLocalStorage;\n    }\n    initializeGlobalInstance(instance) {\n        if (!this.hasBeenInitialized) {\n            this.hasBeenInitialized = true;\n            this.asyncLocalStorage = instance;\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLHFEQUFxRCxHQUM5QyxNQUFNQTtJQUNUQyxXQUFXO1FBQ1AsT0FBT0M7SUFDWDtJQUNBQyxJQUFJQyxNQUFNLEVBQUVDLFFBQVEsRUFBRTtRQUNsQixPQUFPQTtJQUNYO0FBQ0o7QUFDQSxNQUFNQztJQUNGQyxhQUFjO1FBQ1ZDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUscUJBQXFCO1lBQzdDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLElBQUliO1FBQ2Y7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxzQkFBc0I7WUFDOUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0FDLGNBQWM7UUFDVixPQUFPLElBQUksQ0FBQ0MsaUJBQWlCO0lBQ2pDO0lBQ0FDLHlCQUF5QkMsUUFBUSxFQUFFO1FBQy9CLElBQUksQ0FBQyxJQUFJLENBQUNDLGtCQUFrQixFQUFFO1lBQzFCLElBQUksQ0FBQ0Esa0JBQWtCLEdBQUc7WUFDMUIsSUFBSSxDQUFDSCxpQkFBaUIsR0FBR0U7UUFDN0I7SUFDSjtBQUNKO0FBQ0EsTUFBTUUscUNBQXFDLElBQUliO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2luZGV4LmpzPzY0ZDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuZXhwb3J0IGNsYXNzIE1vY2tBc3luY0xvY2FsU3RvcmFnZSB7XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJ1bihfc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH1cbn1cbmNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhc3luY0xvY2FsU3RvcmFnZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1vY2tBc3luY0xvY2FsU3RvcmFnZSgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYXNCZWVuSW5pdGlhbGl6ZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNMb2NhbFN0b3JhZ2U7XG4gICAgfVxuICAgIGluaXRpYWxpemVHbG9iYWxJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzQmVlbkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0JlZW5Jbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFzeW5jTG9jYWxTdG9yYWdlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uID0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIoKTtcbmV4cG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfTtcbiJdLCJuYW1lcyI6WyJNb2NrQXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRTdG9yZSIsInVuZGVmaW5lZCIsInJ1biIsIl9zdG9yZSIsImNhbGxiYWNrIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlciIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImdldEluc3RhbmNlIiwiYXN5bmNMb2NhbFN0b3JhZ2UiLCJpbml0aWFsaXplR2xvYmFsSW5zdGFuY2UiLCJpbnN0YW5jZSIsImhhc0JlZW5Jbml0aWFsaXplZCIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer)\n/* harmony export */ });\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction convertToDottedOrderFormat(epoch, runId, executionOrder) {\n    const paddedOrder = executionOrder.toFixed(0).slice(0, 3).padStart(3, \"0\");\n    return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}${paddedOrder}Z`) + runId;\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    copy() {\n        return this;\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    async _startTrace(run) {\n        const currentDottedOrder = convertToDottedOrderFormat(run.start_time, run.id, run.execution_order);\n        const storedRun = {\n            ...run\n        };\n        if (storedRun.parent_run_id !== undefined) {\n            const parentRun = this.runMap.get(storedRun.parent_run_id);\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n        }\n        this.runMap.set(storedRun.id, storedRun);\n        await this.onRunCreate?.(storedRun);\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.runMap.get(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        this.runMap.delete(run.id);\n        await this.onRunUpdate?.(run);\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.runMap.get(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    async handleToolEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTREO0FBQzVELDhEQUE4RDtBQUM5RCxTQUFTQyxjQUFjQyxLQUFLLEVBQUVDLFVBQVU7SUFDcEMsT0FBT0QsU0FBUyxDQUFDRSxNQUFNQyxPQUFPLENBQUNILFVBQVUsT0FBT0EsVUFBVSxXQUNwREEsUUFDQTtRQUFFLENBQUNDLFdBQVcsRUFBRUQ7SUFBTTtBQUNoQztBQUNBLFNBQVNJLHFCQUFxQkMsS0FBSztJQUMvQixPQUFPQSxNQUFNQyxPQUFPLENBQUMsVUFBVTtBQUNuQztBQUNBLFNBQVNDLDJCQUEyQkMsS0FBSyxFQUFFQyxLQUFLLEVBQUVDLGNBQWM7SUFDNUQsTUFBTUMsY0FBY0QsZUFBZUUsT0FBTyxDQUFDLEdBQUdDLEtBQUssQ0FBQyxHQUFHLEdBQUdDLFFBQVEsQ0FBQyxHQUFHO0lBQ3RFLE9BQVFWLHFCQUFxQixDQUFDLEVBQUUsSUFBSVcsS0FBS1AsT0FBT1EsV0FBVyxHQUFHSCxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRUYsWUFBWSxDQUFDLENBQUMsSUFBSUY7QUFDbkc7QUFDTyxNQUFNUSxtQkFBbUJuQixtRUFBbUJBO0lBQy9Db0IsWUFBWUMsT0FBTyxDQUFFO1FBQ2pCLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWekIsT0FBTyxJQUFJMEI7UUFDZjtJQUNKO0lBQ0FDLE9BQU87UUFDSCxPQUFPLElBQUk7SUFDZjtJQUNBQyxlQUFlQyxLQUFLLEVBQUU7UUFDbEIsdURBQXVEO1FBQ3ZELElBQUlBLGlCQUFpQkMsT0FBTztZQUN4QixPQUFPRCxNQUFNRSxPQUFPLEdBQUlGLENBQUFBLE9BQU9HLFFBQVEsQ0FBQyxJQUFJLEVBQUVILE1BQU1HLEtBQUssQ0FBQyxDQUFDLEdBQUcs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SUFBSSxDQUFDa0IsU0FBUyxDQUFDbEI7UUFDckIsT0FBT0E7SUFDWDtJQUNBLE1BQU1vRixXQUFXQyxJQUFJLEVBQUVuSCxLQUFLLEVBQUU7UUFDMUIsTUFBTThCLE1BQU0sSUFBSSxDQUFDUSxNQUFNLENBQUNDLEdBQUcsQ0FBQ3ZDO1FBQzVCLElBQUksQ0FBQzhCLE9BQU9BLEtBQUtzQyxhQUFhLFNBQVM7WUFDbkM7UUFDSjtRQUNBdEMsSUFBSW1DLE1BQU0sQ0FBQ3JDLElBQUksQ0FBQztZQUNaZ0MsTUFBTTtZQUNOTSxNQUFNLElBQUk1RCxPQUFPQyxXQUFXO1lBQzVCZ0YsUUFBUTtnQkFBRTRCO1lBQUs7UUFDbkI7UUFDQSxNQUFNLElBQUksQ0FBQ0MsTUFBTSxHQUFHdEY7SUFDeEI7SUFDQSxNQUFNdUYsa0JBQWtCQyxLQUFLLEVBQUVDLEdBQUcsRUFBRXZILEtBQUssRUFBRXFGLFlBQVksRUFBRUMsS0FBSyxFQUFFa0MsTUFBTSxFQUFFO1FBQ3BFLE1BQU0xRixNQUFNLElBQUksQ0FBQ1EsTUFBTSxDQUFDQyxHQUFHLENBQUN2QztRQUM1QixJQUFJLENBQUM4QixPQUFPQSxLQUFLc0MsYUFBYSxPQUFPO1lBQ2pDLE1BQU0sSUFBSS9DLE1BQU0sQ0FBQyx5REFBeUQsQ0FBQztRQUMvRTtRQUNBUyxJQUFJbUMsTUFBTSxDQUFDckMsSUFBSSxDQUFDO1lBQ1pnQyxNQUFNO1lBQ05NLE1BQU0sSUFBSTVELE9BQU9DLFdBQVc7WUFDNUJnRixRQUFRO2dCQUFFK0I7Z0JBQU9DO2dCQUFLRSxPQUFPRCxRQUFRQztZQUFNO1FBQy9DO1FBQ0EsTUFBTSxJQUFJLENBQUNDLGFBQWEsR0FBRzVGLEtBQUt3RixPQUFPO1lBQUVHLE9BQU9ELFFBQVFDO1FBQU07UUFDOUQsT0FBTzNGO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvYmFzZS5qcz8xZmZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9iYXNlLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbmZ1bmN0aW9uIHN0cmlwTm9uQWxwaGFudW1lcmljKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1stOi5dL2csIFwiXCIpO1xufVxuZnVuY3Rpb24gY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQoZXBvY2gsIHJ1bklkLCBleGVjdXRpb25PcmRlcikge1xuICAgIGNvbnN0IHBhZGRlZE9yZGVyID0gZXhlY3V0aW9uT3JkZXIudG9GaXhlZCgwKS5zbGljZSgwLCAzKS5wYWRTdGFydCgzLCBcIjBcIik7XG4gICAgcmV0dXJuIChzdHJpcE5vbkFscGhhbnVtZXJpYyhgJHtuZXcgRGF0ZShlcG9jaCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtMSl9JHtwYWRkZWRPcmRlcn1aYCkgKyBydW5JZCk7XG59XG5leHBvcnQgY2xhc3MgQmFzZVRyYWNlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKF9maWVsZHMpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdHJpbmdpZnlFcnJvcihlcnJvcikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSArIChlcnJvcj8uc3RhY2sgPyBgXFxuXFxuJHtlcnJvci5zdGFja31gIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtlcnJvcn1gO1xuICAgIH1cbiAgICBfYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBjaGlsZFJ1bikge1xuICAgICAgICBwYXJlbnRSdW4uY2hpbGRfcnVucy5wdXNoKGNoaWxkUnVuKTtcbiAgICB9XG4gICAgYXN5bmMgX3N0YXJ0VHJhY2UocnVuKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREb3R0ZWRPcmRlciA9IGNvbnZlcnRUb0RvdHRlZE9yZGVyRm9ybWF0KHJ1bi5zdGFydF90aW1lLCBydW4uaWQsIHJ1bi5leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICBjb25zdCBzdG9yZWRSdW4gPSB7IC4uLnJ1biB9O1xuICAgICAgICBpZiAoc3RvcmVkUnVuLnBhcmVudF9ydW5faWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50UnVuID0gdGhpcy5ydW5NYXAuZ2V0KHN0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRDaGlsZFJ1bihwYXJlbnRSdW4sIHN0b3JlZFJ1bik7XG4gICAgICAgICAgICAgICAgcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHN0b3JlZFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICAgICAgICAgIHN0b3JlZFJ1bi50cmFjZV9pZCA9IHBhcmVudFJ1bi50cmFjZV9pZDtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50UnVuLmRvdHRlZF9vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlZFJ1bi5kb3R0ZWRfb3JkZXIgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSdW4uZG90dGVkX29yZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERvdHRlZE9yZGVyLFxuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCIuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIG5hdHVyYWxseSBmb3IgY2FsbGJhY2tzIGFkZGVkIHdpdGhpbiBhIHJ1blxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKGBQYXJlbnQgcnVuIHdpdGggVVVJRCAke3N0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkfSBoYXMgbm8gZG90dGVkIG9yZGVyLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBuYXR1cmFsbHkgZm9yIGNhbGxiYWNrcyBhZGRlZCB3aXRoaW4gYSBydW5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKFxuICAgICAgICAgICAgICAgIC8vICAgYFBhcmVudCBydW4gd2l0aCBVVUlEICR7c3RvcmVkUnVuLnBhcmVudF9ydW5faWR9IG5vdCBmb3VuZC5gXG4gICAgICAgICAgICAgICAgLy8gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0b3JlZFJ1bi50cmFjZV9pZCA9IHN0b3JlZFJ1bi5pZDtcbiAgICAgICAgICAgIHN0b3JlZFJ1bi5kb3R0ZWRfb3JkZXIgPSBjdXJyZW50RG90dGVkT3JkZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5NYXAuc2V0KHN0b3JlZFJ1bi5pZCwgc3RvcmVkUnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHN0b3JlZFJ1bik7XG4gICAgfVxuICAgIGFzeW5jIF9lbmRUcmFjZShydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcnVuLnBhcmVudF9ydW5faWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ1bk1hcC5nZXQocnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyID0gTWF0aC5tYXgocGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciwgcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RSdW4ocnVuKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bk1hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1blVwZGF0ZT8uKHJ1bik7XG4gICAgfVxuICAgIF9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCkge1xuICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSBwYXJlbnRSdW5JZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnVuTWFwLmdldChwYXJlbnRSdW5JZCk7XG4gICAgICAgIC8vIElmIGEgcnVuIGhhcyBubyBwYXJlbnQgdGhlbiBleGVjdXRpb24gb3JkZXIgaXMgMVxuICAgICAgICBpZiAoIXBhcmVudFJ1bikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgKyAxO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1TdGFydChsbG0sIHByb21wdHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGZpbmFsRXh0cmFQYXJhbXMgPSBtZXRhZGF0YVxuICAgICAgICAgICAgPyB7IC4uLmV4dHJhUGFyYW1zLCBtZXRhZGF0YSB9XG4gICAgICAgICAgICA6IGV4dHJhUGFyYW1zO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGxsbS5pZFtsbG0uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBsbG0sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBwcm9tcHRzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZmluYWxFeHRyYVBhcmFtcyA/PyB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTVN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZmluYWxFeHRyYVBhcmFtcyA9IG1ldGFkYXRhXG4gICAgICAgICAgICA/IHsgLi4uZXh0cmFQYXJhbXMsIG1ldGFkYXRhIH1cbiAgICAgICAgICAgIDogZXh0cmFQYXJhbXM7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IG1lc3NhZ2VzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZmluYWxFeHRyYVBhcmFtcyA/PyB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTVN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gTExNIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0gb3V0cHV0O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1FbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FcnJvcihlcnJvciwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gTExNIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBydW5UeXBlLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gY2hhaW4uaWRbY2hhaW4uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBjaGFpbixcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzLFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogcnVuVHlwZSA/PyBcImNoYWluXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRW5kKG91dHB1dHMsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYWluIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0gX2NvZXJjZVRvRGljdChvdXRwdXRzLCBcIm91dHB1dFwiKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoa3dhcmdzPy5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVuLmlucHV0cyA9IF9jb2VyY2VUb0RpY3Qoa3dhcmdzLmlucHV0cywgXCJpbnB1dFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5FbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVycm9yLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbiBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChrd2FyZ3M/LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBydW4uaW5wdXRzID0gX2NvZXJjZVRvRGljdChrd2FyZ3MuaW5wdXRzLCBcImlucHV0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpbkVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gdG9vbC5pZFt0b29sLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogdG9vbCxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IGlucHV0IH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcInRvb2xcIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRW5kKG91dHB1dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IHsgb3V0cHV0IH07XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbEVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRBY3Rpb24oYWN0aW9uLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZ2VudFJ1biA9IHJ1bjtcbiAgICAgICAgYWdlbnRSdW4uYWN0aW9ucyA9IGFnZW50UnVuLmFjdGlvbnMgfHwgW107XG4gICAgICAgIGFnZW50UnVuLmFjdGlvbnMucHVzaChhY3Rpb24pO1xuICAgICAgICBhZ2VudFJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImFnZW50X2FjdGlvblwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IGFjdGlvbiB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkFnZW50QWN0aW9uPy4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRFbmQoYWN0aW9uLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJhZ2VudF9lbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyBhY3Rpb24gfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25BZ2VudEVuZD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyByZXRyaWV2ZXIuaWRbcmV0cmlldmVyLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogcmV0cmlldmVyLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcXVlcnkgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwicmV0cmlldmVyXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFbmQoZG9jdW1lbnRzLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInJldHJpZXZlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXRyaWV2ZXIgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IHsgZG9jdW1lbnRzIH07XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlckVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInJldHJpZXZlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXRyaWV2ZXIgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJFcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRleHQodGV4dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwidGV4dFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IHRleHQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25UZXh0Py4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4sIGlkeCwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgXCJydW5JZFwiIHByb3ZpZGVkIHRvIFwiaGFuZGxlTExNTmV3VG9rZW5cIiBjYWxsYmFjay5gKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJuZXdfdG9rZW5cIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyB0b2tlbiwgaWR4LCBjaHVuazogZmllbGRzPy5jaHVuayB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTU5ld1Rva2VuPy4ocnVuLCB0b2tlbiwgeyBjaHVuazogZmllbGRzPy5jaHVuayB9KTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZUNhbGxiYWNrSGFuZGxlciIsIl9jb2VyY2VUb0RpY3QiLCJ2YWx1ZSIsImRlZmF1bHRLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJzdHJpcE5vbkFscGhhbnVtZXJpYyIsImlucHV0IiwicmVwbGFjZSIsImNvbnZlcnRUb0RvdHRlZE9yZGVyRm9ybWF0IiwiZXBvY2giLCJydW5JZCIsImV4ZWN1dGlvbk9yZGVyIiwicGFkZGVkT3JkZXIiLCJ0b0ZpeGVkIiwic2xpY2UiLCJwYWRTdGFydCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIkJhc2VUcmFjZXIiLCJjb25zdHJ1Y3RvciIsIl9maWVsZHMiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk1hcCIsImNvcHkiLCJzdHJpbmdpZnlFcnJvciIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJfYWRkQ2hpbGRSdW4iLCJwYXJlbnRSdW4iLCJjaGlsZFJ1biIsImNoaWxkX3J1bnMiLCJwdXNoIiwiX3N0YXJ0VHJhY2UiLCJydW4iLCJjdXJyZW50RG90dGVkT3JkZXIiLCJzdGFydF90aW1lIiwiaWQiLCJleGVjdXRpb25fb3JkZXIiLCJzdG9yZWRSdW4iLCJwYXJlbnRfcnVuX2lkIiwidW5kZWZpbmVkIiwicnVuTWFwIiwiZ2V0IiwiY2hpbGRfZXhlY3V0aW9uX29yZGVyIiwiTWF0aCIsIm1heCIsInRyYWNlX2lkIiwiZG90dGVkX29yZGVyIiwiam9pbiIsInNldCIsIm9uUnVuQ3JlYXRlIiwiX2VuZFRyYWNlIiwicGVyc2lzdFJ1biIsImRlbGV0ZSIsIm9uUnVuVXBkYXRlIiwiX2dldEV4ZWN1dGlvbk9yZGVyIiwicGFyZW50UnVuSWQiLCJoYW5kbGVMTE1TdGFydCIsImxsbSIsInByb21wdHMiLCJleHRyYVBhcmFtcyIsInRhZ3MiLCJtZXRhZGF0YSIsIm5hbWUiLCJub3ciLCJmaW5hbEV4dHJhUGFyYW1zIiwibGVuZ3RoIiwic2VyaWFsaXplZCIsImV2ZW50cyIsInRpbWUiLCJpbnB1dHMiLCJydW5fdHlwZSIsImV4dHJhIiwib25MTE1TdGFydCIsImhhbmRsZUNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJoYW5kbGVMTE1FbmQiLCJvdXRwdXQiLCJlbmRfdGltZSIsIm91dHB1dHMiLCJvbkxMTUVuZCIsImhhbmRsZUxMTUVycm9yIiwib25MTE1FcnJvciIsImhhbmRsZUNoYWluU3RhcnQiLCJjaGFpbiIsInJ1blR5cGUiLCJvbkNoYWluU3RhcnQiLCJoYW5kbGVDaGFpbkVuZCIsIl9wYXJlbnRSdW5JZCIsIl90YWdzIiwia3dhcmdzIiwib25DaGFpbkVuZCIsImhhbmRsZUNoYWluRXJyb3IiLCJvbkNoYWluRXJyb3IiLCJoYW5kbGVUb29sU3RhcnQiLCJ0b29sIiwib25Ub29sU3RhcnQiLCJoYW5kbGVUb29sRW5kIiwib25Ub29sRW5kIiwiaGFuZGxlVG9vbEVycm9yIiwib25Ub29sRXJyb3IiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImFnZW50UnVuIiwiYWN0aW9ucyIsIm9uQWdlbnRBY3Rpb24iLCJoYW5kbGVBZ2VudEVuZCIsIm9uQWdlbnRFbmQiLCJoYW5kbGVSZXRyaWV2ZXJTdGFydCIsInJldHJpZXZlciIsInF1ZXJ5Iiwib25SZXRyaWV2ZXJTdGFydCIsImhhbmRsZVJldHJpZXZlckVuZCIsImRvY3VtZW50cyIsIm9uUmV0cmlldmVyRW5kIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiLCJvblJldHJpZXZlckVycm9yIiwiaGFuZGxlVGV4dCIsInRleHQiLCJvblRleHQiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRva2VuIiwiaWR4IiwiZmllbGRzIiwiY2h1bmsiLCJvbkxMTU5ld1Rva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/console.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/console.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${run.inputs.input?.trim()}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${run.outputs?.output?.trim()}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNNO0FBQ3ZDLFNBQVNFLEtBQUtDLEtBQUssRUFBRUMsSUFBSTtJQUNyQixPQUFPLENBQUMsRUFBRUQsTUFBTUUsSUFBSSxDQUFDLEVBQUVELEtBQUssRUFBRUQsTUFBTUcsS0FBSyxDQUFDLENBQUM7QUFDL0M7QUFDQSxTQUFTQyxpQkFBaUJDLEdBQUcsRUFBRUMsUUFBUTtJQUNuQyxJQUFJO1FBQ0EsT0FBT0MsS0FBS0MsU0FBUyxDQUFDSCxLQUFLLE1BQU07SUFDckMsRUFDQSxPQUFPSSxLQUFLO1FBQ1IsT0FBT0g7SUFDWDtBQUNKO0FBQ0EsU0FBU0ksUUFBUUMsR0FBRztJQUNoQixJQUFJLENBQUNBLElBQUlDLFFBQVEsRUFDYixPQUFPO0lBQ1gsTUFBTUYsVUFBVUMsSUFBSUMsUUFBUSxHQUFHRCxJQUFJRSxVQUFVO0lBQzdDLElBQUlILFVBQVUsTUFBTTtRQUNoQixPQUFPLENBQUMsRUFBRUEsUUFBUSxFQUFFLENBQUM7SUFDekI7SUFDQSxPQUFPLENBQUMsRUFBRSxDQUFDQSxVQUFVLElBQUcsRUFBR0ksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVDO0FBQ0EsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR2xCLHdDQUFNQTtBQUN4Qjs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUNNLE1BQU1tQiwrQkFBK0JsQixnREFBVUE7SUFDbERtQixhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0E7Ozs7O0tBS0MsR0FDREMsV0FBV0MsSUFBSSxFQUFFO1FBQ2IsT0FBT0MsUUFBUUMsT0FBTztJQUMxQjtJQUNBLGtCQUFrQjtJQUNsQjs7OztLQUlD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V2xFO1FBQ2pCLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkN5QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU0rRCxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsRUFBRTNCLE9BQU8seUJBQXlCLEVBQUUvQyxpQkFBaUJ5RSxTQUFTRSxPQUFPLENBQUNGLFNBQVNFLE9BQU8sQ0FBQ2pDLE1BQU0sR0FBRyxFQUFFLEVBQUUsWUFBWSxDQUFDO0lBQ3pLO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2NvbnNvbGUuanM/NzNjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3R5bGVzIGZyb20gXCJhbnNpLXN0eWxlc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmZ1bmN0aW9uIHdyYXAoc3R5bGUsIHRleHQpIHtcbiAgICByZXR1cm4gYCR7c3R5bGUub3Blbn0ke3RleHR9JHtzdHlsZS5jbG9zZX1gO1xufVxuZnVuY3Rpb24gdHJ5SnNvblN0cmluZ2lmeShvYmosIGZhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsYXBzZWQocnVuKSB7XG4gICAgaWYgKCFydW4uZW5kX3RpbWUpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBydW4uZW5kX3RpbWUgLSBydW4uc3RhcnRfdGltZTtcbiAgICBpZiAoZWxhcHNlZCA8IDEwMDApIHtcbiAgICAgICAgcmV0dXJuIGAke2VsYXBzZWR9bXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7KGVsYXBzZWQgLyAxMDAwKS50b0ZpeGVkKDIpfXNgO1xufVxuY29uc3QgeyBjb2xvciB9ID0gc3R5bGVzO1xuLyoqXG4gKiBBIHRyYWNlciB0aGF0IGxvZ3MgYWxsIGV2ZW50cyB0byB0aGUgY29uc29sZS4gSXQgZXh0ZW5kcyBmcm9tIHRoZVxuICogYEJhc2VUcmFjZXJgIGNsYXNzIGFuZCBvdmVycmlkZXMgaXRzIG1ldGhvZHMgdG8gcHJvdmlkZSBjdXN0b20gbG9nZ2luZ1xuICogZnVuY3Rpb25hbGl0eS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKlxuICogY29uc3QgbGxtID0gbmV3IENoYXRBbnRocm9waWMoe1xuICogICB0ZW1wZXJhdHVyZTogMCxcbiAqICAgdGFnczogW1wiZXhhbXBsZVwiLCBcImNhbGxiYWNrc1wiLCBcImNvbnN0cnVjdG9yXCJdLFxuICogICBjYWxsYmFja3M6IFtuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpXSxcbiAqIH0pO1xuICpcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBwZXJzaXN0IHRoZSBydW4uIEluIHRoaXMgY2FzZSwgaXQgc2ltcGx5IHJldHVybnMgYVxuICAgICAqIHJlc29sdmVkIHByb21pc2UgYXMgdGhlcmUncyBubyBwZXJzaXN0ZW5jZSBsb2dpYy5cbiAgICAgKiBAcGFyYW0gX3J1biBUaGUgcnVuIHRvIHBlcnNpc3QuXG4gICAgICogQHJldHVybnMgQSByZXNvbHZlZCBwcm9taXNlLlxuICAgICAqL1xuICAgIHBlcnNpc3RSdW4oX3J1bikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8vIHV0aWxpdHkgbWV0aG9kc1xuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGdldCBhbGwgdGhlIHBhcmVudCBydW5zIG9mIGEgZ2l2ZW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBwYXJlbnRzIGFyZSB0byBiZSByZXRyaWV2ZWQuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgcGFyZW50IHJ1bnMuXG4gICAgICovXG4gICAgZ2V0UGFyZW50cyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudFJ1biA9IHJ1bjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5ydW5NYXAuZ2V0KGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFJ1biA9IHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBnZXQgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bidzIGxpbmVhZ2UsIHdoaWNoXG4gICAgICogaXMgdXNlZCBpbiBsb2dnaW5nLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBsaW5lYWdlIGlzIHRvIGJlIHJldHJpZXZlZC5cbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVuJ3MgbGluZWFnZS5cbiAgICAgKi9cbiAgICBnZXRCcmVhZGNydW1icyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuZ2V0UGFyZW50cyhydW4pLnJldmVyc2UoKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gWy4uLnBhcmVudHMsIHJ1bl1cbiAgICAgICAgICAgIC5tYXAoKHBhcmVudCwgaSwgYXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7cGFyZW50LmV4ZWN1dGlvbl9vcmRlcn06JHtwYXJlbnQucnVuX3R5cGV9OiR7cGFyZW50Lm5hbWV9YDtcbiAgICAgICAgICAgIHJldHVybiBpID09PSBhcnIubGVuZ3RoIC0gMSA/IHdyYXAoc3R5bGVzLmJvbGQsIG5hbWUpIDogbmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiID4gXCIpO1xuICAgICAgICByZXR1cm4gd3JhcChjb2xvci5ncmV5LCBzdHJpbmcpO1xuICAgIH1cbiAgICAvLyBsb2dnaW5nIG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbY2hhaW4vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBDaGFpbiBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2NoYWluL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgQ2hhaW4gcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltjaGFpbi9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIENoYWluIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBcInByb21wdHNcIiBpbiBydW4uaW5wdXRzXG4gICAgICAgICAgICA/IHsgcHJvbXB0czogcnVuLmlucHV0cy5wcm9tcHRzLm1hcCgocCkgPT4gcC50cmltKCkpIH1cbiAgICAgICAgICAgIDogcnVuLmlucHV0cztcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbbGxtL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgTExNIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkoaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbbGxtL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgTExNIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltyZXNwb25zZV1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGFuIExMTSBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgTExNIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTUVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltsbG0vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBMTE0gcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbdG9vbC9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFRvb2wgcnVuIHdpdGggaW5wdXQ6IFwiJHtydW4uaW5wdXRzLmlucHV0Py50cmltKCl9XCJgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYSB0b29sIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSB0b29sIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbdG9vbC9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFRvb2wgcnVuIHdpdGggb3V0cHV0OiBcIiR7cnVuLm91dHB1dHM/Lm91dHB1dD8udHJpbSgpfVwiYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3Rvb2wvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBUb29sIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlclN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3JldHJpZXZlci9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFJldHJpZXZlciBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlckVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3JldHJpZXZlci9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFJldHJpZXZlciBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbb3V0cHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uUmV0cmlldmVyRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3JldHJpZXZlci9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIFJldHJpZXZlciBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgYWN0aW9uIHNlbGVjdGVkIGJ5IHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gaW4gd2hpY2ggdGhlIGFnZW50IGFjdGlvbiBvY2N1cnJlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25BZ2VudEFjdGlvbihydW4pIHtcbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ibHVlLCBcIlthZ2VudC9hY3Rpb25dXCIpfSBbJHtjcnVtYnN9XSBBZ2VudCBzZWxlY3RlZCBhY3Rpb246ICR7dHJ5SnNvblN0cmluZ2lmeShhZ2VudFJ1bi5hY3Rpb25zW2FnZW50UnVuLmFjdGlvbnMubGVuZ3RoIC0gMV0sIFwiW2FjdGlvbl1cIil9YCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInN0eWxlcyIsIkJhc2VUcmFjZXIiLCJ3cmFwIiwic3R5bGUiLCJ0ZXh0Iiwib3BlbiIsImNsb3NlIiwidHJ5SnNvblN0cmluZ2lmeSIsIm9iaiIsImZhbGxiYWNrIiwiSlNPTiIsInN0cmluZ2lmeSIsImVyciIsImVsYXBzZWQiLCJydW4iLCJlbmRfdGltZSIsInN0YXJ0X3RpbWUiLCJ0b0ZpeGVkIiwiY29sb3IiLCJDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldFBhcmVudHMiLCJwYXJlbnRzIiwiY3VycmVudFJ1biIsInBhcmVudF9ydW5faWQiLCJwYXJlbnQiLCJydW5NYXAiLCJnZXQiLCJwdXNoIiwiZ2V0QnJlYWRjcnVtYnMiLCJyZXZlcnNlIiwic3RyaW5nIiwibWFwIiwiaSIsImFyciIsIm5hbWUiLCJleGVjdXRpb25fb3JkZXIiLCJydW5fdHlwZSIsImxlbmd0aCIsImJvbGQiLCJqb2luIiwiZ3JleSIsIm9uQ2hhaW5TdGFydCIsImNydW1icyIsImNvbnNvbGUiLCJsb2ciLCJncmVlbiIsImlucHV0cyIsIm9uQ2hhaW5FbmQiLCJjeWFuIiwib3V0cHV0cyIsIm9uQ2hhaW5FcnJvciIsInJlZCIsImVycm9yIiwib25MTE1TdGFydCIsInByb21wdHMiLCJwIiwidHJpbSIsIm9uTExNRW5kIiwib25MTE1FcnJvciIsIm9uVG9vbFN0YXJ0IiwiaW5wdXQiLCJvblRvb2xFbmQiLCJvdXRwdXQiLCJvblRvb2xFcnJvciIsIm9uUmV0cmlldmVyU3RhcnQiLCJvblJldHJpZXZlckVuZCIsIm9uUmV0cmlldmVyRXJyb3IiLCJvbkFnZW50QWN0aW9uIiwiYWdlbnRSdW4iLCJibHVlIiwiYWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/initialize.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTracingCallbackHandler: () => (/* binding */ getTracingCallbackHandler),\n/* harmony export */   getTracingV2CallbackHandler: () => (/* binding */ getTracingV2CallbackHandler)\n/* harmony export */ });\n/* harmony import */ var _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tracer_langchain_v1.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\");\n\n\n/**\n * @deprecated Use the V2 handler instead.\n *\n * Function that returns an instance of `LangChainTracerV1`. If a session\n * is provided, it loads that session into the tracer; otherwise, it loads\n * a default session.\n * @param session Optional session to load into the tracer.\n * @returns An instance of `LangChainTracerV1`.\n */ async function getTracingCallbackHandler(session) {\n    const tracer = new _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__.LangChainTracerV1();\n    if (session) {\n        await tracer.loadSession(session);\n    } else {\n        await tracer.loadDefaultSession();\n    }\n    return tracer;\n}\n/**\n * Function that returns an instance of `LangChainTracer`. It does not\n * load any session data.\n * @returns An instance of `LangChainTracer`.\n */ async function getTracingV2CallbackHandler() {\n    return new _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__.LangChainTracer();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9pbml0aWFsaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDSztBQUM3RDs7Ozs7Ozs7Q0FRQyxHQUNNLGVBQWVFLDBCQUEwQkMsT0FBTztJQUNuRCxNQUFNQyxTQUFTLElBQUlILHNFQUFpQkE7SUFDcEMsSUFBSUUsU0FBUztRQUNULE1BQU1DLE9BQU9DLFdBQVcsQ0FBQ0Y7SUFDN0IsT0FDSztRQUNELE1BQU1DLE9BQU9FLGtCQUFrQjtJQUNuQztJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7OztDQUlDLEdBQ00sZUFBZUc7SUFDbEIsT0FBTyxJQUFJUCxpRUFBZUE7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2luaXRpYWxpemUuanM/Nzc2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMYW5nQ2hhaW5UcmFjZXIgfSBmcm9tIFwiLi90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBMYW5nQ2hhaW5UcmFjZXJWMSB9IGZyb20gXCIuL3RyYWNlcl9sYW5nY2hhaW5fdjEuanNcIjtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBWMiBoYW5kbGVyIGluc3RlYWQuXG4gKlxuICogRnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGluc3RhbmNlIG9mIGBMYW5nQ2hhaW5UcmFjZXJWMWAuIElmIGEgc2Vzc2lvblxuICogaXMgcHJvdmlkZWQsIGl0IGxvYWRzIHRoYXQgc2Vzc2lvbiBpbnRvIHRoZSB0cmFjZXI7IG90aGVyd2lzZSwgaXQgbG9hZHNcbiAqIGEgZGVmYXVsdCBzZXNzaW9uLlxuICogQHBhcmFtIHNlc3Npb24gT3B0aW9uYWwgc2Vzc2lvbiB0byBsb2FkIGludG8gdGhlIHRyYWNlci5cbiAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIGBMYW5nQ2hhaW5UcmFjZXJWMWAuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFjaW5nQ2FsbGJhY2tIYW5kbGVyKHNlc3Npb24pIHtcbiAgICBjb25zdCB0cmFjZXIgPSBuZXcgTGFuZ0NoYWluVHJhY2VyVjEoKTtcbiAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0cmFjZXIubG9hZFNlc3Npb24oc2Vzc2lvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhd2FpdCB0cmFjZXIubG9hZERlZmF1bHRTZXNzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0cmFjZXI7XG59XG4vKipcbiAqIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyYC4gSXQgZG9lcyBub3RcbiAqIGxvYWQgYW55IHNlc3Npb24gZGF0YS5cbiAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIGBMYW5nQ2hhaW5UcmFjZXJgLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyKCkge1xuICAgIHJldHVybiBuZXcgTGFuZ0NoYWluVHJhY2VyKCk7XG59XG4iXSwibmFtZXMiOlsiTGFuZ0NoYWluVHJhY2VyIiwiTGFuZ0NoYWluVHJhY2VyVjEiLCJnZXRUcmFjaW5nQ2FsbGJhY2tIYW5kbGVyIiwic2Vzc2lvbiIsInRyYWNlciIsImxvYWRTZXNzaW9uIiwibG9hZERlZmF1bHRTZXNzaW9uIiwiZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_index_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk(token);\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0U7QUFDekI7QUFDcUI7QUFDTjtBQUN0RDs7Ozs7O0NBTUMsR0FDTSxNQUFNSTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxHQUFHLEdBQUdQLE9BQU9PLEdBQUcsSUFBSSxFQUFFO0lBQy9CO0lBQ0FDLE9BQU9DLEtBQUssRUFBRTtRQUNWLE1BQU1GLE1BQU0sSUFBSSxDQUFDQSxHQUFHLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTUYsR0FBRztRQUNyQyxNQUFNRyxTQUFTaEIsMkVBQVVBLENBQUMsQ0FBQyxHQUFHYTtRQUM5QixtRUFBbUU7UUFDbkUsT0FBTyxJQUFJSSxPQUFPO1lBQ2RKO1lBQ0FLLE9BQU9GLE1BQU0sQ0FBQ0EsT0FBT0csTUFBTSxHQUFHLEVBQUUsQ0FBQ0MsV0FBVztRQUNoRDtJQUNKO0FBQ0o7QUFDTyxNQUFNSCxlQUFlYjtJQUN4QkMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNNLEtBQUssR0FBR1osT0FBT1ksS0FBSztJQUM3QjtJQUNBSixPQUFPQyxLQUFLLEVBQUU7UUFDVixNQUFNRixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU1GLEdBQUc7UUFDckMsTUFBTUcsU0FBU2hCLDJFQUFVQSxDQUFDLElBQUksQ0FBQ2tCLEtBQUssRUFBRUgsTUFBTUYs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QUNwQyxNQUFNTCxVQUFVLElBQUksQ0FBQ3BCLGFBQWEsQ0FBQ2xELElBQUlxQyxFQUFFLENBQUM7UUFDMUMsSUFBSWlDLFlBQVk5RCxXQUFXO1lBQ3ZCO1FBQ0o7UUFDQSxvQkFBb0I7UUFDcEIsTUFBTW9FLGNBQWM1RSxJQUFJRyxNQUFNLENBQUMwRSxRQUFRLEtBQUtyRTtRQUM1QyxJQUFJc0U7UUFDSixJQUFJRixhQUFhO1lBQ2IsSUFBSWhFLHNCQUFzQitELFFBQVEzQixRQUFRO2dCQUN0QzhCLHNCQUFzQkgsUUFBUTNCO1lBQ2xDLE9BQ0s7Z0JBQ0Q4QixzQkFBc0IsSUFBSW5HLDhEQUFjQSxDQUFDK0Y7WUFDN0M7UUFDSixPQUNLO1lBQ0RJLHNCQUFzQko7UUFDMUI7UUFDQSxNQUFNNUUsUUFBUSxJQUFJbEIsWUFBWTtZQUMxQlMsS0FBSztnQkFDRDtvQkFDSStELElBQUk7b0JBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVpQixRQUFRLHNCQUFzQixDQUFDO29CQUM5Q2xGLE9BQU9zRjtnQkFDWDtnQkFDQTtvQkFDSXRCLElBQUk7b0JBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVpQixRQUFRLGtCQUFrQixDQUFDO29CQUMxQ2xGLE9BQU8wRjtnQkFDWDthQUNIO1FBQ0w7UUFDQSxNQUFNLElBQUksQ0FBQ25ELE1BQU0sQ0FBQ3dCLEtBQUssQ0FBQ3JEO0lBQzVCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2xvZ19zdHJlYW0uanM/MjlkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcHBseVBhdGNoLCB9IGZyb20gXCIuLi91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbi8qKlxuICogTGlzdCBvZiBqc29ucGF0Y2ggSlNPTlBhdGNoT3BlcmF0aW9ucywgd2hpY2ggZGVzY3JpYmUgaG93IHRvIGNyZWF0ZSB0aGUgcnVuIHN0YXRlXG4gKiBmcm9tIGFuIGVtcHR5IGRpY3QuIFRoaXMgaXMgdGhlIG1pbmltYWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGxvZywgZGVzaWduZWQgdG9cbiAqIGJlIHNlcmlhbGl6ZWQgYXMgSlNPTiBhbmQgc2VudCBvdmVyIHRoZSB3aXJlIHRvIHJlY29uc3RydWN0IHRoZSBsb2cgb24gdGhlIG90aGVyXG4gKiBzaWRlLiBSZWNvbnN0cnVjdGlvbiBvZiB0aGUgc3RhdGUgY2FuIGJlIGRvbmUgd2l0aCBhbnkganNvbnBhdGNoLWNvbXBsaWFudCBsaWJyYXJ5LFxuICogc2VlIGh0dHBzOi8vanNvbnBhdGNoLmNvbSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkxvZ1BhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BzID0gZmllbGRzLm9wcyA/PyBbXTtcbiAgICB9XG4gICAgY29uY2F0KG90aGVyKSB7XG4gICAgICAgIGNvbnN0IG9wcyA9IHRoaXMub3BzLmNvbmNhdChvdGhlci5vcHMpO1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBvcHMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHtcbiAgICAgICAgICAgIG9wcyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTG9nIGV4dGVuZHMgUnVuTG9nUGF0Y2gge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlID0gZmllbGRzLnN0YXRlO1xuICAgIH1cbiAgICBjb25jYXQob3RoZXIpIHtcbiAgICAgICAgY29uc3Qgb3BzID0gdGhpcy5vcHMuY29uY2F0KG90aGVyLm9wcyk7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2godGhpcy5zdGF0ZSwgb3RoZXIub3BzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coeyBvcHMsIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50IH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVJ1bkxvZ1BhdGNoKHBhdGNoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2goe30sIHBhdGNoLm9wcyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coe1xuICAgICAgICAgICAgb3BzOiBwYXRjaC5vcHMsXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IHN0YW5kYXJkaXplZCBpbnB1dHMgZnJvbSBhIHJ1bi5cbiAqXG4gKiBTdGFuZGFyZGl6ZXMgdGhlIGlucHV0cyBiYXNlZCBvbiB0aGUgdHlwZSBvZiB0aGUgcnVubmFibGUgdXNlZC5cbiAqXG4gKiBAcGFyYW0gcnVuIC0gUnVuIG9iamVjdFxuICogQHBhcmFtIHNjaGVtYUZvcm1hdCAtIFRoZSBzY2hlbWEgZm9ybWF0IHRvIHVzZS5cbiAqXG4gKiBAcmV0dXJucyBWYWxpZCBpbnB1dHMgYXJlIG9ubHkgZGljdC4gQnkgY29udmVudGlvbnMsIGlucHV0cyBhbHdheXMgcmVwcmVzZW50ZWRcbiAqIGludm9jYXRpb24gdXNpbmcgbmFtZWQgYXJndW1lbnRzLlxuICogQSBudWxsIG1lYW5zIHRoYXQgdGhlIGlucHV0IGlzIG5vdCB5ZXQga25vd24hXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCBzY2hlbWFGb3JtYXQpIHtcbiAgICBpZiAoc2NoZW1hRm9ybWF0ID09PSBcIm9yaWdpbmFsXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG8gbm90IGFzc2lnbiBpbnB1dHMgd2l0aCBvcmlnaW5hbCBzY2hlbWEgZHJvcCB0aGUga2V5IGZvciBub3cuIFwiICtcbiAgICAgICAgICAgIFwiV2hlbiBpbnB1dHMgYXJlIGFkZGVkIHRvIHN0cmVhbUxvZyB0aGV5IHNob3VsZCBiZSBhZGRlZCB3aXRoIFwiICtcbiAgICAgICAgICAgIFwic3RhbmRhcmRpemVkIHNjaGVtYSBmb3Igc3RyZWFtaW5nIGV2ZW50cy5cIik7XG4gICAgfVxuICAgIGNvbnN0IHsgaW5wdXRzIH0gPSBydW47XG4gICAgaWYgKFtcInJldHJpZXZlclwiLCBcImxsbVwiLCBcInByb21wdFwiXS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBpbnB1dHM7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dHMpLmxlbmd0aCA9PT0gMSAmJiBpbnB1dHM/LmlucHV0ID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIG5ldyBzdHlsZSBjaGFpbnNcbiAgICAvLyBUaGVzZSBuZXN0IGFuIGFkZGl0aW9uYWwgJ2lucHV0JyBrZXkgaW5zaWRlIHRoZSAnaW5wdXRzJyB0byBtYWtlIHN1cmVcbiAgICAvLyB0aGUgaW5wdXQgaXMgYWx3YXlzIGEgZGljdC4gV2UgbmVlZCB0byB1bnBhY2sgYW5kIHVzZXIgdGhlIGlubmVyIHZhbHVlLlxuICAgIC8vIFdlIHNob3VsZCB0cnkgdG8gZml4IHRoaXMgaW4gUnVubmFibGVzIGFuZCBjYWxsYmFja3MvdHJhY2Vyc1xuICAgIC8vIFJ1bm5hYmxlcyBzaG91bGQgYmUgdXNpbmcgYSBudWxsIHR5cGUgaGVyZSBub3QgYSBwbGFjZWhvbGRlclxuICAgIC8vIGRpY3QuXG4gICAgcmV0dXJuIGlucHV0cy5pbnB1dDtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG4gICAgY29uc3QgeyBvdXRwdXRzIH0gPSBydW47XG4gICAgaWYgKHNjaGVtYUZvcm1hdCA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgb2xkIHNjaGVtYSwgd2l0aG91dCBzdGFuZGFyZGl6aW5nIGFueXRoaW5nXG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICBpZiAoW1wicmV0cmlldmVyXCIsIFwibGxtXCIsIFwicHJvbXB0XCJdLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIGhhY2t5IGNoZWNrXG4gICAgaWYgKG91dHB1dHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBPYmplY3Qua2V5cyhvdXRwdXRzKS5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgb3V0cHV0cz8ub3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG91dHB1dHMub3V0cHV0O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0cztcbn1cbmZ1bmN0aW9uIGlzQ2hhdEdlbmVyYXRpb25DaHVuayh4KSB7XG4gICAgcmV0dXJuIHggIT09IHVuZGVmaW5lZCAmJiB4Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQ2xhc3MgdGhhdCBleHRlbmRzIHRoZSBgQmFzZVRyYWNlcmAgY2xhc3MgZnJvbSB0aGVcbiAqIGBsYW5nY2hhaW4uY2FsbGJhY2tzLnRyYWNlcnMuYmFzZWAgbW9kdWxlLiBJdCByZXByZXNlbnRzIGEgY2FsbGJhY2tcbiAqIGhhbmRsZXIgdGhhdCBsb2dzIHRoZSBleGVjdXRpb24gb2YgcnVucyBhbmQgZW1pdHMgYFJ1bkxvZ2AgaW5zdGFuY2VzIHRvIGFcbiAqIGBSdW5Mb2dTdHJlYW1gLlxuICovXG5leHBvcnQgY2xhc3MgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKHsgX2F3YWl0SGFuZGxlcjogdHJ1ZSwgLi4uZmllbGRzIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhdXRvQ2xvc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfc2NoZW1hRm9ybWF0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIm9yaWdpbmFsXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvb3RJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrZXlNYXBCeVJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY291bnRlck1hcEJ5UnVuTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyYW5zZm9ybVN0cmVhbVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3cml0ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVjZWl2ZVN0cmVhbVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImxvZ19zdHJlYW1fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXV0b0Nsb3NlID0gZmllbGRzPy5hdXRvQ2xvc2UgPz8gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbmNsdWRlTmFtZXMgPSBmaWVsZHM/LmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHM/LmluY2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcz8uaW5jbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMuZXhjbHVkZU5hbWVzID0gZmllbGRzPy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzPy5leGNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHM/LmV4Y2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLl9zY2hlbWFGb3JtYXQgPSBmaWVsZHM/Ll9zY2hlbWFGb3JtYXQgPz8gdGhpcy5fc2NoZW1hRm9ybWF0O1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVN0cmVhbSA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oKTtcbiAgICAgICAgdGhpcy53cml0ZXIgPSB0aGlzLnRyYW5zZm9ybVN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlU3RyZWFtID0gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0odGhpcy50cmFuc2Zvcm1TdHJlYW0ucmVhZGFibGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlU3RyZWFtO1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG4gICAgICAgIC8vIGFuZCBpcyB0aGVyZWZvcmUgbm90IHVzZWZ1bCBoZXJlXG4gICAgfVxuICAgIF9pbmNsdWRlUnVuKHJ1bikge1xuICAgICAgICBpZiAocnVuLmlkID09PSB0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ1blRhZ3MgPSBydW4udGFncyA/PyBbXTtcbiAgICAgICAgbGV0IGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVOYW1lcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID09PSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fFxuICAgICAgICAgICAgICAgICAgICBydW5UYWdzLmZpbmQoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSkgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKHJ1bi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSAmJiBydW5UYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICB9XG4gICAgYXN5bmMgKnRhcE91dHB1dEl0ZXJhYmxlKHJ1bklkLCBvdXRwdXQpIHtcbiAgICAgICAgLy8gVGFwIGFuIG91dHB1dCBhc3luYyBpdGVyYXRvciB0byBzdHJlYW0gaXRzIHZhbHVlcyB0byB0aGUgbG9nLlxuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG91dHB1dCkge1xuICAgICAgICAgICAgLy8gcm9vdCBydW4gaXMgaGFuZGxlZCBpbiAuc3RyZWFtTG9nKClcbiAgICAgICAgICAgIGlmIChydW5JZCAhPT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBjYW4ndCBmaW5kIHRoZSBydW4gc2lsZW50bHkgaWdub3JlXG4gICAgICAgICAgICAgICAgLy8gZWcuIGJlY2F1c2UgdGhpcyBydW4gd2Fzbid0IGluY2x1ZGVkIGluIHRoZSBsb2dcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuSWRdO1xuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke2tleX0vc3RyZWFtZWRfb3V0cHV0Ly1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdElkID0gcnVuLmlkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBydW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0OiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbF9vdXRwdXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2luY2x1ZGVSdW4ocnVuKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gKz0gMTtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdO1xuICAgICAgICB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXSA9XG4gICAgICAgICAgICBjb3VudCA9PT0gMSA/IHJ1bi5uYW1lIDogYCR7cnVuLm5hbWV9OiR7Y291bnR9YDtcbiAgICAgICAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgICAgICAgICBpZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICAgICAgc3RhcnRfdGltZTogbmV3IERhdGUocnVuLnN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBzdHJlYW1lZF9vdXRwdXQ6IFtdLFxuICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0X3N0cjogW10sXG4gICAgICAgICAgICBmaW5hbF9vdXRwdXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVuZF90aW1lOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLl9zY2hlbWFGb3JtYXQgPT09IFwic3RyZWFtaW5nX2V2ZW50c1wiKSB7XG4gICAgICAgICAgICBsb2dFbnRyeS5pbnB1dHMgPSBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7dGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF19YCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGxvZ0VudHJ5LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuVXBkYXRlKHJ1bikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcnVuTmFtZSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdO1xuICAgICAgICAgICAgaWYgKHJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9wcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVtYUZvcm1hdCA9PT0gXCJzdHJlYW1pbmdfZXZlbnRzXCIpIHtcbiAgICAgICAgICAgICAgICBvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vaW5wdXRzYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2ZpbmFsX291dHB1dGAsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJ1bi5lbmRfdGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vZW5kX3RpbWVgLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goeyBvcHMgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAocnVuLmlkID09PSB0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiL2ZpbmFsX291dHB1dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25MTE1OZXdUb2tlbihydW4sIHRva2VuLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgcnVuTmFtZSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdO1xuICAgICAgICBpZiAocnVuTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGhhY2tcbiAgICAgICAgY29uc3QgaXNDaGF0TW9kZWwgPSBydW4uaW5wdXRzLm1lc3NhZ2VzICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBzdHJlYW1lZE91dHB1dFZhbHVlO1xuICAgICAgICBpZiAoaXNDaGF0TW9kZWwpIHtcbiAgICAgICAgICAgIGlmIChpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoa3dhcmdzPy5jaHVuaykpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0ga3dhcmdzPy5jaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSBuZXcgQUlNZXNzYWdlQ2h1bmsodG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IHRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L3N0cmVhbWVkX291dHB1dF9zdHIvLWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0b2tlbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L3N0cmVhbWVkX291dHB1dC8tYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0cmVhbWVkT3V0cHV0VmFsdWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImFwcGx5UGF0Y2giLCJCYXNlVHJhY2VyIiwiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsIkFJTWVzc2FnZUNodW5rIiwiUnVuTG9nUGF0Y2giLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJvcHMiLCJjb25jYXQiLCJvdGhlciIsInN0YXRlcyIsIlJ1bkxvZyIsInN0YXRlIiwibGVuZ3RoIiwibmV3RG9jdW1lbnQiLCJmcm9tUnVuTG9nUGF0Y2giLCJwYXRjaCIsIl9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMiLCJydW4iLCJzY2hlbWFGb3JtYXQiLCJFcnJvciIsImlucHV0cyIsImluY2x1ZGVzIiwicnVuX3R5cGUiLCJrZXlzIiwiaW5wdXQiLCJ1bmRlZmluZWQiLCJfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyIsIm91dHB1dHMiLCJvdXRwdXQiLCJpc0NoYXRHZW5lcmF0aW9uQ2h1bmsiLCJ4IiwibWVzc2FnZSIsIkxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciIsIl9hd2FpdEhhbmRsZXIiLCJhdXRvQ2xvc2UiLCJpbmNsdWRlTmFtZXMiLCJpbmNsdWRlVHlwZXMiLCJpbmNsdWRlVGFncyIsImV4Y2x1ZGVOYW1lcyIsImV4Y2x1ZGVUeXBlcyIsImV4Y2x1ZGVUYWdzIiwiX3NjaGVtYUZvcm1hdCIsInRyYW5zZm9ybVN0cmVhbSIsIlRyYW5zZm9ybVN0cmVhbSIsIndyaXRlciIsImdldFdyaXRlciIsInJlY2VpdmVTdHJlYW0iLCJmcm9tUmVhZGFibGVTdHJlYW0iLCJyZWFkYWJsZSIsIlN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJwZXJzaXN0UnVuIiwiX3J1biIsIl9pbmNsdWRlUnVuIiwiaWQiLCJyb290SWQiLCJydW5UYWdzIiwidGFncyIsImluY2x1ZGUiLCJuYW1lIiwiZmluZCIsInRhZyIsImV2ZXJ5IiwidGFwT3V0cHV0SXRlcmFibGUiLCJydW5JZCIsImNodW5rIiwia2V5Iiwia2V5TWFwQnlSdW5JZCIsIndyaXRlIiwib3AiLCJwYXRoIiwib25SdW5DcmVhdGUiLCJ0eXBlIiwic3RyZWFtZWRfb3V0cHV0IiwiZmluYWxfb3V0cHV0IiwibG9ncyIsImNvdW50ZXJNYXBCeVJ1bk5hbWUiLCJjb3VudCIsImxvZ0VudHJ5IiwibWV0YWRhdGEiLCJleHRyYSIsInN0YXJ0X3RpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdHJlYW1lZF9vdXRwdXRfc3RyIiwiZW5kX3RpbWUiLCJvblJ1blVwZGF0ZSIsInJ1bk5hbWUiLCJwdXNoIiwiY2xvc2UiLCJvbkxMTU5ld1Rva2VuIiwidG9rZW4iLCJrd2FyZ3MiLCJpc0NoYXRNb2RlbCIsIm1lc3NhZ2VzIiwic3RyZWFtZWRPdXRwdXRWYWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super({\n            _awaitHandler: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            if (this.argOnStart.length === 1) {\n                await this.argOnStart(run);\n            } else if (this.argOnStart.length === 2) {\n                await this.argOnStart(run, this.config);\n            }\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                if (this.argOnEnd.length === 1) {\n                    await this.argOnEnd(run);\n                } else if (this.argOnEnd.length === 2) {\n                    await this.argOnEnd(run, this.config);\n                }\n            }\n        } else if (this.argOnError) {\n            if (this.argOnError.length === 1) {\n                await this.argOnError(run);\n            } else if (this.argOnError.length === 2) {\n                await this.argOnError(run, this.config);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDO0FBQ2hDLE1BQU1DLDRCQUE0QkQsZ0RBQVVBO0lBQy9DRSxZQUFZLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRyxDQUFFO1FBQzlDLEtBQUssQ0FBQztZQUFFQyxlQUFlO1FBQUs7UUFDNUJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsNEJBQTRCLEdBQzVCTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1YsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ1csVUFBVSxHQUFHVjtRQUNsQixJQUFJLENBQUNXLFFBQVEsR0FBR1Y7UUFDaEIsSUFBSSxDQUFDVyxVQUFVLEdBQUdWO0lBQ3RCO0lBQ0E7Ozs7S0FJQyxHQUNEVyxXQUFXQyxDQUFDLEVBQUU7UUFDVixPQUFPQyxRQUFRQyxPQUFPO0lBQzFCO0lBQ0EsTUFBTUMsWUFBWUMsR0FBRyxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDYjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxNQUFNLEdBQUdELElBQUlFLEVBQUU7UUFDcEIsSUFBSSxJQUFJLENBQUNWLFVBQVUsRUFBRTtZQUNqQixJQUFJLElBQUksQ0FBQ0EsVUFBVSxDQUFDVyxNQUFNLEtBQUssR0FBRztnQkFDOUIsTUFBTSxJQUFJLENBQUNYLFVBQVUsQ0FBQ1E7WUFDMUIsT0FDSyxJQUFJLElBQUksQ0FBQ1IsVUFBVSxDQUFDVyxNQUFNLEtBQUssR0FBRztnQkFDbkMsTUFBTSxJQUFJLENBQUNYLFVBQVUsQ0FBQ1EsS0FBSyxJQUFJLENBQUNuQixNQUFNO1lBQzFDO1FBQ0o7SUFDSjtJQUNBLE1BQU11QixZQUFZSixHQUFHLEVBQUU7UUFDbkIsSUFBSUEsSUFBSUUsRUFBRSxLQUFLLElBQUksQ0FBQ0QsTUFBTSxFQUFFO1lBQ3hCO1FBQ0o7UUFDQSxJQUFJLENBQUNELElBQUlLLEtBQUssRUFBRTtZQUNaLElBQUksSUFBSSxDQUFDWixRQUFRLEVBQUU7Z0JBQ2YsSUFBSSxJQUFJLENBQUNBLFFBQVEsQ0FBQ1UsTUFBTSxLQUFLLEdBQUc7b0JBQzVCLE1BQU0sSUFBSSxDQUFDVixRQUFRLENBQUNPO2dCQUN4QixPQUNLLElBQUksSUFBSSxDQUFDUCxRQUFRLENBQUNVLE1BQU0sS0FBSyxHQUFHO29CQUNqQyxNQUFNLElBQUksQ0FBQ1YsUUFBUSxDQUFDTyxLQUFLLElBQUksQ0FBQ25CLE1BQU07Z0JBQ3hDO1lBQ0o7UUFDSixPQUNLLElBQUksSUFBSSxDQUFDYSxVQUFVLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUNBLFVBQVUsQ0FBQ1MsTUFBTSxLQUFLLEdBQUc7Z0JBQzlCLE1BQU0sSUFBSSxDQUFDVCxVQUFVLENBQUNNO1lBQzFCLE9BQ0ssSUFBSSxJQUFJLENBQUNOLFVBQVUsQ0FBQ1MsTUFBTSxLQUFLLEdBQUc7Z0JBQ25DLE1BQU0sSUFBSSxDQUFDVCxVQUFVLENBQUNNLEtBQUssSUFBSSxDQUFDbkIsTUFBTTtZQUMxQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvcm9vdF9saXN0ZW5lci5qcz8wZDRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY2xhc3MgUm9vdExpc3RlbmVyc1RyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgY29uZmlnLCBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiUm9vdExpc3RlbmVyc1RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogVGhlIFJ1bidzIElELiBUeXBlIFVVSUQgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9vdElkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPblN0YXJ0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uRW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uRXJyb3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuYXJnT25TdGFydCA9IG9uU3RhcnQ7XG4gICAgICAgIHRoaXMuYXJnT25FbmQgPSBvbkVuZDtcbiAgICAgICAgdGhpcy5hcmdPbkVycm9yID0gb25FcnJvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG4gICAgICogdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuICAgICAqIEBwYXJhbSB7UnVufSBfIE5vdCB1c2VkXG4gICAgICovXG4gICAgcGVyc2lzdFJ1bihfKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm9vdElkID0gcnVuLmlkO1xuICAgICAgICBpZiAodGhpcy5hcmdPblN0YXJ0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcmdPblN0YXJ0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25TdGFydChydW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPblN0YXJ0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25TdGFydChydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgaWYgKHJ1bi5pZCAhPT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ1bi5lcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25FbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcmdPbkVuZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVuZChydW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uRW5kLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uRW5kKHJ1biwgdGhpcy5jb25maWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uRXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uRXJyb3IubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVycm9yKHJ1bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uRXJyb3IubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVycm9yKHJ1biwgdGhpcy5jb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VUcmFjZXIiLCJSb290TGlzdGVuZXJzVHJhY2VyIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJvblN0YXJ0Iiwib25FbmQiLCJvbkVycm9yIiwiX2F3YWl0SGFuZGxlciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJhcmdPblN0YXJ0IiwiYXJnT25FbmQiLCJhcmdPbkVycm9yIiwicGVyc2lzdFJ1biIsIl8iLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9uUnVuQ3JlYXRlIiwicnVuIiwicm9vdElkIiwiaWQiLCJsZW5ndGgiLCJvblJ1blVwZGF0ZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName = projectName ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_PROJECT\") ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client({});\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getRuntimeEnvironment)()\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id\n        };\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async onRunUpdate(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n            inputs: run.inputs,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            parent_run_id: run.parent_run_id\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    getRun(id) {\n        return this.runMap.get(id);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUM7QUFDNkM7QUFDekM7QUFDaEMsTUFBTUksd0JBQXdCRCxnREFBVUE7SUFDM0NFLFlBQVlDLFNBQVMsQ0FBQyxDQUFDLENBQUU7UUFDckIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUVDLE1BQU0sRUFBRSxHQUFHVDtRQUMzQyxJQUFJLENBQUNRLFdBQVcsR0FDWkEsZUFDSWIscUVBQXNCQSxDQUFDLHdCQUN2QkEscUVBQXNCQSxDQUFDO1FBQy9CLElBQUksQ0FBQ1ksU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNFLE1BQU0sR0FBR0EsVUFBVSxJQUFJZiw2Q0FBTUEsQ0FBQyxDQUFDO0lBQ3hDO0lBQ0EsTUFBTWdCLGlCQUFpQkMsR0FBRyxFQUFFQyxhQUFhQyxTQUFTLEVBQUU7UUFDaEQsT0FBTztZQUNILEdBQUdGLEdBQUc7WUFDTkcsT0FBTztnQkFDSCxHQUFHSCxJQUFJRyxLQUFLO2dCQUNaQyxTQUFTLE1BQU1uQixvRUFBcUJBO1lBQ3hDO1lBQ0FvQixZQUFZSDtZQUNaSSxjQUFjLElBQUksQ0FBQ1QsV0FBVztZQUM5QlUsc0JBQXNCUCxJQUFJUSxhQUFhLEdBQUdOLFlBQVlEO1FBQzFEO0lBQ0o7SUFDQSxNQUFNUSxXQUFXQyxJQUFJLEVBQUUsQ0FBRTtJQUN6QixNQUFNQyxZQUFZWCxHQUFHLEVBQUU7UUFDbkIsTUFBTVksZUFBZSxNQUFNLElBQUksQ0FBQ2IsZ0JBQWdCLENBQUNDLEtBQUssSUFBSSxDQUFDSixTQUFTO1FBQ3BFLE1BQU0sSUFBSSxDQUFDRSxNQUFNLENBQUNlLFNBQVMsQ0FBQ0Q7SUFDaEM7SUFDQSxNQUFNRSxZQUFZZCxHQUFHLEVBQUU7UUFDbkIsTUFBTWUsWUFBWTtZQUNkQyxVQUFVaEIsSUFBSWdCLFFBQVE7WUFDdEJDLE9BQU9qQixJQUFJaUIsS0FBSztZQUNoQkMsU0FBU2xCLElBQUlrQixPQUFPO1lBQ3BCQyxRQUFRbkIsSUFBSW1CLE1BQU07WUFDbEJDLFFBQVFwQixJQUFJb0IsTUFBTTtZQUNsQkMsVUFBVXJCLElBQUlxQixRQUFRO1lBQ3RCQyxjQUFjdEIsSUFBSXNCLFlBQVk7WUFDOUJkLGVBQWVSLElBQUlRLGFBQWE7UUFDcEM7UUFDQSxNQUFNLElBQUksQ0FBQ1YsTUFBTSxDQUFDeUIsU0FBUyxDQUFDdkIsSUFBSXdCLEVBQUUsRUFBRVQ7SUFDeEM7SUFDQVUsT0FBT0QsRUFBRSxFQUFFO1FBQ1AsT0FBTyxJQUFJLENBQUNFLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDSDtJQUMzQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzPzRkODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcImxhbmdzbWl0aFwiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSwgZ2V0UnVudGltZUVudmlyb25tZW50IH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCBjbGFzcyBMYW5nQ2hhaW5UcmFjZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMgPSB7fSkge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImxhbmdjaGFpbl90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvamVjdE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZUlkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IGV4YW1wbGVJZCwgcHJvamVjdE5hbWUsIGNsaWVudCB9ID0gZmllbGRzO1xuICAgICAgICB0aGlzLnByb2plY3ROYW1lID1cbiAgICAgICAgICAgIHByb2plY3ROYW1lID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9QUk9KRUNUXCIpID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9TRVNTSU9OXCIpO1xuICAgICAgICB0aGlzLmV4YW1wbGVJZCA9IGV4YW1wbGVJZDtcbiAgICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQgPz8gbmV3IENsaWVudCh7fSk7XG4gICAgfVxuICAgIGFzeW5jIF9jb252ZXJ0VG9DcmVhdGUocnVuLCBleGFtcGxlX2lkID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5ydW4sXG4gICAgICAgICAgICBleHRyYToge1xuICAgICAgICAgICAgICAgIC4uLnJ1bi5leHRyYSxcbiAgICAgICAgICAgICAgICBydW50aW1lOiBhd2FpdCBnZXRSdW50aW1lRW52aXJvbm1lbnQoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZXNzaW9uX25hbWU6IHRoaXMucHJvamVjdE5hbWUsXG4gICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZV9pZDogcnVuLnBhcmVudF9ydW5faWQgPyB1bmRlZmluZWQgOiBleGFtcGxlX2lkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHsgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBjb25zdCBwZXJzaXN0ZWRSdW4gPSBhd2FpdCB0aGlzLl9jb252ZXJ0VG9DcmVhdGUocnVuLCB0aGlzLmV4YW1wbGVJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmNyZWF0ZVJ1bihwZXJzaXN0ZWRSdW4pO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgY29uc3QgcnVuVXBkYXRlID0ge1xuICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgIGVycm9yOiBydW4uZXJyb3IsXG4gICAgICAgICAgICBvdXRwdXRzOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgIGV2ZW50czogcnVuLmV2ZW50cyxcbiAgICAgICAgICAgIGlucHV0czogcnVuLmlucHV0cyxcbiAgICAgICAgICAgIHRyYWNlX2lkOiBydW4udHJhY2VfaWQsXG4gICAgICAgICAgICBkb3R0ZWRfb3JkZXI6IHJ1bi5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBydW4ucGFyZW50X3J1bl9pZCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQudXBkYXRlUnVuKHJ1bi5pZCwgcnVuVXBkYXRlKTtcbiAgICB9XG4gICAgZ2V0UnVuKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bk1hcC5nZXQoaWQpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJDbGllbnQiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiZ2V0UnVudGltZUVudmlyb25tZW50IiwiQmFzZVRyYWNlciIsIkxhbmdDaGFpblRyYWNlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImV4YW1wbGVJZCIsInByb2plY3ROYW1lIiwiY2xpZW50IiwiX2NvbnZlcnRUb0NyZWF0ZSIsInJ1biIsImV4YW1wbGVfaWQiLCJ1bmRlZmluZWQiLCJleHRyYSIsInJ1bnRpbWUiLCJjaGlsZF9ydW5zIiwic2Vzc2lvbl9uYW1lIiwicmVmZXJlbmNlX2V4YW1wbGVfaWQiLCJwYXJlbnRfcnVuX2lkIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJvblJ1bkNyZWF0ZSIsInBlcnNpc3RlZFJ1biIsImNyZWF0ZVJ1biIsIm9uUnVuVXBkYXRlIiwicnVuVXBkYXRlIiwiZW5kX3RpbWUiLCJlcnJvciIsIm91dHB1dHMiLCJldmVudHMiLCJpbnB1dHMiLCJ0cmFjZV9pZCIsImRvdHRlZF9vcmRlciIsInVwZGF0ZVJ1biIsImlkIiwiZ2V0UnVuIiwicnVuTWFwIiwiZ2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracerV1: () => (/* binding */ LangChainTracerV1)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n/** @deprecated Use LangChainTracer instead. */ class LangChainTracerV1 extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(){\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"endpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_API_KEY\");\n        if (apiKey) {\n            this.headers[\"x-api-key\"] = apiKey;\n        }\n    }\n    async newSession(sessionName) {\n        const sessionCreate = {\n            start_time: Date.now(),\n            name: sessionName\n        };\n        const session = await this.persistSession(sessionCreate);\n        this.session = session;\n        return session;\n    }\n    async loadSession(sessionName) {\n        const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async loadDefaultSession() {\n        const endpoint = `${this.endpoint}/sessions?name=default`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async convertV2RunToRun(run) {\n        const session = this.session ?? await this.loadDefaultSession();\n        const serialized = run.serialized;\n        let runResult;\n        if (run.run_type === \"llm\") {\n            const prompts = run.inputs.prompts ? run.inputs.prompts : run.inputs.messages.map((x)=>(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString)(x));\n            const llmRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                prompts,\n                response: run.outputs\n            };\n            runResult = llmRun;\n        } else if (run.run_type === \"chain\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const chainRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                inputs: run.inputs,\n                outputs: run.outputs,\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = chainRun;\n        } else if (run.run_type === \"tool\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const toolRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                tool_input: run.inputs.input,\n                output: run.outputs?.output,\n                action: JSON.stringify(serialized),\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = toolRun;\n        } else {\n            throw new Error(`Unknown run type: ${run.run_type}`);\n        }\n        return runResult;\n    }\n    async persistRun(run) {\n        let endpoint;\n        let v1Run;\n        if (run.run_type !== undefined) {\n            v1Run = await this.convertV2RunToRun(run);\n        } else {\n            v1Run = run;\n        }\n        if (v1Run.type === \"llm\") {\n            endpoint = `${this.endpoint}/llm-runs`;\n        } else if (v1Run.type === \"chain\") {\n            endpoint = `${this.endpoint}/chain-runs`;\n        } else {\n            endpoint = `${this.endpoint}/tool-runs`;\n        }\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(v1Run)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n        }\n    }\n    async persistSession(sessionCreate) {\n        const endpoint = `${this.endpoint}/sessions`;\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(sessionCreate)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n            return {\n                id: 1,\n                ...sessionCreate\n            };\n        }\n        return {\n            id: (await response.json()).id,\n            ...sessionCreate\n        };\n    }\n    async _handleSessionResponse(endpoint) {\n        const response = await fetch(endpoint, {\n            method: \"GET\",\n            headers: this.headers\n        });\n        let tracerSession;\n        if (!response.ok) {\n            console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        const resp = await response.json();\n        if (resp.length === 0) {\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        [tracerSession] = resp;\n        this.session = tracerSession;\n        return tracerSession;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluX3YxLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7QUFDRTtBQUNsQjtBQUN2Qyw2Q0FBNkMsR0FDdEMsTUFBTUcsMEJBQTBCRCxnREFBVUE7SUFDN0NFLGFBQWM7UUFDVixLQUFLO1FBQ0xDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1QscUVBQXNCQSxDQUFDLHlCQUF5QjtRQUMzRDtRQUNBSSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQ0gsZ0JBQWdCO1lBQ3BCO1FBQ0o7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxNQUFNQyxTQUFTVixxRUFBc0JBLENBQUM7UUFDdEMsSUFBSVUsUUFBUTtZQUNSLElBQUksQ0FBQ0MsT0FBTyxDQUFDLFlBQVksR0FBR0Q7UUFDaEM7SUFDSjtJQUNBLE1BQU1FLFdBQVdDLFdBQVcsRUFBRTtRQUMxQixNQUFNQyxnQkFBZ0I7WUFDbEJDLFlBQVlDLEtBQUtDLEdBQUc7WUFDcEJDLE1BQU1MO1FBQ1Y7UUFDQSxNQUFNTSxVQUFVLE1BQU0sSUFBSSxDQUFDQyxjQUFjLENBQUNOO1FBQzFDLElBQUksQ0FBQ0ssT0FBTyxHQUFHQTtRQUNmLE9BQU9BO0lBQ1g7SUFDQSxNQUFNRSxZQUFZUixXQUFXLEVBQUU7UUFDM0IsTUFBTVMsV0FB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QUFPLEdBQUd1RDtZQUNmLE9BQU9BO1FBQ1g7UUFDQSxNQUFNQyxPQUFRLE1BQU1oQyxTQUFTOEIsSUFBSTtRQUNqQyxJQUFJRSxLQUFLQyxNQUFNLEtBQUssR0FBRztZQUNuQkYsZ0JBQWdCO2dCQUNackMsSUFBSTtnQkFDSnRCLFlBQVlDLEtBQUtDLEdBQUc7WUFDeEI7WUFDQSxJQUFJLENBQUNFLE9BQU8sR0FBR3VEO1lBQ2YsT0FBT0E7UUFDWDtRQUNBLENBQUNBLGNBQWMsR0FBR0M7UUFDbEIsSUFBSSxDQUFDeEQsT0FBTyxHQUFHdUQ7UUFDZixPQUFPQTtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3RyYWNlcl9sYW5nY2hhaW5fdjEuanM/ZDQzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRCdWZmZXJTdHJpbmcgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBMYW5nQ2hhaW5UcmFjZXIgaW5zdGVhZC4gKi9cbmV4cG9ydCBjbGFzcyBMYW5nQ2hhaW5UcmFjZXJWMSBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImxhbmdjaGFpbl90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kcG9pbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fRU5EUE9JTlRcIikgfHwgXCJodHRwOi8vbG9jYWxob3N0OjE5ODRcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGVhZGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2Vzc2lvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0FQSV9LRVlcIik7XG4gICAgICAgIGlmIChhcGlLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc1tcIngtYXBpLWtleVwiXSA9IGFwaUtleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBuZXdTZXNzaW9uKHNlc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25DcmVhdGUgPSB7XG4gICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmFtZTogc2Vzc2lvbk5hbWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCB0aGlzLnBlcnNpc3RTZXNzaW9uKHNlc3Npb25DcmVhdGUpO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgYXN5bmMgbG9hZFNlc3Npb24oc2Vzc2lvbk5hbWUpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9ucz9uYW1lPSR7c2Vzc2lvbk5hbWV9YDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVNlc3Npb25SZXNwb25zZShlbmRwb2ludCk7XG4gICAgfVxuICAgIGFzeW5jIGxvYWREZWZhdWx0U2Vzc2lvbigpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9ucz9uYW1lPWRlZmF1bHRgO1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVuZHBvaW50KTtcbiAgICB9XG4gICAgYXN5bmMgY29udmVydFYyUnVuVG9SdW4ocnVuKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb24gPz8gKGF3YWl0IHRoaXMubG9hZERlZmF1bHRTZXNzaW9uKCkpO1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gcnVuLnNlcmlhbGl6ZWQ7XG4gICAgICAgIGxldCBydW5SZXN1bHQ7XG4gICAgICAgIGlmIChydW4ucnVuX3R5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdHMgPSBydW4uaW5wdXRzLnByb21wdHNcbiAgICAgICAgICAgICAgICA/IHJ1bi5pbnB1dHMucHJvbXB0c1xuICAgICAgICAgICAgICAgIDogcnVuLmlucHV0cy5tZXNzYWdlcy5tYXAoKHgpID0+IGdldEJ1ZmZlclN0cmluZyh4KSk7XG4gICAgICAgICAgICBjb25zdCBsbG1SdW4gPSB7XG4gICAgICAgICAgICAgICAgdXVpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIHByb21wdHMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IGxsbVJ1bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW4ucnVuX3R5cGUgPT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRfcnVucyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1bi5jaGlsZF9ydW5zLm1hcCgoY2hpbGRfcnVuKSA9PiB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKGNoaWxkX3J1bikpKTtcbiAgICAgICAgICAgIGNvbnN0IGNoYWluUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICAgICAgY2hpbGRfbGxtX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImxsbVwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF9jaGFpbl9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJjaGFpblwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF90b29sX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcInRvb2xcIiksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuUmVzdWx0ID0gY2hhaW5SdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVuLnJ1bl90eXBlID09PSBcInRvb2xcIikge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRfcnVucyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1bi5jaGlsZF9ydW5zLm1hcCgoY2hpbGRfcnVuKSA9PiB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKGNoaWxkX3J1bikpKTtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xSdW4gPSB7XG4gICAgICAgICAgICAgICAgdXVpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIHRvb2xfaW5wdXQ6IHJ1bi5pbnB1dHMuaW5wdXQsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBydW4ub3V0cHV0cz8ub3V0cHV0LFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZCksXG4gICAgICAgICAgICAgICAgY2hpbGRfbGxtX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImxsbVwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF9jaGFpbl9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJjaGFpblwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF90b29sX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcInRvb2xcIiksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuUmVzdWx0ID0gdG9vbFJ1bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBydW4gdHlwZTogJHtydW4ucnVuX3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1blJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihydW4pIHtcbiAgICAgICAgbGV0IGVuZHBvaW50O1xuICAgICAgICBsZXQgdjFSdW47XG4gICAgICAgIGlmIChydW4ucnVuX3R5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdjFSdW4gPSBhd2FpdCB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKHJ1bik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2MVJ1biA9IHJ1bjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodjFSdW4udHlwZSA9PT0gXCJsbG1cIikge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9sbG0tcnVuc2A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodjFSdW4udHlwZSA9PT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L2NoYWluLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS90b29sLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh2MVJ1biksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcGVyc2lzdCBydW46ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFNlc3Npb24oc2Vzc2lvbkNyZWF0ZSkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L3Nlc3Npb25zYDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNlc3Npb25DcmVhdGUpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHBlcnNpc3Qgc2Vzc2lvbjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0sIHVzaW5nIGRlZmF1bHQgc2Vzc2lvbi5gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgICAgLi4uc2Vzc2lvbkNyZWF0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKS5pZCxcbiAgICAgICAgICAgIC4uLnNlc3Npb25DcmVhdGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIF9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZW5kcG9pbnQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHRyYWNlclNlc3Npb247XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIHNlc3Npb246ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB0cmFjZXJTZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3AgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgaWYgKHJlc3AubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0cmFjZXJTZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIFt0cmFjZXJTZXNzaW9uXSA9IHJlc3A7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRCdWZmZXJTdHJpbmciLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZVRyYWNlciIsIkxhbmdDaGFpblRyYWNlclYxIiwiY29uc3RydWN0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXBpS2V5IiwiaGVhZGVycyIsIm5ld1Nlc3Npb24iLCJzZXNzaW9uTmFtZSIsInNlc3Npb25DcmVhdGUiLCJzdGFydF90aW1lIiwiRGF0ZSIsIm5vdyIsIm5hbWUiLCJzZXNzaW9uIiwicGVyc2lzdFNlc3Npb24iLCJsb2FkU2Vzc2lvbiIsImVuZHBvaW50IiwiX2hhbmRsZVNlc3Npb25SZXNwb25zZSIsImxvYWREZWZhdWx0U2Vzc2lvbiIsImNvbnZlcnRWMlJ1blRvUnVuIiwicnVuIiwic2VyaWFsaXplZCIsInJ1blJlc3VsdCIsInJ1bl90eXBlIiwicHJvbXB0cyIsImlucHV0cyIsIm1lc3NhZ2VzIiwibWFwIiwieCIsImxsbVJ1biIsInV1aWQiLCJpZCIsImVuZF90aW1lIiwiZXhlY3V0aW9uX29yZGVyIiwiY2hpbGRfZXhlY3V0aW9uX29yZGVyIiwidHlwZSIsInNlc3Npb25faWQiLCJyZXNwb25zZSIsIm91dHB1dHMiLCJjaGlsZF9ydW5zIiwiUHJvbWlzZSIsImFsbCIsImNoaWxkX3J1biIsImNoYWluUnVuIiwiY2hpbGRfbGxtX3J1bnMiLCJmaWx0ZXIiLCJjaGlsZF9jaGFpbl9ydW5zIiwiY2hpbGRfdG9vbF9ydW5zIiwidG9vbFJ1biIsInRvb2xfaW5wdXQiLCJpbnB1dCIsIm91dHB1dCIsImFjdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJFcnJvciIsInBlcnNpc3RSdW4iLCJ2MVJ1biIsInVuZGVmaW5lZCIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIm9rIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImpzb24iLCJ0cmFjZXJTZXNzaW9uIiwicmVzcCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QjtBQUNHO0FBQ2hDLE1BQU1FLGtCQUFrQjtJQUNwQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELDhEQUE4RDtBQUM5RCxNQUFNQyw4QkFBOEIsQ0FBQ0M7SUFDakMsSUFBSUEsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQUMsYUFDekJGLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDLGlCQUN6QkYsTUFBTUcsSUFBSSxLQUFLLGNBQWM7UUFDN0IsTUFBTUg7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPSSxTQUFTLGdCQUFnQjtRQUNoQyxNQUFNSjtJQUNWO0lBQ0EsTUFBTUssU0FDTiw4REFBOEQ7SUFDOURMLE9BQU9NLFVBQVVELFVBQVVMLE9BQU9LO0lBQ2xDLElBQUlBLFVBQVVQLGdCQUFnQlMsUUFBUSxDQUFDLENBQUNGLFNBQVM7UUFDN0MsTUFBTUw7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPQSxPQUFPSSxTQUFTLHNCQUFzQjtRQUM3QyxNQUFNSSxNQUFNLElBQUlDLE1BQU1ULE9BQU9DO1FBQzdCTyxJQUFJTCxJQUFJLEdBQUc7UUFDWCxNQUFNSztJQUNWO0FBQ0o7QUFDQTs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxNQUFNRTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsY0FBYyxHQUFHUCxPQUFPTyxjQUFjLElBQUlDO1FBQy9DLElBQUksQ0FBQ0MsVUFBVSxHQUFHVCxPQUFPUyxVQUFVLElBQUk7UUFDdkMsSUFBSSxDQUFDQyxlQUFlLEdBQ2hCVixPQUFPVSxlQUFlLElBQUl2QjtRQUM5QixNQUFNd0IsU0FBUyxLQUFzQjFCLEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7UUFDckUsSUFBSSxDQUFDNEIsS0FBSyxHQUFHLElBQUlGLE9BQU87WUFBRUcsYUFBYSxJQUFJLENBQUNQLGNBQWM7UUFBQztJQUMvRDtJQUNBLDhEQUE4RDtJQUM5RFEsS0FBS0MsUUFBUSxFQUFFLEdBQUdDLElBQUksRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQ0osS0FBSyxDQUFDSyxHQUFHLENBQUMsSUFBTWxDLG9DQUFNQSxDQUFDLElBQU1nQyxZQUFZQyxNQUFNRSxLQUFLLENBQUMsQ0FBQy9CO29CQUM5RCx1REFBdUQ7b0JBQ3ZELElBQUlBLGlCQUFpQlMsT0FBTzt3QkFDeEIsTUFBTVQ7b0JBQ1YsT0FDSzt3QkFDRCxNQUFNLElBQUlTLE1BQU1UO29CQUNwQjtnQkFDSixJQUFJO2dCQUNBc0IsaUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtnQkFDckNVLFNBQVMsSUFBSSxDQUFDWCxVQUFVO2dCQUN4QlksV0FBVztZQUdmLElBQUk7WUFBRUMsZ0JBQWdCO1FBQUs7SUFDL0I7SUFDQSw4REFBOEQ7SUFDOURDLGdCQUFnQkMsT0FBTyxFQUFFUixRQUFRLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQ3hDLG1EQUFtRDtRQUNuRCx3RUFBd0U7UUFDeEUsSUFBSU8sUUFBUUMsTUFBTSxFQUFFO1lBQ2hCLE9BQU9DLFFBQVFDLElBQUksQ0FBQztnQkFDaEIsSUFBSSxDQUFDWixJQUFJLENBQUNDLGFBQWFDO2dCQUN2QixJQUFJUyxRQUFRLENBQUNFLEdBQUdDO29CQUNaTCxRQUFRQyxNQUFNLEVBQUVLLGlCQUFpQixTQUFTO3dCQUN0Q0QsT0FBTyxJQUFJaEMsTUFBTTtvQkFDckI7Z0JBQ0o7YUFDSDtRQUNMO1FBQ0EsT0FBTyxJQUFJLENBQUNrQixJQUFJLENBQUNDLGFBQWFDO0lBQ2xDO0lBQ0FjLE1BQU0sR0FBR2QsSUFBSSxFQUFFO1FBQ1gsT0FBTyxJQUFJLENBQUNGLElBQUksQ0FBQyxJQUFNZ0IsU0FBU2QsTUFBTWUsSUFBSSxDQUFDLENBQUNDLE1BQVNBLElBQUlDLEVBQUUsR0FBR0QsTUFBTVAsUUFBUUcsTUFBTSxDQUFDSTtJQUN2RjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzPzE0YzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBSZXRyeSBmcm9tIFwicC1yZXRyeVwiO1xuaW1wb3J0IFBRdWV1ZU1vZCBmcm9tIFwicC1xdWV1ZVwiO1xuY29uc3QgU1RBVFVTX05PX1JFVFJZID0gW1xuICAgIDQwMCxcbiAgICA0MDEsXG4gICAgNDAyLFxuICAgIDQwMyxcbiAgICA0MDQsXG4gICAgNDA1LFxuICAgIDQwNixcbiAgICA0MDcsXG4gICAgNDA5LCAvLyBDb25mbGljdFxuXTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5jb25zdCBkZWZhdWx0RmFpbGVkQXR0ZW1wdEhhbmRsZXIgPSAoZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKFwiQ2FuY2VsXCIpIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkFib3J0RXJyb3JcIikgfHxcbiAgICAgICAgZXJyb3IubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaWYgKGVycm9yPy5jb2RlID09PSBcIkVDT05OQUJPUlRFRFwiKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBjb25zdCBzdGF0dXMgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGVycm9yPy5yZXNwb25zZT8uc3RhdHVzID8/IGVycm9yPy5zdGF0dXM7XG4gICAgaWYgKHN0YXR1cyAmJiBTVEFUVVNfTk9fUkVUUlkuaW5jbHVkZXMoK3N0YXR1cykpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaWYgKGVycm9yPy5lcnJvcj8uY29kZSA9PT0gXCJpbnN1ZmZpY2llbnRfcXVvdGFcIikge1xuICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoZXJyb3I/Lm1lc3NhZ2UpO1xuICAgICAgICBlcnIubmFtZSA9IFwiSW5zdWZmaWNpZW50UXVvdGFFcnJvclwiO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxufTtcbi8qKlxuICogQSBjbGFzcyB0aGF0IGNhbiBiZSB1c2VkIHRvIG1ha2UgYXN5bmMgY2FsbHMgd2l0aCBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgZm9yIG1ha2luZyBjYWxscyB0byBhbnkga2luZCBvZiBcImV4cGVuc2l2ZVwiIGV4dGVybmFsIHJlc291cmNlLFxuICogYmUgaXQgYmVjYXVzZSBpdCdzIHJhdGUtbGltaXRlZCwgc3ViamVjdCB0byBuZXR3b3JrIGlzc3VlcywgZXRjLlxuICpcbiAqIENvbmN1cnJlbnQgY2FsbHMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhDb25jdXJyZW5jeWAgcGFyYW1ldGVyLCB3aGljaCBkZWZhdWx0c1xuICogdG8gYEluZmluaXR5YC4gVGhpcyBtZWFucyB0aGF0IGJ5IGRlZmF1bHQsIGFsbCBjYWxscyB3aWxsIGJlIG1hZGUgaW4gcGFyYWxsZWwuXG4gKlxuICogUmV0cmllcyBhcmUgbGltaXRlZCBieSB0aGUgYG1heFJldHJpZXNgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHMgdG8gNi4gVGhpc1xuICogbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBlYWNoIGNhbGwgd2lsbCBiZSByZXRyaWVkIHVwIHRvIDYgdGltZXMsIHdpdGggYW5cbiAqIGV4cG9uZW50aWFsIGJhY2tvZmYgYmV0d2VlbiBlYWNoIGF0dGVtcHQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBc3luY0NhbGxlciB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heENvbmN1cnJlbmN5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFJldHJpZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib25GYWlsZWRBdHRlbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInF1ZXVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWF4Q29uY3VycmVuY3kgPSBwYXJhbXMubWF4Q29uY3VycmVuY3kgPz8gSW5maW5pdHk7XG4gICAgICAgIHRoaXMubWF4UmV0cmllcyA9IHBhcmFtcy5tYXhSZXRyaWVzID8/IDY7XG4gICAgICAgIHRoaXMub25GYWlsZWRBdHRlbXB0ID1cbiAgICAgICAgICAgIHBhcmFtcy5vbkZhaWxlZEF0dGVtcHQgPz8gZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyO1xuICAgICAgICBjb25zdCBQUXVldWUgPSBcImRlZmF1bHRcIiBpbiBQUXVldWVNb2QgPyBQUXVldWVNb2QuZGVmYXVsdCA6IFBRdWV1ZU1vZDtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBQUXVldWUoeyBjb25jdXJyZW5jeTogdGhpcy5tYXhDb25jdXJyZW5jeSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsKGNhbGxhYmxlLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmFkZCgoKSA9PiBwUmV0cnkoKCkgPT4gY2FsbGFibGUoLi4uYXJncykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogdGhpcy5vbkZhaWxlZEF0dGVtcHQsXG4gICAgICAgICAgICByZXRyaWVzOiB0aGlzLm1heFJldHJpZXMsXG4gICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgICAgICAvLyBJZiBuZWVkZWQgd2UgY2FuIGNoYW5nZSBzb21lIG9mIHRoZSBkZWZhdWx0cyBoZXJlLFxuICAgICAgICAgICAgLy8gYnV0IHRoZXkncmUgcXVpdGUgc2Vuc2libGUuXG4gICAgICAgIH0pLCB7IHRocm93T25UaW1lb3V0OiB0cnVlIH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNhbGxXaXRoT3B0aW9ucyhvcHRpb25zLCBjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICAvLyBOb3RlIHRoaXMgZG9lc24ndCBjYW5jZWwgdGhlIHVuZGVybHlpbmcgcmVxdWVzdCxcbiAgICAgICAgLy8gd2hlbiBhdmFpbGFibGUgcHJlZmVyIHRvIHVzZSB0aGUgc2lnbmFsIG9wdGlvbiBvZiB0aGUgdW5kZXJseWluZyBjYWxsXG4gICAgICAgIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKSxcbiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIikpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBmZXRjaCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoKCkgPT4gZmV0Y2goLi4uYXJncykudGhlbigocmVzKSA9PiAocmVzLm9rID8gcmVzIDogUHJvbWlzZS5yZWplY3QocmVzKSkpKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicFJldHJ5IiwiUFF1ZXVlTW9kIiwiU1RBVFVTX05PX1JFVFJZIiwiZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RhcnRzV2l0aCIsIm5hbWUiLCJjb2RlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJpbmNsdWRlcyIsImVyciIsIkVycm9yIiwiQXN5bmNDYWxsZXIiLCJjb25zdHJ1Y3RvciIsInBhcmFtcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJtYXhDb25jdXJyZW5jeSIsIkluZmluaXR5IiwibWF4UmV0cmllcyIsIm9uRmFpbGVkQXR0ZW1wdCIsIlBRdWV1ZSIsImRlZmF1bHQiLCJxdWV1ZSIsImNvbmN1cnJlbmN5IiwiY2FsbCIsImNhbGxhYmxlIiwiYXJncyIsImFkZCIsImNhdGNoIiwicmV0cmllcyIsInJhbmRvbWl6ZSIsInRocm93T25UaW1lb3V0IiwiY2FsbFdpdGhPcHRpb25zIiwib3B0aW9ucyIsInNpZ25hbCIsIlByb21pc2UiLCJyYWNlIiwiXyIsInJlamVjdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/chunk_array.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* binding */ chunkArray)\n/* harmony export */ });\nconst chunkArray = (arr, chunkSize)=>arr.reduce((chunks, elem, index)=>{\n        const chunkIndex = Math.floor(index / chunkSize);\n        const chunk = chunks[chunkIndex] || [];\n        // eslint-disable-next-line no-param-reassign\n        chunks[chunkIndex] = chunk.concat([\n            elem\n        ]);\n        return chunks;\n    }, []);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2h1bmtfYXJyYXkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGFBQWEsQ0FBQ0MsS0FBS0MsWUFBY0QsSUFBSUUsTUFBTSxDQUFDLENBQUNDLFFBQVFDLE1BQU1DO1FBQ3BFLE1BQU1DLGFBQWFDLEtBQUtDLEtBQUssQ0FBQ0gsUUFBUUo7UUFDdEMsTUFBTVEsUUFBUU4sTUFBTSxDQUFDRyxXQUFXLElBQUksRUFBRTtRQUN0Qyw2Q0FBNkM7UUFDN0NILE1BQU0sQ0FBQ0csV0FBVyxHQUFHRyxNQUFNQyxNQUFNLENBQUM7WUFBQ047U0FBSztRQUN4QyxPQUFPRDtJQUNYLEdBQUcsRUFBRSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2h1bmtfYXJyYXkuanM/YzA4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2h1bmtBcnJheSA9IChhcnIsIGNodW5rU2l6ZSkgPT4gYXJyLnJlZHVjZSgoY2h1bmtzLCBlbGVtLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNodW5rSW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gY2h1bmtTaXplKTtcbiAgICBjb25zdCBjaHVuayA9IGNodW5rc1tjaHVua0luZGV4XSB8fCBbXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBjaHVua3NbY2h1bmtJbmRleF0gPSBjaHVuay5jb25jYXQoW2VsZW1dKTtcbiAgICByZXR1cm4gY2h1bmtzO1xufSwgW10pO1xuIl0sIm5hbWVzIjpbImNodW5rQXJyYXkiLCJhcnIiLCJjaHVua1NpemUiLCJyZWR1Y2UiLCJjaHVua3MiLCJlbGVtIiwiaW5kZXgiLCJjaHVua0luZGV4IiwiTWF0aCIsImZsb29yIiwiY2h1bmsiLCJjb25jYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/env.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/env.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\"));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nasync function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\" ? process.env?.[name] : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsWUFBWSxJQUFNLE1BQTZCLElBQUksQ0FBc0MsQ0FBQztBQUNoRyxNQUFNRyxjQUFjLElBQU0sT0FBT0MsZUFBZSxZQUNuREEsV0FBV0MsV0FBVyxJQUN0QkQsV0FBV0MsV0FBVyxDQUFDQyxJQUFJLEtBQUssNkJBQTZCO0FBQzFELE1BQU1DLFVBQVUsSUFBTSxNQUEwRCxJQUNsRixPQUFPQyxjQUFjLGVBQ2pCQSxDQUFBQSxVQUFVQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxjQUMxQkYsVUFBVUMsU0FBUyxDQUFDQyxRQUFRLENBQUMsUUFBTyxFQUFJO0FBQ3BELHlEQUF5RDtBQUN6RCw2QkFBNkI7QUFDdEIsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFNBQVMsWUFBWTtBQUN4RCxnREFBZ0Q7QUFDekMsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFlBQVksZUFDM0MsT0FBT0EsUUFBUUMsUUFBUSxLQUFLLGVBQzVCLE9BQU9ELFFBQVFDLFFBQVEsQ0FBQ0MsSUFBSSxLQUFLLGVBQ2pDLENBQUNMLFNBQVM7QUFDUCxNQUFNTSxTQUFTO0lBQ2xCLElBQUlDO0lBQ0osSUFBSWxCLGFBQWE7UUFDYmtCLE1BQU07SUFDVixPQUNLLElBQUlMLFVBQVU7UUFDZkssTUFBTTtJQUNWLE9BQ0ssSUFBSWYsZUFBZTtRQUNwQmUsTUFBTTtJQUNWLE9BQ0ssSUFBSVgsV0FBVztRQUNoQlcsTUFBTTtJQUNWLE9BQ0ssSUFBSVAsVUFBVTtRQUNmTyxNQUFNO0lBQ1YsT0FDSztRQUNEQSxNQUFNO0lBQ1Y7SUFDQSxPQUFPQTtBQUNYLEVBQUU7QUFDRixJQUFJQztBQUNHLGVBQWVDO0lBQ2xCLElBQUlELHVCQUF1QkUsV0FBVztRQUNsQyxNQUFNSCxNQUFNRDtRQUNaRSxxQkFBcUI7WUFDakJHLFNBQVM7WUFDVEMsU0FBU0w7UUFDYjtJQUNKO0lBQ0EsT0FBT0M7QUFDWDtBQUNPLFNBQVNLLHVCQUF1QmxCLElBQUk7SUFDdkMscUZBQXFGO0lBQ3JGLDBEQUEwRDtJQUMxRCxJQUFJO1FBQ0EsT0FBTyxPQUFPUSxZQUFZLGNBRWxCQSxRQUFRSSxHQUFHLEVBQUUsQ0FBQ1osS0FBSyxHQUNyQmU7SUFDVixFQUNBLE9BQU9JLEdBQUc7UUFDTixPQUFPSjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9lbnYuanM/NDJmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaXNCcm93c2VyID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiO1xuZXhwb3J0IGNvbnN0IGlzV2ViV29ya2VyID0gKCkgPT4gdHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIgJiZcbiAgICBnbG9iYWxUaGlzLmNvbnN0cnVjdG9yICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkRlZGljYXRlZFdvcmtlckdsb2JhbFNjb3BlXCI7XG5leHBvcnQgY29uc3QgaXNKc0RvbSA9ICgpID0+ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5uYW1lID09PSBcIm5vZGVqc1wiKSB8fFxuICAgICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTm9kZS5qc1wiKSB8fFxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcImpzZG9tXCIpKSk7XG4vLyBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uIHByb3ZpZGVzIGEgYERlbm9gIGdsb2JhbCBvYmplY3Rcbi8vIHdpdGhvdXQgYHZlcnNpb25gIHByb3BlcnR5XG5leHBvcnQgY29uc3QgaXNEZW5vID0gKCkgPT4gdHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCI7XG4vLyBNYXJrIG5vdC1hcy1ub2RlIGlmIGluIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25cbmV4cG9ydCBjb25zdCBpc05vZGUgPSAoKSA9PiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICFpc0Rlbm8oKTtcbmV4cG9ydCBjb25zdCBnZXRFbnYgPSAoKSA9PiB7XG4gICAgbGV0IGVudjtcbiAgICBpZiAoaXNCcm93c2VyKCkpIHtcbiAgICAgICAgZW52ID0gXCJicm93c2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzTm9kZSgpKSB7XG4gICAgICAgIGVudiA9IFwibm9kZVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1dlYldvcmtlcigpKSB7XG4gICAgICAgIGVudiA9IFwid2Vid29ya2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzSnNEb20oKSkge1xuICAgICAgICBlbnYgPSBcImpzZG9tXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRGVubygpKSB7XG4gICAgICAgIGVudiA9IFwiZGVub1wiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZW52ID0gXCJvdGhlclwiO1xuICAgIH1cbiAgICByZXR1cm4gZW52O1xufTtcbmxldCBydW50aW1lRW52aXJvbm1lbnQ7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UnVudGltZUVudmlyb25tZW50KCkge1xuICAgIGlmIChydW50aW1lRW52aXJvbm1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBlbnYgPSBnZXRFbnYoKTtcbiAgICAgICAgcnVudGltZUVudmlyb25tZW50ID0ge1xuICAgICAgICAgICAgbGlicmFyeTogXCJsYW5nY2hhaW4tanNcIixcbiAgICAgICAgICAgIHJ1bnRpbWU6IGVudixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bnRpbWVFbnZpcm9ubWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKG5hbWUpIHtcbiAgICAvLyBDZXJ0YWluIERlbm8gc2V0dXBzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IHRyeSB0byBhY2Nlc3MgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2xhbmdjaGFpbi1haS9sYW5nY2hhaW5qcy9pc3N1ZXMvMTQxMlxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvY2Vzcy1lbnZcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudj8uW25hbWVdXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNCcm93c2VyIiwid2luZG93IiwiZG9jdW1lbnQiLCJpc1dlYldvcmtlciIsImdsb2JhbFRoaXMiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpc0pzRG9tIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5jbHVkZXMiLCJpc0Rlbm8iLCJEZW5vIiwiaXNOb2RlIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsImdldEVudiIsImVudiIsInJ1bnRpbWVFbnZpcm9ubWVudCIsImdldFJ1bnRpbWVFbnZpcm9ubWVudCIsInVuZGVmaW5lZCIsImxpYnJhcnkiLCJydW50aW1lIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEI7QUFDRTtBQUNzRztBQUN0STs7Q0FFQyxHQUNxQztBQUNnRztBQUN0SSxpRUFBZTtJQUNYLEdBQUdNLHlDQUFJO0lBQ1AsYUFBYTtJQUNiTCxjQUFjQSx5REFBQUE7SUFDZEUsU0FBU0EseURBQUFBO0lBQ1RDLG1CQUFtQkEsa0VBQUFBO0lBQ25CQyxxQkFBcUJBLG9FQUFBQTtBQUN6QixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanM/NGM5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9zcmMvY29yZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3JjL2R1cGxleC5qc1wiO1xuZXhwb3J0IHsgUGF0Y2hFcnJvciBhcyBKc29uUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSBhcyBkZWVwQ2xvbmUsIGVzY2FwZVBhdGhDb21wb25lbnQsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgfSBmcm9tIFwiLi9zcmMvaGVscGVycy5qc1wiO1xuLyoqXG4gKiBEZWZhdWx0IGV4cG9ydCBmb3IgYmFja3dhcmRzIGNvbXBhdFxuICovXG5pbXBvcnQgKiBhcyBjb3JlIGZyb20gXCIuL3NyYy9jb3JlLmpzXCI7XG5pbXBvcnQgeyBQYXRjaEVycm9yIGFzIEpzb25QYXRjaEVycm9yLCBfZGVlcENsb25lIGFzIGRlZXBDbG9uZSwgZXNjYXBlUGF0aENvbXBvbmVudCwgdW5lc2NhcGVQYXRoQ29tcG9uZW50LCB9IGZyb20gXCIuL3NyYy9oZWxwZXJzLmpzXCI7XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLi4uY29yZSxcbiAgICAvLyAuLi5kdXBsZXgsXG4gICAgSnNvblBhdGNoRXJyb3IsXG4gICAgZGVlcENsb25lLFxuICAgIGVzY2FwZVBhdGhDb21wb25lbnQsXG4gICAgdW5lc2NhcGVQYXRoQ29tcG9uZW50LFxufTtcbiJdLCJuYW1lcyI6WyJQYXRjaEVycm9yIiwiSnNvblBhdGNoRXJyb3IiLCJfZGVlcENsb25lIiwiZGVlcENsb25lIiwiZXNjYXBlUGF0aENvbXBvbmVudCIsInVuZXNjYXBlUGF0aENvbXBvbmVudCIsImNvcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ3lGO0FBQ2hHLE1BQU1LLGlCQUFpQkwsbURBQVVBLENBQUM7QUFDbEMsTUFBTU0sWUFBWUwsbURBQVVBLENBQUM7QUFDcEM7Ozs7O0NBS0MsR0FDRCwwQ0FBMEMsR0FDMUMsTUFBTU0sU0FBUztJQUNYQyxLQUFLLFNBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzdCRixHQUFHLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNFLEtBQUs7UUFDckIsT0FBTztZQUFFQyxhQUFhRjtRQUFTO0lBQ25DO0lBQ0FHLFFBQVEsU0FBVUwsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDaEMsSUFBSUksVUFBVU4sR0FBRyxDQUFDQyxJQUFJO1FBQ3RCLE9BQU9ELEdBQUcsQ0FBQ0MsSUFBSTtRQUNmLE9BQU87WUFBRUcsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBQyxTQUFTLFNBQVVQLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQ2pDLElBQUlJLFVBQVVOLEdBQUcsQ0FBQ0MsSUFBSTtRQUN0QkQsR0FBRyxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRSxLQUFLO1FBQ3JCLE9BQU87WUFBRUMsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBRSxNQUFNLFNBQVVSLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzlCOztvQ0FFNEIsR0FDNUIsSUFBSUksVUFBVUcsa0JBQWtCUCxVQUFVLElBQUksQ0FBQ1EsSUFBSTtRQUNuRCxJQUFJSixTQUFTO1lBQ1RBLFVBQVVkLHVEQUFVQSxDQUFDYztRQUN6QjtRQUNBLE1BQU1LLGdCQUFnQkMsZUFBZVYsVUFBVTtZQUMzQ1csSUFBSTtZQUNKSCxNQUFNLElBQUksQ0FBQ0ksSUFBSTtRQUNu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d2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvY29yZS5qcz9kZjk4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG5pbXBvcnQgeyBQYXRjaEVycm9yLCBfZGVlcENsb25lLCBpc0ludGVnZXIsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgaGFzVW5kZWZpbmVkLCB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmV4cG9ydCBjb25zdCBKc29uUGF0Y2hFcnJvciA9IFBhdGNoRXJyb3I7XG5leHBvcnQgY29uc3QgZGVlcENsb25lID0gX2RlZXBDbG9uZTtcbi8qIFdlIHVzZSBhIEphdmFzY3JpcHQgaGFzaCB0byBzdG9yZSBlYWNoXG4gZnVuY3Rpb24uIEVhY2ggaGFzaCBlbnRyeSAocHJvcGVydHkpIHVzZXNcbiB0aGUgb3BlcmF0aW9uIGlkZW50aWZpZXJzIHNwZWNpZmllZCBpbiByZmM2OTAyLlxuIEluIHRoaXMgd2F5LCB3ZSBjYW4gbWFwIGVhY2ggcGF0Y2ggb3BlcmF0aW9uXG4gdG8gaXRzIGRlZGljYXRlZCBmdW5jdGlvbiBpbiBlZmZpY2llbnQgd2F5LlxuICovXG4vKiBUaGUgb3BlcmF0aW9ucyBhcHBsaWNhYmxlIHRvIGFuIG9iamVjdCAqL1xuY29uc3Qgb2JqT3BzID0ge1xuICAgIGFkZDogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICBvYmpba2V5XSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gb2JqW2tleV07XG4gICAgICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICByZXBsYWNlOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gb2JqW2tleV07XG4gICAgICAgIG9ialtrZXldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICBtb3ZlOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIC8qIGluIGNhc2UgbW92ZSB0YXJnZXQgb3ZlcndyaXRlcyBhbiBleGlzdGluZyB2YWx1ZSxcbiAgICAgICAgcmV0dXJuIHRoZSByZW1vdmVkIHZhbHVlLCB0aGlzIGNhbiBiZSB0YXhpbmcgcGVyZm9ybWFuY2Utd2lzZSxcbiAgICAgICAgYW5kIGlzIHBvdGVudGlhbGx5IHVubmVlZGVkICovXG4gICAgICAgIGxldCByZW1vdmVkID0gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHRoaXMucGF0aCk7XG4gICAgICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICAgICAgICByZW1vdmVkID0gX2RlZXBDbG9uZShyZW1vdmVkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5mcm9tLFxuICAgICAgICB9KS5yZW1vdmVkO1xuICAgICAgICBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICBwYXRoOiB0aGlzLnBhdGgsXG4gICAgICAgICAgICB2YWx1ZTogb3JpZ2luYWxWYWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgY29weTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICBjb25zdCB2YWx1ZVRvQ29weSA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCB0aGlzLmZyb20pO1xuICAgICAgICAvLyBlbmZvcmNlIGNvcHkgYnkgdmFsdWUgc28gZnVydGhlciBvcGVyYXRpb25zIGRvbid0IGFmZmVjdCBzb3VyY2UgKHNlZSBpc3N1ZSAjMTc3KVxuICAgICAgICBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICBwYXRoOiB0aGlzLnBhdGgsXG4gICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZSh2YWx1ZVRvQ29weSksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxuICAgIHRlc3Q6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCB0ZXN0OiBfYXJlRXF1YWxzKG9ialtrZXldLCB0aGlzLnZhbHVlKSB9O1xuICAgIH0sXG4gICAgX2dldDogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgIH0sXG59O1xuLyogVGhlIG9wZXJhdGlvbnMgYXBwbGljYWJsZSB0byBhbiBhcnJheS4gTWFueSBhcmUgdGhlIHNhbWUgYXMgZm9yIHRoZSBvYmplY3QgKi9cbnZhciBhcnJPcHMgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiAoYXJyLCBpLCBkb2N1bWVudCkge1xuICAgICAgICBpZiAoaXNJbnRlZ2VyKGkpKSB7XG4gICAgICAgICAgICBhcnIuc3BsaWNlKGksIDAsIHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYXJyYXkgcHJvcHNcbiAgICAgICAgICAgIGFycltpXSA9IHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBtYXkgYmUgbmVlZGVkIHdoZW4gdXNpbmcgJy0nIGluIGFuIGFycmF5XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgaW5kZXg6IGkgfTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWRMaXN0ID0gYXJyLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkOiByZW1vdmVkTGlzdFswXSB9O1xuICAgIH0sXG4gICAgcmVwbGFjZTogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBhcnJbaV07XG4gICAgICAgIGFycltpXSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgbW92ZTogb2JqT3BzLm1vdmUsXG4gICAgY29weTogb2JqT3BzLmNvcHksXG4gICAgdGVzdDogb2JqT3BzLnRlc3QsXG4gICAgX2dldDogb2JqT3BzLl9nZXQsXG59O1xuLyoqXG4gKiBSZXRyaWV2ZXMgYSB2YWx1ZSBmcm9tIGEgSlNPTiBkb2N1bWVudCBieSBhIEpTT04gcG9pbnRlci5cbiAqIFJldHVybnMgdGhlIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gZ2V0IHRoZSB2YWx1ZSBmcm9tXG4gKiBAcGFyYW0gcG9pbnRlciBhbiBlc2NhcGVkIEpTT04gcG9pbnRlclxuICogQHJldHVybiBUaGUgcmV0cmlldmVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgcG9pbnRlcikge1xuICAgIGlmIChwb2ludGVyID09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH1cbiAgICB2YXIgZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbiA9IHsgb3A6IFwiX2dldFwiLCBwYXRoOiBwb2ludGVyIH07XG4gICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIGdldE9yaWdpbmFsRGVzdGluYXRpb24pO1xuICAgIHJldHVybiBnZXRPcmlnaW5hbERlc3RpbmF0aW9uLnZhbHVlO1xufVxuLyoqXG4gKiBBcHBseSBhIHNpbmdsZSBKU09OIFBhdGNoIE9wZXJhdGlvbiBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB7bmV3RG9jdW1lbnQsIHJlc3VsdH0gb2YgdGhlIG9wZXJhdGlvbi5cbiAqIEl0IG1vZGlmaWVzIHRoZSBgZG9jdW1lbnRgIGFuZCBgb3BlcmF0aW9uYCBvYmplY3RzIC0gaXQgZ2V0cyB0aGUgdmFsdWVzIGJ5IHJlZmVyZW5jZS5cbiAqIElmIHlvdSB3b3VsZCBsaWtlIHRvIGF2b2lkIHRvdWNoaW5nIHlvdXIgdmFsdWVzLCBjbG9uZSB0aGVtOlxuICogYGpzb25wYXRjaC5hcHBseU9wZXJhdGlvbihkb2N1bWVudCwganNvbnBhdGNoLl9kZWVwQ2xvbmUob3BlcmF0aW9uKSlgLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiB0byBhcHBseVxuICogQHBhcmFtIHZhbGlkYXRlT3BlcmF0aW9uIGBmYWxzZWAgaXMgd2l0aG91dCB2YWxpZGF0aW9uLCBgdHJ1ZWAgdG8gdXNlIGRlZmF1bHQganNvbnBhdGNoJ3MgdmFsaWRhdGlvbiwgb3IgeW91IGNhbiBwYXNzIGEgYHZhbGlkYXRlT3BlcmF0aW9uYCBjYWxsYmFjayB0byBiZSB1c2VkIGZvciB2YWxpZGF0aW9uLlxuICogQHBhcmFtIG11dGF0ZURvY3VtZW50IFdoZXRoZXIgdG8gbXV0YXRlIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBvciBjbG9uZSBpdCBiZWZvcmUgYXBwbHlpbmdcbiAqIEBwYXJhbSBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zIFdoZXRoZXIgdG8gYmFuIG1vZGlmaWNhdGlvbnMgdG8gYF9fcHJvdG9fX2AsIGRlZmF1bHRzIHRvIGB0cnVlYC5cbiAqIEByZXR1cm4gYHtuZXdEb2N1bWVudCwgcmVzdWx0fWAgYWZ0ZXIgdGhlIG9wZXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIG9wZXJhdGlvbiwgdmFsaWRhdGVPcGVyYXRpb24gPSBmYWxzZSwgbXV0YXRlRG9jdW1lbnQgPSB0cnVlLCBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zID0gdHJ1ZSwgaW5kZXggPSAwKSB7XG4gICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGVPcGVyYXRpb24gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZU9wZXJhdGlvbihvcGVyYXRpb24sIDAsIGRvY3VtZW50LCBvcGVyYXRpb24ucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWxpZGF0b3Iob3BlcmF0aW9uLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBST09UIE9QRVJBVElPTlMgKi9cbiAgICBpZiAob3BlcmF0aW9uLnBhdGggPT09IFwiXCIpIHtcbiAgICAgICAgbGV0IHJldHVyblZhbHVlID0geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBvcGVyYXRpb24udmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBvcGVyYXRpb24udmFsdWU7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5yZW1vdmVkID0gZG9jdW1lbnQ7IC8vZG9jdW1lbnQgd2UgcmVtb3ZlZFxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuICAgICAgICAgICAgLy8gaXQncyBhIG1vdmUgb3IgY29weSB0byByb290XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCBvcGVyYXRpb24uZnJvbSk7IC8vIGdldCB0aGUgdmFsdWUgYnkganNvbi1wb2ludGVyIGluIGBmcm9tYCBmaWVsZFxuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyByZXBvcnQgcmVtb3ZlZCBpdGVtXG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnRlc3QgPSBfYXJlRXF1YWxzKGRvY3VtZW50LCBvcGVyYXRpb24udmFsdWUpO1xuICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlLnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInJlbW92ZVwiKSB7XG4gICAgICAgICAgICAvLyBhIHJlbW92ZSBvbiByb290XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5yZW1vdmVkID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcIl9nZXRcIikge1xuICAgICAgICAgICAgb3BlcmF0aW9uLnZhbHVlID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvKiBiYWQgb3BlcmF0aW9uICovXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYG9wYCBwcm9wZXJ0eSBpcyBub3Qgb25lIG9mIG9wZXJhdGlvbnMgZGVmaW5lZCBpbiBSRkMtNjkwMlwiLCBcIk9QRVJBVElPTl9PUF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gLyogRU5EIFJPT1QgT1BFUkFUSU9OUyAqL1xuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIW11dGF0ZURvY3VtZW50KSB7XG4gICAgICAgICAgICBkb2N1bWVudCA9IF9kZWVwQ2xvbmUoZG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGggPSBvcGVyYXRpb24ucGF0aCB8fCBcIlwiO1xuICAgICAgICBjb25zdCBrZXlzID0gcGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgIGxldCBvYmogPSBkb2N1bWVudDtcbiAgICAgICAgbGV0IHQgPSAxOyAvL3NraXAgZW1wdHkgZWxlbWVudCAtIGh0dHA6Ly9qc3BlcmYuY29tL3RvLXNoaWZ0LW9yLW5vdC10by1zaGlmdFxuICAgICAgICBsZXQgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGxldCBleGlzdGluZ1BhdGhGcmFnbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGtleTtcbiAgICAgICAgbGV0IHZhbGlkYXRlRnVuY3Rpb247XG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGVPcGVyYXRpb24gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUZ1bmN0aW9uID0gdmFsaWRhdGVPcGVyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUZ1bmN0aW9uID0gdmFsaWRhdG9yO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBrZXkgPSBrZXlzW3RdO1xuICAgICAgICAgICAgaWYgKGtleSAmJiBrZXkuaW5kZXhPZihcIn5cIikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSB1bmVzY2FwZVBhdGhDb21wb25lbnQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zICYmXG4gICAgICAgICAgICAgICAgKGtleSA9PSBcIl9fcHJvdG9fX1wiIHx8XG4gICAgICAgICAgICAgICAgICAgIChrZXkgPT0gXCJwcm90b3R5cGVcIiAmJiB0ID4gMCAmJiBrZXlzW3QgLSAxXSA9PSBcImNvbnN0cnVjdG9yXCIpKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJKU09OLVBhdGNoOiBtb2RpZnlpbmcgYF9fcHJvdG9fX2Agb3IgYGNvbnN0cnVjdG9yL3Byb3RvdHlwZWAgcHJvcCBpcyBiYW5uZWQgZm9yIHNlY3VyaXR5IHJlYXNvbnMsIGlmIHRoaXMgd2FzIG9uIHB1cnBvc2UsIHBsZWFzZSBzZXQgYGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnNgIGZsYWcgZmFsc2UgYW5kIHBhc3MgaXQgdG8gdGhpcyBmdW5jdGlvbi4gTW9yZSBpbmZvIGluIGZhc3QtanNvbi1wYXRjaCBSRUFETUVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdQYXRoRnJhZ21lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSBrZXlzLnNsaWNlKDAsIHQpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPT0gbGVuIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSBvcGVyYXRpb24ucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdQYXRoRnJhZ21lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbihvcGVyYXRpb24sIDAsIGRvY3VtZW50LCBleGlzdGluZ1BhdGhGcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0Kys7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCItXCIpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gb2JqLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbiAmJiAhaXNJbnRlZ2VyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkV4cGVjdGVkIGFuIHVuc2lnbmVkIGJhc2UtMTAgaW50ZWdlciB2YWx1ZSwgbWFraW5nIHRoZSBuZXcgcmVmZXJlbmNlZCB2YWx1ZSB0aGUgYXJyYXkgZWxlbWVudCB3aXRoIHRoZSB6ZXJvLWJhc2VkIGluZGV4XCIsIFwiT1BFUkFUSU9OX1BBVEhfSUxMRUdBTF9BUlJBWV9JTkRFWFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0gLy8gb25seSBwYXJzZSBrZXkgd2hlbiBpdCdzIGFuIGludGVnZXIgZm9yIGBhcnIucHJvcGAgdG8gd29ya1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0ludGVnZXIoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gfn5rZXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbiAmJiBvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgJiYga2V5ID4gb2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGhlIHNwZWNpZmllZCBpbmRleCBNVVNUIE5PVCBiZSBncmVhdGVyIHRoYW4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgYXJyYXlcIiwgXCJPUEVSQVRJT05fVkFMVUVfT1VUX09GX0JPVU5EU1wiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBhcnJPcHNbb3BlcmF0aW9uLm9wXS5jYWxsKG9wZXJhdGlvbiwgb2JqLCBrZXksIGRvY3VtZW50KTsgLy8gQXBwbHkgcGF0Y2hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlLnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodCA+PSBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBvYmpPcHNbb3BlcmF0aW9uLm9wXS5jYWxsKG9wZXJhdGlvbiwgb2JqLCBrZXksIGRvY3VtZW50KTsgLy8gQXBwbHkgcGF0Y2hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlLnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbW9yZSBrZXlzIGluIHRoZSBwYXRoLCBidXQgdGhlIG5leHQgdmFsdWUgaXNuJ3QgYSBub24tbnVsbCBvYmplY3QsXG4gICAgICAgICAgICAvLyB0aHJvdyBhbiBPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEUgZXJyb3IgaW5zdGVhZCBvZiBpdGVyYXRpbmcgYWdhaW4uXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgdCA8IGxlbiAmJiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIG9wZXJhdGlvbiBhdCB0aGUgZGVzaXJlZCBwYXRoXCIsIFwiT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgYSBmdWxsIEpTT04gUGF0Y2ggYXJyYXkgb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBwYXRjaC5cbiAqIEl0IG1vZGlmaWVzIHRoZSBgZG9jdW1lbnRgIG9iamVjdCBhbmQgYHBhdGNoYCAtIGl0IGdldHMgdGhlIHZhbHVlcyBieSByZWZlcmVuY2UuXG4gKiBJZiB5b3Ugd291bGQgbGlrZSB0byBhdm9pZCB0b3VjaGluZyB5b3VyIHZhbHVlcywgY2xvbmUgdGhlbTpcbiAqIGBqc29ucGF0Y2guYXBwbHlQYXRjaChkb2N1bWVudCwganNvbnBhdGNoLl9kZWVwQ2xvbmUocGF0Y2gpKWAuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuICogQHBhcmFtIHBhdGNoIFRoZSBwYXRjaCB0byBhcHBseVxuICogQHBhcmFtIHZhbGlkYXRlT3BlcmF0aW9uIGBmYWxzZWAgaXMgd2l0aG91dCB2YWxpZGF0aW9uLCBgdHJ1ZWAgdG8gdXNlIGRlZmF1bHQganNvbnBhdGNoJ3MgdmFsaWRhdGlvbiwgb3IgeW91IGNhbiBwYXNzIGEgYHZhbGlkYXRlT3BlcmF0aW9uYCBjYWxsYmFjayB0byBiZSB1c2VkIGZvciB2YWxpZGF0aW9uLlxuICogQHBhcmFtIG11dGF0ZURvY3VtZW50IFdoZXRoZXIgdG8gbXV0YXRlIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBvciBjbG9uZSBpdCBiZWZvcmUgYXBwbHlpbmdcbiAqIEBwYXJhbSBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zIFdoZXRoZXIgdG8gYmFuIG1vZGlmaWNhdGlvbnMgdG8gYF9fcHJvdG9fX2AsIGRlZmF1bHRzIHRvIGB0cnVlYC5cbiAqIEByZXR1cm4gQW4gYXJyYXkgb2YgYHtuZXdEb2N1bWVudCwgcmVzdWx0fWAgYWZ0ZXIgdGhlIHBhdGNoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVBhdGNoKGRvY3VtZW50LCBwYXRjaCwgdmFsaWRhdGVPcGVyYXRpb24sIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUpIHtcbiAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBhdGNoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW11dGF0ZURvY3VtZW50KSB7XG4gICAgICAgIGRvY3VtZW50ID0gX2RlZXBDbG9uZShkb2N1bWVudCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkocGF0Y2gubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gcGF0Y2gubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG11dGF0ZURvY3VtZW50IGFyZ3VtZW50IGJlY2F1c2UgaWYgaXQgd2FzIHRydWUsIHdlIGFscmVhZHkgZGVlcCBjbG9uZWQgdGhlIG9iamVjdCwgd2UnbGwganVzdCBwYXNzIGB0cnVlYFxuICAgICAgICByZXN1bHRzW2ldID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHBhdGNoW2ldLCB2YWxpZGF0ZU9wZXJhdGlvbiwgdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucywgaSk7XG4gICAgICAgIGRvY3VtZW50ID0gcmVzdWx0c1tpXS5uZXdEb2N1bWVudDsgLy8gaW4gY2FzZSByb290IHdhcyByZXBsYWNlZFxuICAgIH1cbiAgICByZXN1bHRzLm5ld0RvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEFwcGx5IGEgc2luZ2xlIEpTT04gUGF0Y2ggT3BlcmF0aW9uIG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgZG9jdW1lbnQuXG4gKiBTdWl0YWJsZSBhcyBhIHJlZHVjZXIuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuICogQHBhcmFtIG9wZXJhdGlvbiBUaGUgb3BlcmF0aW9uIHRvIGFwcGx5XG4gKiBAcmV0dXJuIFRoZSB1cGRhdGVkIGRvY3VtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVJlZHVjZXIoZG9jdW1lbnQsIG9wZXJhdGlvbiwgaW5kZXgpIHtcbiAgICBjb25zdCBvcGVyYXRpb25SZXN1bHQgPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgb3BlcmF0aW9uKTtcbiAgICBpZiAob3BlcmF0aW9uUmVzdWx0LnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIGZhaWxlZCB0ZXN0XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIHJldHVybiBvcGVyYXRpb25SZXN1bHQubmV3RG9jdW1lbnQ7XG59XG4vKipcbiAqIFZhbGlkYXRlcyBhIHNpbmdsZSBvcGVyYXRpb24uIENhbGxlZCBmcm9tIGBqc29ucGF0Y2gudmFsaWRhdGVgLiBUaHJvd3MgYEpzb25QYXRjaEVycm9yYCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICogQHBhcmFtIHtvYmplY3R9IG9wZXJhdGlvbiAtIG9wZXJhdGlvbiBvYmplY3QgKHBhdGNoKVxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gaW5kZXggb2Ygb3BlcmF0aW9uIGluIHRoZSBzZXF1ZW5jZVxuICogQHBhcmFtIHtvYmplY3R9IFtkb2N1bWVudF0gLSBvYmplY3Qgd2hlcmUgdGhlIG9wZXJhdGlvbiBpcyBzdXBwb3NlZCB0byBiZSBhcHBsaWVkXG4gKiBAcGFyYW0ge3N0cmluZ30gW2V4aXN0aW5nUGF0aEZyYWdtZW50XSAtIGNvbWVzIGFsb25nIHdpdGggYGRvY3VtZW50YFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdG9yKG9wZXJhdGlvbiwgaW5kZXgsIGRvY3VtZW50LCBleGlzdGluZ1BhdGhGcmFnbWVudCkge1xuICAgIGlmICh0eXBlb2Ygb3BlcmF0aW9uICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbiA9PT0gbnVsbCB8fFxuICAgICAgICBBcnJheS5pc0FycmF5KG9wZXJhdGlvbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGlzIG5vdCBhbiBvYmplY3RcIiwgXCJPUEVSQVRJT05fTk9UX0FOX09CSkVDVFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFvYmpPcHNbb3BlcmF0aW9uLm9wXSkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYG9wYCBwcm9wZXJ0eSBpcyBub3Qgb25lIG9mIG9wZXJhdGlvbnMgZGVmaW5lZCBpbiBSRkMtNjkwMlwiLCBcIk9QRVJBVElPTl9PUF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG9wZXJhdGlvbi5wYXRoICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgcGF0aGAgcHJvcGVydHkgaXMgbm90IGEgc3RyaW5nXCIsIFwiT1BFUkFUSU9OX1BBVEhfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5wYXRoLmluZGV4T2YoXCIvXCIpICE9PSAwICYmIG9wZXJhdGlvbi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gcGF0aHMgdGhhdCBhcmVuJ3QgZW1wdHkgc3RyaW5nIHNob3VsZCBzdGFydCB3aXRoIFwiL1wiXG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcignT3BlcmF0aW9uIGBwYXRoYCBwcm9wZXJ0eSBtdXN0IHN0YXJ0IHdpdGggXCIvXCInLCBcIk9QRVJBVElPTl9QQVRIX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwiY29weVwiKSAmJlxuICAgICAgICB0eXBlb2Ygb3BlcmF0aW9uLmZyb20gIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBmcm9tYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgbW92ZWAgYW5kIGBjb3B5YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9GUk9NX1JFUVVJUkVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpICYmXG4gICAgICAgIG9wZXJhdGlvbi52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgdmFsdWVgIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IChhcHBsaWNhYmxlIGluIGBhZGRgLCBgcmVwbGFjZWAgYW5kIGB0ZXN0YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9WQUxVRV9SRVFVSVJFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSAmJlxuICAgICAgICBoYXNVbmRlZmluZWQob3BlcmF0aW9uLnZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHZhbHVlYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgYWRkYCwgYHJlcGxhY2VgIGFuZCBgdGVzdGAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fVkFMVUVfQ0FOTk9UX0NPTlRBSU5fVU5ERUZJTkVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCA9PSBcImFkZFwiKSB7XG4gICAgICAgICAgICB2YXIgcGF0aExlbiA9IG9wZXJhdGlvbi5wYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdQYXRoTGVuID0gZXhpc3RpbmdQYXRoRnJhZ21lbnQuc3BsaXQoXCIvXCIpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChwYXRoTGVuICE9PSBleGlzdGluZ1BhdGhMZW4gKyAxICYmIHBhdGhMZW4gIT09IGV4aXN0aW5nUGF0aExlbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIGFuIGBhZGRgIG9wZXJhdGlvbiBhdCB0aGUgZGVzaXJlZCBwYXRoXCIsIFwiT1BFUkFUSU9OX1BBVEhfQ0FOTk9UX0FERFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlbW92ZVwiIHx8XG4gICAgICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwiX2dldFwiKSB7XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uLnBhdGggIT09IGV4aXN0aW5nUGF0aEZyYWdtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBhdCBhIHBhdGggdGhhdCBkb2VzIG5vdCBleGlzdFwiLCBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwiY29weVwiKSB7XG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IHtcbiAgICAgICAgICAgICAgICBvcDogXCJfZ2V0XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogb3BlcmF0aW9uLmZyb20sXG4gICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0ZShbZXhpc3RpbmdWYWx1ZV0sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5uYW1lID09PSBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBmcm9tIGEgcGF0aCB0aGF0IGRvZXMgbm90IGV4aXN0XCIsIFwiT1BFUkFUSU9OX0ZST01fVU5SRVNPTFZBQkxFXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIGEgc2VxdWVuY2Ugb2Ygb3BlcmF0aW9ucy4gSWYgYGRvY3VtZW50YCBwYXJhbWV0ZXIgaXMgcHJvdmlkZWQsIHRoZSBzZXF1ZW5jZSBpcyBhZGRpdGlvbmFsbHkgdmFsaWRhdGVkIGFnYWluc3QgdGhlIG9iamVjdCBkb2N1bWVudC5cbiAqIElmIGVycm9yIGlzIGVuY291bnRlcmVkLCByZXR1cm5zIGEgSnNvblBhdGNoRXJyb3Igb2JqZWN0XG4gKiBAcGFyYW0gc2VxdWVuY2VcbiAqIEBwYXJhbSBkb2N1bWVudFxuICogQHJldHVybnMge0pzb25QYXRjaEVycm9yfHVuZGVmaW5lZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKHNlcXVlbmNlLCBkb2N1bWVudCwgZXh0ZXJuYWxWYWxpZGF0b3IpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2VxdWVuY2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJQYXRjaCBzZXF1ZW5jZSBtdXN0IGJlIGFuIGFycmF5XCIsIFwiU0VRVUVOQ0VfTk9UX0FOX0FSUkFZXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgICAgICAgLy9jbG9uZSBkb2N1bWVudCBhbmQgc2VxdWVuY2Ugc28gdGhhdCB3ZSBjYW4gc2FmZWx5IHRyeSBhcHBseWluZyBvcGVyYXRpb25zXG4gICAgICAgICAgICBhcHBseVBhdGNoKF9kZWVwQ2xvbmUoZG9jdW1lbnQpLCBfZGVlcENsb25lKHNlcXVlbmNlKSwgZXh0ZXJuYWxWYWxpZGF0b3IgfHwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRlcm5hbFZhbGlkYXRvciA9IGV4dGVybmFsVmFsaWRhdG9yIHx8IHZhbGlkYXRvcjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VxdWVuY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBleHRlcm5hbFZhbGlkYXRvcihzZXF1ZW5jZVtpXSwgaSwgZG9jdW1lbnQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBKc29uUGF0Y2hFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2Vwb2JlcmV6a2luL2Zhc3QtZGVlcC1lcXVhbFxuLy8gTUlUIExpY2Vuc2Vcbi8vIENvcHlyaWdodCAoYykgMjAxNyBFdmdlbnkgUG9iZXJlemtpblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4vLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuLy8gU09GVFdBUkUuXG5leHBvcnQgZnVuY3Rpb24gX2FyZUVxdWFscyhhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChhICYmIGIgJiYgdHlwZW9mIGEgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgYiA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciBhcnJBID0gQXJyYXkuaXNBcnJheShhKSwgYXJyQiA9IEFycmF5LmlzQXJyYXkoYiksIGksIGxlbmd0aCwga2V5O1xuICAgICAgICBpZiAoYXJyQSAmJiBhcnJCKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICAgICAgICAgIGlmICghX2FyZUVxdWFscyhhW2ldLCBiW2ldKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFyckEgIT0gYXJyQilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICAgICAgaWYgKCFiLmhhc093blByb3BlcnR5KGtleXNbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSB7XG4gICAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFfYXJlRXF1YWxzKGFba2V5XSwgYltrZXldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG59XG4iXSwibmFtZXMiOlsiUGF0Y2hFcnJvciIsIl9kZWVwQ2xvbmUiLCJpc0ludGVnZXIiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJoYXNVbmRlZmluZWQiLCJKc29uUGF0Y2hFcnJvciIsImRlZXBDbG9uZSIsIm9iak9wcyIsImFkZCIsIm9iaiIsImtleSIsImRvY3VtZW50IiwidmFsdWUiLCJuZXdEb2N1bWVudCIsInJlbW92ZSIsInJlbW92ZWQiLCJyZXBsYWNlIiwibW92ZSIsImdldFZhbHVlQnlQb2ludGVyIiwicGF0aCIsIm9yaWdpbmFsVmFsdWUiLCJhcHBseU9wZXJhdGlvbiIsIm9wIiwiZnJvbSIsImNvcHkiLCJ2YWx1ZVRvQ29weSIsInRlc3QiLCJfYXJlRXF1YWxzIiwiX2dldCIsImFyck9wcyIsImFyciIsImkiLCJzcGxpY2UiLCJpbmRleCIsInJlbW92ZWRMaXN0IiwicG9pbnRlciIsImdldE9yaWdpbmFsRGVzdGluYXRpb24iLCJvcGVyYXRpb24iLCJ2YWxpZGF0ZU9wZXJhdGlvbiIsIm11dGF0ZURvY3VtZW50IiwiYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyIsInZhbGlkYXRvciIsInJldHVyblZhbHVlIiwia2V5cyIsInNwbGl0IiwidCIsImxlbiIsImxlbmd0aCIsImV4aXN0aW5nUGF0aEZyYWdtZW50IiwidW5kZWZpbmVkIiwidmFsaWRhdGVGdW5jdGlvbiIsImluZGV4T2YiLCJUeXBlRXJyb3IiLCJzbGljZSIsImpvaW4iLCJBcnJheSIsImlzQXJyYXkiLCJjYWxsIiwiYXBwbHlQYXRjaCIsInBhdGNoIiwicmVzdWx0cyIsImFwcGx5UmVkdWNlciIsIm9wZXJhdGlvblJlc3VsdCIsInBhdGhMZW4iLCJleGlzdGluZ1BhdGhMZW4iLCJleGlzdGluZ1ZhbHVlIiwiZXJyb3IiLCJ2YWxpZGF0ZSIsIm5hbWUiLCJzZXF1ZW5jZSIsImV4dGVybmFsVmFsaWRhdG9yIiwiZSIsImEiLCJiIiwiYXJyQSIsImFyckIiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsY0FBYztBQUNkLHVDQUF1QztBQUN2Qzs7OztDQUlDLEdBQzRGO0FBQ3REO0FBQ3ZDLElBQUlLLGFBQWEsSUFBSUM7QUFDckIsTUFBTUM7SUFDRkMsWUFBWUMsR0FBRyxDQUFFO1FBQ2JDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJQztRQUNmO1FBQ0FOLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTixHQUFHLEdBQUdBO0lBQ2Y7QUFDSjtBQUNBLE1BQU1RO0lBQ0ZULFlBQVlVLFFBQVEsRUFBRUMsUUFBUSxDQUFFO1FBQzVCVCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0csUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLFFBQVEsR0FBR0E7SUFDcEI7QUFDSjtBQUNBLFNBQVNDLFVBQVVYLEdBQUc7SUFDbEIsT0FBT0osV0FBV2dCLEdBQUcsQ0FBQ1o7QUFDMUI7QUFDQSxTQUFTYSxzQkFBc0JDLE1BQU0sRUFBRUwsUUFBUTtJQUMzQyxPQUFPSyxPQUFPQyxTQUFTLENBQUNILEdBQUcsQ0FBQ0g7QUFDaEM7QUFDQSxTQUFTTyx5QkFBeUJGLE1BQU0sRUFBRUosUUFBUTtJQUM5Q0ksT0FBT0MsU0FBUyxDQUFDRSxNQUFNLENBQUNQLFNBQVNELFFBQVE7QUFDN0M7QUFDQTs7Q0FFQyxHQUNNLFNBQVNTLFVBQVVDLElBQUksRUFBRVQsUUFBUTtJQUNwQ0EsU0FBU1EsU0FBUztBQUN0QjtBQUNBOztDQUVDLEdBQ00sU0FBU0UsUUFBUXBCLEdBQUcsRUFBRVMsUUFBUTtJQUNqQyxJQUFJWSxVQUFVLEVBQUU7SUFDaEIsSUFBSVg7SUFDSixJQUFJSSxTQUFTSCxVQUFVWDtJQUN2QixJQUFJLENBQUNjLFFBQVE7UUFDVEEsU0FBUyxJQUFJaEIsT0FBT0U7UUFDcEJKLFdBQVcwQixHQUFHLENBQUN0QixLQUFLYztJQUN4QixPQUNLO1FBQ0QsTUFBTVMsZUFBZVYsc0JBQXNCQyxRQUFRTDtRQUNuREMsV0FBV2EsZ0JBQWdCQSxhQUFhYixRQUFRO0lBQ3BEO0lBQ0EsSUFBSUEsVUFBVTtRQUNWLE9BQU9BO0lBQ1g7SUFDQUEsV0FBVyxDQUFDO0lBQ1pJLE9BQU9SLEtBQUssR0FBR2YsdURBQVVBLENBQUNTO0lBQzFCLElBQUlTLFVBQVU7UUFDVkMsU0FBU0QsUUFBUSxHQUFHQTtRQUNwQkMsU0FBU2MsSUFBSSxHQUFHO1FBQ2hCLElBQUlDLGFBQWE7WUFDYkMsU0FBU2hCO1FBQ2I7UUFDQSxJQUFJaUIsWUFBWTtZQUNaQyxhQUFhbEIsU0FBU2MsSUFBSTtZQUMxQmQsU0FBU2MsSUFBSSxHQUFHSyxXQUFXSjtRQUMvQjtRQUNBLElBQUksS0FBNkIsRUFBRSxFQU9sQztJQUNMO0lBQ0FmLFNBQVNXLE9BQU8sR0FBR0E7SUFDbkJYLFNBQVNzQixNQUFNLEdBQUdoQztJQUNsQlUsU0FBU1EsU0FBUyxHQUFHO1FBQ2pCUSxTQUFTaEI7UUFDVGtCLGFBQWFsQixTQUFTYyxJQUFJO1FBQzFCUix5QkFBeUJGLFFBQVFKO1FBQ2pDLElBQUksS0FBNkIsRUFBRSxFQU1sQztJQUNMO0lBQ0FJLE9BQU9DLFNBQVMsQ0FBQ08sR0FBRyxDQUFDYixVQUFVLElBQUlELGFBQWFDLFVBQVVDO0lBQzFELE9BQU9BO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLFNBQVNnQixTQUFTaEIsUUFBUSxFQUFFd0IsYUFBYSxLQUFLO0lBQ2pELElBQUlwQixTQUFTbEIsV0FBV2dCLEdBQUcsQ0FBQ0YsU0FBU3NCLE1BQU07SUFDM0NHLFVBQVVyQixPQUFPUixLQUFLLEVBQUVJLFNBQVNzQixNQUFNLEVBQUV0QixTQUFTVyxPQUFPLEVBQUUsSUFBSWE7SUFDL0QsSUFBSXhCLFNBQVNXLE9BQU8sQ0FBQ2UsTUFBTSxFQUFFO1FBQ3pCekMsb0RBQVVBLENBQUNtQixPQUFPUixLQUFLLEVBQUVJLFNBQVNXLE9BQU87SUFDN0M7SUFDQSxJQUFJZ0IsT0FBTzNCLFNBQVNXLE9BQU87SUFDM0IsSUFBSWdCLEtBQUtELE1BQU0sR0FBRyxHQUFHO1FBQ2pCMUIsU0FBU1csT0FBTyxHQUFHLEVBQUU7UUFDckIsSUFBSVgsU0FBU0QsUUFBUSxFQUFFO1lBQ25CQyxTQUFTRCxRQUFRLENBQUM0QjtRQUN0QjtJQUNKO0lBQ0EsT0FBT0E7QUFDWDtBQUNBLGtGQUFrRjtBQUNsRixTQUFTRixVQUFVckIsTUFBTSxFQUFFZCxHQUFHLEVBQUVxQixPQUFPLEVBQUVpQixJQUFJLEVBQUVKLFVBQVU7SUFDckQsSUFBSWxDLFFBQVFjLFFBQVE7UUFDaEI7SUFDSjtJQUNBLElBQUksT0FBT2QsSUFBSXVDLE1BQU0sS0FBSyxZQUFZO1FBQ2xDdkMsTUFBTUEsSUFBSXVDLE1BQU07SUFDcEI7SUFDQSxJQUFJQyxVQUFVaEQsd0RBQVdBLENBQUNRO0lBQzFCLElBQUl5QyxVQUFVakQsd0RBQVdBLENBQUNzQjtJQUMxQixJQUFJNEIsVUFBVTtJQUNkLElBQUlDLFVBQVU7SUFDZCw4SEFBOEg7SUFDOUgsSUFBSyxJQUFJQyxJQUFJSCxRQUFRTCxNQUFNLEdBQUcsR0FBR1EsS0FBSyxHQUFHQSxJQUFLO1FBQzFDLElBQUlDLE1BQU1KLE9BQU8sQ0FBQ0csRUFBRTtRQUNwQixJQUFJRSxTQUFTaEMsTUFBTSxDQUFDK0IsSUFBSTtRQUN4QixJQUFJbkQsMkRBQWNBLENBQUNNLEtBQUs2QyxRQUNwQixDQUFFN0MsQ0FBQUEsR0FBRyxDQUFDNkMsSUFBSSxLQUFLRSxhQUNYRCxXQUFXQyxhQUNYQyxNQUFNQyxPQUFPLENBQUNqRCxTQUFTLEtBQUksR0FBSTtZQUNuQyxJQUFJa0QsU0FBU2xELEdBQUcsQ0FBQzZDLElBQUk7WUFDckIsSUFBSSxPQUFPQyxVQUFVLFlBQ2pCQSxVQUFVLFFBQ1YsT0FBT0ksVUFBVSxZQUNqQkEsVUFBVSxRQUNWRixNQUFNQyxPQUFPLENBQUNILFlBQVlFLE1BQU1DLE9BQU8sQ0FBQ0MsU0FBUztnQkFDakRmLFVBQVVXLFFBQVFJLFFBQVE3QixTQUFTaUIsT0FBTyxNQUFNN0MsZ0VBQW1CQSxDQUFDb0QsTUFBTVg7WUFDOUUsT0FDSztnQkFDRCxJQUFJWSxXQUFXSSxRQUFRO29CQUNuQlIsVUFBVTtvQkFDVixJQUFJUixZQUFZO3dCQUNaYixRQUFROEIsSUFBSSxDQUFDOzRCQUNUQyxJQUFJOzRCQUNKZCxNQUFNQSxPQUFPLE1BQU03QyxnRUFBbUJBLENBQUNvRDs0QkFDdkN2QyxPQUFPZix1REFBVUEsQ0FBQ3VEO3dCQUN0QjtvQkFDSjtvQkFDQXpCLFFBQVE4QixJQUFJLENBQUM7d0JBQ1RDLElBQUk7d0JBQ0pkLE1BQU1BLE9BQU8sTUFBTTdDLGdFQUFtQkEsQ0FBQ29EO3dCQUN2Q3ZDLE9BQU9mLHVEQUFVQSxDQUFDMkQ7b0JBQ3RCO2dCQUNKO1lBQ0o7UUFDSixPQUNLLElBQUlGLE1BQU1DLE9BQU8sQ0FBQ25DLFlBQVlrQyxNQUFNQyxPQUFPLENBQUNqRCxNQUFNO1lBQ25ELElBQUlrQyxZQUFZO2dCQUNaYixRQUFROEIsSUFBSSxDQUFDO29CQUNUQyxJQUFJO29CQUNKZCxNQUFNQSxPQUFPLE1BQU03QyxnRUFBbUJBLENBQUNvRDtvQkFDdkN2QyxPQUFPZix1REFBVUEsQ0FBQ3VEO2dCQUN0QjtZQUNKO1lBQ0F6QixRQUFROEIsSUFBSSxDQUFDO2dCQUNUQyxJQUFJO2dCQUNKZCxNQUFNQSxPQUFPLE1BQU03QyxnRUFBbUJBLENBQUNvRDtZQUMzQztZQUNBRixVQUFVLE1BQU0sNEJBQTRCO1FBQ2hELE9BQ0s7WUFDRCxJQUFJVCxZQUFZO2dCQUNaYixRQUFROEIsSUFBSSxDQUFDO29CQUFFQyxJQUFJO29CQUFRZDtvQkFBTWhDLE9BQU9RO2dCQUFPO1lBQ25EO1lBQ0FPLFFBQVE4QixJQUFJLENBQUM7Z0JBQUVDLElBQUk7Z0JBQVdkO2dCQUFNaEMsT0FBT047WUFBSTtZQUMvQzBDLFVBQVU7UUFDZDtJQUNKO0lBQ0EsSUFBSSxDQUFDQyxXQUFXSCxRQUFRSixNQUFNLElBQUlLLFFBQVFMLE1BQU0sRUFBRTtRQUM5QztJQUNKO0lBQ0EsSUFBSyxJQUFJUSxJQUFJLEdBQUdBLElBQUlKLFFBQVFKLE1BQU0sRUFBRVEsSUFBSztRQUNyQyxJQUFJQyxNQUFNTCxPQUFPLENBQUNJLEVBQUU7UUFDcEIsSUFBSSxDQUFDbEQsMkRBQWNBLENBQUNvQixRQUFRK0IsUUFBUTdDLEdBQUcsQ0FBQzZDLElBQUksS0FBS0UsV0FBVztZQUN4RDFCLFFBQVE4QixJQUFJLENBQUM7Z0JBQ1RDLElBQUk7Z0JBQ0pkLE1BQU1BLE9BQU8sTUFBTTdDLGdFQUFtQkEsQ0FBQ29EO2dCQUN2Q3ZDLE9BQU9mLHVEQUFVQSxDQUFDUyxHQUFHLENBQUM2QyxJQUFJO1lBQzlCO1FBQ0o7SUFDSjtBQUNKO0FBQ0E7O0NBRUMsR0FDTSxTQUFTUSxRQUFRQyxLQUFLLEVBQUVDLEtBQUssRUFBRXJCLGFBQWEsS0FBSztJQUNwRCxJQUFJYixVQUFVLEVBQUU7SUFDaEJjLFVBQVVtQixPQUFPQyxPQUFPbEMsU0FBUyxJQUFJYTtJQUNyQyxPQUFPYjtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanM/Y2U2YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCBiZWNhdXNlIG9mIEVTTSBpbXBvcnQgaXNzdWVzXG4vKiFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9TdGFyY291bnRlci1KYWNrL0pTT04tUGF0Y2hcbiAqIChjKSAyMDEzLTIwMjEgSm9hY2hpbSBXZXN0ZXJcbiAqIE1JVCBsaWNlbnNlXG4gKi9cbmltcG9ydCB7IF9kZWVwQ2xvbmUsIF9vYmplY3RLZXlzLCBlc2NhcGVQYXRoQ29tcG9uZW50LCBoYXNPd25Qcm9wZXJ0eSwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBhcHBseVBhdGNoIH0gZnJvbSBcIi4vY29yZS5qc1wiO1xudmFyIGJlZm9yZURpY3QgPSBuZXcgV2Vha01hcCgpO1xuY2xhc3MgTWlycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihvYmopIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JqXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ic2VydmVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICB9XG59XG5jbGFzcyBPYnNlcnZlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrLCBvYnNlcnZlcikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsYmFja1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYnNlcnZlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRNaXJyb3Iob2JqKSB7XG4gICAgcmV0dXJuIGJlZm9yZURpY3QuZ2V0KG9iaik7XG59XG5mdW5jdGlvbiBnZXRPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBtaXJyb3Iub2JzZXJ2ZXJzLmdldChjYWxsYmFjayk7XG59XG5mdW5jdGlvbiByZW1vdmVPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBvYnNlcnZlcikge1xuICAgIG1pcnJvci5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyLmNhbGxiYWNrKTtcbn1cbi8qKlxuICogRGV0YWNoIGFuIG9ic2VydmVyIGZyb20gYW4gb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bm9ic2VydmUocm9vdCwgb2JzZXJ2ZXIpIHtcbiAgICBvYnNlcnZlci51bm9ic2VydmUoKTtcbn1cbi8qKlxuICogT2JzZXJ2ZXMgY2hhbmdlcyBtYWRlIHRvIGFuIG9iamVjdCwgd2hpY2ggY2FuIHRoZW4gYmUgcmV0cmlldmVkIHVzaW5nIGdlbmVyYXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvYnNlcnZlKG9iaiwgY2FsbGJhY2spIHtcbiAgICB2YXIgcGF0Y2hlcyA9IFtdO1xuICAgIHZhciBvYnNlcnZlcjtcbiAgICB2YXIgbWlycm9yID0gZ2V0TWlycm9yKG9iaik7XG4gICAgaWYgKCFtaXJyb3IpIHtcbiAgICAgICAgbWlycm9yID0gbmV3IE1pcnJvcihvYmopO1xuICAgICAgICBiZWZvcmVEaWN0LnNldChvYmosIG1pcnJvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBvYnNlcnZlckluZm8gPSBnZXRPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBjYWxsYmFjayk7XG4gICAgICAgIG9ic2VydmVyID0gb2JzZXJ2ZXJJbmZvICYmIG9ic2VydmVySW5mby5vYnNlcnZlcjtcbiAgICB9XG4gICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZlcjtcbiAgICB9XG4gICAgb2JzZXJ2ZXIgPSB7fTtcbiAgICBtaXJyb3IudmFsdWUgPSBfZGVlcENsb25lKG9iaik7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIG9ic2VydmVyLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIG9ic2VydmVyLm5leHQgPSBudWxsO1xuICAgICAgICB2YXIgZGlydHlDaGVjayA9ICgpID0+IHtcbiAgICAgICAgICAgIGdlbmVyYXRlKG9ic2VydmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZhc3RDaGVjayA9ICgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChvYnNlcnZlci5uZXh0KTtcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBzZXRUaW1lb3V0KGRpcnR5Q2hlY2spO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgLy9ub3QgTm9kZVxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmYXN0Q2hlY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9ic2VydmVyLnBhdGNoZXMgPSBwYXRjaGVzO1xuICAgIG9ic2VydmVyLm9iamVjdCA9IG9iajtcbiAgICBvYnNlcnZlci51bm9ic2VydmUgPSAoKSA9PiB7XG4gICAgICAgIGdlbmVyYXRlKG9ic2VydmVyKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KG9ic2VydmVyLm5leHQpO1xuICAgICAgICByZW1vdmVPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBvYnNlcnZlcik7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZhc3RDaGVjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIG1pcnJvci5vYnNlcnZlcnMuc2V0KGNhbGxiYWNrLCBuZXcgT2JzZXJ2ZXJJbmZvKGNhbGxiYWNrLCBvYnNlcnZlcikpO1xuICAgIHJldHVybiBvYnNlcnZlcjtcbn1cbi8qKlxuICogR2VuZXJhdGUgYW4gYXJyYXkgb2YgcGF0Y2hlcyBmcm9tIGFuIG9ic2VydmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZShvYnNlcnZlciwgaW52ZXJ0aWJsZSA9IGZhbHNlKSB7XG4gICAgdmFyIG1pcnJvciA9IGJlZm9yZURpY3QuZ2V0KG9ic2VydmVyLm9iamVjdCk7XG4gICAgX2dlbmVyYXRlKG1pcnJvci52YWx1ZSwgb2JzZXJ2ZXIub2JqZWN0LCBvYnNlcnZlci5wYXRjaGVzLCBcIlwiLCBpbnZlcnRpYmxlKTtcbiAgICBpZiAob2JzZXJ2ZXIucGF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgYXBwbHlQYXRjaChtaXJyb3IudmFsdWUsIG9ic2VydmVyLnBhdGNoZXMpO1xuICAgIH1cbiAgICB2YXIgdGVtcCA9IG9ic2VydmVyLnBhdGNoZXM7XG4gICAgaWYgKHRlbXAubGVuZ3RoID4gMCkge1xuICAgICAgICBvYnNlcnZlci5wYXRjaGVzID0gW107XG4gICAgICAgIGlmIChvYnNlcnZlci5jYWxsYmFjaykge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY2FsbGJhY2sodGVtcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRlbXA7XG59XG4vLyBEaXJ0eSBjaGVjayBpZiBvYmogaXMgZGlmZmVyZW50IGZyb20gbWlycm9yLCBnZW5lcmF0ZSBwYXRjaGVzIGFuZCB1cGRhdGUgbWlycm9yXG5mdW5jdGlvbiBfZ2VuZXJhdGUobWlycm9yLCBvYmosIHBhdGNoZXMsIHBhdGgsIGludmVydGlibGUpIHtcbiAgICBpZiAob2JqID09PSBtaXJyb3IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iai50b0pTT04gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBvYmogPSBvYmoudG9KU09OKCk7XG4gICAgfVxuICAgIHZhciBuZXdLZXlzID0gX29iamVjdEtleXMob2JqKTtcbiAgICB2YXIgb2xkS2V5cyA9IF9vYmplY3RLZXlzKG1pcnJvcik7XG4gICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICB2YXIgZGVsZXRlZCA9IGZhbHNlO1xuICAgIC8vaWYgZXZlciBcIm1vdmVcIiBvcGVyYXRpb24gaXMgaW1wbGVtZW50ZWQgaGVyZSwgbWFrZSBzdXJlIHRoaXMgdGVzdCBydW5zIE9LOiBcInNob3VsZCBub3QgZ2VuZXJhdGUgdGhlIHNhbWUgcGF0Y2ggdHdpY2UgKG1vdmUpXCJcbiAgICBmb3IgKHZhciB0ID0gb2xkS2V5cy5sZW5ndGggLSAxOyB0ID49IDA7IHQtLSkge1xuICAgICAgICB2YXIga2V5ID0gb2xkS2V5c1t0XTtcbiAgICAgICAgdmFyIG9sZFZhbCA9IG1pcnJvcltrZXldO1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCBrZXkpICYmXG4gICAgICAgICAgICAhKG9ialtrZXldID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBvbGRWYWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkob2JqKSA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICB2YXIgbmV3VmFsID0gb2JqW2tleV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9sZFZhbCA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgb2xkVmFsICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgbmV3VmFsID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBuZXdWYWwgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkob2xkVmFsKSA9PT0gQXJyYXkuaXNBcnJheShuZXdWYWwpKSB7XG4gICAgICAgICAgICAgICAgX2dlbmVyYXRlKG9sZFZhbCwgbmV3VmFsLCBwYXRjaGVzLCBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksIGludmVydGlibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbCAhPT0gbmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW52ZXJ0aWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9sZFZhbCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUobmV3VmFsKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWlycm9yKSA9PT0gQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICBpZiAoaW52ZXJ0aWJsZSkge1xuICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcInRlc3RcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvbGRWYWwpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbGV0ZWQgPSB0cnVlOyAvLyBwcm9wZXJ0eSBoYXMgYmVlbiBkZWxldGVkXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaW52ZXJ0aWJsZSkge1xuICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7IG9wOiBcInRlc3RcIiwgcGF0aCwgdmFsdWU6IG1pcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7IG9wOiBcInJlcGxhY2VcIiwgcGF0aCwgdmFsdWU6IG9iaiB9KTtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghZGVsZXRlZCAmJiBuZXdLZXlzLmxlbmd0aCA9PSBvbGRLZXlzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAodmFyIHQgPSAwOyB0IDwgbmV3S2V5cy5sZW5ndGg7IHQrKykge1xuICAgICAgICB2YXIga2V5ID0gbmV3S2V5c1t0XTtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShtaXJyb3IsIGtleSkgJiYgb2JqW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2JqW2tleV0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZSBhbiBhcnJheSBvZiBwYXRjaGVzIGZyb20gdGhlIGRpZmZlcmVuY2VzIGluIHR3byBvYmplY3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlKHRyZWUxLCB0cmVlMiwgaW52ZXJ0aWJsZSA9IGZhbHNlKSB7XG4gICAgdmFyIHBhdGNoZXMgPSBbXTtcbiAgICBfZ2VuZXJhdGUodHJlZTEsIHRyZWUyLCBwYXRjaGVzLCBcIlwiLCBpbnZlcnRpYmxlKTtcbiAgICByZXR1cm4gcGF0Y2hlcztcbn1cbiJdLCJuYW1lcyI6WyJfZGVlcENsb25lIiwiX29iamVjdEtleXMiLCJlc2NhcGVQYXRoQ29tcG9uZW50IiwiaGFzT3duUHJvcGVydHkiLCJhcHBseVBhdGNoIiwiYmVmb3JlRGljdCIsIldlYWtNYXAiLCJNaXJyb3IiLCJjb25zdHJ1Y3RvciIsIm9iaiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJNYXAiLCJPYnNlcnZlckluZm8iLCJjYWxsYmFjayIsIm9ic2VydmVyIiwiZ2V0TWlycm9yIiwiZ2V0IiwiZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yIiwibWlycm9yIiwib2JzZXJ2ZXJzIiwicmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yIiwiZGVsZXRlIiwidW5vYnNlcnZlIiwicm9vdCIsIm9ic2VydmUiLCJwYXRjaGVzIiwic2V0Iiwib2JzZXJ2ZXJJbmZvIiwibmV4dCIsImRpcnR5Q2hlY2siLCJnZW5lcmF0ZSIsImZhc3RDaGVjayIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib2JqZWN0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImludmVydGlibGUiLCJfZ2VuZXJhdGUiLCJsZW5ndGgiLCJ0ZW1wIiwicGF0aCIsInRvSlNPTiIsIm5ld0tleXMiLCJvbGRLZXlzIiwiY2hhbmdlZCIsImRlbGV0ZWQiLCJ0Iiwia2V5Iiwib2xkVmFsIiwidW5kZWZpbmVkIiwiQXJyYXkiLCJpc0FycmF5IiwibmV3VmFsIiwicHVzaCIsIm9wIiwiY29tcGFyZSIsInRyZWUxIiwidHJlZTIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsdUNBQXVDO0FBQ3ZDOzs7O0NBSUMsR0FDRCxNQUFNQSxrQkFBa0JDLE9BQU9DLFNBQVMsQ0FBQ0MsY0FBYztBQUNoRCxTQUFTQSxlQUFlQyxHQUFHLEVBQUVDLEdBQUc7SUFDbkMsT0FBT0wsZ0JBQWdCTSxJQUFJLENBQUNGLEtBQUtDO0FBQ3JDO0FBQ08sU0FBU0UsWUFBWUgsR0FBRztJQUMzQixJQUFJSSxNQUFNQyxPQUFPLENBQUNMLE1BQU07UUFDcEIsTUFBTU0sT0FBTyxJQUFJRixNQUFNSixJQUFJTyxNQUFNO1FBQ2pDLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixLQUFLQyxNQUFNLEVBQUVDLElBQUs7WUFDbENGLElBQUksQ0FBQ0UsRUFBRSxHQUFHLEtBQUtBO1FBQ25CO1FBQ0EsT0FBT0Y7SUFDWDtJQUNBLElBQUlULE9BQU9TLElBQUksRUFBRTtRQUNiLE9BQU9ULE9BQU9TLElBQUksQ0FBQ047SUFDdkI7SUFDQSxJQUFJTSxPQUFPLEVBQUU7SUFDYixJQUFLLElBQUlHLEtBQUtULElBQUs7UUFDZixJQUFJRCxlQUFlQyxLQUFLUyxJQUFJO1lBQ3hCSCxLQUFLSSxJQUFJLENBQUNEO1FBQ2Q7SUFDSjtJQUNBLE9BQU9IO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNLLFdBQVdYLEdBQUc7SUFDMUIsT0FBUSxPQUFPQTtRQUNYLEtBQUs7WUFDRCxPQUFPWSxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ2QsT0FBTyxxRUFBcUU7UUFDakgsS0FBSztZQUNELE9BQU8sTUFBTSxvREFBb0Q7UUFDckU7WUFDSSxPQUFPQSxLQUFLLDZCQUE2QjtJQUNqRDtBQUNKO0FBQ0EseUNBQXlDO0FBQ2xDLFNBQVNlLFVBQVVDLEdB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QWEzQixJQUFJLENBQUMsQ0FBQyxFQUFFVCxJQUFJLEVBQUUsRUFBRXFDLE1BQU0sQ0FBQztRQUN4QztJQUNKO0lBQ0EsT0FBT0QsYUFBYUUsSUFBSSxDQUFDO0FBQzdCO0FBQ08sTUFBTUMsbUJBQW1CWDtJQUM1QlksWUFBWU4sT0FBTyxFQUFFTyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsU0FBUyxFQUFFQyxJQUFJLENBQUU7UUFDL0MsS0FBSyxDQUFDWCwyQkFBMkJDLFNBQVM7WUFBRU87WUFBTUM7WUFBT0M7WUFBV0M7UUFBSztRQUN6RWhELE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9JO1FBQ1g7UUFDQTdDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9LO1FBQ1g7UUFDQTlDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9NO1FBQ1g7UUFDQS9DLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9PO1FBQ1g7UUFDQWhELE9BQU9xRCxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVdwRCxTQUFTLEdBQUcsb0VBQW9FO1FBQ3ZILElBQUksQ0FBQ3FDLE9BQU8sR0FBR0QsMkJBQTJCQyxTQUFTO1lBQy9DTztZQUNBQztZQUNBQztZQUNBQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvaGVscGVycy5qcz8yOTk5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBJbmxpbmVkIGJlY2F1c2Ugb2YgRVNNIGltcG9ydCBpc3N1ZXNcbi8qIVxuICogaHR0cHM6Ly9naXRodWIuY29tL1N0YXJjb3VudGVyLUphY2svSlNPTi1QYXRjaFxuICogKGMpIDIwMTctMjAyMiBKb2FjaGltIFdlc3RlclxuICogTUlUIGxpY2Vuc2VkXG4gKi9cbmNvbnN0IF9oYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5leHBvcnQgZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gX2hhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9vYmplY3RLZXlzKG9iaikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IG5ldyBBcnJheShvYmoubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBrZXlzW2tdID0gXCJcIiArIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKTtcbiAgICB9XG4gICAgbGV0IGtleXMgPSBbXTtcbiAgICBmb3IgKGxldCBpIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCBpKSkge1xuICAgICAgICAgICAga2V5cy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xufVxuLyoqXG4gKiBEZWVwbHkgY2xvbmUgdGhlIG9iamVjdC5cbiAqIGh0dHBzOi8vanNwZXJmLmNvbS9kZWVwLWNvcHktdnMtanNvbi1zdHJpbmdpZnktanNvbi1wYXJzZS8yNSAocmVjdXJzaXZlRGVlcENvcHkpXG4gKiBAcGFyYW0gIHthbnl9IG9iaiB2YWx1ZSB0byBjbG9uZVxuICogQHJldHVybiB7YW55fSBjbG9uZWQgb2JqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZGVlcENsb25lKG9iaikge1xuICAgIHN3aXRjaCAodHlwZW9mIG9iaikge1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTsgLy9GYXN0ZXIgdGhhbiBFUzUgY2xvbmUgLSBodHRwOi8vanNwZXJmLmNvbS9kZWVwLWNsb25pbmctb2Ytb2JqZWN0cy81XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvL3RoaXMgaXMgaG93IEpTT04uc3RyaW5naWZ5IGJlaGF2ZXMgZm9yIGFycmF5IGl0ZW1zXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gb2JqOyAvL25vIG5lZWQgdG8gY2xvbmUgcHJpbWl0aXZlc1xuICAgIH1cbn1cbi8vM3ggZmFzdGVyIHRoYW4gY2FjaGVkIC9eXFxkKyQvLnRlc3Qoc3RyKVxuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZWdlcihzdHIpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgY29uc3QgbGVuID0gc3RyLmxlbmd0aDtcbiAgICBsZXQgY2hhckNvZGU7XG4gICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgICAgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBFc2NhcGVzIGEganNvbiBwb2ludGVyIHBhdGhcbiAqIEBwYXJhbSBwYXRoIFRoZSByYXcgcG9pbnRlclxuICogQHJldHVybiB0aGUgRXNjYXBlZCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVQYXRoQ29tcG9uZW50KHBhdGgpIHtcbiAgICBpZiAocGF0aC5pbmRleE9mKFwiL1wiKSA9PT0gLTEgJiYgcGF0aC5pbmRleE9mKFwiflwiKSA9PT0gLTEpXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL34vZywgXCJ+MFwiKS5yZXBsYWNlKC9cXC8vZywgXCJ+MVwiKTtcbn1cbi8qKlxuICogVW5lc2NhcGVzIGEganNvbiBwb2ludGVyIHBhdGhcbiAqIEBwYXJhbSBwYXRoIFRoZSBlc2NhcGVkIHBvaW50ZXJcbiAqIEByZXR1cm4gVGhlIHVuZXNjYXBlZCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmVzY2FwZVBhdGhDb21wb25lbnQocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL34xL2csIFwiL1wiKS5yZXBsYWNlKC9+MC9nLCBcIn5cIik7XG59XG5leHBvcnQgZnVuY3Rpb24gX2dldFBhdGhSZWN1cnNpdmUocm9vdCwgb2JqKSB7XG4gICAgbGV0IGZvdW5kO1xuICAgIGZvciAobGV0IGtleSBpbiByb290KSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShyb290LCBrZXkpKSB7XG4gICAgICAgICAgICBpZiAocm9vdFtrZXldID09PSBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXNjYXBlUGF0aENvbXBvbmVudChrZXkpICsgXCIvXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygcm9vdFtrZXldID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSBfZ2V0UGF0aFJlY3Vyc2l2ZShyb290W2tleV0sIG9iaik7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSArIFwiL1wiICsgZm91bmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGgocm9vdCwgb2JqKSB7XG4gICAgaWYgKHJvb3QgPT09IG9iaikge1xuICAgICAgICByZXR1cm4gXCIvXCI7XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSBfZ2V0UGF0aFJlY3Vyc2l2ZShyb290LCBvYmopO1xuICAgIGlmIChwYXRoID09PSBcIlwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9iamVjdCBub3QgZm91bmQgaW4gcm9vdFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGAvJHtwYXRofWA7XG59XG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGNoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYW55IHVuZGVmaW5lZCB2YWx1ZXMgaW5zaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzVW5kZWZpbmVkKG9iaikge1xuICAgIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9iaikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1VuZGVmaW5lZChvYmpbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zdCBvYmpLZXlzID0gX29iamVjdEtleXMob2JqKTtcbiAgICAgICAgICAgIGNvbnN0IG9iaktleXNMZW5ndGggPSBvYmpLZXlzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqS2V5c0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1VuZGVmaW5lZChvYmpbb2JqS2V5c1tpXV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCBhcmdzKSB7XG4gICAgY29uc3QgbWVzc2FnZVBhcnRzID0gW21lc3NhZ2VdO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0eXBlb2YgYXJnc1trZXldID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGFyZ3Nba2V5XSwgbnVsbCwgMilcbiAgICAgICAgICAgIDogYXJnc1trZXldOyAvLyBwcmV0dHkgcHJpbnRcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgbWVzc2FnZVBhcnRzLnB1c2goYCR7a2V5fTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZVBhcnRzLmpvaW4oXCJcXG5cIik7XG59XG5leHBvcnQgY2xhc3MgUGF0Y2hFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBuYW1lLCBpbmRleCwgb3BlcmF0aW9uLCB0cmVlKSB7XG4gICAgICAgIHN1cGVyKHBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyKG1lc3NhZ2UsIHsgbmFtZSwgaW5kZXgsIG9wZXJhdGlvbiwgdHJlZSB9KSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluZGV4XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmRleFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BlcmF0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBvcGVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyZWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRyZWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7IC8vIHJlc3RvcmUgcHJvdG90eXBlIGNoYWluLCBzZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ4MzQyMzU5XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IHBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgIHRyZWUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJfaGFzT3duUHJvcGVydHkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIm9iaiIsImtleSIsImNhbGwiLCJfb2JqZWN0S2V5cyIsIkFycmF5IiwiaXNBcnJheSIsImtleXMiLCJsZW5ndGgiLCJrIiwiaSIsInB1c2giLCJfZGVlcENsb25lIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiaXNJbnRlZ2VyIiwic3RyIiwibGVuIiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0IiwiZXNjYXBlUGF0aENvbXBvbmVudCIsInBhdGgiLCJpbmRleE9mIiwicmVwbGFjZSIsInVuZXNjYXBlUGF0aENvbXBvbmVudCIsIl9nZXRQYXRoUmVjdXJzaXZlIiwicm9vdCIsImZvdW5kIiwiZ2V0UGF0aCIsIkVycm9yIiwiaGFzVW5kZWZpbmVkIiwidW5kZWZpbmVkIiwib2JqS2V5cyIsIm9iaktleXNMZW5ndGgiLCJwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlciIsIm1lc3NhZ2UiLCJhcmdzIiwibWVzc2FnZVBhcnRzIiwidmFsdWUiLCJqb2luIiwiUGF0Y2hFcnJvciIsImNvbnN0cnVjdG9yIiwibmFtZSIsImluZGV4Iiwib3BlcmF0aW9uIiwidHJlZSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwic2V0UHJvdG90eXBlT2YiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/hash.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/hash.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* reexport safe */ _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)\n/* harmony export */ });\n/* harmony import */ var _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js-sha1/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaGFzaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpRCIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2hhc2guanM/NGI0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBpbnNlY3VyZUhhc2ggfSBmcm9tIFwiLi9qcy1zaGExL2hhc2guanNcIjtcbiJdLCJuYW1lcyI6WyJpbnNlY3VyZUhhc2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/js-sha1/hash.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* binding */ insecureHash)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */ /*jslint bitwise: true */ \nvar root =  false ? 0 : {};\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n    -2147483648,\n    8388608,\n    32768,\n    128\n];\nvar SHIFT = [\n    24,\n    16,\n    8,\n    0\n];\nvar OUTPUT_TYPES = [\n    \"hex\",\n    \"array\",\n    \"digest\",\n    \"arrayBuffer\"\n];\nvar blocks = [];\nfunction Sha1(sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        this.blocks = blocks;\n    } else {\n        this.blocks = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0\n        ];\n    }\n    this.h0 = 0x67452301;\n    this.h1 = 0xefcdab89;\n    this.h2 = 0x98badcfe;\n    this.h3 = 0x10325476;\n    this.h4 = 0xc3d2e1f0;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n}\nSha1.prototype.update = function(message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString = typeof message !== \"string\";\n    if (notString && message.constructor === root.ArrayBuffer) {\n        message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n    while(index < length){\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        }\n        if (notString) {\n            for(i = this.start; index < length && i < 64; ++index){\n                blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        } else {\n            for(i = this.start; index < length && i < 64; ++index){\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                } else if (code < 0x800) {\n                    blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else {\n                    code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                    blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        } else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += this.bytes / 4294967296 << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha1.prototype.finalize = function() {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha1.prototype.hash = function() {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n    for(j = 16; j < 80; ++j){\n        t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n        blocks[j] = t << 1 | t >>> 31;\n    }\n    for(j = 0; j < 20; j += 5){\n        f = b & c | ~b & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1518500249 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | ~a & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | ~e & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | ~d & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | ~c & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 40; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1859775393 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 60; j += 5){\n        f = b & c | b & d | c & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 1894007588 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | a & c | b & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | e & b | a & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | d & a | e & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | c & e | d & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 80; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 899497514 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 899497514 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 899497514 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 899497514 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 899497514 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n};\nSha1.prototype.hex = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return HEX_CHARS[h0 >> 28 & 0x0f] + HEX_CHARS[h0 >> 24 & 0x0f] + HEX_CHARS[h0 >> 20 & 0x0f] + HEX_CHARS[h0 >> 16 & 0x0f] + HEX_CHARS[h0 >> 12 & 0x0f] + HEX_CHARS[h0 >> 8 & 0x0f] + HEX_CHARS[h0 >> 4 & 0x0f] + HEX_CHARS[h0 & 0x0f] + HEX_CHARS[h1 >> 28 & 0x0f] + HEX_CHARS[h1 >> 24 & 0x0f] + HEX_CHARS[h1 >> 20 & 0x0f] + HEX_CHARS[h1 >> 16 & 0x0f] + HEX_CHARS[h1 >> 12 & 0x0f] + HEX_CHARS[h1 >> 8 & 0x0f] + HEX_CHARS[h1 >> 4 & 0x0f] + HEX_CHARS[h1 & 0x0f] + HEX_CHARS[h2 >> 28 & 0x0f] + HEX_CHARS[h2 >> 24 & 0x0f] + HEX_CHARS[h2 >> 20 & 0x0f] + HEX_CHARS[h2 >> 16 & 0x0f] + HEX_CHARS[h2 >> 12 & 0x0f] + HEX_CHARS[h2 >> 8 & 0x0f] + HEX_CHARS[h2 >> 4 & 0x0f] + HEX_CHARS[h2 & 0x0f] + HEX_CHARS[h3 >> 28 & 0x0f] + HEX_CHARS[h3 >> 24 & 0x0f] + HEX_CHARS[h3 >> 20 & 0x0f] + HEX_CHARS[h3 >> 16 & 0x0f] + HEX_CHARS[h3 >> 12 & 0x0f] + HEX_CHARS[h3 >> 8 & 0x0f] + HEX_CHARS[h3 >> 4 & 0x0f] + HEX_CHARS[h3 & 0x0f] + HEX_CHARS[h4 >> 28 & 0x0f] + HEX_CHARS[h4 >> 24 & 0x0f] + HEX_CHARS[h4 >> 20 & 0x0f] + HEX_CHARS[h4 >> 16 & 0x0f] + HEX_CHARS[h4 >> 12 & 0x0f] + HEX_CHARS[h4 >> 8 & 0x0f] + HEX_CHARS[h4 >> 4 & 0x0f] + HEX_CHARS[h4 & 0x0f];\n};\nSha1.prototype.toString = Sha1.prototype.hex;\nSha1.prototype.digest = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return [\n        h0 >> 24 & 0xff,\n        h0 >> 16 & 0xff,\n        h0 >> 8 & 0xff,\n        h0 & 0xff,\n        h1 >> 24 & 0xff,\n        h1 >> 16 & 0xff,\n        h1 >> 8 & 0xff,\n        h1 & 0xff,\n        h2 >> 24 & 0xff,\n        h2 >> 16 & 0xff,\n        h2 >> 8 & 0xff,\n        h2 & 0xff,\n        h3 >> 24 & 0xff,\n        h3 >> 16 & 0xff,\n        h3 >> 8 & 0xff,\n        h3 & 0xff,\n        h4 >> 24 & 0xff,\n        h4 >> 16 & 0xff,\n        h4 >> 8 & 0xff,\n        h4 & 0xff\n    ];\n};\nSha1.prototype.array = Sha1.prototype.digest;\nSha1.prototype.arrayBuffer = function() {\n    this.finalize();\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n};\nconst insecureHash = (message)=>{\n    return new Sha1(true).update(message)[\"hex\"]();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxjQUFjO0FBQ2QsdUVBQXVFO0FBQ3ZFOzs7Ozs7O0NBT0MsR0FDRCx1QkFBdUIsR0FDVjtBQUNiLElBQUlBLE9BQU8sTUFBMEIsR0FBR0MsQ0FBTUEsR0FBRyxDQUFDO0FBQ2xELElBQUlDLFlBQVksbUJBQW1CQyxLQUFLLENBQUM7QUFDekMsSUFBSUMsUUFBUTtJQUFDLENBQUM7SUFBWTtJQUFTO0lBQU87Q0FBSTtBQUM5QyxJQUFJQyxRQUFRO0lBQUM7SUFBSTtJQUFJO0lBQUc7Q0FBRTtBQUMxQixJQUFJQyxlQUFlO0lBQUM7SUFBTztJQUFTO0lBQVU7Q0FBYztBQUM1RCxJQUFJQyxTQUFTLEVBQUU7QUFDZixTQUFTQyxLQUFLQyxZQUFZO0lBQ3RCLElBQUlBLGNBQWM7UUFDZEYsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTjtRQUNwRSxJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDbEIsT0FDSztRQUNELElBQUksQ0FBQ0EsTUFBTSxHQUFHO1lBQUM7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFH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U0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNRLEtBQUssS0FBSyxHQUNwQlIsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNTLEtBQUssS0FBSyxHQUNwQlQsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNVLEtBQUssS0FBSyxHQUNwQlYsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNXLEtBQUssS0FBSyxHQUNwQlgsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNZLEtBQUssS0FBSztBQUM1QjtBQUNBTixLQUFLYyxTQUFTLENBQUN3QixRQUFRLEdBQUd0QyxLQUFLYyxTQUFTLENBQUN1QixHQUFHO0FBQzVDckMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTSxHQUFHO0lBQ3BCLElBQUksQ0FBQ1gsUUFBUTtJQUNiLElBQUkxQixLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRTtJQUN4RSxPQUFPO1FBQ0ZKLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztRQUNKQyxNQUFNLEtBQU07UUFDWkEsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sSUFBSztRQUNaQSxLQUFLO1FBQ0pDLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztLQUNSO0FBQ0w7QUFDQU4sS0FBS2MsU0FBUyxDQUFDMEIsS0FBSyxHQUFHeEMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTTtBQUM1Q3ZDLEtBQUtjLFNBQVMsQ0FBQzJCLFdBQVcsR0FBRztJQUN6QixJQUFJLENBQUNiLFFBQVE7SUFDYixJQUFJYyxTQUFTLElBQUl2QixZQUFZO0lBQzdCLElBQUl3QixXQUFXLElBQUlDLFNBQVNGO0lBQzVCQyxTQUFTRSxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMzQyxFQUFFO0lBQzdCeUMsU0FBU0UsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDMUMsRUFBRTtJQUM3QndDLFNBQVNFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQ3pDLEVBQUU7SUFDN0J1QyxTQUFTRSxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUN4QyxFQUFFO0lBQzlCc0MsU0FBU0UsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDdkMsRUFBRTtJQUM5QixPQUFPb0M7QUFDWDtBQUNPLE1BQU1JLGVBQWUsQ0FBQzlCO0lBQ3pCLE9BQU8sSUFBSWhCLEtBQUssTUFBTWUsTUFBTSxDQUFDQyxRQUFRLENBQUMsTUFBTTtBQUNoRCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzPzFkYzYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgdG8gZGVhbCB3aXRoIHBvcnRhYmlsaXR5IGlzc3VlcyB3aXRoIGltcG9ydGluZyBjcnlwdG8gbW9kdWxlXG4vKlxuICogW2pzLXNoYTFde0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbW4xNzgvanMtc2hhMX1cbiAqXG4gKiBAdmVyc2lvbiAwLjYuMFxuICogQGF1dGhvciBDaGVuLCBZaS1DeXVhbiBbZW1uMTc4QGdtYWlsLmNvbV1cbiAqIEBjb3B5cmlnaHQgQ2hlbiwgWWktQ3l1YW4gMjAxNC0yMDE3XG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuLypqc2xpbnQgYml0d2lzZTogdHJ1ZSAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcm9vdCA9IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgPyB3aW5kb3cgOiB7fTtcbnZhciBIRVhfQ0hBUlMgPSBcIjAxMjM0NTY3ODlhYmNkZWZcIi5zcGxpdChcIlwiKTtcbnZhciBFWFRSQSA9IFstMjE0NzQ4MzY0OCwgODM4ODYwOCwgMzI3NjgsIDEyOF07XG52YXIgU0hJRlQgPSBbMjQsIDE2LCA4LCAwXTtcbnZhciBPVVRQVVRfVFlQRVMgPSBbXCJoZXhcIiwgXCJhcnJheVwiLCBcImRpZ2VzdFwiLCBcImFycmF5QnVmZmVyXCJdO1xudmFyIGJsb2NrcyA9IFtdO1xuZnVuY3Rpb24gU2hhMShzaGFyZWRNZW1vcnkpIHtcbiAgICBpZiAoc2hhcmVkTWVtb3J5KSB7XG4gICAgICAgIGJsb2Nrc1swXSA9XG4gICAgICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB0aGlzLmJsb2NrcyA9IGJsb2NrcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xuICAgIH1cbiAgICB0aGlzLmgwID0gMHg2NzQ1MjMwMTtcbiAgICB0aGlzLmgxID0gMHhlZmNkYWI4OTtcbiAgICB0aGlzLmgyID0gMHg5OGJhZGNmZTtcbiAgICB0aGlzLmgzID0gMHgxMDMyNTQ3NjtcbiAgICB0aGlzLmg0ID0gMHhjM2QyZTFmMDtcbiAgICB0aGlzLmJsb2NrID0gdGhpcy5zdGFydCA9IHRoaXMuYnl0ZXMgPSB0aGlzLmhCeXRlcyA9IDA7XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0aGlzLmhhc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuZmlyc3QgPSB0cnVlO1xufVxuU2hhMS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgbm90U3RyaW5nID0gdHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCI7XG4gICAgaWYgKG5vdFN0cmluZyAmJiBtZXNzYWdlLmNvbnN0cnVjdG9yID09PSByb290LkFycmF5QnVmZmVyKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBuZXcgVWludDhBcnJheShtZXNzYWdlKTtcbiAgICB9XG4gICAgdmFyIGNvZGUsIGluZGV4ID0gMCwgaSwgbGVuZ3RoID0gbWVzc2FnZS5sZW5ndGggfHwgMCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG4gICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNoZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJsb2Nrc1swXSA9IHRoaXMuYmxvY2s7XG4gICAgICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub3RTdHJpbmcpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9IG1lc3NhZ2VbaW5kZXhdIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSB7XG4gICAgICAgICAgICAgICAgY29kZSA9IG1lc3NhZ2UuY2hhckNvZGVBdChpbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgPCAweDgwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9IGNvZGUgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPCAweDgwMCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhjMCB8IChjb2RlID4+IDYpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29kZSA8IDB4ZDgwMCB8fCBjb2RlID49IDB4ZTAwMCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhlMCB8IChjb2RlID4+IDEyKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAweDEwMDAwICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKChjb2RlICYgMHgzZmYpIDw8IDEwKSB8IChtZXNzYWdlLmNoYXJDb2RlQXQoKytpbmRleCkgJiAweDNmZikpO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhmMCB8IChjb2RlID4+IDE4KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDEyKSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4gNikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKGNvZGUgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEJ5dGVJbmRleCA9IGk7XG4gICAgICAgIHRoaXMuYnl0ZXMgKz0gaSAtIHRoaXMuc3RhcnQ7XG4gICAgICAgIGlmIChpID49IDY0KSB7XG4gICAgICAgICAgICB0aGlzLmJsb2NrID0gYmxvY2tzWzE2XTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBpIC0gNjQ7XG4gICAgICAgICAgICB0aGlzLmhhc2goKTtcbiAgICAgICAgICAgIHRoaXMuaGFzaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmJ5dGVzID4gNDI5NDk2NzI5NSkge1xuICAgICAgICB0aGlzLmhCeXRlcyArPSAodGhpcy5ieXRlcyAvIDQyOTQ5NjcyOTYpIDw8IDA7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSB0aGlzLmJ5dGVzICUgNDI5NDk2NzI5NjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU2hhMS5wcm90b3R5cGUuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBibG9ja3MgPSB0aGlzLmJsb2NrcywgaSA9IHRoaXMubGFzdEJ5dGVJbmRleDtcbiAgICBibG9ja3NbMTZdID0gdGhpcy5ibG9jaztcbiAgICBibG9ja3NbaSA+PiAyXSB8PSBFWFRSQVtpICYgM107XG4gICAgdGhpcy5ibG9jayA9IGJsb2Nrc1sxNl07XG4gICAgaWYgKGkgPj0gNTYpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2tzWzBdID0gdGhpcy5ibG9jaztcbiAgICAgICAgYmxvY2tzWzE2XSA9XG4gICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgIGJsb2Nrc1syXSA9XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1szXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s2XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s4XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTFdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEyXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgIH1cbiAgICBibG9ja3NbMTRdID0gKHRoaXMuaEJ5dGVzIDw8IDMpIHwgKHRoaXMuYnl0ZXMgPj4+IDI5KTtcbiAgICBibG9ja3NbMTVdID0gdGhpcy5ieXRlcyA8PCAzO1xuICAgIHRoaXMuaGFzaCgpO1xufTtcblNoYTEucHJvdG90eXBlLmhhc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEgPSB0aGlzLmgwLCBiID0gdGhpcy5oMSwgYyA9IHRoaXMuaDIsIGQgPSB0aGlzLmgzLCBlID0gdGhpcy5oNDtcbiAgICB2YXIgZiwgaiwgdCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG4gICAgZm9yIChqID0gMTY7IGogPCA4MDsgKytqKSB7XG4gICAgICAgIHQgPSBibG9ja3NbaiAtIDNdIF4gYmxvY2tzW2ogLSA4XSBeIGJsb2Nrc1tqIC0gMTRdIF4gYmxvY2tzW2ogLSAxNl07XG4gICAgICAgIGJsb2Nrc1tqXSA9ICh0IDw8IDEpIHwgKHQgPj4+IDMxKTtcbiAgICB9XG4gICAgZm9yIChqID0gMDsgaiA8IDIwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IChiICYgYykgfCAofmIgJiBkKTtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gKGEgJiBiKSB8ICh+YSAmIGMpO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gKGUgJiBhKSB8ICh+ZSAmIGIpO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gKGQgJiBlKSB8ICh+ZCAmIGEpO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gKGMgJiBkKSB8ICh+YyAmIGUpO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDQwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gYSBeIGIgXiBjO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gZSBeIGEgXiBiO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gZCBeIGUgXiBhO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gYyBeIGQgXiBlO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDYwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKTtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gKGEgJiBiKSB8IChhICYgYykgfCAoYiAmIGMpO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gKGUgJiBhKSB8IChlICYgYikgfCAoYSAmIGIpO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gKGQgJiBlKSB8IChkICYgYSkgfCAoZSAmIGEpO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gKGMgJiBkKSB8IChjICYgZSkgfCAoZCAmIGUpO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDgwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgLSA4OTk0OTc1MTQgKyBibG9ja3Nbal0pIDw8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAzMCkgfCAoYiA+Pj4gMik7XG4gICAgICAgIGYgPSBhIF4gYiBeIGM7XG4gICAgICAgIHQgPSAoZSA8PCA1KSB8IChlID4+PiAyNyk7XG4gICAgICAgIGQgPSAodCArIGYgKyBkIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IGUgXiBhIF4gYjtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgLSA4OTk0OTc1MTQgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gZCBeIGUgXiBhO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgM10pIDw8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAzMCkgfCAoZCA+Pj4gMik7XG4gICAgICAgIGYgPSBjIF4gZCBeIGU7XG4gICAgICAgIHQgPSAoYiA8PCA1KSB8IChiID4+PiAyNyk7XG4gICAgICAgIGEgPSAodCArIGYgKyBhIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgdGhpcy5oMCA9ICh0aGlzLmgwICsgYSkgPDwgMDtcbiAgICB0aGlzLmgxID0gKHRoaXMuaDEgKyBiKSA8PCAwO1xuICAgIHRoaXMuaDIgPSAodGhpcy5oMiArIGMpIDw8IDA7XG4gICAgdGhpcy5oMyA9ICh0aGlzLmgzICsgZCkgPDwgMDtcbiAgICB0aGlzLmg0ID0gKHRoaXMuaDQgKyBlKSA8PCAwO1xufTtcblNoYTEucHJvdG90eXBlLmhleCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMywgaDQgPSB0aGlzLmg0O1xuICAgIHJldHVybiAoSEVYX0NIQVJTWyhoMCA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDAgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gxICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMiAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDMgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2g0ICYgMHgwZl0pO1xufTtcblNoYTEucHJvdG90eXBlLnRvU3RyaW5nID0gU2hhMS5wcm90b3R5cGUuaGV4O1xuU2hhMS5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICB2YXIgaDAgPSB0aGlzLmgwLCBoMSA9IHRoaXMuaDEsIGgyID0gdGhpcy5oMiwgaDMgPSB0aGlzLmgzLCBoNCA9IHRoaXMuaDQ7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgKGgwID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMCA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDAgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMCAmIDB4ZmYsXG4gICAgICAgIChoMSA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDEgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgxID4+IDgpICYgMHhmZixcbiAgICAgICAgaDEgJiAweGZmLFxuICAgICAgICAoaDIgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgyID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMiA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgyICYgMHhmZixcbiAgICAgICAgKGgzID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMyA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDMgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMyAmIDB4ZmYsXG4gICAgICAgIChoNCA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDQgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGg0ID4+IDgpICYgMHhmZixcbiAgICAgICAgaDQgJiAweGZmLFxuICAgIF07XG59O1xuU2hhMS5wcm90b3R5cGUuYXJyYXkgPSBTaGExLnByb3RvdHlwZS5kaWdlc3Q7XG5TaGExLnByb3RvdHlwZS5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigyMCk7XG4gICAgdmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDAsIHRoaXMuaDApO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMig0LCB0aGlzLmgxKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoOCwgdGhpcy5oMik7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDEyLCB0aGlzLmgzKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMTYsIHRoaXMuaDQpO1xuICAgIHJldHVybiBidWZmZXI7XG59O1xuZXhwb3J0IGNvbnN0IGluc2VjdXJlSGFzaCA9IChtZXNzYWdlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTaGExKHRydWUpLnVwZGF0ZShtZXNzYWdlKVtcImhleFwiXSgpO1xufTtcbiJdLCJuYW1lcyI6WyJyb290Iiwid2luZG93IiwiSEVYX0NIQVJTIiwic3BsaXQiLCJFWFRSQSIsIlNISUZUIiwiT1VUUFVUX1RZUEVTIiwiYmxvY2tzIiwiU2hhMSIsInNoYXJlZE1lbW9yeSIsImgwIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJibG9jayIsInN0YXJ0IiwiYnl0ZXMiLCJoQnl0ZXMiLCJmaW5hbGl6ZWQiLCJoYXNoZWQiLCJmaXJzdCIsInByb3RvdHlwZSIsInVwZGF0ZSIsIm1lc3NhZ2UiLCJub3RTdHJpbmciLCJjb25zdHJ1Y3RvciIsIkFycmF5QnVmZmVyIiwiVWludDhBcnJheSIsImNvZGUiLCJpbmRleCIsImkiLCJsZW5ndGgiLCJjaGFyQ29kZUF0IiwibGFzdEJ5dGVJbmRleCIsImhhc2giLCJmaW5hbGl6ZSIsImEiLCJiIiwiYyIsImQiLCJlIiwiZiIsImoiLCJ0IiwiaGV4IiwidG9TdHJpbmciLCJkaWdlc3QiLCJhcnJheSIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiZGF0YVZpZXciLCJEYXRhVmlldyIsInNldFVpbnQzMiIsImluc2VjdXJlSGFzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/json.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n    // eslint-disable-next-line no-param-reassign\n    s = s.trim();\n    const match = /```(json)?(.*)```/s.exec(s);\n    if (!match) {\n        return parser(s);\n    } else {\n        return parser(match[2]);\n    }\n}\n// Adapted from https://github.com/KillianLucas/open-interpreter/blob/main/interpreter/core/llm/utils/parse_partial_json.py\n// MIT License\nfunction parsePartialJson(s) {\n    // If the input is undefined, return null to indicate failure.\n    if (typeof s === \"undefined\") {\n        return null;\n    }\n    // Attempt to parse the string as-is.\n    try {\n        return JSON.parse(s);\n    } catch (error) {\n    // Pass\n    }\n    // Initialize variables.\n    let new_s = \"\";\n    const stack = [];\n    let isInsideString = false;\n    let escaped = false;\n    // Process each character in the string one at a time.\n    for (let char of s){\n        if (isInsideString) {\n            if (char === '\"' && !escaped) {\n                isInsideString = false;\n            } else if (char === \"\\n\" && !escaped) {\n                char = \"\\\\n\"; // Replace the newline character with the escape sequence.\n            } else if (char === \"\\\\\") {\n                escaped = !escaped;\n            } else {\n                escaped = false;\n            }\n        } else {\n            if (char === '\"') {\n                isInsideString = true;\n                escaped = false;\n            } else if (char === \"{\") {\n                stack.push(\"}\");\n            } else if (char === \"[\") {\n                stack.push(\"]\");\n            } else if (char === \"}\" || char === \"]\") {\n                if (stack && stack[stack.length - 1] === char) {\n                    stack.pop();\n                } else {\n                    // Mismatched closing character; the input is malformed.\n                    return null;\n                }\n            }\n        }\n        // Append the processed character to the new string.\n        new_s += char;\n    }\n    // If we're still inside a string at the end of processing,\n    // we need to close the string.\n    if (isInsideString) {\n        new_s += '\"';\n    }\n    // Close any remaining open structures in the reverse order that they were opened.\n    for(let i = stack.length - 1; i >= 0; i -= 1){\n        new_s += stack[i];\n    }\n    // Attempt to parse the modified string as JSON.\n    try {\n        return JSON.parse(new_s);\n    } catch (error) {\n        // If we still can't parse the string as JSON, return null to indicate failure.\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLFNBQVNBLGtCQUFrQkMsQ0FBQyxFQUFFQyxTQUFTQyxnQkFBZ0I7SUFDMUQsNkNBQTZDO0lBQzdDRixJQUFJQSxFQUFFRyxJQUFJO0lBQ1YsTUFBTUMsUUFBUSxxQkFBcUJDLElBQUksQ0FBQ0w7SUFDeEMsSUFBSSxDQUFDSSxPQUFPO1FBQ1IsT0FBT0gsT0FBT0Q7SUFDbEIsT0FDSztRQUNELE9BQU9DLE9BQU9HLEtBQUssQ0FBQyxFQUFFO0lBQzFCO0FBQ0o7QUFDQSwySEFBMkg7QUFDM0gsY0FBYztBQUNQLFNBQVNGLGlCQUFpQkYsQ0FBQztJQUM5Qiw4REFBOEQ7SUFDOUQsSUFBSSxPQUFPQSxNQUFNLGFBQWE7UUFDMUIsT0FBTztJQUNYO0lBQ0EscUNBQXFDO0lBQ3JDLElBQUk7UUFDQSxPQUFPTSxLQUFLQyxLQUFLLENBQUNQO0lBQ3RCLEVBQ0EsT0FBT1EsT0FBTztJQUNWLE9BQU87SUFDWDtJQUNBLHdCQUF3QjtJQUN4QixJQUFJQyxRQUFRO0lBQ1osTUFBTUMsUUFBUSxFQUFFO0lBQ2hCLElBQUlDLGlCQUFpQjtJQUNyQixJQUFJQyxVQUFVO0lBQ2Qsc0RBQXNEO0lBQ3RELEtBQUssSUFBSUMsUUFBUWIsRUFBRztRQUNoQixJQUFJVyxnQkFBZ0I7WUFDaEIsSUFBSUUsU0FBUyxPQUFPLENBQUNELFNBQVM7Z0JBQzFCRCxpQkFBaUI7WUFDckIsT0FDSyxJQUFJRSxTQUFTLFFBQVEsQ0FBQ0QsU0FBUztnQkFDaENDLE9BQU8sT0FBTywwREFBMEQ7WUFDNUUsT0FDSyxJQUFJQSxTQUFTLE1BQU07Z0JBQ3BCRCxVQUFVLENBQUNBO1lBQ2YsT0FDSztnQkFDREEsVUFBVTtZQUNkO1FBQ0osT0FDSztZQUNELElBQUlDLFNBQVMsS0FBSztnQkFDZEYsaUJBQWlCO2dCQUNqQkMsVUFBVTtZQUNkLE9BQ0ssSUFBSUMsU0FBUyxLQUFLO2dCQUNuQkgsTUFBTUksSUFBSSxDQUFDO1lBQ2YsT0FDSyxJQUFJRCxTQUFTLEtBQUs7Z0JBQ25CSCxNQUFNSSxJQUFJLENBQUM7WUFDZixPQUNLLElBQUlELFNBQVMsT0FBT0EsU0FBUyxLQUFLO2dCQUNuQyxJQUFJSCxTQUFTQSxLQUFLLENBQUNBLE1BQU1LLE1BQU0sR0FBRyxFQUFFLEtBQUtGLE1BQU07b0JBQzNDSCxNQUFNTSxHQUFHO2dCQUNiLE9BQ0s7b0JBQ0Qsd0RBQXdEO29CQUN4RCxPQUFPO2dCQUNYO1lBQ0o7UUFDSjtRQUNBLG9EQUFvRDtRQUNwRFAsU0FBU0k7SUFDYjtJQUNBLDJEQUEyRDtJQUMzRCwrQkFBK0I7SUFDL0IsSUFBSUYsZ0JBQWdCO1FBQ2hCRixTQUFTO0lBQ2I7SUFDQSxrRkFBa0Y7SUFDbEYsSUFBSyxJQUFJUSxJQUFJUCxNQUFNSyxNQUFNLEdBQUcsR0FBR0UsS0FBSyxHQUFHQSxLQUFLLEVBQUc7UUFDM0NSLFNBQVNDLEtBQUssQ0FBQ08sRUFBRTtJQUNyQjtJQUNBLGdEQUFnRDtJQUNoRCxJQUFJO1FBQ0EsT0FBT1gsS0FBS0MsS0FBSyxDQUFDRTtJQUN0QixFQUNBLE9BQU9ELE9BQU87UUFDViwrRUFBK0U7UUFDL0UsT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9qc29uLmpzP2E2ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbk1hcmtkb3duKHMsIHBhcnNlciA9IHBhcnNlUGFydGlhbEpzb24pIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBzID0gcy50cmltKCk7XG4gICAgY29uc3QgbWF0Y2ggPSAvYGBgKGpzb24pPyguKilgYGAvcy5leGVjKHMpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlcihzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIobWF0Y2hbMl0pO1xuICAgIH1cbn1cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vS2lsbGlhbkx1Y2FzL29wZW4taW50ZXJwcmV0ZXIvYmxvYi9tYWluL2ludGVycHJldGVyL2NvcmUvbGxtL3V0aWxzL3BhcnNlX3BhcnRpYWxfanNvbi5weVxuLy8gTUlUIExpY2Vuc2VcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBhcnRpYWxKc29uKHMpIHtcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkLCByZXR1cm4gbnVsbCB0byBpbmRpY2F0ZSBmYWlsdXJlLlxuICAgIGlmICh0eXBlb2YgcyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZSB0aGUgc3RyaW5nIGFzLWlzLlxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHMpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gUGFzc1xuICAgIH1cbiAgICAvLyBJbml0aWFsaXplIHZhcmlhYmxlcy5cbiAgICBsZXQgbmV3X3MgPSBcIlwiO1xuICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgbGV0IGlzSW5zaWRlU3RyaW5nID0gZmFsc2U7XG4gICAgbGV0IGVzY2FwZWQgPSBmYWxzZTtcbiAgICAvLyBQcm9jZXNzIGVhY2ggY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcgb25lIGF0IGEgdGltZS5cbiAgICBmb3IgKGxldCBjaGFyIG9mIHMpIHtcbiAgICAgICAgaWYgKGlzSW5zaWRlU3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ1wiJyAmJiAhZXNjYXBlZCkge1xuICAgICAgICAgICAgICAgIGlzSW5zaWRlU3RyaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIlxcblwiICYmICFlc2NhcGVkKSB7XG4gICAgICAgICAgICAgICAgY2hhciA9IFwiXFxcXG5cIjsgLy8gUmVwbGFjZSB0aGUgbmV3bGluZSBjaGFyYWN0ZXIgd2l0aCB0aGUgZXNjYXBlIHNlcXVlbmNlLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJcXFxcXCIpIHtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gIWVzY2FwZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ1wiJykge1xuICAgICAgICAgICAgICAgIGlzSW5zaWRlU3RyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIntcIikge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goXCJ9XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJbXCIpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFwiXVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwifVwiIHx8IGNoYXIgPT09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YWNrICYmIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdID09PSBjaGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTWlzbWF0Y2hlZCBjbG9zaW5nIGNoYXJhY3RlcjsgdGhlIGlucHV0IGlzIG1hbGZvcm1lZC5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEFwcGVuZCB0aGUgcHJvY2Vzc2VkIGNoYXJhY3RlciB0byB0aGUgbmV3IHN0cmluZy5cbiAgICAgICAgbmV3X3MgKz0gY2hhcjtcbiAgICB9XG4gICAgLy8gSWYgd2UncmUgc3RpbGwgaW5zaWRlIGEgc3RyaW5nIGF0IHRoZSBlbmQgb2YgcHJvY2Vzc2luZyxcbiAgICAvLyB3ZSBuZWVkIHRvIGNsb3NlIHRoZSBzdHJpbmcuXG4gICAgaWYgKGlzSW5zaWRlU3RyaW5nKSB7XG4gICAgICAgIG5ld19zICs9ICdcIic7XG4gICAgfVxuICAgIC8vIENsb3NlIGFueSByZW1haW5pbmcgb3BlbiBzdHJ1Y3R1cmVzIGluIHRoZSByZXZlcnNlIG9yZGVyIHRoYXQgdGhleSB3ZXJlIG9wZW5lZC5cbiAgICBmb3IgKGxldCBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgbmV3X3MgKz0gc3RhY2tbaV07XG4gICAgfVxuICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgdGhlIG1vZGlmaWVkIHN0cmluZyBhcyBKU09OLlxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKG5ld19zKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIElmIHdlIHN0aWxsIGNhbid0IHBhcnNlIHRoZSBzdHJpbmcgYXMgSlNPTiwgcmV0dXJuIG51bGwgdG8gaW5kaWNhdGUgZmFpbHVyZS5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBhcnNlSnNvbk1hcmtkb3duIiwicyIsInBhcnNlciIsInBhcnNlUGFydGlhbEpzb24iLCJ0cmltIiwibWF0Y2giLCJleGVjIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJuZXdfcyIsInN0YWNrIiwiaXNJbnNpZGVTdHJpbmciLCJlc2NhcGVkIiwiY2hhciIsInB1c2giLCJsZW5ndGgiLCJwb3AiLCJpIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/math.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/math.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cosineSimilarity: () => (/* binding */ cosineSimilarity),\n/* harmony export */   euclideanDistance: () => (/* binding */ euclideanDistance),\n/* harmony export */   innerProduct: () => (/* binding */ innerProduct),\n/* harmony export */   matrixFunc: () => (/* binding */ matrixFunc),\n/* harmony export */   maximalMarginalRelevance: () => (/* binding */ maximalMarginalRelevance),\n/* harmony export */   normalize: () => (/* binding */ normalize)\n/* harmony export */ });\n/* harmony import */ var ml_distance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ml-distance */ \"(rsc)/./node_modules/ml-distance/lib-esm/index.js\");\n\n/**\n * Apply a row-wise function between two matrices with the same number of columns.\n *\n * @param {number[][]} X - The first matrix.\n * @param {number[][]} Y - The second matrix.\n * @param {VectorFunction} func - The function to apply.\n *\n * @throws {Error} If the number of columns in X and Y are not the same.\n *\n * @returns {number[][] | [[]]} A matrix where each row represents the result of applying the function between the corresponding rows of X and Y.\n */ function matrixFunc(X, Y, func) {\n    if (X.length === 0 || X[0].length === 0 || Y.length === 0 || Y[0].length === 0) {\n        return [\n            []\n        ];\n    }\n    if (X[0].length !== Y[0].length) {\n        throw new Error(`Number of columns in X and Y must be the same. X has shape ${[\n            X.length,\n            X[0].length\n        ]} and Y has shape ${[\n            Y.length,\n            Y[0].length\n        ]}.`);\n    }\n    return X.map((xVector)=>Y.map((yVector)=>func(xVector, yVector)).map((similarity)=>Number.isNaN(similarity) ? 0 : similarity));\n}\nfunction normalize(M, similarity = false) {\n    const max = matrixMaxVal(M);\n    return M.map((row)=>row.map((val)=>similarity ? 1 - val / max : val / max));\n}\n/**\n * This function calculates the row-wise cosine similarity between two matrices with the same number of columns.\n *\n * @param {number[][]} X - The first matrix.\n * @param {number[][]} Y - The second matrix.\n *\n * @throws {Error} If the number of columns in X and Y are not the same.\n *\n * @returns {number[][] | [[]]} A matrix where each row represents the cosine similarity values between the corresponding rows of X and Y.\n */ function cosineSimilarity(X, Y) {\n    return matrixFunc(X, Y, ml_distance__WEBPACK_IMPORTED_MODULE_0__.similarity.cosine);\n}\nfunction innerProduct(X, Y) {\n    return matrixFunc(X, Y, ml_distance__WEBPACK_IMPORTED_MODULE_0__.distance.innerProduct);\n}\nfunction euclideanDistance(X, Y) {\n    return matrixFunc(X, Y, ml_distance__WEBPACK_IMPORTED_MODULE_0__.distance.euclidean);\n}\n/**\n * This function implements the Maximal Marginal Relevance algorithm\n * to select a set of embeddings that maximizes the diversity and relevance to a query embedding.\n *\n * @param {number[]|number[][]} queryEmbedding - The query embedding.\n * @param {number[][]} embeddingList - The list of embeddings to select from.\n * @param {number} [lambda=0.5] - The trade-off parameter between relevance and diversity.\n * @param {number} [k=4] - The maximum number of embeddings to select.\n *\n * @returns {number[]} The indexes of the selected embeddings in the embeddingList.\n */ function maximalMarginalRelevance(queryEmbedding, embeddingList, lambda = 0.5, k = 4) {\n    if (Math.min(k, embeddingList.length) <= 0) {\n        return [];\n    }\n    const queryEmbeddingExpanded = Array.isArray(queryEmbedding[0]) ? queryEmbedding : [\n        queryEmbedding\n    ];\n    const similarityToQuery = cosineSimilarity(queryEmbeddingExpanded, embeddingList)[0];\n    const mostSimilarEmbeddingIndex = argMax(similarityToQuery).maxIndex;\n    const selectedEmbeddings = [\n        embeddingList[mostSimilarEmbeddingIndex]\n    ];\n    const selectedEmbeddingsIndexes = [\n        mostSimilarEmbeddingIndex\n    ];\n    while(selectedEmbeddingsIndexes.length < Math.min(k, embeddingList.length)){\n        let bestScore = -Infinity;\n        let bestIndex = -1;\n        const similarityToSelected = cosineSimilarity(embeddingList, selectedEmbeddings);\n        similarityToQuery.forEach((queryScore, queryScoreIndex)=>{\n            if (selectedEmbeddingsIndexes.includes(queryScoreIndex)) {\n                return;\n            }\n            const maxSimilarityToSelected = Math.max(...similarityToSelected[queryScoreIndex]);\n            const score = lambda * queryScore - (1 - lambda) * maxSimilarityToSelected;\n            if (score > bestScore) {\n                bestScore = score;\n                bestIndex = queryScoreIndex;\n            }\n        });\n        selectedEmbeddings.push(embeddingList[bestIndex]);\n        selectedEmbeddingsIndexes.push(bestIndex);\n    }\n    return selectedEmbeddingsIndexes;\n}\n/**\n * Finds the index of the maximum value in the given array.\n * @param {number[]} array - The input array.\n *\n * @returns {number} The index of the maximum value in the array. If the array is empty, returns -1.\n */ function argMax(array) {\n    if (array.length === 0) {\n        return {\n            maxIndex: -1,\n            maxValue: NaN\n        };\n    }\n    let maxValue = array[0];\n    let maxIndex = 0;\n    for(let i = 1; i < array.length; i += 1){\n        if (array[i] > maxValue) {\n            maxIndex = i;\n            maxValue = array[i];\n        }\n    }\n    return {\n        maxIndex,\n        maxValue\n    };\n}\nfunction matrixMaxVal(arrays) {\n    return arrays.reduce((acc, array)=>Math.max(acc, argMax(array).maxValue), 0);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZGO0FBQzdGOzs7Ozs7Ozs7O0NBVUMsR0FDTSxTQUFTSSxXQUFXQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsSUFBSTtJQUNqQyxJQUFJRixFQUFFRyxNQUFNLEtBQUssS0FDYkgsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0csTUFBTSxLQUFLLEtBQ2hCRixFQUFFRSxNQUFNLEtBQUssS0FDYkYsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0UsTUFBTSxLQUFLLEdBQUc7UUFDbkIsT0FBTztZQUFDLEVBQUU7U0FBQztJQUNmO0lBQ0EsSUFBSUgsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0csTUFBTSxLQUFLRixDQUFDLENBQUMsRUFBRSxDQUFDRSxNQUFNLEVBQUU7UUFDN0IsTUFBTSxJQUFJQyxNQUFNLENBQUMsMkRBQTJELEVBQUU7WUFDMUVKLEVBQUVHLE1BQU07WUFDUkgsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0csTUFBTTtTQUNkLENBQUMsaUJBQWlCLEVBQUU7WUFBQ0YsRUFBRUUsTUFBTTtZQUFFRixDQUFDLENBQUMsRUFBRSxDQUFDRSxNQUFNO1NBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkQ7SUFDQSxPQUFPSCxFQUFFSyxHQUFHLENBQUMsQ0FBQ0MsVUFBWUwsRUFBRUksR0FBRyxDQUFDLENBQUNFLFVBQVlMLEtBQUtJLFNBQVNDLFVBQVVGLEdBQUcsQ0FBQyxDQUFDVixhQUFlYSxPQUFPQyxLQUFLLENBQUNkLGNBQWMsSUFBSUE7QUFDNUg7QUFDTyxTQUFTZSxVQUFVQyxDQUFDLEVBQUVoQixhQUFhLEtBQUs7SUFDM0MsTUFBTWlCLE1BQU1DLGFBQWFGO0lBQ3pCLE9BQU9BLEVBQUVOLEdBQUcsQ0FBQyxDQUFDUyxNQUFRQSxJQUFJVCxHQUFHLENBQUMsQ0FBQ1UsTUFBU3BCLGFBQWEsSUFBSW9CLE1BQU1ILE1BQU1HLE1BQU1IO0FBQy9FO0FBQ0E7Ozs7Ozs7OztDQVNDLEdBQ00sU0FBU0ksaUJBQWlCaEIsQ0FBQyxFQUFFQyxDQUFDO0lBQ2pDLE9BQU9GLFdBQVdDLEdBQUdDLEdBQUdMLDBEQUE2QjtBQUN6RDtBQUNPLFNBQVNzQixhQUFhbEIsQ0FBQyxFQUFFQyxDQUFDO0lBQzdCLE9BQU9GLFdBQVdDLEdBQUdDLEdBQUdILDhEQUF3QjtBQUNwRDtBQUNPLFNBQVNxQixrQkFBa0JuQixDQUFDLEVBQUVDLENBQUM7SUFDbEMsT0FBT0YsV0FBV0MsR0FBR0MsR0FBR0gsMkRBQXFCO0FBQ2pEO0FBQ0E7Ozs7Ozs7Ozs7Q0FVQyxHQUNNLFNBQVN1Qix5QkFBeUJDLGNBQWMsRUFBRUMsYUFBYSxFQUFFQyxTQUFTLEdBQUcsRUFBRUMsSUFBSSxDQUFDO0lBQ3ZGLElBQUlDLEtBQUtDLEdBQUcsQ0FBQ0YsR0FBR0YsY0FBY3BCLE1BQU0sS0FBSyxHQUFHO1FBQ3hDLE9BQU8sRUFBRTtJQUNiO0lBQ0EsTUFBTXlCLHlCQUEwQkMsTUFBTUMsT0FBTyxDQUFDUixjQUFjLENBQUMsRUFBRSxJQUFJQSxpQkFBaUI7UUFBQ0E7S0FBZTtJQUNwRyxNQUFNUyxvQkFBb0JmLGlCQUFpQlksd0JBQXdCTCxjQUFjLENBQUMsRUFBRTtJQUNwRixNQUFNUyw0QkFBNEJDLE9BQU9GLG1CQUFtQkcsUUFBUTtJQUNwRSxNQUFNQyxxQkFBcUI7UUFBQ1osYUFBYSxDQUFDUywwQkFBMEI7S0FBQztJQUNyRSxNQUFNSSw0QkFBNEI7UUFBQ0o7S0FBMEI7SUFDN0QsTUFBT0ksMEJBQTBCakMsTUFBTSxHQUFHdUIsS0FBS0MsR0FBRyxDQUFDRixHQUFHRixjQUFjcEIsTUFBTSxFQUFHO1FBQ3pFLElBQUlrQyxZQUFZLENBQUNDO1FBQ2pCLElBQUlDLFlBQVksQ0FBQztRQUNqQixNQUFNQyx1QkFBdUJ4QixpQkFBaUJPLGVBQWVZO1FBQzdESixrQkFBa0JVLE9BQU8sQ0FBQyxDQUFDQyxZQUFZQztZQUNuQyxJQUFJUCwwQkFBMEJRLFFBQVEsQ0FBQ0Qsa0JBQWtCO2dCQUNyRDtZQUNKO1lBQ0EsTUFBTUUsMEJBQTBCbkIsS0FBS2QsR0FBRyxJQUFJNEIsb0JBQW9CLENBQUNHLGdCQUFnQjtZQUNqRixNQUFNRyxRQUFRdEIsU0FBU2tCLGFBQWEsQ0FBQyxJQUFJbEIsTUFBSyxJQUFLcUI7WUFDbkQsSUFBSUMsUUFBUVQsV0FBVztnQkFDbkJBLFlBQVlTO2dCQUNaUCxZQUFZSTtZQUNoQjtRQUNKO1FBQ0FSLG1CQUFtQlksSUFBSSxDQUFDeEIsYUFBYSxDQUFDZ0IsVUFBVTtRQUNoREgsMEJBQTBCVyxJQUFJLENBQUNSO0lBQ25DO0lBQ0EsT0FBT0g7QUFDWDtBQUNBOzs7OztDQUtDLEdBQ0QsU0FBU0gsT0FBT2UsS0FBSztJQUNqQixJQUFJQSxNQUFNN0MsTUFBTSxLQUFLLEdBQUc7UUFDcEIsT0FBTztZQUNIK0IsVUFBVSxDQUFDO1lBQ1hlLFVBQVVDO1FBQ2Q7SUFDSjtJQUNBLElBQUlELFdBQVdELEtBQUssQ0FBQyxFQUFFO0lBQ3ZCLElBQUlkLFdBQVc7SUFDZixJQUFLLElBQUlpQixJQUFJLEdBQUdBLElBQUlILE1BQU03QyxNQUFNLEVBQUVnRCxLQUFLLEVBQUc7UUFDdEMsSUFBSUgsS0FBSyxDQUFDRyxFQUFFLEdBQUdGLFVBQVU7WUFDckJmLFdBQVdpQjtZQUNYRixXQUFXRCxLQUFLLENBQUNHLEVBQUU7UUFDdkI7SUFDSjtJQUNBLE9BQU87UUFBRWpCO1FBQVVlO0lBQVM7QUFDaEM7QUFDQSxTQUFTcEMsYUFBYXVDLE1BQU07SUFDeEIsT0FBT0EsT0FBT0MsTUFBTSxDQUFDLENBQUNDLEtBQUtOLFFBQVV0QixLQUFLZCxHQUFHLENBQUMwQyxLQUFLckIsT0FBT2UsT0FBT0MsUUFBUSxHQUFHO0FBQ2hGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWF0aC5qcz81M2E0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNpbWlsYXJpdHkgYXMgbWxfZGlzdGFuY2Vfc2ltaWxhcml0eSwgZGlzdGFuY2UgYXMgbWxfZGlzdGFuY2UsIH0gZnJvbSBcIm1sLWRpc3RhbmNlXCI7XG4vKipcbiAqIEFwcGx5IGEgcm93LXdpc2UgZnVuY3Rpb24gYmV0d2VlbiB0d28gbWF0cmljZXMgd2l0aCB0aGUgc2FtZSBudW1iZXIgb2YgY29sdW1ucy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcltdW119IFggLSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtudW1iZXJbXVtdfSBZIC0gVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcGFyYW0ge1ZlY3RvckZ1bmN0aW9ufSBmdW5jIC0gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5LlxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gWCBhbmQgWSBhcmUgbm90IHRoZSBzYW1lLlxuICpcbiAqIEByZXR1cm5zIHtudW1iZXJbXVtdIHwgW1tdXX0gQSBtYXRyaXggd2hlcmUgZWFjaCByb3cgcmVwcmVzZW50cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBmdW5jdGlvbiBiZXR3ZWVuIHRoZSBjb3JyZXNwb25kaW5nIHJvd3Mgb2YgWCBhbmQgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdHJpeEZ1bmMoWCwgWSwgZnVuYykge1xuICAgIGlmIChYLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBYWzBdLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBZLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBZWzBdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW1tdXTtcbiAgICB9XG4gICAgaWYgKFhbMF0ubGVuZ3RoICE9PSBZWzBdLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE51bWJlciBvZiBjb2x1bW5zIGluIFggYW5kIFkgbXVzdCBiZSB0aGUgc2FtZS4gWCBoYXMgc2hhcGUgJHtbXG4gICAgICAgICAgICBYLmxlbmd0aCxcbiAgICAgICAgICAgIFhbMF0ubGVuZ3RoLFxuICAgICAgICBdfSBhbmQgWSBoYXMgc2hhcGUgJHtbWS5sZW5ndGgsIFlbMF0ubGVuZ3RoXX0uYCk7XG4gICAgfVxuICAgIHJldHVybiBYLm1hcCgoeFZlY3RvcikgPT4gWS5tYXAoKHlWZWN0b3IpID0+IGZ1bmMoeFZlY3RvciwgeVZlY3RvcikpLm1hcCgoc2ltaWxhcml0eSkgPT4gTnVtYmVyLmlzTmFOKHNpbWlsYXJpdHkpID8gMCA6IHNpbWlsYXJpdHkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoTSwgc2ltaWxhcml0eSA9IGZhbHNlKSB7XG4gICAgY29uc3QgbWF4ID0gbWF0cml4TWF4VmFsKE0pO1xuICAgIHJldHVybiBNLm1hcCgocm93KSA9PiByb3cubWFwKCh2YWwpID0+IChzaW1pbGFyaXR5ID8gMSAtIHZhbCAvIG1heCA6IHZhbCAvIG1heCkpKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxjdWxhdGVzIHRoZSByb3ctd2lzZSBjb3NpbmUgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byBtYXRyaWNlcyB3aXRoIHRoZSBzYW1lIG51bWJlciBvZiBjb2x1bW5zLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyW11bXX0gWCAtIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge251bWJlcltdW119IFkgLSBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIG51bWJlciBvZiBjb2x1bW5zIGluIFggYW5kIFkgYXJlIG5vdCB0aGUgc2FtZS5cbiAqXG4gKiBAcmV0dXJucyB7bnVtYmVyW11bXSB8IFtbXV19IEEgbWF0cml4IHdoZXJlIGVhY2ggcm93IHJlcHJlc2VudHMgdGhlIGNvc2luZSBzaW1pbGFyaXR5IHZhbHVlcyBiZXR3ZWVuIHRoZSBjb3JyZXNwb25kaW5nIHJvd3Mgb2YgWCBhbmQgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvc2luZVNpbWlsYXJpdHkoWCwgWSkge1xuICAgIHJldHVybiBtYXRyaXhGdW5jKFgsIFksIG1sX2Rpc3RhbmNlX3NpbWlsYXJpdHkuY29zaW5lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbm5lclByb2R1Y3QoWCwgWSkge1xuICAgIHJldHVybiBtYXRyaXhGdW5jKFgsIFksIG1sX2Rpc3RhbmNlLmlubmVyUHJvZHVjdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXVjbGlkZWFuRGlzdGFuY2UoWCwgWSkge1xuICAgIHJldHVybiBtYXRyaXhGdW5jKFgsIFksIG1sX2Rpc3RhbmNlLmV1Y2xpZGVhbik7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaW1wbGVtZW50cyB0aGUgTWF4aW1hbCBNYXJnaW5hbCBSZWxldmFuY2UgYWxnb3JpdGhtXG4gKiB0byBzZWxlY3QgYSBzZXQgb2YgZW1iZWRkaW5ncyB0aGF0IG1heGltaXplcyB0aGUgZGl2ZXJzaXR5IGFuZCByZWxldmFuY2UgdG8gYSBxdWVyeSBlbWJlZGRpbmcuXG4gKlxuICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJbXVtdfSBxdWVyeUVtYmVkZGluZyAtIFRoZSBxdWVyeSBlbWJlZGRpbmcuXG4gKiBAcGFyYW0ge251bWJlcltdW119IGVtYmVkZGluZ0xpc3QgLSBUaGUgbGlzdCBvZiBlbWJlZGRpbmdzIHRvIHNlbGVjdCBmcm9tLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsYW1iZGE9MC41XSAtIFRoZSB0cmFkZS1vZmYgcGFyYW1ldGVyIGJldHdlZW4gcmVsZXZhbmNlIGFuZCBkaXZlcnNpdHkuXG4gKiBAcGFyYW0ge251bWJlcn0gW2s9NF0gLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgZW1iZWRkaW5ncyB0byBzZWxlY3QuXG4gKlxuICogQHJldHVybnMge251bWJlcltdfSBUaGUgaW5kZXhlcyBvZiB0aGUgc2VsZWN0ZWQgZW1iZWRkaW5ncyBpbiB0aGUgZW1iZWRkaW5nTGlzdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heGltYWxNYXJnaW5hbFJlbGV2YW5jZShxdWVyeUVtYmVkZGluZywgZW1iZWRkaW5nTGlzdCwgbGFtYmRhID0gMC41LCBrID0gNCkge1xuICAgIGlmIChNYXRoLm1pbihrLCBlbWJlZGRpbmdMaXN0Lmxlbmd0aCkgPD0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5RW1iZWRkaW5nRXhwYW5kZWQgPSAoQXJyYXkuaXNBcnJheShxdWVyeUVtYmVkZGluZ1swXSkgPyBxdWVyeUVtYmVkZGluZyA6IFtxdWVyeUVtYmVkZGluZ10pO1xuICAgIGNvbnN0IHNpbWlsYXJpdHlUb1F1ZXJ5ID0gY29zaW5lU2ltaWxhcml0eShxdWVyeUVtYmVkZGluZ0V4cGFuZGVkLCBlbWJlZGRpbmdMaXN0KVswXTtcbiAgICBjb25zdCBtb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4ID0gYXJnTWF4KHNpbWlsYXJpdHlUb1F1ZXJ5KS5tYXhJbmRleDtcbiAgICBjb25zdCBzZWxlY3RlZEVtYmVkZGluZ3MgPSBbZW1iZWRkaW5nTGlzdFttb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4XV07XG4gICAgY29uc3Qgc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcyA9IFttb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4XTtcbiAgICB3aGlsZSAoc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcy5sZW5ndGggPCBNYXRoLm1pbihrLCBlbWJlZGRpbmdMaXN0Lmxlbmd0aCkpIHtcbiAgICAgICAgbGV0IGJlc3RTY29yZSA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IGJlc3RJbmRleCA9IC0xO1xuICAgICAgICBjb25zdCBzaW1pbGFyaXR5VG9TZWxlY3RlZCA9IGNvc2luZVNpbWlsYXJpdHkoZW1iZWRkaW5nTGlzdCwgc2VsZWN0ZWRFbWJlZGRpbmdzKTtcbiAgICAgICAgc2ltaWxhcml0eVRvUXVlcnkuZm9yRWFjaCgocXVlcnlTY29yZSwgcXVlcnlTY29yZUluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcy5pbmNsdWRlcyhxdWVyeVNjb3JlSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWF4U2ltaWxhcml0eVRvU2VsZWN0ZWQgPSBNYXRoLm1heCguLi5zaW1pbGFyaXR5VG9TZWxlY3RlZFtxdWVyeVNjb3JlSW5kZXhdKTtcbiAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gbGFtYmRhICogcXVlcnlTY29yZSAtICgxIC0gbGFtYmRhKSAqIG1heFNpbWlsYXJpdHlUb1NlbGVjdGVkO1xuICAgICAgICAgICAgaWYgKHNjb3JlID4gYmVzdFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgYmVzdEluZGV4ID0gcXVlcnlTY29yZUluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRFbWJlZGRpbmdzLnB1c2goZW1iZWRkaW5nTGlzdFtiZXN0SW5kZXhdKTtcbiAgICAgICAgc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcy5wdXNoKGJlc3RJbmRleCk7XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3RlZEVtYmVkZGluZ3NJbmRleGVzO1xufVxuLyoqXG4gKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIG1heGltdW0gdmFsdWUgaW4gdGhlIGdpdmVuIGFycmF5LlxuICogQHBhcmFtIHtudW1iZXJbXX0gYXJyYXkgLSBUaGUgaW5wdXQgYXJyYXkuXG4gKlxuICogQHJldHVybnMge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBtYXhpbXVtIHZhbHVlIGluIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGlzIGVtcHR5LCByZXR1cm5zIC0xLlxuICovXG5mdW5jdGlvbiBhcmdNYXgoYXJyYXkpIHtcbiAgICBpZiAoYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXhJbmRleDogLTEsXG4gICAgICAgICAgICBtYXhWYWx1ZTogTmFOLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgbWF4VmFsdWUgPSBhcnJheVswXTtcbiAgICBsZXQgbWF4SW5kZXggPSAwO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJyYXkubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGFycmF5W2ldID4gbWF4VmFsdWUpIHtcbiAgICAgICAgICAgIG1heEluZGV4ID0gaTtcbiAgICAgICAgICAgIG1heFZhbHVlID0gYXJyYXlbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgbWF4SW5kZXgsIG1heFZhbHVlIH07XG59XG5mdW5jdGlvbiBtYXRyaXhNYXhWYWwoYXJyYXlzKSB7XG4gICAgcmV0dXJuIGFycmF5cy5yZWR1Y2UoKGFjYywgYXJyYXkpID0+IE1hdGgubWF4KGFjYywgYXJnTWF4KGFycmF5KS5tYXhWYWx1ZSksIDApO1xufVxuIl0sIm5hbWVzIjpbInNpbWlsYXJpdHkiLCJtbF9kaXN0YW5jZV9zaW1pbGFyaXR5IiwiZGlzdGFuY2UiLCJtbF9kaXN0YW5jZSIsIm1hdHJpeEZ1bmMiLCJYIiwiWSIsImZ1bmMiLCJsZW5ndGgiLCJFcnJvciIsIm1hcCIsInhWZWN0b3IiLCJ5VmVjdG9yIiwiTnVtYmVyIiwiaXNOYU4iLCJub3JtYWxpemUiLCJNIiwibWF4IiwibWF0cml4TWF4VmFsIiwicm93IiwidmFsIiwiY29zaW5lU2ltaWxhcml0eSIsImNvc2luZSIsImlubmVyUHJvZHVjdCIsImV1Y2xpZGVhbkRpc3RhbmNlIiwiZXVjbGlkZWFuIiwibWF4aW1hbE1hcmdpbmFsUmVsZXZhbmNlIiwicXVlcnlFbWJlZGRpbmciLCJlbWJlZGRpbmdMaXN0IiwibGFtYmRhIiwiayIsIk1hdGgiLCJtaW4iLCJxdWVyeUVtYmVkZGluZ0V4cGFuZGVkIiwiQXJyYXkiLCJpc0FycmF5Iiwic2ltaWxhcml0eVRvUXVlcnkiLCJtb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4IiwiYXJnTWF4IiwibWF4SW5kZXgiLCJzZWxlY3RlZEVtYmVkZGluZ3MiLCJzZWxlY3RlZEVtYmVkZGluZ3NJbmRleGVzIiwiYmVzdFNjb3JlIiwiSW5maW5pdHkiLCJiZXN0SW5kZXgiLCJzaW1pbGFyaXR5VG9TZWxlY3RlZCIsImZvckVhY2giLCJxdWVyeVNjb3JlIiwicXVlcnlTY29yZUluZGV4IiwiaW5jbHVkZXMiLCJtYXhTaW1pbGFyaXR5VG9TZWxlY3RlZCIsInNjb3JlIiwicHVzaCIsImFycmF5IiwibWF4VmFsdWUiLCJOYU4iLCJpIiwiYXJyYXlzIiwicmVkdWNlIiwiYWNjIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/math.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(generator, startSetup){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = generator;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            this.firstResult = generator.next();\n            if (startSetup) {\n                this.firstResult.then(startSetup).then(resolve, reject);\n            } else {\n                this.firstResult.then((_result)=>resolve(undefined), reject);\n            }\n        });\n    }\n    async next(...args) {\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return this.generator.next(...args);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, ...args) {\n    const gen = new AsyncGeneratorWithSetup(generator, startSetup);\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBQ00sTUFBTUEsK0JBQStCQztJQUN4Q0MsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBQyxlQUFlO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2QsSUFBSSxDQUFDQSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxTQUFTO1FBQ2hDO0lBQ0o7SUFDQSxNQUFNQyxPQUFPO1FBQ1QsSUFBSSxDQUFDSCxZQUFZO1FBQ2pCLElBQUk7WUFDQSxNQUFNSSxTQUFTLE1BQU0sSUFBSSxDQUFDSCxNQUFNLENBQUNJLElBQUk7WUFDckMsSUFBSUQsT0FBT0UsSUFBSSxFQUFFO2dCQUNiLElBQUksQ0FBQ0wsTUFBTSxDQUFDTSxXQUFXLElBQUksMENBQTBDO2dCQUNyRSxPQUFPO29CQUNIRCxNQUFNO29CQUNOUCxPQUFPUztnQkFDWDtZQUNKLE9BQ0s7Z0JBQ0QsT0FBTztvQkFDSEYsTUFBTTtvQkFDTlAsT0FBT0ssT0FBT0wsS0FBSztnQkFDdkI7WUFDSjtRQUNKLEVBQ0EsT0FBT1UsR0FBRztZQUNOLElBQUksQ0FBQ1IsTUFBTSxDQUFDTSxXQUFXLElBQUksMkNBQTJDO1lBQ3RFLE1BQU1FO1FBQ1Y7SUFDSjtJQUNBLE1BQU1DLFNBQVM7UUFDWCxJQUFJLENBQUNWLFlBQVk7UUFDakIseURBQXlEO1FBQ3pELElBQUksSUFBSSxDQUFDVyxNQUFNLEVBQUU7WUFDYixNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDWCxNQUFNLENBQUNZLE1BQU0sSUFBSSxvQ0FBb0M7WUFDaEYsSUFBSSxDQUFDWixNQUFNLENBQUNNLFdBQVcsSUFB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QXdCdEIsV0FBV3VCO0lBQ25ELE1BQU1DLFFBQVEsTUFBTVUsSUFBSVYsS0FBSztJQUM3QixPQUFPO1FBQUVXLFFBQVFGLEdBQUdDLEtBQUtWLFVBQVVNO1FBQU9OO0lBQU07QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zdHJlYW0uanM/OTIxNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU3VwcG9ydCBhc3luYyBpdGVyYXRvciBzeW50YXggZm9yIFJlYWRhYmxlU3RyZWFtcyBpbiBhbGwgZW52aXJvbm1lbnRzLlxuICogU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vTWF0dGlhc0J1ZWxlbnMvd2ViLXN0cmVhbXMtcG9seWZpbGwvcHVsbC8xMjIjaXNzdWVjb21tZW50LTE2MjczNTQ0OTBcbiAqL1xuZXhwb3J0IGNsYXNzIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gZXh0ZW5kcyBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlYWRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbnN1cmVSZWFkZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyID0gdGhpcy5nZXRSZWFkZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgY2xvc2VkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyByZXR1cm4oKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIC8vIElmIHdyYXBwZWQgaW4gYSBOb2RlIHN0cmVhbSwgY2FuY2VsIGlzIGFscmVhZHkgY2FsbGVkLlxuICAgICAgICBpZiAodGhpcy5sb2NrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSB0aGlzLnJlYWRlci5jYW5jZWwoKTsgLy8gY2FuY2VsIGZpcnN0LCBidXQgZG9uJ3QgYXdhaXQgeWV0XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgZmlyc3RcbiAgICAgICAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7IC8vIG5vdyBhd2FpdCBpdFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhc3luYyB0aHJvdyhlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIGlmICh0aGlzLmxvY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHRoaXMucmVhZGVyLmNhbmNlbCgpOyAvLyBjYW5jZWwgZmlyc3QsIGJ1dCBkb24ndCBhd2FpdCB5ZXRcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayBmaXJzdFxuICAgICAgICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTsgLy8gbm93IGF3YWl0IGl0XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICAgIC8vIEZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1N0cmVhbXNfQVBJL1VzaW5nX3JlYWRhYmxlX3N0cmVhbXMjcmVhZGluZ190aGVfc3RyZWFtXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHB1bXAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4oKHsgZG9uZSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBubyBtb3JlIGRhdGEgbmVlZHMgdG8gYmUgY29uc3VtZWQsIGNsb3NlIHRoZSBzdHJlYW1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVucXVldWUgdGhlIG5leHQgZGF0YSBjaHVuayBpbnRvIG91ciB0YXJnZXQgc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUFzeW5jR2VuZXJhdG9yKGdlbmVyYXRvcikge1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgYXN5bmMgcHVsbChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgZ2VuZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIG5vIG1vcmUgZGF0YSBuZWVkcyB0byBiZSBjb25zdW1lZCwgY2xvc2UgdGhlIHN0cmVhbVxuICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRml4OiBgZWxzZSBpZiAodmFsdWUpYCB3aWxsIGhhbmcgdGhlIHN0cmVhbWluZyB3aGVuIG51bGxpc2ggdmFsdWUgKGUuZy4gZW1wdHkgc3RyaW5nKSBpcyBwdWxsZWRcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jIGNhbmNlbChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0b3IucmV0dXJuKHJlYXNvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXRlZShpdGVyLCBsZW5ndGggPSAyKSB7XG4gICAgY29uc3QgYnVmZmVycyA9IEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gW10pO1xuICAgIHJldHVybiBidWZmZXJzLm1hcChhc3luYyBmdW5jdGlvbiogbWFrZUl0ZXIoYnVmZmVyKSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGl0ZXIubmV4dCgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYnVmZmVyIG9mIGJ1ZmZlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChidWZmZXJbMF0uZG9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgeWllbGQgYnVmZmVyLnNoaWZ0KCkudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoZmlyc3QsIHNlY29uZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZpcnN0KSAmJiBBcnJheS5pc0FycmF5KHNlY29uZCkpIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gKGZpcnN0ICsgc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIChmaXJzdCArIHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJjb25jYXRcIiBpbiBmaXJzdCAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0eXBlb2YgZmlyc3QuY29uY2F0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBjaHVuayA9IHsgLi4uZmlyc3QgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2Vjb25kKSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiBjaHVuayAmJiAhQXJyYXkuaXNBcnJheShjaHVua1trZXldKSkge1xuICAgICAgICAgICAgICAgIGNodW5rW2tleV0gPSBjb25jYXQoY2h1bmtba2V5XSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2h1bmtba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaHVuaztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbmNhdCAke3R5cGVvZiBmaXJzdH0gYW5kICR7dHlwZW9mIHNlY29uZH1gKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAge1xuICAgIGNvbnN0cnVjdG9yKGdlbmVyYXRvciwgc3RhcnRTZXR1cCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZW5lcmF0b3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2V0dXBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RSZXN1bHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RSZXN1bHRVc2VkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gICAgICAgIC8vIHNldHVwIGlzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9ubHkgYWZ0ZXIgdGhlIGZpcnN0IGl0ZXJhdG9yIHZhbHVlXG4gICAgICAgIC8vIGlzIGF2YWlsYWJsZS4gdGhpcyBpcyB1c2VmdWwgd2hlbiBzZXR1cCBvZiBzZXZlcmFsIHBpcGVkIGdlbmVyYXRvcnNcbiAgICAgICAgLy8gbmVlZHMgdG8gaGFwcGVuIGluIGxvZ2ljYWwgb3JkZXIsIGllLiBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggaW5wdXQgdG9cbiAgICAgICAgLy8gdG8gZWFjaCBnZW5lcmF0b3IgaXMgYXZhaWxhYmxlLlxuICAgICAgICB0aGlzLnNldHVwID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdCA9IGdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoc3RhcnRTZXR1cCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQudGhlbihzdGFydFNldHVwKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0LnRoZW4oKF9yZXN1bHQpID0+IHJlc29sdmUodW5kZWZpbmVkKSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIG5leHQoLi4uYXJncykge1xuICAgICAgICBpZiAoIXRoaXMuZmlyc3RSZXN1bHRVc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0VXNlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJzdFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IubmV4dCguLi5hcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgcmV0dXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5yZXR1cm4odmFsdWUpO1xuICAgIH1cbiAgICBhc3luYyB0aHJvdyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci50aHJvdyhlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodG8sIGdlbmVyYXRvciwgc3RhcnRTZXR1cCwgLi4uYXJncykge1xuICAgIGNvbnN0IGdlbiA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cChnZW5lcmF0b3IsIHN0YXJ0U2V0dXApO1xuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgZ2VuLnNldHVwO1xuICAgIHJldHVybiB7IG91dHB1dDogdG8oZ2VuLCBzZXR1cCwgLi4uYXJncyksIHNldHVwIH07XG59XG4iXSwibmFtZXMiOlsiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZW5zdXJlUmVhZGVyIiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwibmV4dCIsInJlc3VsdCIsInJlYWQiLCJkb25lIiwicmVsZWFzZUxvY2siLCJ1bmRlZmluZWQiLCJlIiwicmV0dXJuIiwibG9ja2VkIiwiY2FuY2VsUHJvbWlzZSIsImNhbmNlbCIsInRocm93IiwiU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsImZyb21SZWFkYWJsZVN0cmVhbSIsInN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsInB1bXAiLCJ0aGVuIiwiY2xvc2UiLCJlbnF1ZXVlIiwiZnJvbUFzeW5jR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwicHVsbCIsInJlYXNvbiIsImF0ZWUiLCJpdGVyIiwibGVuZ3RoIiwiYnVmZmVycyIsIkFycmF5IiwiZnJvbSIsIm1hcCIsIm1ha2VJdGVyIiwiYnVmZmVyIiwicHVzaCIsInNoaWZ0IiwiY29uY2F0IiwiZmlyc3QiLCJzZWNvbmQiLCJpc0FycmF5IiwiY2h1bmsiLCJrZXkiLCJlbnRyaWVzIiwiRXJyb3IiLCJBc3luY0dlbmVyYXRvcldpdGhTZXR1cCIsInN0YXJ0U2V0dXAiLCJzZXR1cCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmlyc3RSZXN1bHQiLCJfcmVzdWx0IiwiYXJncyIsImZpcnN0UmVzdWx0VXNlZCIsInBpcGVHZW5lcmF0b3JXaXRoU2V0dXAiLCJ0byIsImdlbiIsIm91dHB1dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRTtBQUN0QjtBQUNoRCxNQUFNRyxRQUFRLENBQUM7QUFDZixNQUFNQyxTQUFTLGFBQWEsR0FBRyxJQUFJRix5REFBV0EsQ0FBQyxDQUFDO0FBQ3pDLGVBQWVHLFlBQVlDLFFBQVE7SUFDdEMsSUFBSSxDQUFFQSxDQUFBQSxZQUFZSCxLQUFJLEdBQUk7UUFDdEJBLEtBQUssQ0FBQ0csU0FBUyxHQUFHRixPQUNiRyxLQUFLLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUQsU0FBUyxLQUFLLENBQUMsRUFDdERFLElBQUksQ0FBQyxDQUFDQyxNQUFRQSxJQUFJQyxJQUFJLElBQ3RCRixJQUFJLENBQUMsQ0FBQ0csT0FBUyxJQUFJWCxzREFBUUEsQ0FBQ1csT0FDNUJDLEtBQUssQ0FBQyxDQUFDQztZQUNSLE9BQU9WLEtBQUssQ0FBQ0csU0FBUztZQUN0QixNQUFNTztRQUNWO0lBQ0o7SUFDQSxPQUFPLE1BQU1WLEtBQUssQ0FBQ0csU0FBUztBQUNoQztBQUNPLGVBQWVRLGlCQUFpQkMsS0FBSztJQUN4QyxPQUFPVixZQUFZSix5RUFBdUJBLENBQUNjO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanM/OGU2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUaWt0b2tlbiwgZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwsIH0gZnJvbSBcImpzLXRpa3Rva2VuL2xpdGVcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4vYXN5bmNfY2FsbGVyLmpzXCI7XG5jb25zdCBjYWNoZSA9IHt9O1xuY29uc3QgY2FsbGVyID0gLyogI19fUFVSRV9fICovIG5ldyBBc3luY0NhbGxlcih7fSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW5jb2RpbmcoZW5jb2RpbmcpIHtcbiAgICBpZiAoIShlbmNvZGluZyBpbiBjYWNoZSkpIHtcbiAgICAgICAgY2FjaGVbZW5jb2RpbmddID0gY2FsbGVyXG4gICAgICAgICAgICAuZmV0Y2goYGh0dHBzOi8vdGlrdG9rZW4ucGFnZXMuZGV2L2pzLyR7ZW5jb2Rpbmd9Lmpzb25gKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBuZXcgVGlrdG9rZW4oZGF0YSkpXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtlbmNvZGluZ107XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IGNhY2hlW2VuY29kaW5nXTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNvZGluZ0Zvck1vZGVsKG1vZGVsKSB7XG4gICAgcmV0dXJuIGdldEVuY29kaW5nKGdldEVuY29kaW5nTmFtZUZvck1vZGVsKG1vZGVsKSk7XG59XG4iXSwibmFtZXMiOlsiVGlrdG9rZW4iLCJnZXRFbmNvZGluZ05hbWVGb3JNb2RlbCIsIkFzeW5jQ2FsbGVyIiwiY2FjaGUiLCJjYWxsZXIiLCJnZXRFbmNvZGluZyIsImVuY29kaW5nIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsImRhdGEiLCJjYXRjaCIsImUiLCJlbmNvZGluZ0Zvck1vZGVsIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/vectorstores.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/vectorstores.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SaveableVectorStore: () => (/* binding */ SaveableVectorStore),\n/* harmony export */   VectorStore: () => (/* binding */ VectorStore),\n/* harmony export */   VectorStoreRetriever: () => (/* binding */ VectorStoreRetriever)\n/* harmony export */ });\n/* harmony import */ var _retrievers_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retrievers/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/retrievers/index.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\n\n/**\n * Class for performing document retrieval from a VectorStore. Can perform\n * similarity search or maximal marginal relevance search.\n */ class VectorStoreRetriever extends _retrievers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseRetriever {\n    static lc_name() {\n        return \"VectorStoreRetriever\";\n    }\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"vectorstores\"\n        ];\n    }\n    _vectorstoreType() {\n        return this.vectorStore._vectorstoreType();\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"vectorStore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"k\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 4\n        });\n        Object.defineProperty(this, \"searchType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"similarity\"\n        });\n        Object.defineProperty(this, \"searchKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"filter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.vectorStore = fields.vectorStore;\n        this.k = fields.k ?? this.k;\n        this.searchType = fields.searchType ?? this.searchType;\n        this.filter = fields.filter;\n        if (fields.searchType === \"mmr\") {\n            this.searchKwargs = fields.searchKwargs;\n        }\n    }\n    async _getRelevantDocuments(query, runManager) {\n        if (this.searchType === \"mmr\") {\n            if (typeof this.vectorStore.maxMarginalRelevanceSearch !== \"function\") {\n                throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);\n            }\n            return this.vectorStore.maxMarginalRelevanceSearch(query, {\n                k: this.k,\n                filter: this.filter,\n                ...this.searchKwargs\n            }, runManager?.getChild(\"vectorstore\"));\n        }\n        return this.vectorStore.similaritySearch(query, this.k, this.filter, runManager?.getChild(\"vectorstore\"));\n    }\n    async addDocuments(documents, options) {\n        return this.vectorStore.addDocuments(documents, options);\n    }\n}\n/**\n * Abstract class representing a store of vectors. Provides methods for\n * adding vectors and documents, deleting from the store, and searching\n * the store.\n */ class VectorStore extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(embeddings, dbConfig){\n        super(dbConfig);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"vectorstores\",\n                this._vectorstoreType()\n            ]\n        });\n        Object.defineProperty(this, \"embeddings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.embeddings = embeddings;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async delete(_params) {\n        throw new Error(\"Not implemented.\");\n    }\n    async similaritySearch(query, k = 4, filter = undefined, _callbacks = undefined // implement passing to embedQuery later\n    ) {\n        const results = await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n        return results.map((result)=>result[0]);\n    }\n    async similaritySearchWithScore(query, k = 4, filter = undefined, _callbacks = undefined // implement passing to embedQuery later\n    ) {\n        return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n    }\n    static fromTexts(_texts, _metadatas, _embeddings, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    static fromDocuments(_docs, _embeddings, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    asRetriever(kOrFields, filter, callbacks, tags, metadata, verbose) {\n        if (typeof kOrFields === \"number\") {\n            return new VectorStoreRetriever({\n                vectorStore: this,\n                k: kOrFields,\n                filter,\n                tags: [\n                    ...tags ?? [],\n                    this._vectorstoreType()\n                ],\n                metadata,\n                verbose,\n                callbacks\n            });\n        } else {\n            const params = {\n                vectorStore: this,\n                k: kOrFields?.k,\n                filter: kOrFields?.filter,\n                tags: [\n                    ...kOrFields?.tags ?? [],\n                    this._vectorstoreType()\n                ],\n                metadata: kOrFields?.metadata,\n                verbose: kOrFields?.verbose,\n                callbacks: kOrFields?.callbacks,\n                searchType: kOrFields?.searchType\n            };\n            if (kOrFields?.searchType === \"mmr\") {\n                return new VectorStoreRetriever({\n                    ...params,\n                    searchKwargs: kOrFields.searchKwargs\n                });\n            }\n            return new VectorStoreRetriever({\n                ...params\n            });\n        }\n    }\n}\n/**\n * Abstract class extending VectorStore with functionality for saving and\n * loading the vector store.\n */ class SaveableVectorStore extends VectorStore {\n    static load(_directory, _embeddings) {\n        throw new Error(\"Not implemented\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdmVjdG9yc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBQ0Q7QUFDdEQ7OztDQUdDLEdBQ00sTUFBTUUsNkJBQTZCRiwrREFBYUE7SUFDbkQsT0FBT0csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBLElBQUlDLGVBQWU7UUFDZixPQUFPO1lBQUM7WUFBa0I7U0FBZTtJQUM3QztJQUNBQyxtQkFBbUI7UUFDZixPQUFPLElBQUksQ0FBQ0MsV0FBVyxDQUFDRCxnQkFBZ0I7SUFDNUM7SUFDQUUsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxLQUFLO1lBQzdCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1IsV0FBVyxHQUFHRSxPQUFPRixXQUFXO1FBQ3JDLElBQUksQ0FBQ1MsQ0FBQyxHQUFHUCxPQUFPTyxDQUFDLElBQUksSUFBSSxDQUFDQSxDQUFDO1FBQzNCLElBQUksQ0FBQ0MsVUFB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QUFFO1FBQ1AsTUFBTSxJQUFJdkIsTUFBTTtJQUNwQjtJQUNBMEIsWUFBWUMsU0FBUyxFQUFFakMsTUFBTSxFQUFFa0MsU0FBUyxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRUMsT0FBTyxFQUFFO1FBQy9ELElBQUksT0FBT0osY0FBYyxVQUFVO1lBQy9CLE9BQU8sSUFBSWhELHFCQUFxQjtnQkFDNUJJLGFBQWEsSUFBSTtnQkFDakJTLEdBQUdtQztnQkFDSGpDO2dCQUNBbUMsTUFBTTt1QkFBS0EsUUFBUSxFQUFFO29CQUFHLElBQUksQ0FBQy9DLGdCQUFnQjtpQkFBRztnQkFDaERnRDtnQkFDQUM7Z0JBQ0FIO1lBQ0o7UUFDSixPQUNLO1lBQ0QsTUFBTUksU0FBUztnQkFDWGpELGFBQWEsSUFBSTtnQkFDakJTLEdBQUdtQyxXQUFXbkM7Z0JBQ2RFLFFBQVFpQyxXQUFXakM7Z0JBQ25CbUMsTUFBTTt1QkFBS0YsV0FBV0UsUUFBUSxFQUFFO29CQUFHLElBQUksQ0FBQy9DLGdCQUFnQjtpQkFBRztnQkFDM0RnRCxVQUFVSCxXQUFXRztnQkFDckJDLFNBQVNKLFdBQVdJO2dCQUNwQkgsV0FBV0QsV0FBV0M7Z0JBQ3RCbkMsWUFBWWtDLFdBQVdsQztZQUMzQjtZQUNBLElBQUlrQyxXQUFXbEMsZUFBZSxPQUFPO2dCQUNqQyxPQUFPLElBQUlkLHFCQUFxQjtvQkFDNUIsR0FBR3FELE1BQU07b0JBQ1RyQyxjQUFjZ0MsVUFBVWhDLFlBQVk7Z0JBQ3hDO1lBQ0o7WUFDQSxPQUFPLElBQUloQixxQkFBcUI7Z0JBQUUsR0FBR3FELE1BQU07WUFBQztRQUNoRDtJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQyw0QkFBNEIzQjtJQUNyQyxPQUFPNEIsS0FBS0MsVUFBVSxFQUFFYixXQUFXLEVBQUU7UUFDakMsTUFBTSxJQUFJdEIsTUFBTTtJQUNwQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdmVjdG9yc3RvcmVzLmpzPzAwZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVJldHJpZXZlciwgfSBmcm9tIFwiLi9yZXRyaWV2ZXJzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuLyoqXG4gKiBDbGFzcyBmb3IgcGVyZm9ybWluZyBkb2N1bWVudCByZXRyaWV2YWwgZnJvbSBhIFZlY3RvclN0b3JlLiBDYW4gcGVyZm9ybVxuICogc2ltaWxhcml0eSBzZWFyY2ggb3IgbWF4aW1hbCBtYXJnaW5hbCByZWxldmFuY2Ugc2VhcmNoLlxuICovXG5leHBvcnQgY2xhc3MgVmVjdG9yU3RvcmVSZXRyaWV2ZXIgZXh0ZW5kcyBCYXNlUmV0cmlldmVyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVmVjdG9yU3RvcmVSZXRyaWV2ZXJcIjtcbiAgICB9XG4gICAgZ2V0IGxjX25hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIFtcImxhbmdjaGFpbl9jb3JlXCIsIFwidmVjdG9yc3RvcmVzXCJdO1xuICAgIH1cbiAgICBfdmVjdG9yc3RvcmVUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWN0b3JTdG9yZS5fdmVjdG9yc3RvcmVUeXBlKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZWN0b3JTdG9yZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiA0XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZWFyY2hUeXBlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcInNpbWlsYXJpdHlcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2VhcmNoS3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpbHRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZlY3RvclN0b3JlID0gZmllbGRzLnZlY3RvclN0b3JlO1xuICAgICAgICB0aGlzLmsgPSBmaWVsZHMuayA/PyB0aGlzLms7XG4gICAgICAgIHRoaXMuc2VhcmNoVHlwZSA9IGZpZWxkcy5zZWFyY2hUeXBlID8/IHRoaXMuc2VhcmNoVHlwZTtcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBmaWVsZHMuZmlsdGVyO1xuICAgICAgICBpZiAoZmllbGRzLnNlYXJjaFR5cGUgPT09IFwibW1yXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoS3dhcmdzID0gZmllbGRzLnNlYXJjaEt3YXJncztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfZ2V0UmVsZXZhbnREb2N1bWVudHMocXVlcnksIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVHlwZSA9PT0gXCJtbXJcIikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZlY3RvclN0b3JlLm1heE1hcmdpbmFsUmVsZXZhbmNlU2VhcmNoICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSB2ZWN0b3Igc3RvcmUgYmFja2luZyB0aGlzIHJldHJpZXZlciwgJHt0aGlzLl92ZWN0b3JzdG9yZVR5cGUoKX0gZG9lcyBub3Qgc3VwcG9ydCBtYXggbWFyZ2luYWwgcmVsZXZhbmNlIHNlYXJjaC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlY3RvclN0b3JlLm1heE1hcmdpbmFsUmVsZXZhbmNlU2VhcmNoKHF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgazogdGhpcy5rLFxuICAgICAgICAgICAgICAgIGZpbHRlcjogdGhpcy5maWx0ZXIsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5zZWFyY2hLd2FyZ3MsXG4gICAgICAgICAgICB9LCBydW5NYW5hZ2VyPy5nZXRDaGlsZChcInZlY3RvcnN0b3JlXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52ZWN0b3JTdG9yZS5zaW1pbGFyaXR5U2VhcmNoKHF1ZXJ5LCB0aGlzLmssIHRoaXMuZmlsdGVyLCBydW5NYW5hZ2VyPy5nZXRDaGlsZChcInZlY3RvcnN0b3JlXCIpKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkRG9jdW1lbnRzKGRvY3VtZW50cywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWN0b3JTdG9yZS5hZGREb2N1bWVudHMoZG9jdW1lbnRzLCBvcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIHN0b3JlIG9mIHZlY3RvcnMuIFByb3ZpZGVzIG1ldGhvZHMgZm9yXG4gKiBhZGRpbmcgdmVjdG9ycyBhbmQgZG9jdW1lbnRzLCBkZWxldGluZyBmcm9tIHRoZSBzdG9yZSwgYW5kIHNlYXJjaGluZ1xuICogdGhlIHN0b3JlLlxuICovXG5leHBvcnQgY2xhc3MgVmVjdG9yU3RvcmUgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3RydWN0b3IoZW1iZWRkaW5ncywgZGJDb25maWcpIHtcbiAgICAgICAgc3VwZXIoZGJDb25maWcpO1xuICAgICAgICAvLyBPbmx5IGV2ZXIgaW5zdGFudGlhdGVkIGluIG1haW4gTGFuZ0NoYWluXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluXCIsIFwidmVjdG9yc3RvcmVzXCIsIHRoaXMuX3ZlY3RvcnN0b3JlVHlwZSgpXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZW1iZWRkaW5nc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVtYmVkZGluZ3MgPSBlbWJlZGRpbmdzO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIGRlbGV0ZShfcGFyYW1zKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIGFzeW5jIHNpbWlsYXJpdHlTZWFyY2gocXVlcnksIGsgPSA0LCBmaWx0ZXIgPSB1bmRlZmluZWQsIF9jYWxsYmFja3MgPSB1bmRlZmluZWQgLy8gaW1wbGVtZW50IHBhc3NpbmcgdG8gZW1iZWRRdWVyeSBsYXRlclxuICAgICkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zaW1pbGFyaXR5U2VhcmNoVmVjdG9yV2l0aFNjb3JlKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZFF1ZXJ5KHF1ZXJ5KSwgaywgZmlsdGVyKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHJlc3VsdFswXSk7XG4gICAgfVxuICAgIGFzeW5jIHNpbWlsYXJpdHlTZWFyY2hXaXRoU2NvcmUocXVlcnksIGsgPSA0LCBmaWx0ZXIgPSB1bmRlZmluZWQsIF9jYWxsYmFja3MgPSB1bmRlZmluZWQgLy8gaW1wbGVtZW50IHBhc3NpbmcgdG8gZW1iZWRRdWVyeSBsYXRlclxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaW1pbGFyaXR5U2VhcmNoVmVjdG9yV2l0aFNjb3JlKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZFF1ZXJ5KHF1ZXJ5KSwgaywgZmlsdGVyKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UZXh0cyhfdGV4dHMsIF9tZXRhZGF0YXMsIF9lbWJlZGRpbmdzLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9kYkNvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aGUgTGFuZ2NoYWluIHZlY3RvcnN0b3JlIGltcGxlbWVudGF0aW9uIHlvdSBhcmUgdXNpbmcgZm9yZ290IHRvIG92ZXJyaWRlIHRoaXMsIHBsZWFzZSByZXBvcnQgYSBidWdcIik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tRG9jdW1lbnRzKF9kb2NzLCBfZW1iZWRkaW5ncywgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBfZGJDb25maWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhlIExhbmdjaGFpbiB2ZWN0b3JzdG9yZSBpbXBsZW1lbnRhdGlvbiB5b3UgYXJlIHVzaW5nIGZvcmdvdCB0byBvdmVycmlkZSB0aGlzLCBwbGVhc2UgcmVwb3J0IGEgYnVnXCIpO1xuICAgIH1cbiAgICBhc1JldHJpZXZlcihrT3JGaWVsZHMsIGZpbHRlciwgY2FsbGJhY2tzLCB0YWdzLCBtZXRhZGF0YSwgdmVyYm9zZSkge1xuICAgICAgICBpZiAodHlwZW9mIGtPckZpZWxkcyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3JTdG9yZVJldHJpZXZlcih7XG4gICAgICAgICAgICAgICAgdmVjdG9yU3RvcmU6IHRoaXMsXG4gICAgICAgICAgICAgICAgazoga09yRmllbGRzLFxuICAgICAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgICAgICB0YWdzOiBbLi4uKHRhZ3MgPz8gW10pLCB0aGlzLl92ZWN0b3JzdG9yZVR5cGUoKV0sXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgdmVyYm9zZSxcbiAgICAgICAgICAgICAgICBjYWxsYmFja3MsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB2ZWN0b3JTdG9yZTogdGhpcyxcbiAgICAgICAgICAgICAgICBrOiBrT3JGaWVsZHM/LmssXG4gICAgICAgICAgICAgICAgZmlsdGVyOiBrT3JGaWVsZHM/LmZpbHRlcixcbiAgICAgICAgICAgICAgICB0YWdzOiBbLi4uKGtPckZpZWxkcz8udGFncyA/PyBbXSksIHRoaXMuX3ZlY3RvcnN0b3JlVHlwZSgpXSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToga09yRmllbGRzPy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB2ZXJib3NlOiBrT3JGaWVsZHM/LnZlcmJvc2UsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBrT3JGaWVsZHM/LmNhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICBzZWFyY2hUeXBlOiBrT3JGaWVsZHM/LnNlYXJjaFR5cGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGtPckZpZWxkcz8uc2VhcmNoVHlwZSA9PT0gXCJtbXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yU3RvcmVSZXRyaWV2ZXIoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaEt3YXJnczoga09yRmllbGRzLnNlYXJjaEt3YXJncyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yU3RvcmVSZXRyaWV2ZXIoeyAuLi5wYXJhbXMgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIGV4dGVuZGluZyBWZWN0b3JTdG9yZSB3aXRoIGZ1bmN0aW9uYWxpdHkgZm9yIHNhdmluZyBhbmRcbiAqIGxvYWRpbmcgdGhlIHZlY3RvciBzdG9yZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNhdmVhYmxlVmVjdG9yU3RvcmUgZXh0ZW5kcyBWZWN0b3JTdG9yZSB7XG4gICAgc3RhdGljIGxvYWQoX2RpcmVjdG9yeSwgX2VtYmVkZGluZ3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmV0cmlldmVyIiwiU2VyaWFsaXphYmxlIiwiVmVjdG9yU3RvcmVSZXRyaWV2ZXIiLCJsY19uYW1lIiwibGNfbmFtZXNwYWNlIiwiX3ZlY3RvcnN0b3JlVHlwZSIsInZlY3RvclN0b3JlIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiayIsInNlYXJjaFR5cGUiLCJmaWx0ZXIiLCJzZWFyY2hLd2FyZ3MiLCJfZ2V0UmVsZXZhbnREb2N1bWVudHMiLCJxdWVyeSIsInJ1bk1hbmFnZXIiLCJtYXhNYXJnaW5hbFJlbGV2YW5jZVNlYXJjaCIsIkVycm9yIiwiZ2V0Q2hpbGQiLCJzaW1pbGFyaXR5U2VhcmNoIiwiYWRkRG9jdW1lbnRzIiwiZG9jdW1lbnRzIiwib3B0aW9ucyIsIlZlY3RvclN0b3JlIiwiZW1iZWRkaW5ncyIsImRiQ29uZmlnIiwiZGVsZXRlIiwiX3BhcmFtcyIsInVuZGVmaW5lZCIsIl9jYWxsYmFja3MiLCJyZXN1bHRzIiwic2ltaWxhcml0eVNlYXJjaFZlY3RvcldpdGhTY29yZSIsImVtYmVkUXVlcnkiLCJtYXAiLCJyZXN1bHQiLCJzaW1pbGFyaXR5U2VhcmNoV2l0aFNjb3JlIiwiZnJvbVRleHRzIiwiX3RleHRzIiwiX21ldGFkYXRhcyIsIl9lbWJlZGRpbmdzIiwiX2RiQ29uZmlnIiwiZnJvbURvY3VtZW50cyIsIl9kb2NzIiwiYXNSZXRyaWV2ZXIiLCJrT3JGaWVsZHMiLCJjYWxsYmFja3MiLCJ0YWdzIiwibWV0YWRhdGEiLCJ2ZXJib3NlIiwicGFyYW1zIiwiU2F2ZWFibGVWZWN0b3JTdG9yZSIsImxvYWQiLCJfZGlyZWN0b3J5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/vectorstores.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/documents.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/documents.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/documents/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50cy5qcz82ZDE4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9kb2N1bWVudHMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/documents.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/embeddings.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/embeddings.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* reexport safe */ _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__.Embeddings)\n/* harmony export */ });\n/* harmony import */ var _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/embeddings.js */ \"(rsc)/./node_modules/@langchain/core/dist/embeddings.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZW1iZWRkaW5ncy5qcz9mYTI4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9lbWJlZGRpbmdzLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/chat_models.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/chat_models.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/chat_models.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcz9jMmFkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/messages.js":
/*!**************************************************!*\
  !*** ./node_modules/@langchain/core/messages.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeLists),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.convertToChunk),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isOpenAIToolCallArray),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)\n/* harmony export */ });\n/* harmony import */ var _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXMuanM/ODI5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/outputs.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/core/outputs.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.RUN_KEY)\n/* harmony export */ });\n/* harmony import */ var _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9vdXRwdXRzLmpzP2FmNDMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L291dHB1dHMuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/async_caller.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/utils/async_caller.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* reexport safe */ _dist_utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2FzeW5jX2NhbGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9hc3luY19jYWxsZXIuanM/MzJhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/chunk_array.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/utils/chunk_array.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* reexport safe */ _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__.chunkArray)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/chunk_array.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2NodW5rX2FycmF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2NodW5rX2FycmF5LmpzPzVmODIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9jaHVua19hcnJheS5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/env.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/utils/env.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isBrowser),\n/* harmony export */   isDeno: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isDeno),\n/* harmony export */   isJsDom: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isJsDom),\n/* harmony export */   isNode: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isNode),\n/* harmony export */   isWebWorker: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52LmpzPzQ2NzEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9lbnYuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/math.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/utils/math.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cosineSimilarity: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.cosineSimilarity),\n/* harmony export */   euclideanDistance: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.euclideanDistance),\n/* harmony export */   innerProduct: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.innerProduct),\n/* harmony export */   matrixFunc: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.matrixFunc),\n/* harmony export */   maximalMarginalRelevance: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.maximalMarginalRelevance),\n/* harmony export */   normalize: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.normalize)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/math.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/math.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL21hdGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9tYXRoLmpzP2M0MDciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9tYXRoLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/math.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/vectorstores.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/vectorstores.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SaveableVectorStore: () => (/* reexport safe */ _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.SaveableVectorStore),\n/* harmony export */   VectorStore: () => (/* reexport safe */ _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.VectorStore),\n/* harmony export */   VectorStoreRetriever: () => (/* reexport safe */ _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.VectorStoreRetriever)\n/* harmony export */ });\n/* harmony import */ var _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/vectorstores.js */ \"(rsc)/./node_modules/@langchain/core/dist/vectorstores.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3ZlY3RvcnN0b3Jlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3ZlY3RvcnN0b3Jlcy5qcz8xZGE2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC92ZWN0b3JzdG9yZXMuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/vectorstores.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/chat_models.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/chat_models.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* binding */ ChatGoogleGenerativeAI)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/language_models/chat_models */ \"(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/utils.js\");\n\n\n\n\n/**\n * A class that wraps the Google Palm chat model.\n * @example\n * ```typescript\n * const model = new ChatGoogleGenerativeAI({\n *   apiKey: \"<YOUR API KEY>\",\n *   temperature: 0.7,\n *   modelName: \"gemini-pro\",\n *   topK: 40,\n *   topP: 1,\n * });\n * const questions = [\n *   new HumanMessage({\n *     content: [\n *       {\n *         type: \"text\",\n *         text: \"You are a funny assistant that answers in pirate language.\",\n *       },\n *       {\n *         type: \"text\",\n *         text: \"What is your favorite food?\",\n *       },\n *     ]\n *   })\n * ];\n * const res = await model.call(questions);\n * console.log({ res });\n * ```\n */ class ChatGoogleGenerativeAI extends _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_2__.BaseChatModel {\n    static lc_name() {\n        return \"googlegenerativeai\";\n    }\n    get lc_secrets() {\n        return {\n            apiKey: \"GOOGLE_API_KEY\"\n        };\n    }\n    get _isMultimodalModel() {\n        return this.modelName.includes(\"vision\");\n    }\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gemini-pro\"\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // default value chosen based on model\n        Object.defineProperty(this, \"maxOutputTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // default value chosen based on model\n        Object.defineProperty(this, \"topK\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // default value chosen based on model\n        Object.defineProperty(this, \"stopSequences\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"safetySettings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.modelName = fields?.modelName?.replace(/^models\\//, \"\") ?? this.modelName;\n        this.maxOutputTokens = fields?.maxOutputTokens ?? this.maxOutputTokens;\n        if (this.maxOutputTokens && this.maxOutputTokens < 0) {\n            throw new Error(\"`maxOutputTokens` must be a positive integer\");\n        }\n        this.temperature = fields?.temperature ?? this.temperature;\n        if (this.temperature && (this.temperature < 0 || this.temperature > 1)) {\n            throw new Error(\"`temperature` must be in the range of [0.0,1.0]\");\n        }\n        this.topP = fields?.topP ?? this.topP;\n        if (this.topP && this.topP < 0) {\n            throw new Error(\"`topP` must be a positive integer\");\n        }\n        if (this.topP && this.topP > 1) {\n            throw new Error(\"`topP` must be below 1.\");\n        }\n        this.topK = fields?.topK ?? this.topK;\n        if (this.topK && this.topK < 0) {\n            throw new Error(\"`topK` must be a positive integer\");\n        }\n        this.stopSequences = fields?.stopSequences ?? this.stopSequences;\n        this.apiKey = fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"GOOGLE_API_KEY\");\n        if (!this.apiKey) {\n            throw new Error(\"Please set an API key for Google GenerativeAI \" + \"in the environment variable GOOGLE_API_KEY \" + \"or in the `apiKey` field of the \" + \"ChatGoogleGenerativeAI constructor\");\n        }\n        this.safetySettings = fields?.safetySettings ?? this.safetySettings;\n        if (this.safetySettings && this.safetySettings.length > 0) {\n            const safetySettingsSet = new Set(this.safetySettings.map((s)=>s.category));\n            if (safetySettingsSet.size !== this.safetySettings.length) {\n                throw new Error(\"The categories in `safetySettings` array must be unique\");\n            }\n        }\n        this.streaming = fields?.streaming ?? this.streaming;\n        this.client = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(this.apiKey).getGenerativeModel({\n            model: this.modelName,\n            safetySettings: this.safetySettings,\n            generationConfig: {\n                candidateCount: 1,\n                stopSequences: this.stopSequences,\n                maxOutputTokens: this.maxOutputTokens,\n                temperature: this.temperature,\n                topP: this.topP,\n                topK: this.topK\n            }\n        });\n    }\n    _combineLLMOutput() {\n        return [];\n    }\n    _llmType() {\n        return \"googlegenerativeai\";\n    }\n    async _generate(messages, options, runManager) {\n        const prompt = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertBaseMessagesToContent)(messages, this._isMultimodalModel);\n        // Handle streaming\n        if (this.streaming) {\n            const tokenUsage = {};\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            const finalChunks = {};\n            for await (const chunk of stream){\n                const index = chunk.generationInfo?.completion ?? 0;\n                if (finalChunks[index] === undefined) {\n                    finalChunks[index] = chunk;\n                } else {\n                    finalChunks[index] = finalChunks[index].concat(chunk);\n                }\n            }\n            const generations = Object.entries(finalChunks).sort(([aKey], [bKey])=>parseInt(aKey, 10) - parseInt(bKey, 10)).map(([_, value])=>value);\n            return {\n                generations,\n                llmOutput: {\n                    estimatedTokenUsage: tokenUsage\n                }\n            };\n        }\n        const res = await this.caller.callWithOptions({\n            signal: options?.signal\n        }, async ()=>{\n            let output;\n            try {\n                output = await this.client.generateContent({\n                    contents: prompt\n                });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            } catch (e) {\n                // TODO: Improve error handling\n                if (e.message?.includes(\"400 Bad Request\")) {\n                    e.status = 400;\n                }\n                throw e;\n            }\n            return output;\n        });\n        const generationResult = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.mapGenerateContentResultToChatResult)(res.response);\n        await runManager?.handleLLMNewToken(generationResult.generations[0].text ?? \"\");\n        return generationResult;\n    }\n    async *_streamResponseChunks(messages, options, runManager) {\n        const prompt = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertBaseMessagesToContent)(messages, this._isMultimodalModel);\n        const stream = await this.caller.callWithOptions({\n            signal: options?.signal\n        }, async ()=>{\n            const { stream } = await this.client.generateContentStream({\n                contents: prompt\n            });\n            return stream;\n        });\n        for await (const response of stream){\n            const chunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertResponseContentToChatGenerationChunk)(response);\n            if (!chunk) {\n                continue;\n            }\n            yield chunk;\n            await runManager?.handleLLMNewToken(chunk.text ?? \"\");\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0RTtBQUNUO0FBQ1U7QUFDaUU7QUFDOUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E0QkMsR0FDTSxNQUFNTywrQkFBK0JKLHNGQUFhQTtJQUNyRCxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU87WUFDSEMsUUFBUTtRQUNaO0lBQ0o7SUFDQSxJQUFJQyxxQkFBcUI7UUFDckIsT0FBTyxJQUFJLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDO0lBQ25DO0lBQ0FDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBLFVBQVUsQ0FBQztRQUNqQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQixJQUFJLHNDQUFzQztRQUMxQ0wsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQixJQUFJLHNDQUFzQztRQUMxQ0wsT0FBT0MsY0FBYyxDQUFDLElBQUks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MUUsTUFBTSxFQUFFckIsTUFBTSxFQUFFLEdBQUcsTUFBTSxJQUFJLENBQUNiLE1BQU0sQ0FBQzZDLHFCQUFxQixDQUFDO2dCQUN2RFIsVUFBVTFCO1lBQ2Q7WUFDQSxPQUFPRTtRQUNYO1FBQ0EsV0FBVyxNQUFNNkIsWUFBWTdCLE9BQVE7WUFDakMsTUFBTUcsUUFBUWpELHNGQUEyQ0EsQ0FBQzJFO1lBQzFELElBQUksQ0FBQzFCLE9BQU87Z0JBQ1I7WUFDSjtZQUNBLE1BQU1BO1lBQ04sTUFBTU4sWUFBWWlDLGtCQUFrQjNCLE1BQU00QixJQUFJLElBQUk7UUFDdEQ7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9jaGF0X21vZGVscy5qcz9hM2E5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSBhcyBHZW5lcmF0aXZlQUksIH0gZnJvbSBcIkBnb29nbGUvZ2VuZXJhdGl2ZS1haVwiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52XCI7XG5pbXBvcnQgeyBCYXNlQ2hhdE1vZGVsLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzXCI7XG5pbXBvcnQgeyBjb252ZXJ0QmFzZU1lc3NhZ2VzVG9Db250ZW50LCBjb252ZXJ0UmVzcG9uc2VDb250ZW50VG9DaGF0R2VuZXJhdGlvbkNodW5rLCBtYXBHZW5lcmF0ZUNvbnRlbnRSZXN1bHRUb0NoYXRSZXN1bHQsIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbi8qKlxuICogQSBjbGFzcyB0aGF0IHdyYXBzIHRoZSBHb29nbGUgUGFsbSBjaGF0IG1vZGVsLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG1vZGVsID0gbmV3IENoYXRHb29nbGVHZW5lcmF0aXZlQUkoe1xuICogICBhcGlLZXk6IFwiPFlPVVIgQVBJIEtFWT5cIixcbiAqICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAqICAgbW9kZWxOYW1lOiBcImdlbWluaS1wcm9cIixcbiAqICAgdG9wSzogNDAsXG4gKiAgIHRvcFA6IDEsXG4gKiB9KTtcbiAqIGNvbnN0IHF1ZXN0aW9ucyA9IFtcbiAqICAgbmV3IEh1bWFuTWVzc2FnZSh7XG4gKiAgICAgY29udGVudDogW1xuICogICAgICAge1xuICogICAgICAgICB0eXBlOiBcInRleHRcIixcbiAqICAgICAgICAgdGV4dDogXCJZb3UgYXJlIGEgZnVubnkgYXNzaXN0YW50IHRoYXQgYW5zd2VycyBpbiBwaXJhdGUgbGFuZ3VhZ2UuXCIsXG4gKiAgICAgICB9LFxuICogICAgICAge1xuICogICAgICAgICB0eXBlOiBcInRleHRcIixcbiAqICAgICAgICAgdGV4dDogXCJXaGF0IGlzIHlvdXIgZmF2b3JpdGUgZm9vZD9cIixcbiAqICAgICAgIH0sXG4gKiAgICAgXVxuICogICB9KVxuICogXTtcbiAqIGNvbnN0IHJlcyA9IGF3YWl0IG1vZGVsLmNhbGwocXVlc3Rpb25zKTtcbiAqIGNvbnNvbGUubG9nKHsgcmVzIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJIGV4dGVuZHMgQmFzZUNoYXRNb2RlbCB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImdvb2dsZWdlbmVyYXRpdmVhaVwiO1xuICAgIH1cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwaUtleTogXCJHT09HTEVfQVBJX0tFWVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgX2lzTXVsdGltb2RhbE1vZGVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RlbE5hbWUuaW5jbHVkZXMoXCJ2aXNpb25cIik7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMgPz8ge30pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJnZW1pbmktcHJvXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7IC8vIGRlZmF1bHQgdmFsdWUgY2hvc2VuIGJhc2VkIG9uIG1vZGVsXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heE91dHB1dFRva2Vuc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3BQXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7IC8vIGRlZmF1bHQgdmFsdWUgY2hvc2VuIGJhc2VkIG9uIG1vZGVsXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcEtcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTsgLy8gZGVmYXVsdCB2YWx1ZSBjaG9zZW4gYmFzZWQgb24gbW9kZWxcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcFNlcXVlbmNlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNhZmV0eVNldHRpbmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPVxuICAgICAgICAgICAgZmllbGRzPy5tb2RlbE5hbWU/LnJlcGxhY2UoL15tb2RlbHNcXC8vLCBcIlwiKSA/PyB0aGlzLm1vZGVsTmFtZTtcbiAgICAgICAgdGhpcy5tYXhPdXRwdXRUb2tlbnMgPSBmaWVsZHM/Lm1heE91dHB1dFRva2VucyA/PyB0aGlzLm1heE91dHB1dFRva2VucztcbiAgICAgICAgaWYgKHRoaXMubWF4T3V0cHV0VG9rZW5zICYmIHRoaXMubWF4T3V0cHV0VG9rZW5zIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYG1heE91dHB1dFRva2Vuc2AgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSA9IGZpZWxkcz8udGVtcGVyYXR1cmUgPz8gdGhpcy50ZW1wZXJhdHVyZTtcbiAgICAgICAgaWYgKHRoaXMudGVtcGVyYXR1cmUgJiYgKHRoaXMudGVtcGVyYXR1cmUgPCAwIHx8IHRoaXMudGVtcGVyYXR1cmUgPiAxKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYHRlbXBlcmF0dXJlYCBtdXN0IGJlIGluIHRoZSByYW5nZSBvZiBbMC4wLDEuMF1cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3BQID0gZmllbGRzPy50b3BQID8/IHRoaXMudG9wUDtcbiAgICAgICAgaWYgKHRoaXMudG9wUCAmJiB0aGlzLnRvcFAgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgdG9wUGAgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudG9wUCAmJiB0aGlzLnRvcFAgPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgdG9wUGAgbXVzdCBiZSBiZWxvdyAxLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcEsgPSBmaWVsZHM/LnRvcEsgPz8gdGhpcy50b3BLO1xuICAgICAgICBpZiAodGhpcy50b3BLICYmIHRoaXMudG9wSyA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImB0b3BLYCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3BTZXF1ZW5jZXMgPSBmaWVsZHM/LnN0b3BTZXF1ZW5jZXMgPz8gdGhpcy5zdG9wU2VxdWVuY2VzO1xuICAgICAgICB0aGlzLmFwaUtleSA9IGZpZWxkcz8uYXBpS2V5ID8/IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJHT09HTEVfQVBJX0tFWVwiKTtcbiAgICAgICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHNldCBhbiBBUEkga2V5IGZvciBHb29nbGUgR2VuZXJhdGl2ZUFJIFwiICtcbiAgICAgICAgICAgICAgICBcImluIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBHT09HTEVfQVBJX0tFWSBcIiArXG4gICAgICAgICAgICAgICAgXCJvciBpbiB0aGUgYGFwaUtleWAgZmllbGQgb2YgdGhlIFwiICtcbiAgICAgICAgICAgICAgICBcIkNoYXRHb29nbGVHZW5lcmF0aXZlQUkgY29uc3RydWN0b3JcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zYWZldHlTZXR0aW5ncyA9IGZpZWxkcz8uc2FmZXR5U2V0dGluZ3MgPz8gdGhpcy5zYWZldHlTZXR0aW5ncztcbiAgICAgICAgaWYgKHRoaXMuc2FmZXR5U2V0dGluZ3MgJiYgdGhpcy5zYWZldHlTZXR0aW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzYWZldHlTZXR0aW5nc1NldCA9IG5ldyBTZXQodGhpcy5zYWZldHlTZXR0aW5ncy5tYXAoKHMpID0+IHMuY2F0ZWdvcnkpKTtcbiAgICAgICAgICAgIGlmIChzYWZldHlTZXR0aW5nc1NldC5zaXplICE9PSB0aGlzLnNhZmV0eVNldHRpbmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBjYXRlZ29yaWVzIGluIGBzYWZldHlTZXR0aW5nc2AgYXJyYXkgbXVzdCBiZSB1bmlxdWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdHJlYW1pbmcgPSBmaWVsZHM/LnN0cmVhbWluZyA/PyB0aGlzLnN0cmVhbWluZztcbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgR2VuZXJhdGl2ZUFJKHRoaXMuYXBpS2V5KS5nZXRHZW5lcmF0aXZlTW9kZWwoe1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgc3RvcFNlcXVlbmNlczogdGhpcy5zdG9wU2VxdWVuY2VzLFxuICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogdGhpcy5tYXhPdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMudGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgdG9wUDogdGhpcy50b3BQLFxuICAgICAgICAgICAgICAgIHRvcEs6IHRoaXMudG9wSyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfY29tYmluZUxMTU91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBfbGxtVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZ29vZ2xlZ2VuZXJhdGl2ZWFpXCI7XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBjb252ZXJ0QmFzZU1lc3NhZ2VzVG9Db250ZW50KG1lc3NhZ2VzLCB0aGlzLl9pc011bHRpbW9kYWxNb2RlbCk7XG4gICAgICAgIC8vIEhhbmRsZSBzdHJlYW1pbmdcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlblVzYWdlID0ge307XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBjb25zdCBmaW5hbENodW5rcyA9IHt9O1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNodW5rLmdlbmVyYXRpb25JbmZvPy5jb21wbGV0aW9uID8/IDA7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmtzW2luZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzW2luZGV4XSA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVua3NbaW5kZXhdID0gZmluYWxDaHVua3NbaW5kZXhdLmNvbmNhdChjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBPYmplY3QuZW50cmllcyhmaW5hbENodW5rcylcbiAgICAgICAgICAgICAgICAuc29ydCgoW2FLZXldLCBbYktleV0pID0+IHBhcnNlSW50KGFLZXksIDEwKSAtIHBhcnNlSW50KGJLZXksIDEwKSlcbiAgICAgICAgICAgICAgICAubWFwKChbXywgdmFsdWVdKSA9PiB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0OiB7IGVzdGltYXRlZFRva2VuVXNhZ2U6IHRva2VuVXNhZ2UgfSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGxXaXRoT3B0aW9ucyh7IHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsIH0sIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IHRoaXMuY2xpZW50LmdlbmVyYXRlQ29udGVudCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBwcm9tcHQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW1wcm92ZSBlcnJvciBoYW5kbGluZ1xuICAgICAgICAgICAgICAgIGlmIChlLm1lc3NhZ2U/LmluY2x1ZGVzKFwiNDAwIEJhZCBSZXF1ZXN0XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RhdHVzID0gNDAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25SZXN1bHQgPSBtYXBHZW5lcmF0ZUNvbnRlbnRSZXN1bHRUb0NoYXRSZXN1bHQocmVzLnJlc3BvbnNlKTtcbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oZ2VuZXJhdGlvblJlc3VsdC5nZW5lcmF0aW9uc1swXS50ZXh0ID8/IFwiXCIpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvblJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBjb252ZXJ0QmFzZU1lc3NhZ2VzVG9Db250ZW50KG1lc3NhZ2VzLCB0aGlzLl9pc011bHRpbW9kYWxNb2RlbCk7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGxXaXRoT3B0aW9ucyh7IHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsIH0sIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RyZWFtIH0gPSBhd2FpdCB0aGlzLmNsaWVudC5nZW5lcmF0ZUNvbnRlbnRTdHJlYW0oe1xuICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBwcm9tcHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHJlc3BvbnNlIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBjb252ZXJ0UmVzcG9uc2VDb250ZW50VG9DaGF0R2VuZXJhdGlvbkNodW5rKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmICghY2h1bmspIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oY2h1bmsudGV4dCA/PyBcIlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJHZW5lcmF0aXZlQUkiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZUNoYXRNb2RlbCIsImNvbnZlcnRCYXNlTWVzc2FnZXNUb0NvbnRlbnQiLCJjb252ZXJ0UmVzcG9uc2VDb250ZW50VG9DaGF0R2VuZXJhdGlvbkNodW5rIiwibWFwR2VuZXJhdGVDb250ZW50UmVzdWx0VG9DaGF0UmVzdWx0IiwiQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSIsImxjX25hbWUiLCJsY19zZWNyZXRzIiwiYXBpS2V5IiwiX2lzTXVsdGltb2RhbE1vZGVsIiwibW9kZWxOYW1lIiwiaW5jbHVkZXMiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJyZXBsYWNlIiwibWF4T3V0cHV0VG9rZW5zIiwiRXJyb3IiLCJ0ZW1wZXJhdHVyZSIsInRvcFAiLCJ0b3BLIiwic3RvcFNlcXVlbmNlcyIsInNhZmV0eVNldHRpbmdzIiwibGVuZ3RoIiwic2FmZXR5U2V0dGluZ3NTZXQiLCJTZXQiLCJtYXAiLCJzIiwiY2F0ZWdvcnkiLCJzaXplIiwic3RyZWFtaW5nIiwiY2xpZW50IiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwibW9kZWwiLCJnZW5lcmF0aW9uQ29uZmlnIiwiY2FuZGlkYXRlQ291bnQiLCJfY29tYmluZUxMTU91dHB1dCIsIl9sbG1UeXBlIiwiX2dlbmVyYXRlIiwibWVzc2FnZXMiLCJvcHRpb25zIiwicnVuTWFuYWdlciIsInByb21wdCIsInRva2VuVXNhZ2UiLCJzdHJlYW0iLCJfc3RyZWFtUmVzcG9uc2VDaHVua3MiLCJmaW5hbENodW5rcyIsImNodW5rIiwiaW5kZXgiLCJnZW5lcmF0aW9uSW5mbyIsImNvbXBsZXRpb24iLCJ1bmRlZmluZWQiLCJjb25jYXQiLCJnZW5lcmF0aW9ucyIsImVudHJpZXMiLCJzb3J0IiwiYUtleSIsImJLZXkiLCJwYXJzZUludCIsIl8iLCJsbG1PdXRwdXQiLCJlc3RpbWF0ZWRUb2tlblVzYWdlIiwicmVzIiwiY2FsbGVyIiwiY2FsbFdpdGhPcHRpb25zIiwic2lnbmFsIiwib3V0cHV0IiwiZ2VuZXJhdGVDb250ZW50IiwiY29udGVudHMiLCJlIiwibWVzc2FnZSIsInN0YXR1cyIsImdlbmVyYXRpb25SZXN1bHQiLCJyZXNwb25zZSIsImhhbmRsZUxMTU5ld1Rva2VuIiwidGV4dCIsImdlbmVyYXRlQ29udGVudFN0cmVhbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/embeddings.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/embeddings.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* binding */ GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/embeddings */ \"(rsc)/./node_modules/@langchain/core/embeddings.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\");\n\n\n\n\n/**\n * Class that extends the Embeddings class and provides methods for\n * generating embeddings using the Google Palm API.\n * @example\n * ```typescript\n * const model = new GoogleGenerativeAIEmbeddings({\n *   apiKey: \"<YOUR API KEY>\",\n *   modelName: \"embedding-001\",\n * });\n *\n * // Embed a single query\n * const res = await model.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\"\n * );\n * console.log({ res });\n *\n * // Embed multiple documents\n * const documentRes = await model.embedDocuments([\"Hello world\", \"Bye bye\"]);\n * console.log({ documentRes });\n * ```\n */ class GoogleGenerativeAIEmbeddings extends _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_2__.Embeddings {\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"embedding-001\"\n        });\n        Object.defineProperty(this, \"taskType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"title\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stripNewLines\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"maxBatchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 100\n        }); // Max batch size for embedDocuments set by GenerativeModel client's batchEmbedContents call\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.modelName = fields?.modelName?.replace(/^models\\//, \"\") ?? this.modelName;\n        this.taskType = fields?.taskType ?? this.taskType;\n        this.title = fields?.title ?? this.title;\n        if (this.title && this.taskType !== \"RETRIEVAL_DOCUMENT\") {\n            throw new Error(\"title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT\");\n        }\n        this.apiKey = fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"GOOGLE_API_KEY\");\n        if (!this.apiKey) {\n            throw new Error(\"Please set an API key for Google GenerativeAI \" + \"in the environmentb variable GOOGLE_API_KEY \" + \"or in the `apiKey` field of the \" + \"GoogleGenerativeAIEmbeddings constructor\");\n        }\n        this.client = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(this.apiKey).getGenerativeModel({\n            model: this.modelName\n        });\n    }\n    _convertToContent(text) {\n        const cleanedText = this.stripNewLines ? text.replace(/\\n/g, \" \") : text;\n        return {\n            content: {\n                role: \"user\",\n                parts: [\n                    {\n                        text: cleanedText\n                    }\n                ]\n            },\n            taskType: this.taskType,\n            title: this.title\n        };\n    }\n    async _embedQueryContent(text) {\n        const req = this._convertToContent(text);\n        const res = await this.client.embedContent(req);\n        return res.embedding.values ?? [];\n    }\n    async _embedDocumentsContent(documents) {\n        const batchEmbedChunks = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_3__.chunkArray)(documents, this.maxBatchSize);\n        const batchEmbedRequests = batchEmbedChunks.map((chunk)=>({\n                requests: chunk.map((doc)=>this._convertToContent(doc))\n            }));\n        const responses = await Promise.allSettled(batchEmbedRequests.map((req)=>this.client.batchEmbedContents(req)));\n        const embeddings = responses.flatMap((res, idx)=>{\n            if (res.status === \"fulfilled\") {\n                return res.value.embeddings.map((e)=>e.values || []);\n            } else {\n                return Array(batchEmbedChunks[idx].length).fill([]);\n            }\n        });\n        return embeddings;\n    }\n    /**\n     * Method that takes a document as input and returns a promise that\n     * resolves to an embedding for the document. It calls the _embedText\n     * method with the document as the input.\n     * @param document Document for which to generate an embedding.\n     * @returns Promise that resolves to an embedding for the input document.\n     */ embedQuery(document) {\n        return this.caller.call(this._embedQueryContent.bind(this), document);\n    }\n    /**\n     * Method that takes an array of documents as input and returns a promise\n     * that resolves to a 2D array of embeddings for each document. It calls\n     * the _embedText method for each document in the array.\n     * @param documents Array of documents for which to generate embeddings.\n     * @returns Promise that resolves to a 2D array of embeddings for each input document.\n     */ embedDocuments(documents) {\n        return this.caller.call(this._embedDocumentsContent.bind(this), documents);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJEO0FBQ1E7QUFDWDtBQUNPO0FBQy9EOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW9CQyxHQUNNLE1BQU1JLHFDQUFxQ0Ysa0VBQVVBO0lBQ3hERyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQSxVQUFVLENBQUM7UUFDakJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWCxJQUFJLDRGQUE0RjtRQUNoR0wsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUND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IndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9kaXN0L2VtYmVkZGluZ3MuanM/Y2Q2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IEVtYmVkZGluZ3MgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3NcIjtcbmltcG9ydCB7IGNodW5rQXJyYXkgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2NodW5rX2FycmF5XCI7XG4vKipcbiAqIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgRW1iZWRkaW5ncyBjbGFzcyBhbmQgcHJvdmlkZXMgbWV0aG9kcyBmb3JcbiAqIGdlbmVyYXRpbmcgZW1iZWRkaW5ncyB1c2luZyB0aGUgR29vZ2xlIFBhbG0gQVBJLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG1vZGVsID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVtYmVkZGluZ3Moe1xuICogICBhcGlLZXk6IFwiPFlPVVIgQVBJIEtFWT5cIixcbiAqICAgbW9kZWxOYW1lOiBcImVtYmVkZGluZy0wMDFcIixcbiAqIH0pO1xuICpcbiAqIC8vIEVtYmVkIGEgc2luZ2xlIHF1ZXJ5XG4gKiBjb25zdCByZXMgPSBhd2FpdCBtb2RlbC5lbWJlZFF1ZXJ5KFxuICogICBcIldoYXQgd291bGQgYmUgYSBnb29kIGNvbXBhbnkgbmFtZSBmb3IgYSBjb21wYW55IHRoYXQgbWFrZXMgY29sb3JmdWwgc29ja3M/XCJcbiAqICk7XG4gKiBjb25zb2xlLmxvZyh7IHJlcyB9KTtcbiAqXG4gKiAvLyBFbWJlZCBtdWx0aXBsZSBkb2N1bWVudHNcbiAqIGNvbnN0IGRvY3VtZW50UmVzID0gYXdhaXQgbW9kZWwuZW1iZWREb2N1bWVudHMoW1wiSGVsbG8gd29ybGRcIiwgXCJCeWUgYnllXCJdKTtcbiAqIGNvbnNvbGUubG9nKHsgZG9jdW1lbnRSZXMgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSUVtYmVkZGluZ3MgZXh0ZW5kcyBFbWJlZGRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzID8/IHt9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJlbWJlZGRpbmctMDAxXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhc2tUeXBlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpdGxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmlwTmV3TGluZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heEJhdGNoU2l6ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMTAwXG4gICAgICAgIH0pOyAvLyBNYXggYmF0Y2ggc2l6ZSBmb3IgZW1iZWREb2N1bWVudHMgc2V0IGJ5IEdlbmVyYXRpdmVNb2RlbCBjbGllbnQncyBiYXRjaEVtYmVkQ29udGVudHMgY2FsbFxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPVxuICAgICAgICAgICAgZmllbGRzPy5tb2RlbE5hbWU/LnJlcGxhY2UoL15tb2RlbHNcXC8vLCBcIlwiKSA/PyB0aGlzLm1vZGVsTmFtZTtcbiAgICAgICAgdGhpcy50YXNrVHlwZSA9IGZpZWxkcz8udGFza1R5cGUgPz8gdGhpcy50YXNrVHlwZTtcbiAgICAgICAgdGhpcy50aXRsZSA9IGZpZWxkcz8udGl0bGUgPz8gdGhpcy50aXRsZTtcbiAgICAgICAgaWYgKHRoaXMudGl0bGUgJiYgdGhpcy50YXNrVHlwZSAhPT0gXCJSRVRSSUVWQUxfRE9DVU1FTlRcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGl0bGUgY2FuIG9ubHkgYmUgc2VwY2lmaWVkIHdpdGggVGFza1R5cGUuUkVUUklFVkFMX0RPQ1VNRU5UXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gZmllbGRzPy5hcGlLZXkgPz8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkdPT0dMRV9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoIXRoaXMuYXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2Ugc2V0IGFuIEFQSSBrZXkgZm9yIEdvb2dsZSBHZW5lcmF0aXZlQUkgXCIgK1xuICAgICAgICAgICAgICAgIFwiaW4gdGhlIGVudmlyb25tZW50YiB2YXJpYWJsZSBHT09HTEVfQVBJX0tFWSBcIiArXG4gICAgICAgICAgICAgICAgXCJvciBpbiB0aGUgYGFwaUtleWAgZmllbGQgb2YgdGhlIFwiICtcbiAgICAgICAgICAgICAgICBcIkdvb2dsZUdlbmVyYXRpdmVBSUVtYmVkZGluZ3MgY29uc3RydWN0b3JcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKHRoaXMuYXBpS2V5KS5nZXRHZW5lcmF0aXZlTW9kZWwoe1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2NvbnZlcnRUb0NvbnRlbnQodGV4dCkge1xuICAgICAgICBjb25zdCBjbGVhbmVkVGV4dCA9IHRoaXMuc3RyaXBOZXdMaW5lcyA/IHRleHQucmVwbGFjZSgvXFxuL2csIFwiIFwiKSA6IHRleHQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZW50OiB7IHJvbGU6IFwidXNlclwiLCBwYXJ0czogW3sgdGV4dDogY2xlYW5lZFRleHQgfV0gfSxcbiAgICAgICAgICAgIHRhc2tUeXBlOiB0aGlzLnRhc2tUeXBlLFxuICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIF9lbWJlZFF1ZXJ5Q29udGVudCh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHJlcSA9IHRoaXMuX2NvbnZlcnRUb0NvbnRlbnQodGV4dCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmVtYmVkQ29udGVudChyZXEpO1xuICAgICAgICByZXR1cm4gcmVzLmVtYmVkZGluZy52YWx1ZXMgPz8gW107XG4gICAgfVxuICAgIGFzeW5jIF9lbWJlZERvY3VtZW50c0NvbnRlbnQoZG9jdW1lbnRzKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoRW1iZWRDaHVua3MgPSBjaHVua0FycmF5KGRvY3VtZW50cywgdGhpcy5tYXhCYXRjaFNpemUpO1xuICAgICAgICBjb25zdCBiYXRjaEVtYmVkUmVxdWVzdHMgPSBiYXRjaEVtYmVkQ2h1bmtzLm1hcCgoY2h1bmspID0+ICh7XG4gICAgICAgICAgICByZXF1ZXN0czogY2h1bmsubWFwKChkb2MpID0+IHRoaXMuX2NvbnZlcnRUb0NvbnRlbnQoZG9jKSksXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGJhdGNoRW1iZWRSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gdGhpcy5jbGllbnQuYmF0Y2hFbWJlZENvbnRlbnRzKHJlcSkpKTtcbiAgICAgICAgY29uc3QgZW1iZWRkaW5ncyA9IHJlc3BvbnNlcy5mbGF0TWFwKChyZXMsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnZhbHVlLmVtYmVkZGluZ3MubWFwKChlKSA9PiBlLnZhbHVlcyB8fCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkoYmF0Y2hFbWJlZENodW5rc1tpZHhdLmxlbmd0aCkuZmlsbChbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZW1iZWRkaW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgdGFrZXMgYSBkb2N1bWVudCBhcyBpbnB1dCBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdFxuICAgICAqIHJlc29sdmVzIHRvIGFuIGVtYmVkZGluZyBmb3IgdGhlIGRvY3VtZW50LiBJdCBjYWxscyB0aGUgX2VtYmVkVGV4dFxuICAgICAqIG1ldGhvZCB3aXRoIHRoZSBkb2N1bWVudCBhcyB0aGUgaW5wdXQuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IERvY3VtZW50IGZvciB3aGljaCB0byBnZW5lcmF0ZSBhbiBlbWJlZGRpbmcuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtYmVkZGluZyBmb3IgdGhlIGlucHV0IGRvY3VtZW50LlxuICAgICAqL1xuICAgIGVtYmVkUXVlcnkoZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwodGhpcy5fZW1iZWRRdWVyeUNvbnRlbnQuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdGhhdCB0YWtlcyBhbiBhcnJheSBvZiBkb2N1bWVudHMgYXMgaW5wdXQgYW5kIHJldHVybnMgYSBwcm9taXNlXG4gICAgICogdGhhdCByZXNvbHZlcyB0byBhIDJEIGFycmF5IG9mIGVtYmVkZGluZ3MgZm9yIGVhY2ggZG9jdW1lbnQuIEl0IGNhbGxzXG4gICAgICogdGhlIF9lbWJlZFRleHQgbWV0aG9kIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBhcnJheS5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRzIEFycmF5IG9mIGRvY3VtZW50cyBmb3Igd2hpY2ggdG8gZ2VuZXJhdGUgZW1iZWRkaW5ncy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSAyRCBhcnJheSBvZiBlbWJlZGRpbmdzIGZvciBlYWNoIGlucHV0IGRvY3VtZW50LlxuICAgICAqL1xuICAgIGVtYmVkRG9jdW1lbnRzKGRvY3VtZW50cykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsZXIuY2FsbCh0aGlzLl9lbWJlZERvY3VtZW50c0NvbnRlbnQuYmluZCh0aGlzKSwgZG9jdW1lbnRzKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkVtYmVkZGluZ3MiLCJjaHVua0FycmF5IiwiR29vZ2xlR2VuZXJhdGl2ZUFJRW1iZWRkaW5ncyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm1vZGVsTmFtZSIsInJlcGxhY2UiLCJ0YXNrVHlwZSIsInRpdGxlIiwiRXJyb3IiLCJhcGlLZXkiLCJjbGllbnQiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJtb2RlbCIsIl9jb252ZXJ0VG9Db250ZW50IiwidGV4dCIsImNsZWFuZWRUZXh0Iiwic3RyaXBOZXdMaW5lcyIsImNvbnRlbnQiLCJyb2xlIiwicGFydHMiLCJfZW1iZWRRdWVyeUNvbnRlbnQiLCJyZXEiLCJyZXMiLCJlbWJlZENvbnRlbnQiLCJlbWJlZGRpbmciLCJ2YWx1ZXMiLCJfZW1iZWREb2N1bWVudHNDb250ZW50IiwiZG9jdW1lbnRzIiwiYmF0Y2hFbWJlZENodW5rcyIsIm1heEJhdGNoU2l6ZSIsImJhdGNoRW1iZWRSZXF1ZXN0cyIsIm1hcCIsImNodW5rIiwicmVxdWVzdHMiLCJkb2MiLCJyZXNwb25zZXMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsImJhdGNoRW1iZWRDb250ZW50cyIsImVtYmVkZGluZ3MiLCJmbGF0TWFwIiwiaWR4Iiwic3RhdHVzIiwiZSIsIkFycmF5IiwibGVuZ3RoIiwiZmlsbCIsImVtYmVkUXVlcnkiLCJkb2N1bWVudCIsImNhbGxlciIsImNhbGwiLCJiaW5kIiwiZW1iZWREb2N1bWVudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_0__.ChatGoogleGenerativeAI),\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_1__.GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat_models.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/chat_models.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./embeddings.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/embeddings.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9kaXN0L2luZGV4LmpzPzEwNWIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vY2hhdF9tb2RlbHMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2VtYmVkZGluZ3MuanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/utils.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/utils.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertAuthorToRole: () => (/* binding */ convertAuthorToRole),\n/* harmony export */   convertBaseMessagesToContent: () => (/* binding */ convertBaseMessagesToContent),\n/* harmony export */   convertMessageContentToParts: () => (/* binding */ convertMessageContentToParts),\n/* harmony export */   convertResponseContentToChatGenerationChunk: () => (/* binding */ convertResponseContentToChatGenerationChunk),\n/* harmony export */   getMessageAuthor: () => (/* binding */ getMessageAuthor),\n/* harmony export */   mapGenerateContentResultToChatResult: () => (/* binding */ mapGenerateContentResultToChatResult)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n\n\nfunction getMessageAuthor(message) {\n    const type = message._getType();\n    if (_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessage.isInstance(message)) {\n        return message.role;\n    }\n    return message.name ?? type;\n}\n/**\n * Maps a message type to a Google Generative AI chat author.\n * @param message The message to map.\n * @param model The model to use for mapping.\n * @returns The message type mapped to a Google Generative AI chat author.\n */ function convertAuthorToRole(author) {\n    switch(author){\n        /**\n         *  Note: Gemini currently is not supporting system messages\n         *  we will convert them to human messages and merge with following\n         * */ case \"ai\":\n        case \"model\":\n            return \"model\";\n        case \"system\":\n        case \"human\":\n            return \"user\";\n        default:\n            throw new Error(`Unknown / unsupported author: ${author}`);\n    }\n}\nfunction convertMessageContentToParts(content, isMultimodalModel) {\n    if (typeof content === \"string\") {\n        return [\n            {\n                text: content\n            }\n        ];\n    }\n    return content.map((c)=>{\n        if (c.type === \"text\") {\n            return {\n                text: c.text\n            };\n        }\n        if (c.type === \"image_url\") {\n            if (!isMultimodalModel) {\n                throw new Error(`This model does not support images`);\n            }\n            if (typeof c.image_url !== \"string\") {\n                throw new Error(\"Please provide image as base64 encoded data URL\");\n            }\n            const [dm, data] = c.image_url.split(\",\");\n            if (!dm.startsWith(\"data:\")) {\n                throw new Error(\"Please provide image as base64 encoded data URL\");\n            }\n            const [mimeType, encoding] = dm.replace(/^data:/, \"\").split(\";\");\n            if (encoding !== \"base64\") {\n                throw new Error(\"Please provide image as base64 encoded data URL\");\n            }\n            return {\n                inlineData: {\n                    data,\n                    mimeType\n                }\n            };\n        }\n        throw new Error(`Unknown content type ${c.type}`);\n    });\n}\nfunction convertBaseMessagesToContent(messages, isMultimodalModel) {\n    return messages.reduce((acc, message, index)=>{\n        if (!(0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(message)) {\n            throw new Error(\"Unsupported message input\");\n        }\n        const author = getMessageAuthor(message);\n        if (author === \"system\" && index !== 0) {\n            throw new Error(\"System message should be the first one\");\n        }\n        const role = convertAuthorToRole(author);\n        const prevContent = acc.content[acc.content.length];\n        if (!acc.mergeWithPreviousContent && prevContent && prevContent.role === role) {\n            throw new Error(\"Google Generative AI requires alternate messages between authors\");\n        }\n        const parts = convertMessageContentToParts(message.content, isMultimodalModel);\n        if (acc.mergeWithPreviousContent) {\n            const prevContent = acc.content[acc.content.length - 1];\n            if (!prevContent) {\n                throw new Error(\"There was a problem parsing your system message. Please try a prompt without one.\");\n            }\n            prevContent.parts.push(...parts);\n            return {\n                mergeWithPreviousContent: false,\n                content: acc.content\n            };\n        }\n        const content = {\n            role,\n            parts\n        };\n        return {\n            mergeWithPreviousContent: author === \"system\",\n            content: [\n                ...acc.content,\n                content\n            ]\n        };\n    }, {\n        content: [],\n        mergeWithPreviousContent: false\n    }).content;\n}\nfunction mapGenerateContentResultToChatResult(response) {\n    // if rejected or error, return empty generations with reason in filters\n    if (!response.candidates || response.candidates.length === 0 || !response.candidates[0]) {\n        return {\n            generations: [],\n            llmOutput: {\n                filters: response.promptFeedback\n            }\n        };\n    }\n    const [candidate] = response.candidates;\n    const { content, ...generationInfo } = candidate;\n    const text = content?.parts[0]?.text ?? \"\";\n    const generation = {\n        text,\n        message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n            content: text,\n            name: !content ? undefined : content.role,\n            additional_kwargs: generationInfo\n        }),\n        generationInfo\n    };\n    return {\n        generations: [\n            generation\n        ]\n    };\n}\nfunction convertResponseContentToChatGenerationChunk(response) {\n    if (!response.candidates || response.candidates.length === 0) {\n        return null;\n    }\n    const [candidate] = response.candidates;\n    const { content, ...generationInfo } = candidate;\n    const text = content?.parts[0]?.text ?? \"\";\n    return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n        text,\n        message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n            content: text,\n            name: !content ? undefined : content.role,\n            // Each chunk can have unique \"generationInfo\", and merging strategy is unclear,\n            // so leave blank for now.\n            additional_kwargs: {}\n        }),\n        generationInfo\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFrRztBQUNuQztBQUN4RCxTQUFTSyxpQkFBaUJDLE9BQU87SUFDcEMsTUFBTUMsT0FBT0QsUUFBUUUsUUFBUTtJQUM3QixJQUFJTixpRUFBV0EsQ0FBQ08sVUFBVSxDQUFDSCxVQUFVO1FBQ2pDLE9BQU9BLFFBQVFJLElBQUk7SUFDdkI7SUFDQSxPQUFPSixRQUFRSyxJQUFJLElBQUlKO0FBQzNCO0FBQ0E7Ozs7O0NBS0MsR0FDTSxTQUFTSyxvQkFBb0JDLE1BQU07SUFDdEMsT0FBUUE7UUFDSjs7O1dBR0csR0FDSCxLQUFLO1FBQ0wsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1FBQ0wsS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE1BQU0sSUFBSUMsTUFBTSxDQUFDLDhCQUE4QixFQUFFRCxPQUFPLENBQUM7SUFDakU7QUFDSjtBQUNPLFNBQVNFLDZCQUE2QkMsT0FBTyxFQUFFQyxpQkFBaUI7SUFDbkUsSUFBSSxPQUFPRCxZQUFZLFVBQVU7UUFDN0IsT0FBTztZQUFDO2dCQUFFRSxNQUFNRjtZQUFRO1NBQUU7SUFDOUI7SUFDQSxPQUFPQSxRQUFRRyxHQUFHLENBQUMsQ0FBQ0M7UUFDaEIsSUFBSUEsRUFBRWIsSUFBSSxLQUFLLFFBQVE7WUFDbkIsT0FBTztnQkFDSFcsTUFBTUUsRUFBRUYsSUFBSTtZQUNoQjtRQUNKO1FBQ0EsSUFBSUUsRUFBRWIsSUFBSSxLQUFLLGFBQWE7WUFDeEIsSUFBSSxDQUFDVSxtQkFBbUI7Z0JBQ3BCLE1BQU0sSUFBSUgsTUFBTSxDQUFDLGtDQUFrQyxDQUFDO1lBQ3hEO1lBQ0EsSUFBSSxPQUFPTSxFQUFFQyxTQUFTLEtBQUssVUFBVTtnQkFDakMsTUFBTSxJQUFJUCxNQUFNO1lBQ3BCO1lBQ0EsTUFBTSxDQUFDUSxJQUFJQyxLQUFLLEdBQUdILEVBQUVDLFNBQVMsQ0FBQ0cs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U0FBU0MsVUFBVSxJQUFJRCxTQUFTQyxVQUFVLENBQUNOLE1BQU0sS0FBSyxHQUFHO1FBQzFELE9BQU87SUFDWDtJQUNBLE1BQU0sQ0FBQ1csVUFBVSxHQUFHTixTQUFTQyxVQUFVO0lBQ3ZDLE1BQU0sRUFBRTFCLE9BQU8sRUFBRSxHQUFHZ0MsZ0JBQWdCLEdBQUdEO0lBQ3ZDLE1BQU03QixPQUFPRixTQUFTc0IsS0FBSyxDQUFDLEVBQUUsRUFBRXBCLFFBQVE7SUFDeEMsT0FBTyxJQUFJZCx3RUFBbUJBLENBQUM7UUFDM0JjO1FBQ0FaLFNBQVMsSUFBSUwsb0VBQWNBLENBQUM7WUFDeEJlLFNBQVNFO1lBQ1RQLE1BQU0sQ0FBQ0ssVUFBVWtDLFlBQVlsQyxRQUFRTixJQUFJO1lBQ3pDLGdGQUFnRjtZQUNoRiwwQkFBMEI7WUFDMUJ5QyxtQkFBbUIsQ0FBQztRQUN4QjtRQUNBSDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9kaXN0L3V0aWxzLmpzPzJjZGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUlNZXNzYWdlLCBBSU1lc3NhZ2VDaHVuaywgQ2hhdE1lc3NhZ2UsIGlzQmFzZU1lc3NhZ2UsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgQ2hhdEdlbmVyYXRpb25DaHVuaywgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL291dHB1dHNcIjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRNZXNzYWdlQXV0aG9yKG1lc3NhZ2UpIHtcbiAgICBjb25zdCB0eXBlID0gbWVzc2FnZS5fZ2V0VHlwZSgpO1xuICAgIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKG1lc3NhZ2UpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlLnJvbGU7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlLm5hbWUgPz8gdHlwZTtcbn1cbi8qKlxuICogTWFwcyBhIG1lc3NhZ2UgdHlwZSB0byBhIEdvb2dsZSBHZW5lcmF0aXZlIEFJIGNoYXQgYXV0aG9yLlxuICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gbWFwLlxuICogQHBhcmFtIG1vZGVsIFRoZSBtb2RlbCB0byB1c2UgZm9yIG1hcHBpbmcuXG4gKiBAcmV0dXJucyBUaGUgbWVzc2FnZSB0eXBlIG1hcHBlZCB0byBhIEdvb2dsZSBHZW5lcmF0aXZlIEFJIGNoYXQgYXV0aG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydEF1dGhvclRvUm9sZShhdXRob3IpIHtcbiAgICBzd2l0Y2ggKGF1dGhvcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogIE5vdGU6IEdlbWluaSBjdXJyZW50bHkgaXMgbm90IHN1cHBvcnRpbmcgc3lzdGVtIG1lc3NhZ2VzXG4gICAgICAgICAqICB3ZSB3aWxsIGNvbnZlcnQgdGhlbSB0byBodW1hbiBtZXNzYWdlcyBhbmQgbWVyZ2Ugd2l0aCBmb2xsb3dpbmdcbiAgICAgICAgICogKi9cbiAgICAgICAgY2FzZSBcImFpXCI6XG4gICAgICAgIGNhc2UgXCJtb2RlbFwiOiAvLyBnZXRNZXNzYWdlQXV0aG9yIHJldHVybnMgbWVzc2FnZS5uYW1lLiBjb2RlIGV4LjogcmV0dXJuIG1lc3NhZ2UubmFtZSA/PyB0eXBlO1xuICAgICAgICAgICAgcmV0dXJuIFwibW9kZWxcIjtcbiAgICAgICAgY2FzZSBcInN5c3RlbVwiOlxuICAgICAgICBjYXNlIFwiaHVtYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcInVzZXJcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biAvIHVuc3VwcG9ydGVkIGF1dGhvcjogJHthdXRob3J9YCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRNZXNzYWdlQ29udGVudFRvUGFydHMoY29udGVudCwgaXNNdWx0aW1vZGFsTW9kZWwpIHtcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIFt7IHRleHQ6IGNvbnRlbnQgfV07XG4gICAgfVxuICAgIHJldHVybiBjb250ZW50Lm1hcCgoYykgPT4ge1xuICAgICAgICBpZiAoYy50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBjLnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjLnR5cGUgPT09IFwiaW1hZ2VfdXJsXCIpIHtcbiAgICAgICAgICAgIGlmICghaXNNdWx0aW1vZGFsTW9kZWwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoaXMgbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBpbWFnZXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgYy5pbWFnZV91cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBpbWFnZSBhcyBiYXNlNjQgZW5jb2RlZCBkYXRhIFVSTFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFtkbSwgZGF0YV0gPSBjLmltYWdlX3VybC5zcGxpdChcIixcIik7XG4gICAgICAgICAgICBpZiAoIWRtLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGltYWdlIGFzIGJhc2U2NCBlbmNvZGVkIGRhdGEgVVJMXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgW21pbWVUeXBlLCBlbmNvZGluZ10gPSBkbS5yZXBsYWNlKC9eZGF0YTovLCBcIlwiKS5zcGxpdChcIjtcIik7XG4gICAgICAgICAgICBpZiAoZW5jb2RpbmcgIT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBpbWFnZSBhcyBiYXNlNjQgZW5jb2RlZCBkYXRhIFVSTFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW5saW5lRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29udGVudCB0eXBlICR7Yy50eXBlfWApO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRCYXNlTWVzc2FnZXNUb0NvbnRlbnQobWVzc2FnZXMsIGlzTXVsdGltb2RhbE1vZGVsKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLnJlZHVjZSgoYWNjLCBtZXNzYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoIWlzQmFzZU1lc3NhZ2UobWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIG1lc3NhZ2UgaW5wdXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXV0aG9yID0gZ2V0TWVzc2FnZUF1dGhvcihtZXNzYWdlKTtcbiAgICAgICAgaWYgKGF1dGhvciA9PT0gXCJzeXN0ZW1cIiAmJiBpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3lzdGVtIG1lc3NhZ2Ugc2hvdWxkIGJlIHRoZSBmaXJzdCBvbmVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm9sZSA9IGNvbnZlcnRBdXRob3JUb1JvbGUoYXV0aG9yKTtcbiAgICAgICAgY29uc3QgcHJldkNvbnRlbnQgPSBhY2MuY29udGVudFthY2MuY29udGVudC5sZW5ndGhdO1xuICAgICAgICBpZiAoIWFjYy5tZXJnZVdpdGhQcmV2aW91c0NvbnRlbnQgJiZcbiAgICAgICAgICAgIHByZXZDb250ZW50ICYmXG4gICAgICAgICAgICBwcmV2Q29udGVudC5yb2xlID09PSByb2xlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgR2VuZXJhdGl2ZSBBSSByZXF1aXJlcyBhbHRlcm5hdGUgbWVzc2FnZXMgYmV0d2VlbiBhdXRob3JzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnRzID0gY29udmVydE1lc3NhZ2VDb250ZW50VG9QYXJ0cyhtZXNzYWdlLmNvbnRlbnQsIGlzTXVsdGltb2RhbE1vZGVsKTtcbiAgICAgICAgaWYgKGFjYy5tZXJnZVdpdGhQcmV2aW91c0NvbnRlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXZDb250ZW50ID0gYWNjLmNvbnRlbnRbYWNjLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAoIXByZXZDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBwYXJzaW5nIHlvdXIgc3lzdGVtIG1lc3NhZ2UuIFBsZWFzZSB0cnkgYSBwcm9tcHQgd2l0aG91dCBvbmUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldkNvbnRlbnQucGFydHMucHVzaCguLi5wYXJ0cyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lcmdlV2l0aFByZXZpb3VzQ29udGVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29udGVudDogYWNjLmNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB7XG4gICAgICAgICAgICByb2xlLFxuICAgICAgICAgICAgcGFydHMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXJnZVdpdGhQcmV2aW91c0NvbnRlbnQ6IGF1dGhvciA9PT0gXCJzeXN0ZW1cIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFsuLi5hY2MuY29udGVudCwgY29udGVudF0sXG4gICAgICAgIH07XG4gICAgfSwgeyBjb250ZW50OiBbXSwgbWVyZ2VXaXRoUHJldmlvdXNDb250ZW50OiBmYWxzZSB9KS5jb250ZW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1hcEdlbmVyYXRlQ29udGVudFJlc3VsdFRvQ2hhdFJlc3VsdChyZXNwb25zZSkge1xuICAgIC8vIGlmIHJlamVjdGVkIG9yIGVycm9yLCByZXR1cm4gZW1wdHkgZ2VuZXJhdGlvbnMgd2l0aCByZWFzb24gaW4gZmlsdGVyc1xuICAgIGlmICghcmVzcG9uc2UuY2FuZGlkYXRlcyB8fFxuICAgICAgICByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAhcmVzcG9uc2UuY2FuZGlkYXRlc1swXSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtdLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgZmlsdGVyczogcmVzcG9uc2UucHJvbXB0RmVlZGJhY2ssXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBbY2FuZGlkYXRlXSA9IHJlc3BvbnNlLmNhbmRpZGF0ZXM7XG4gICAgY29uc3QgeyBjb250ZW50LCAuLi5nZW5lcmF0aW9uSW5mbyB9ID0gY2FuZGlkYXRlO1xuICAgIGNvbnN0IHRleHQgPSBjb250ZW50Py5wYXJ0c1swXT8udGV4dCA/PyBcIlwiO1xuICAgIGNvbnN0IGdlbmVyYXRpb24gPSB7XG4gICAgICAgIHRleHQsXG4gICAgICAgIG1lc3NhZ2U6IG5ldyBBSU1lc3NhZ2Uoe1xuICAgICAgICAgICAgY29udGVudDogdGV4dCxcbiAgICAgICAgICAgIG5hbWU6ICFjb250ZW50ID8gdW5kZWZpbmVkIDogY29udGVudC5yb2xlLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGdlbmVyYXRpb25JbmZvLFxuICAgICAgICB9KSxcbiAgICAgICAgZ2VuZXJhdGlvbkluZm8sXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZW5lcmF0aW9uczogW2dlbmVyYXRpb25dLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFJlc3BvbnNlQ29udGVudFRvQ2hhdEdlbmVyYXRpb25DaHVuayhyZXNwb25zZSkge1xuICAgIGlmICghcmVzcG9uc2UuY2FuZGlkYXRlcyB8fCByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgW2NhbmRpZGF0ZV0gPSByZXNwb25zZS5jYW5kaWRhdGVzO1xuICAgIGNvbnN0IHsgY29udGVudCwgLi4uZ2VuZXJhdGlvbkluZm8gfSA9IGNhbmRpZGF0ZTtcbiAgICBjb25zdCB0ZXh0ID0gY29udGVudD8ucGFydHNbMF0/LnRleHQgPz8gXCJcIjtcbiAgICByZXR1cm4gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICB0ZXh0LFxuICAgICAgICBtZXNzYWdlOiBuZXcgQUlNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogdGV4dCxcbiAgICAgICAgICAgIG5hbWU6ICFjb250ZW50ID8gdW5kZWZpbmVkIDogY29udGVudC5yb2xlLFxuICAgICAgICAgICAgLy8gRWFjaCBjaHVuayBjYW4gaGF2ZSB1bmlxdWUgXCJnZW5lcmF0aW9uSW5mb1wiLCBhbmQgbWVyZ2luZyBzdHJhdGVneSBpcyB1bmNsZWFyLFxuICAgICAgICAgICAgLy8gc28gbGVhdmUgYmxhbmsgZm9yIG5vdy5cbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiB7fSxcbiAgICAgICAgfSksXG4gICAgICAgIGdlbmVyYXRpb25JbmZvLFxuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbIkFJTWVzc2FnZSIsIkFJTWVzc2FnZUNodW5rIiwiQ2hhdE1lc3NhZ2UiLCJpc0Jhc2VNZXNzYWdlIiwiQ2hhdEdlbmVyYXRpb25DaHVuayIsImdldE1lc3NhZ2VBdXRob3IiLCJtZXNzYWdlIiwidHlwZSIsIl9nZXRUeXBlIiwiaXNJbnN0YW5jZSIsInJvbGUiLCJuYW1lIiwiY29udmVydEF1dGhvclRvUm9sZSIsImF1dGhvciIsIkVycm9yIiwiY29udmVydE1lc3NhZ2VDb250ZW50VG9QYXJ0cyIsImNvbnRlbnQiLCJpc011bHRpbW9kYWxNb2RlbCIsInRleHQiLCJtYXAiLCJjIiwiaW1hZ2VfdXJsIiwiZG0iLCJkYXRhIiwic3BsaXQiLCJzdGFydHNXaXRoIiwibWltZVR5cGUiLCJlbmNvZGluZyIsInJlcGxhY2UiLCJpbmxpbmVEYXRhIiwiY29udmVydEJhc2VNZXNzYWdlc1RvQ29udGVudCIsIm1lc3NhZ2VzIiwicmVkdWNlIiwiYWNjIiwiaW5kZXgiLCJwcmV2Q29udGVudCIsImxlbmd0aCIsIm1lcmdlV2l0aFByZXZpb3VzQ29udGVudCIsInBhcnRzIiwicHVzaCIsIm1hcEdlbmVyYXRlQ29udGVudFJlc3VsdFRvQ2hhdFJlc3VsdCIsInJlc3BvbnNlIiwiY2FuZGlkYXRlcyIsImdlbmVyYXRpb25zIiwibGxtT3V0cHV0IiwiZmlsdGVycyIsInByb21wdEZlZWRiYWNrIiwiY2FuZGlkYXRlIiwiZ2VuZXJhdGlvbkluZm8iLCJnZW5lcmF0aW9uIiwidW5kZWZpbmVkIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJjb252ZXJ0UmVzcG9uc2VDb250ZW50VG9DaGF0R2VuZXJhdGlvbkNodW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@langchain/google-genai/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatGoogleGenerativeAI),\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvaW5kZXguanM/Yzk1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@google/generative-ai/dist/index.mjs":
/*!************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@google/generative-ai/dist/index.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlockReason: () => (/* binding */ BlockReason),\n/* harmony export */   ChatSession: () => (/* binding */ ChatSession),\n/* harmony export */   FinishReason: () => (/* binding */ FinishReason),\n/* harmony export */   GenerativeModel: () => (/* binding */ GenerativeModel),\n/* harmony export */   GoogleGenerativeAI: () => (/* binding */ GoogleGenerativeAI),\n/* harmony export */   HarmBlockThreshold: () => (/* binding */ HarmBlockThreshold),\n/* harmony export */   HarmCategory: () => (/* binding */ HarmCategory),\n/* harmony export */   HarmProbability: () => (/* binding */ HarmProbability),\n/* harmony export */   TaskType: () => (/* binding */ TaskType)\n/* harmony export */ });\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ /**\n * Harm categories that would cause prompts or candidates to be blocked.\n * @public\n */ var HarmCategory;\n(function(HarmCategory) {\n    HarmCategory[\"HARM_CATEGORY_UNSPECIFIED\"] = \"HARM_CATEGORY_UNSPECIFIED\";\n    HarmCategory[\"HARM_CATEGORY_HATE_SPEECH\"] = \"HARM_CATEGORY_HATE_SPEECH\";\n    HarmCategory[\"HARM_CATEGORY_SEXUALLY_EXPLICIT\"] = \"HARM_CATEGORY_SEXUALLY_EXPLICIT\";\n    HarmCategory[\"HARM_CATEGORY_HARASSMENT\"] = \"HARM_CATEGORY_HARASSMENT\";\n    HarmCategory[\"HARM_CATEGORY_DANGEROUS_CONTENT\"] = \"HARM_CATEGORY_DANGEROUS_CONTENT\";\n})(HarmCategory || (HarmCategory = {}));\n/**\n * Threshhold above which a prompt or candidate will be blocked.\n * @public\n */ var HarmBlockThreshold;\n(function(HarmBlockThreshold) {\n    // Threshold is unspecified.\n    HarmBlockThreshold[\"HARM_BLOCK_THRESHOLD_UNSPECIFIED\"] = \"HARM_BLOCK_THRESHOLD_UNSPECIFIED\";\n    // Content with NEGLIGIBLE will be allowed.\n    HarmBlockThreshold[\"BLOCK_LOW_AND_ABOVE\"] = \"BLOCK_LOW_AND_ABOVE\";\n    // Content with NEGLIGIBLE and LOW will be allowed.\n    HarmBlockThreshold[\"BLOCK_MEDIUM_AND_ABOVE\"] = \"BLOCK_MEDIUM_AND_ABOVE\";\n    // Content with NEGLIGIBLE, LOW, and MEDIUM will be allowed.\n    HarmBlockThreshold[\"BLOCK_ONLY_HIGH\"] = \"BLOCK_ONLY_HIGH\";\n    // All content will be allowed.\n    HarmBlockThreshold[\"BLOCK_NONE\"] = \"BLOCK_NONE\";\n})(HarmBlockThreshold || (HarmBlockThreshold = {}));\n/**\n * Probability that a prompt or candidate matches a harm category.\n * @public\n */ var HarmProbability;\n(function(HarmProbability) {\n    // Probability is unspecified.\n    HarmProbability[\"HARM_PROBABILITY_UNSPECIFIED\"] = \"HARM_PROBABILITY_UNSPECIFIED\";\n    // Content has a negligible chance of being unsafe.\n    HarmProbability[\"NEGLIGIBLE\"] = \"NEGLIGIBLE\";\n    // Content has a low chance of being unsafe.\n    HarmProbability[\"LOW\"] = \"LOW\";\n    // Content has a medium chance of being unsafe.\n    HarmProbability[\"MEDIUM\"] = \"MEDIUM\";\n    // Content has a high chance of being unsafe.\n    HarmProbability[\"HIGH\"] = \"HIGH\";\n})(HarmProbability || (HarmProbability = {}));\n/**\n * Reason that a prompt was blocked.\n * @public\n */ var BlockReason;\n(function(BlockReason) {\n    // A blocked reason was not specified.\n    BlockReason[\"BLOCKED_REASON_UNSPECIFIED\"] = \"BLOCKED_REASON_UNSPECIFIED\";\n    // Content was blocked by safety settings.\n    BlockReason[\"SAFETY\"] = \"SAFETY\";\n    // Content was blocked, but the reason is uncategorized.\n    BlockReason[\"OTHER\"] = \"OTHER\";\n})(BlockReason || (BlockReason = {}));\n/**\n * Reason that a candidate finished.\n * @public\n */ var FinishReason;\n(function(FinishReason) {\n    // Default value. This value is unused.\n    FinishReason[\"FINISH_REASON_UNSPECIFIED\"] = \"FINISH_REASON_UNSPECIFIED\";\n    // Natural stop point of the model or provided stop sequence.\n    FinishReason[\"STOP\"] = \"STOP\";\n    // The maximum number of tokens as specified in the request was reached.\n    FinishReason[\"MAX_TOKENS\"] = \"MAX_TOKENS\";\n    // The candidate content was flagged for safety reasons.\n    FinishReason[\"SAFETY\"] = \"SAFETY\";\n    // The candidate content was flagged for recitation reasons.\n    FinishReason[\"RECITATION\"] = \"RECITATION\";\n    // Unknown reason.\n    FinishReason[\"OTHER\"] = \"OTHER\";\n})(FinishReason || (FinishReason = {}));\n/**\n * Task type for embedding content.\n * @public\n */ var TaskType;\n(function(TaskType) {\n    TaskType[\"TASK_TYPE_UNSPECIFIED\"] = \"TASK_TYPE_UNSPECIFIED\";\n    TaskType[\"RETRIEVAL_QUERY\"] = \"RETRIEVAL_QUERY\";\n    TaskType[\"RETRIEVAL_DOCUMENT\"] = \"RETRIEVAL_DOCUMENT\";\n    TaskType[\"SEMANTIC_SIMILARITY\"] = \"SEMANTIC_SIMILARITY\";\n    TaskType[\"CLASSIFICATION\"] = \"CLASSIFICATION\";\n    TaskType[\"CLUSTERING\"] = \"CLUSTERING\";\n})(TaskType || (TaskType = {}));\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ class GoogleGenerativeAIError extends Error {\n    constructor(message){\n        super(`[GoogleGenerativeAI Error]: ${message}`);\n    }\n}\nclass GoogleGenerativeAIResponseError extends GoogleGenerativeAIError {\n    constructor(message, response){\n        super(message);\n        this.response = response;\n    }\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ const BASE_URL = \"https://generativelanguage.googleapis.com\";\nconst API_VERSION = \"v1\";\n/**\n * We can't `require` package.json if this runs on web. We will use rollup to\n * swap in the version number here at build time.\n */ const PACKAGE_VERSION = \"0.1.3\";\nconst PACKAGE_LOG_HEADER = \"genai-js\";\nvar Task;\n(function(Task) {\n    Task[\"GENERATE_CONTENT\"] = \"generateContent\";\n    Task[\"STREAM_GENERATE_CONTENT\"] = \"streamGenerateContent\";\n    Task[\"COUNT_TOKENS\"] = \"countTokens\";\n    Task[\"EMBED_CONTENT\"] = \"embedContent\";\n    Task[\"BATCH_EMBED_CONTENTS\"] = \"batchEmbedContents\";\n})(Task || (Task = {}));\nclass RequestUrl {\n    constructor(model, task, apiKey, stream){\n        this.model = model;\n        this.task = task;\n        this.apiKey = apiKey;\n        this.stream = stream;\n    }\n    toString() {\n        let url = `${BASE_URL}/${API_VERSION}/models/${this.model}:${this.task}`;\n        if (this.stream) {\n            url += \"?alt=sse\";\n        }\n        return url;\n    }\n}\n/**\n * Simple, but may become more complex if we add more versions to log.\n */ function getClientHeaders() {\n    return `${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`;\n}\nasync function makeRequest(url, body) {\n    let response;\n    try {\n        response = await fetch(url.toString(), {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-goog-api-client\": getClientHeaders(),\n                \"x-goog-api-key\": url.apiKey\n            },\n            body\n        });\n        if (!response.ok) {\n            let message = \"\";\n            try {\n                const json = await response.json();\n                message = json.error.message;\n                if (json.error.details) {\n                    message += ` ${JSON.stringify(json.error.details)}`;\n                }\n            } catch (e) {\n            // ignored\n            }\n            throw new Error(`[${response.status} ${response.statusText}] ${message}`);\n        }\n    } catch (e) {\n        const err = new GoogleGenerativeAIError(`Error fetching from ${url.toString()}: ${e.message}`);\n        err.stack = e.stack;\n        throw err;\n    }\n    return response;\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ /**\n * Adds convenience helper methods to a response object, including stream\n * chunks (as long as each chunk is a complete GenerateContentResponse JSON).\n */ function addHelpers(response) {\n    response.text = ()=>{\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` + `candidates. Returning text from the first candidate only. ` + `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            return getText(response);\n        } else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return \"\";\n    };\n    return response;\n}\n/**\n * Returns text of first candidate.\n */ function getText(response) {\n    var _a, _b, _c, _d;\n    if ((_d = (_c = (_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.text) {\n        return response.candidates[0].content.parts[0].text;\n    } else {\n        return \"\";\n    }\n}\nconst badFinishReasons = [\n    FinishReason.RECITATION,\n    FinishReason.SAFETY\n];\nfunction hadBadFinishReason(candidate) {\n    return !!candidate.finishReason && badFinishReasons.includes(candidate.finishReason);\n}\nfunction formatBlockErrorMessage(response) {\n    var _a, _b, _c;\n    let message = \"\";\n    if ((!response.candidates || response.candidates.length === 0) && response.promptFeedback) {\n        message += \"Response was blocked\";\n        if ((_a = response.promptFeedback) === null || _a === void 0 ? void 0 : _a.blockReason) {\n            message += ` due to ${response.promptFeedback.blockReason}`;\n        }\n        if ((_b = response.promptFeedback) === null || _b === void 0 ? void 0 : _b.blockReasonMessage) {\n            message += `: ${response.promptFeedback.blockReasonMessage}`;\n        }\n    } else if ((_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0]) {\n        const firstCandidate = response.candidates[0];\n        if (hadBadFinishReason(firstCandidate)) {\n            message += `Candidate was blocked due to ${firstCandidate.finishReason}`;\n            if (firstCandidate.finishMessage) {\n                message += `: ${firstCandidate.finishMessage}`;\n            }\n        }\n    }\n    return message;\n}\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */ /* global Reflect, Promise, SuppressedError, Symbol */ function __await(v) {\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\nfunction __asyncGenerator(thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function() {\n        return this;\n    }, i;\n    function verb(n) {\n        if (g[n]) i[n] = function(v) {\n            return new Promise(function(a, b) {\n                q.push([\n                    n,\n                    v,\n                    a,\n                    b\n                ]) > 1 || resume(n, v);\n            });\n        };\n    }\n    function resume(n, v) {\n        try {\n            step(g[n](v));\n        } catch (e) {\n            settle(q[0][3], e);\n        }\n    }\n    function step(r) {\n        r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n    }\n    function fulfill(value) {\n        resume(\"next\", value);\n    }\n    function reject(value) {\n        resume(\"throw\", value);\n    }\n    function settle(f, v) {\n        if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n    }\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function(error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ const responseLineRE = /^data\\: (.*)(?:\\n\\n|\\r\\r|\\r\\n\\r\\n)/;\n/**\n * Process a response.body stream from the backend and return an\n * iterator that provides one complete GenerateContentResponse at a time\n * and a promise that resolves with a single aggregated\n * GenerateContentResponse.\n *\n * @param response - Response from a fetch call\n */ function processStream(response) {\n    const inputStream = response.body.pipeThrough(new TextDecoderStream(\"utf8\", {\n        fatal: true\n    }));\n    const responseStream = getResponseStream(inputStream);\n    const [stream1, stream2] = responseStream.tee();\n    return {\n        stream: generateResponseSequence(stream1),\n        response: getResponsePromise(stream2)\n    };\n}\nasync function getResponsePromise(stream) {\n    const allResponses = [];\n    const reader = stream.getReader();\n    while(true){\n        const { done, value } = await reader.read();\n        if (done) {\n            return addHelpers(aggregateResponses(allResponses));\n        }\n        allResponses.push(value);\n    }\n}\nfunction generateResponseSequence(stream) {\n    return __asyncGenerator(this, arguments, function* generateResponseSequence_1() {\n        const reader = stream.getReader();\n        while(true){\n            const { value, done } = yield __await(reader.read());\n            if (done) {\n                break;\n            }\n            yield yield __await(addHelpers(value));\n        }\n    });\n}\n/**\n * Reads a raw stream from the fetch response and join incomplete\n * chunks, returning a new stream that provides a single complete\n * GenerateContentResponse in each iteration.\n */ function getResponseStream(inputStream) {\n    const reader = inputStream.getReader();\n    const stream = new ReadableStream({\n        start (controller) {\n            let currentText = \"\";\n            return pump();\n            function pump() {\n                return reader.read().then(({ value, done })=>{\n                    if (done) {\n                        if (currentText.trim()) {\n                            controller.error(new GoogleGenerativeAIError(\"Failed to parse stream\"));\n                            return;\n                        }\n                        controller.close();\n                        return;\n                    }\n                    currentText += value;\n                    let match = currentText.match(responseLineRE);\n                    let parsedResponse;\n                    while(match){\n                        try {\n                            parsedResponse = JSON.parse(match[1]);\n                        } catch (e) {\n                            controller.error(new GoogleGenerativeAIError(`Error parsing JSON response: \"${match[1]}\"`));\n                            return;\n                        }\n                        controller.enqueue(parsedResponse);\n                        currentText = currentText.substring(match[0].length);\n                        match = currentText.match(responseLineRE);\n                    }\n                    return pump();\n                });\n            }\n        }\n    });\n    return stream;\n}\n/**\n * Aggregates an array of `GenerateContentResponse`s into a single\n * GenerateContentResponse.\n */ function aggregateResponses(responses) {\n    const lastResponse = responses[responses.length - 1];\n    const aggregatedResponse = {\n        promptFeedback: lastResponse === null || lastResponse === void 0 ? void 0 : lastResponse.promptFeedback\n    };\n    for (const response of responses){\n        if (response.candidates) {\n            for (const candidate of response.candidates){\n                const i = candidate.index;\n                if (!aggregatedResponse.candidates) {\n                    aggregatedResponse.candidates = [];\n                }\n                if (!aggregatedResponse.candidates[i]) {\n                    aggregatedResponse.candidates[i] = {\n                        index: candidate.index\n                    };\n                }\n                // Keep overwriting, the last one will be final\n                aggregatedResponse.candidates[i].citationMetadata = candidate.citationMetadata;\n                aggregatedResponse.candidates[i].finishReason = candidate.finishReason;\n                aggregatedResponse.candidates[i].finishMessage = candidate.finishMessage;\n                aggregatedResponse.candidates[i].safetyRatings = candidate.safetyRatings;\n                /**\n                 * Candidates should always have content and parts, but this handles\n                 * possible malformed responses.\n                 */ if (candidate.content && candidate.content.parts) {\n                    if (!aggregatedResponse.candidates[i].content) {\n                        aggregatedResponse.candidates[i].content = {\n                            role: candidate.content.role || \"user\",\n                            parts: [\n                                {\n                                    text: \"\"\n                                }\n                            ]\n                        };\n                    }\n                    for (const part of candidate.content.parts){\n                        if (part.text) {\n                            aggregatedResponse.candidates[i].content.parts[0].text += part.text;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return aggregatedResponse;\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ async function generateContentStream(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.STREAM_GENERATE_CONTENT, apiKey, /* stream */ true);\n    const response = await makeRequest(url, JSON.stringify(params));\n    return processStream(response);\n}\nasync function generateContent(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.GENERATE_CONTENT, apiKey, /* stream */ false);\n    const response = await makeRequest(url, JSON.stringify(params));\n    const responseJson = await response.json();\n    const enhancedResponse = addHelpers(responseJson);\n    return {\n        response: enhancedResponse\n    };\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ function formatNewContent(request, role) {\n    let newParts = [];\n    if (typeof request === \"string\") {\n        newParts = [\n            {\n                text: request\n            }\n        ];\n    } else {\n        for (const partOrString of request){\n            if (typeof partOrString === \"string\") {\n                newParts.push({\n                    text: partOrString\n                });\n            } else {\n                newParts.push(partOrString);\n            }\n        }\n    }\n    return {\n        role,\n        parts: newParts\n    };\n}\nfunction formatGenerateContentInput(params) {\n    if (params.contents) {\n        return params;\n    } else {\n        const content = formatNewContent(params, \"user\");\n        return {\n            contents: [\n                content\n            ]\n        };\n    }\n}\nfunction formatEmbedContentInput(params) {\n    if (typeof params === \"string\" || Array.isArray(params)) {\n        const content = formatNewContent(params, \"user\");\n        return {\n            content\n        };\n    }\n    return params;\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ /**\n * Do not log a message for this error.\n */ const SILENT_ERROR = \"SILENT_ERROR\";\n/**\n * ChatSession class that enables sending chat messages and stores\n * history of sent and received messages so far.\n *\n * @public\n */ class ChatSession {\n    constructor(apiKey, model, params){\n        this.model = model;\n        this.params = params;\n        this._history = [];\n        this._sendPromise = Promise.resolve();\n        this._apiKey = apiKey;\n        if (params === null || params === void 0 ? void 0 : params.history) {\n            this._history = params.history.map((content)=>{\n                if (!content.role) {\n                    throw new Error(\"Missing role for history item: \" + JSON.stringify(content));\n                }\n                return formatNewContent(content.parts, content.role);\n            });\n        }\n    }\n    /**\n     * Gets the chat history so far. Blocked prompts are not added to history.\n     * Blocked candidates are not added to history, nor are the prompts that\n     * generated them.\n     */ async getHistory() {\n        await this._sendPromise;\n        return this._history;\n    }\n    /**\n     * Sends a chat message and receives a non-streaming\n     * {@link GenerateContentResult}\n     */ async sendMessage(request) {\n        var _a, _b;\n        await this._sendPromise;\n        const newContent = formatNewContent(request, \"user\");\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            contents: [\n                ...this._history,\n                newContent\n            ]\n        };\n        let finalResult;\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise.then(()=>generateContent(this._apiKey, this.model, generateContentRequest)).then((result)=>{\n            var _a;\n            if (result.response.candidates && result.response.candidates.length > 0) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({\n                    parts: [],\n                    // Response seems to come back without a role set.\n                    role: \"model\"\n                }, (_a = result.response.candidates) === null || _a === void 0 ? void 0 : _a[0].content);\n                this._history.push(responseContent);\n            } else {\n                const blockErrorMessage = formatBlockErrorMessage(result.response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessage() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n            finalResult = result;\n        });\n        await this._sendPromise;\n        return finalResult;\n    }\n    /**\n     * Sends a chat message and receives the response as a\n     * {@link GenerateContentStreamResult} containing an iterable stream\n     * and a response promise.\n     */ async sendMessageStream(request) {\n        var _a, _b;\n        await this._sendPromise;\n        const newContent = formatNewContent(request, \"user\");\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            contents: [\n                ...this._history,\n                newContent\n            ]\n        };\n        const streamPromise = generateContentStream(this._apiKey, this.model, generateContentRequest);\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise.then(()=>streamPromise)// This must be handled to avoid unhandled rejection, but jump\n        // to the final catch block with a label to not log this error.\n        .catch((_ignored)=>{\n            throw new Error(SILENT_ERROR);\n        }).then((streamResult)=>streamResult.response).then((response)=>{\n            if (response.candidates && response.candidates.length > 0) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({}, response.candidates[0].content);\n                // Response seems to come back without a role set.\n                if (!responseContent.role) {\n                    responseContent.role = \"model\";\n                }\n                this._history.push(responseContent);\n            } else {\n                const blockErrorMessage = formatBlockErrorMessage(response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessageStream() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n        }).catch((e)=>{\n            // Errors in streamPromise are already catchable by the user as\n            // streamPromise is returned.\n            // Avoid duplicating the error message in logs.\n            if (e.message !== SILENT_ERROR) {\n                // Users do not have access to _sendPromise to catch errors\n                // downstream from streamPromise, so they should not throw.\n                console.error(e);\n            }\n        });\n        return streamPromise;\n    }\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ async function countTokens(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.COUNT_TOKENS, apiKey, false);\n    const response = await makeRequest(url, JSON.stringify(Object.assign(Object.assign({}, params), {\n        model\n    })));\n    return response.json();\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ async function embedContent(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.EMBED_CONTENT, apiKey, false);\n    const response = await makeRequest(url, JSON.stringify(params));\n    return response.json();\n}\nasync function batchEmbedContents(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.BATCH_EMBED_CONTENTS, apiKey, false);\n    const requestsWithModel = params.requests.map((request)=>{\n        return Object.assign(Object.assign({}, request), {\n            model: `models/${model}`\n        });\n    });\n    const response = await makeRequest(url, JSON.stringify({\n        requests: requestsWithModel\n    }));\n    return response.json();\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ /**\n * Class for generative model APIs.\n * @public\n */ class GenerativeModel {\n    constructor(apiKey, modelParams){\n        var _a;\n        this.apiKey = apiKey;\n        if (modelParams.model.startsWith(\"models/\")) {\n            this.model = (_a = modelParams.model.split(\"models/\")) === null || _a === void 0 ? void 0 : _a[1];\n        } else {\n            this.model = modelParams.model;\n        }\n        this.generationConfig = modelParams.generationConfig || {};\n        this.safetySettings = modelParams.safetySettings || [];\n    }\n    /**\n     * Makes a single non-streaming call to the model\n     * and returns an object containing a single {@link GenerateContentResponse}.\n     */ async generateContent(request) {\n        const formattedParams = formatGenerateContentInput(request);\n        return generateContent(this.apiKey, this.model, Object.assign({\n            generationConfig: this.generationConfig,\n            safetySettings: this.safetySettings\n        }, formattedParams));\n    }\n    /**\n     * Makes a single streaming call to the model\n     * and returns an object containing an iterable stream that iterates\n     * over all chunks in the streaming response as well as\n     * a promise that returns the final aggregated response.\n     */ async generateContentStream(request) {\n        const formattedParams = formatGenerateContentInput(request);\n        return generateContentStream(this.apiKey, this.model, Object.assign({\n            generationConfig: this.generationConfig,\n            safetySettings: this.safetySettings\n        }, formattedParams));\n    }\n    /**\n     * Gets a new {@link ChatSession} instance which can be used for\n     * multi-turn chats.\n     */ startChat(startChatParams) {\n        return new ChatSession(this.apiKey, this.model, startChatParams);\n    }\n    /**\n     * Counts the tokens in the provided request.\n     */ async countTokens(request) {\n        const formattedParams = formatGenerateContentInput(request);\n        return countTokens(this.apiKey, this.model, formattedParams);\n    }\n    /**\n     * Embeds the provided content.\n     */ async embedContent(request) {\n        const formattedParams = formatEmbedContentInput(request);\n        return embedContent(this.apiKey, this.model, formattedParams);\n    }\n    /**\n     * Embeds an array of {@link EmbedContentRequest}s.\n     */ async batchEmbedContents(batchEmbedContentRequest) {\n        return batchEmbedContents(this.apiKey, this.model, batchEmbedContentRequest);\n    }\n}\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ /**\n * Top-level class for this SDK\n * @public\n */ class GoogleGenerativeAI {\n    constructor(apiKey){\n        this.apiKey = apiKey;\n    }\n    /**\n     * Gets a {@link GenerativeModel} instance for the provided model name.\n     */ getGenerativeModel(modelParams) {\n        if (!modelParams.model) {\n            throw new GoogleGenerativeAIError(`Must provide a model name. ` + `Example: genai.getGenerativeModel({ model: 'my-model-name' })`);\n        }\n        return new GenerativeModel(this.apiKey, modelParams);\n    }\n}\n //# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0Bnb29nbGUvZ2VuZXJhdGl2ZS1haS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7O0NBZUMsR0FDRDs7O0NBR0MsR0FDRCxJQUFJQTtBQUNILFVBQVVBLFlBQVk7SUFDbkJBLFlBQVksQ0FBQyw0QkFBNEIsR0FBRztJQUM1Q0EsWUFBWSxDQUFDLDRCQUE0QixHQUFHO0lBQzVDQSxZQUFZLENBQUMsa0NBQWtDLEdBQUc7SUFDbERBLFlBQVksQ0FBQywyQkFBMkIsR0FBRztJQUMzQ0EsWUFBWSxDQUFDLGtDQUFrQyxHQUFHO0FBQ3RELEdBQUdBLGdCQUFpQkEsQ0FBQUEsZUFBZSxDQUFDO0FBQ3BDOzs7Q0FHQyxHQUNELElBQUlDO0FBQ0gsVUFBVUEsa0JBQWtCO0lBQ3pCLDRCQUE0QjtJQUM1QkEsa0JBQWtCLENBQUMsbUNBQW1DLEdBQUc7SUFDekQsMkNBQTJDO0lBQzNDQSxrQkFBa0IsQ0FBQyxzQkFBc0IsR0FBRztJQUM1QyxtREFBbUQ7SUFDbkRBLGtCQUFrQixDQUFDLHlCQUF5QixHQUFHO0lBQy9DLDREQUE0RDtJQUM1REEsa0JBQWtCLENBQUMsa0JBQWtCLEdBQUc7SUFDeEMsK0JBQStCO0lBQy9CQSxrQkFBa0IsQ0FBQyxhQUFhLEdBQUc7QUFDdkMsR0FBR0Esc0JBQXVCQSxDQUFBQSxxQkFBcUIsQ0FBQztBQUNoRDs7O0NBR0MsR0FDRCxJQUFJQztBQUNILFVBQVVBLGVBQWU7SUFDdEIsOEJBQThCO0lBQzlCQSxlQUFlLENBQUMsK0JBQStCLEdBQUc7SUFDbEQsbURBQW1EO0lBQ25EQSxlQUFlLENBQUMsYUFBYSxHQUFHO0lBQ2hDLDRDQUE0QztJQUM1Q0EsZUFBZSxDQUFDLE1BQU0sR0FBRztJQUN6QiwrQ0FBK0M7SUFDL0NBLGVBQWUsQ0FBQyxTQUFTLEdBQUc7SUFDNUIsNkNBQTZDO0lB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WSxJQUFJLENBQUNqSyxNQUFNLEVBQUUsSUFBSSxDQUFDRixLQUFLLEVBQUUrSztJQUNoRDtJQUNBOztLQUVDLEdBQ0QsTUFBTVYsYUFBYWxDLE9BQU8sRUFBRTtRQUN4QixNQUFNNEMsa0JBQWtCdkMsd0JBQXdCTDtRQUNoRCxPQUFPa0MsYUFBYSxJQUFJLENBQUNuSyxNQUFNLEVBQUUsSUFBSSxDQUFDRixLQUFLLEVBQUUrSztJQUNqRDtJQUNBOztLQUVDLEdBQ0QsTUFBTVIsbUJBQW1CVyx3QkFBd0IsRUFBRTtRQUMvQyxPQUFPWCxtQkFBbUIsSUFBSSxDQUFDckssTUFBTSxFQUFFLElBQUksQ0FBQ0YsS0FBSyxFQUFFa0w7SUFDdkQ7QUFDSjtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Q0FlQyxHQUNEOzs7Q0FHQyxHQUNELE1BQU1DO0lBQ0Y3TCxZQUFZWSxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFDQSxNQUFNLEdBQUdBO0lBQ2xCO0lBQ0E7O0tBRUMsR0FDRGtMLG1CQUFtQlIsV0FBVyxFQUFFO1FBQzVCLElBQUksQ0FBQ0EsWUFBWTVLLEtBQUssRUFBRTtZQUNwQixNQUFNLElBQUlaLHdCQUF3QixDQUFDLDJCQUEyQixDQUFDLEdBQzNELENBQUMsNkRBQTZELENBQUM7UUFDdkU7UUFDQSxPQUFPLElBQUl1TCxnQkFBZ0IsSUFBSSxDQUFDekssTUFBTSxFQUFFMEs7SUFDNUM7QUFDSjtBQUVvSixDQUNwSixrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGdvb2dsZS9nZW5lcmF0aXZlLWFpL2Rpc3QvaW5kZXgubWpzPzljNWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGFybSBjYXRlZ29yaWVzIHRoYXQgd291bGQgY2F1c2UgcHJvbXB0cyBvciBjYW5kaWRhdGVzIHRvIGJlIGJsb2NrZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBIYXJtQ2F0ZWdvcnk7XG4oZnVuY3Rpb24gKEhhcm1DYXRlZ29yeSkge1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfVU5TUEVDSUZJRURcIl0gPSBcIkhBUk1fQ0FURUdPUllfVU5TUEVDSUZJRURcIjtcbiAgICBIYXJtQ2F0ZWdvcnlbXCJIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIXCJdID0gXCJIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIXCI7XG4gICAgSGFybUNhdGVnb3J5W1wiSEFSTV9DQVRFR09SWV9TRVhVQUxMWV9FWFBMSUNJVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9TRVhVQUxMWV9FWFBMSUNJVFwiO1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfSEFSQVNTTUVOVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9IQVJBU1NNRU5UXCI7XG4gICAgSGFybUNhdGVnb3J5W1wiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiO1xufSkoSGFybUNhdGVnb3J5IHx8IChIYXJtQ2F0ZWdvcnkgPSB7fSkpO1xuLyoqXG4gKiBUaHJlc2hob2xkIGFib3ZlIHdoaWNoIGEgcHJvbXB0IG9yIGNhbmRpZGF0ZSB3aWxsIGJlIGJsb2NrZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBIYXJtQmxvY2tUaHJlc2hvbGQ7XG4oZnVuY3Rpb24gKEhhcm1CbG9ja1RocmVzaG9sZCkge1xuICAgIC8vIFRocmVzaG9sZCBpcyB1bnNwZWNpZmllZC5cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJIQVJNX0JMT0NLX1RIUkVTSE9MRF9VTlNQRUNJRklFRFwiXSA9IFwiSEFSTV9CTE9DS19USFJFU0hPTERfVU5TUEVDSUZJRURcIjtcbiAgICAvLyBDb250ZW50IHdpdGggTkVHTElHSUJMRSB3aWxsIGJlIGFsbG93ZWQuXG4gICAgSGFybUJsb2NrVGhyZXNob2xkW1wiQkxPQ0tfTE9XX0FORF9BQk9WRVwiXSA9IFwiQkxPQ0tfTE9XX0FORF9BQk9WRVwiO1xuICAgIC8vIENvbnRlbnQgd2l0aCBORUdMSUdJQkxFIGFuZCBMT1cgd2lsbCBiZSBhbGxvd2VkLlxuICAgIEhhcm1CbG9ja1RocmVzaG9sZFtcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIl0gPSBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIjtcbiAgICAvLyBDb250ZW50IHdpdGggTkVHTElHSUJMRSwgTE9XLCBhbmQgTUVESVVNIHdpbGwgYmUgYWxsb3dlZC5cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJCTE9DS19PTkxZX0hJR0hcIl0gPSBcIkJMT0NLX09OTFlfSElHSFwiO1xuICAgIC8vIEFsbCBjb250ZW50IHdpbGwgYmUgYWxsb3dlZC5cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJCTE9DS19OT05FXCJdID0gXCJCTE9DS19OT05FXCI7XG59KShIYXJtQmxvY2tUaHJlc2hvbGQgfHwgKEhhcm1CbG9ja1RocmVzaG9sZCA9IHt9KSk7XG4vKipcbiAqIFByb2JhYmlsaXR5IHRoYXQgYSBwcm9tcHQgb3IgY2FuZGlkYXRlIG1hdGNoZXMgYSBoYXJtIGNhdGVnb3J5LlxuICogQHB1YmxpY1xuICovXG52YXIgSGFybVByb2JhYmlsaXR5O1xuKGZ1bmN0aW9uIChIYXJtUHJvYmFiaWxpdHkpIHtcbiAgICAvLyBQcm9iYWJpbGl0eSBpcyB1bnNwZWNpZmllZC5cbiAgICBIYXJtUHJvYmFiaWxpdHlbXCJIQVJNX1BST0JBQklMSVRZX1VOU1BFQ0lGSUVEXCJdID0gXCJIQVJNX1BST0JBQklMSVRZX1VOU1BFQ0lGSUVEXCI7XG4gICAgLy8gQ29udGVudCBoYXMgYSBuZWdsaWdpYmxlIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuXG4gICAgSGFybVByb2JhYmlsaXR5W1wiTkVHTElHSUJMRVwiXSA9IFwiTkVHTElHSUJMRVwiO1xuICAgIC8vIENvbnRlbnQgaGFzIGEgbG93IGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuXG4gICAgSGFybVByb2JhYmlsaXR5W1wiTE9XXCJdID0gXCJMT1dcIjtcbiAgICAvLyBDb250ZW50IGhhcyBhIG1lZGl1bSBjaGFuY2Ugb2YgYmVpbmcgdW5zYWZlLlxuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIk1FRElVTVwiXSA9IFwiTUVESVVNXCI7XG4gICAgLy8gQ29udGVudCBoYXMgYSBoaWdoIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuXG4gICAgSGFybVByb2JhYmlsaXR5W1wiSElHSFwiXSA9IFwiSElHSFwiO1xufSkoSGFybVByb2JhYmlsaXR5IHx8IChIYXJtUHJvYmFiaWxpdHkgPSB7fSkpO1xuLyoqXG4gKiBSZWFzb24gdGhhdCBhIHByb21wdCB3YXMgYmxvY2tlZC5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIEJsb2NrUmVhc29uO1xuKGZ1bmN0aW9uIChCbG9ja1JlYXNvbikge1xuICAgIC8vIEEgYmxvY2tlZCByZWFzb24gd2FzIG5vdCBzcGVjaWZpZWQuXG4gICAgQmxvY2tSZWFzb25bXCJCTE9DS0VEX1JFQVNPTl9VTlNQRUNJRklFRFwiXSA9IFwiQkxPQ0tFRF9SRUFTT05fVU5TUEVDSUZJRURcIjtcbiAgICAvLyBDb250ZW50IHdhcyBibG9ja2VkIGJ5IHNhZmV0eSBzZXR0aW5ncy5cbiAgICBCbG9ja1JlYXNvbltcIlNBRkVUWVwiXSA9IFwiU0FGRVRZXCI7XG4gICAgLy8gQ29udGVudCB3YXMgYmxvY2tlZCwgYnV0IHRoZSByZWFzb24gaXMgdW5jYXRlZ29yaXplZC5cbiAgICBCbG9ja1JlYXNvbltcIk9USEVSXCJdID0gXCJPVEhFUlwiO1xufSkoQmxvY2tSZWFzb24gfHwgKEJsb2NrUmVhc29uID0ge30pKTtcbi8qKlxuICogUmVhc29uIHRoYXQgYSBjYW5kaWRhdGUgZmluaXNoZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBGaW5pc2hSZWFzb247XG4oZnVuY3Rpb24gKEZpbmlzaFJlYXNvbikge1xuICAgIC8vIERlZmF1bHQgdmFsdWUuIFRoaXMgdmFsdWUgaXMgdW51c2VkLlxuICAgIEZpbmlzaFJlYXNvbltcIkZJTklTSF9SRUFTT05fVU5TUEVDSUZJRURcIl0gPSBcIkZJTklTSF9SRUFTT05fVU5TUEVDSUZJRURcIjtcbiAgICAvLyBOYXR1cmFsIHN0b3AgcG9pbnQgb2YgdGhlIG1vZGVsIG9yIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UuXG4gICAgRmluaXNoUmVhc29uW1wiU1RPUFwiXSA9IFwiU1RPUFwiO1xuICAgIC8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgYXMgc3BlY2lmaWVkIGluIHRoZSByZXF1ZXN0IHdhcyByZWFjaGVkLlxuICAgIEZpbmlzaFJlYXNvbltcIk1BWF9UT0tFTlNcIl0gPSBcIk1BWF9UT0tFTlNcIjtcbiAgICAvLyBUaGUgY2FuZGlkYXRlIGNvbnRlbnQgd2FzIGZsYWdnZWQgZm9yIHNhZmV0eSByZWFzb25zLlxuICAgIEZpbmlzaFJlYXNvbltcIlNBRkVUWVwiXSA9IFwiU0FGRVRZXCI7XG4gICAgLy8gVGhlIGNhbmRpZGF0ZSBjb250ZW50IHdhcyBmbGFnZ2VkIGZvciByZWNpdGF0aW9uIHJlYXNvbnMuXG4gICAgRmluaXNoUmVhc29uW1wiUkVDSVRBVElPTlwiXSA9IFwiUkVDSVRBVElPTlwiO1xuICAgIC8vIFVua25vd24gcmVhc29uLlxuICAgIEZpbmlzaFJlYXNvbltcIk9USEVSXCJdID0gXCJPVEhFUlwiO1xufSkoRmluaXNoUmVhc29uIHx8IChGaW5pc2hSZWFzb24gPSB7fSkpO1xuLyoqXG4gKiBUYXNrIHR5cGUgZm9yIGVtYmVkZGluZyBjb250ZW50LlxuICogQHB1YmxpY1xuICovXG52YXIgVGFza1R5cGU7XG4oZnVuY3Rpb24gKFRhc2tUeXBlKSB7XG4gICAgVGFza1R5cGVbXCJUQVNLX1RZUEVfVU5TUEVDSUZJRURcIl0gPSBcIlRBU0tfVFlQRV9VTlNQRUNJRklFRFwiO1xuICAgIFRhc2tUeXBlW1wiUkVUUklFVkFMX1FVRVJZXCJdID0gXCJSRVRSSUVWQUxfUVVFUllcIjtcbiAgICBUYXNrVHlwZVtcIlJFVFJJRVZBTF9ET0NVTUVOVFwiXSA9IFwiUkVUUklFVkFMX0RPQ1VNRU5UXCI7XG4gICAgVGFza1R5cGVbXCJTRU1BTlRJQ19TSU1JTEFSSVRZXCJdID0gXCJTRU1BTlRJQ19TSU1JTEFSSVRZXCI7XG4gICAgVGFza1R5cGVbXCJDTEFTU0lGSUNBVElPTlwiXSA9IFwiQ0xBU1NJRklDQVRJT05cIjtcbiAgICBUYXNrVHlwZVtcIkNMVVNURVJJTkdcIl0gPSBcIkNMVVNURVJJTkdcIjtcbn0pKFRhc2tUeXBlIHx8IChUYXNrVHlwZSA9IHt9KSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKGBbR29vZ2xlR2VuZXJhdGl2ZUFJIEVycm9yXTogJHttZXNzYWdlfWApO1xuICAgIH1cbn1cbmNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IgZXh0ZW5kcyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzcG9uc2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBCQVNFX1VSTCA9IFwiaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb21cIjtcbmNvbnN0IEFQSV9WRVJTSU9OID0gXCJ2MVwiO1xuLyoqXG4gKiBXZSBjYW4ndCBgcmVxdWlyZWAgcGFja2FnZS5qc29uIGlmIHRoaXMgcnVucyBvbiB3ZWIuIFdlIHdpbGwgdXNlIHJvbGx1cCB0b1xuICogc3dhcCBpbiB0aGUgdmVyc2lvbiBudW1iZXIgaGVyZSBhdCBidWlsZCB0aW1lLlxuICovXG5jb25zdCBQQUNLQUdFX1ZFUlNJT04gPSBcIjAuMS4zXCI7XG5jb25zdCBQQUNLQUdFX0xPR19IRUFERVIgPSBcImdlbmFpLWpzXCI7XG52YXIgVGFzaztcbihmdW5jdGlvbiAoVGFzaykge1xuICAgIFRhc2tbXCJHRU5FUkFURV9DT05URU5UXCJdID0gXCJnZW5lcmF0ZUNvbnRlbnRcIjtcbiAgICBUYXNrW1wiU1RSRUFNX0dFTkVSQVRFX0NPTlRFTlRcIl0gPSBcInN0cmVhbUdlbmVyYXRlQ29udGVudFwiO1xuICAgIFRhc2tbXCJDT1VOVF9UT0tFTlNcIl0gPSBcImNvdW50VG9rZW5zXCI7XG4gICAgVGFza1tcIkVNQkVEX0NPTlRFTlRcIl0gPSBcImVtYmVkQ29udGVudFwiO1xuICAgIFRhc2tbXCJCQVRDSF9FTUJFRF9DT05URU5UU1wiXSA9IFwiYmF0Y2hFbWJlZENvbnRlbnRzXCI7XG59KShUYXNrIHx8IChUYXNrID0ge30pKTtcbmNsYXNzIFJlcXVlc3RVcmwge1xuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB0YXNrLCBhcGlLZXksIHN0cmVhbSkge1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMudGFzayA9IHRhc2s7XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHN0cmVhbTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCB1cmwgPSBgJHtCQVNFX1VSTH0vJHtBUElfVkVSU0lPTn0vbW9kZWxzLyR7dGhpcy5tb2RlbH06JHt0aGlzLnRhc2t9YDtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICB1cmwgKz0gXCI/YWx0PXNzZVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxufVxuLyoqXG4gKiBTaW1wbGUsIGJ1dCBtYXkgYmVjb21lIG1vcmUgY29tcGxleCBpZiB3ZSBhZGQgbW9yZSB2ZXJzaW9ucyB0byBsb2cuXG4gKi9cbmZ1bmN0aW9uIGdldENsaWVudEhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIGAke1BBQ0tBR0VfTE9HX0hFQURFUn0vJHtQQUNLQUdFX1ZFUlNJT059YDtcbn1cbmFzeW5jIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KHVybCwgYm9keSkge1xuICAgIGxldCByZXNwb25zZTtcbiAgICB0cnkge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgIFwieC1nb29nLWFwaS1jbGllbnRcIjogZ2V0Q2xpZW50SGVhZGVycygpLFxuICAgICAgICAgICAgICAgIFwieC1nb29nLWFwaS1rZXlcIjogdXJsLmFwaUtleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBcIlwiO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBqc29uLmVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKGpzb24uZXJyb3IuZGV0YWlscykge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IGAgJHtKU09OLnN0cmluZ2lmeShqc29uLmVycm9yLmRldGFpbHMpfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFske3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fV0gJHttZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihgRXJyb3IgZmV0Y2hpbmcgZnJvbSAke3VybC50b1N0cmluZygpfTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgIGVyci5zdGFjayA9IGUuc3RhY2s7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBZGRzIGNvbnZlbmllbmNlIGhlbHBlciBtZXRob2RzIHRvIGEgcmVzcG9uc2Ugb2JqZWN0LCBpbmNsdWRpbmcgc3RyZWFtXG4gKiBjaHVua3MgKGFzIGxvbmcgYXMgZWFjaCBjaHVuayBpcyBhIGNvbXBsZXRlIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlIEpTT04pLlxuICovXG5mdW5jdGlvbiBhZGRIZWxwZXJzKHJlc3BvbnNlKSB7XG4gICAgcmVzcG9uc2UudGV4dCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMgJiYgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGlzIHJlc3BvbnNlIGhhZCAke3Jlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RofSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGNhbmRpZGF0ZXMuIFJldHVybmluZyB0ZXh0IGZyb20gdGhlIGZpcnN0IGNhbmRpZGF0ZSBvbmx5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgYEFjY2VzcyByZXNwb25zZS5jYW5kaWRhdGVzIGRpcmVjdGx5IHRvIHVzZSB0aGUgb3RoZXIgY2FuZGlkYXRlcy5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYWRCYWRGaW5pc2hSZWFzb24ocmVzcG9uc2UuY2FuZGlkYXRlc1swXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVzcG9uc2VFcnJvcihgJHtmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXNwb25zZSl9YCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdldFRleHQocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVzcG9uc2VFcnJvcihgVGV4dCBub3QgYXZhaWxhYmxlLiAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG4vKipcbiAqIFJldHVybnMgdGV4dCBvZiBmaXJzdCBjYW5kaWRhdGUuXG4gKi9cbmZ1bmN0aW9uIGdldFRleHQocmVzcG9uc2UpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgaWYgKChfZCA9IChfYyA9IChfYiA9IChfYSA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXS5jb250ZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucGFydHMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY1swXSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnRleHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxufVxuY29uc3QgYmFkRmluaXNoUmVhc29ucyA9IFtGaW5pc2hSZWFzb24uUkVDSVRBVElPTiwgRmluaXNoUmVhc29uLlNBRkVUWV07XG5mdW5jdGlvbiBoYWRCYWRGaW5pc2hSZWFzb24oY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuICghIWNhbmRpZGF0ZS5maW5pc2hSZWFzb24gJiZcbiAgICAgICAgYmFkRmluaXNoUmVhc29ucy5pbmNsdWRlcyhjYW5kaWRhdGUuZmluaXNoUmVhc29uKSk7XG59XG5mdW5jdGlvbiBmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXNwb25zZSkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGxldCBtZXNzYWdlID0gXCJcIjtcbiAgICBpZiAoKCFyZXNwb25zZS5jYW5kaWRhdGVzIHx8IHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSAmJlxuICAgICAgICByZXNwb25zZS5wcm9tcHRGZWVkYmFjaykge1xuICAgICAgICBtZXNzYWdlICs9IFwiUmVzcG9uc2Ugd2FzIGJsb2NrZWRcIjtcbiAgICAgICAgaWYgKChfYSA9IHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYmxvY2tSZWFzb24pIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCBkdWUgdG8gJHtyZXNwb25zZS5wcm9tcHRGZWVkYmFjay5ibG9ja1JlYXNvbn1gO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX2IgPSByZXNwb25zZS5wcm9tcHRGZWVkYmFjaykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJsb2NrUmVhc29uTWVzc2FnZSkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgOiAke3Jlc3BvbnNlLnByb21wdEZlZWRiYWNrLmJsb2NrUmVhc29uTWVzc2FnZX1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKChfYyA9IHJlc3BvbnNlLmNhbmRpZGF0ZXMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY1swXSkge1xuICAgICAgICBjb25zdCBmaXJzdENhbmRpZGF0ZSA9IHJlc3BvbnNlLmNhbmRpZGF0ZXNbMF07XG4gICAgICAgIGlmIChoYWRCYWRGaW5pc2hSZWFzb24oZmlyc3RDYW5kaWRhdGUpKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGBDYW5kaWRhdGUgd2FzIGJsb2NrZWQgZHVlIHRvICR7Zmlyc3RDYW5kaWRhdGUuZmluaXNoUmVhc29ufWA7XG4gICAgICAgICAgICBpZiAoZmlyc3RDYW5kaWRhdGUuZmluaXNoTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDogJHtmaXJzdENhbmRpZGF0ZS5maW5pc2hNZXNzYWdlfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG50eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IHJlc3BvbnNlTGluZVJFID0gL15kYXRhXFw6ICguKikoPzpcXG5cXG58XFxyXFxyfFxcclxcblxcclxcbikvO1xuLyoqXG4gKiBQcm9jZXNzIGEgcmVzcG9uc2UuYm9keSBzdHJlYW0gZnJvbSB0aGUgYmFja2VuZCBhbmQgcmV0dXJuIGFuXG4gKiBpdGVyYXRvciB0aGF0IHByb3ZpZGVzIG9uZSBjb21wbGV0ZSBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZSBhdCBhIHRpbWVcbiAqIGFuZCBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgc2luZ2xlIGFnZ3JlZ2F0ZWRcbiAqIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSByZXNwb25zZSAtIFJlc3BvbnNlIGZyb20gYSBmZXRjaCBjYWxsXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NTdHJlYW0ocmVzcG9uc2UpIHtcbiAgICBjb25zdCBpbnB1dFN0cmVhbSA9IHJlc3BvbnNlLmJvZHkucGlwZVRocm91Z2gobmV3IFRleHREZWNvZGVyU3RyZWFtKFwidXRmOFwiLCB7IGZhdGFsOiB0cnVlIH0pKTtcbiAgICBjb25zdCByZXNwb25zZVN0cmVhbSA9IGdldFJlc3BvbnNlU3RyZWFtKGlucHV0U3RyZWFtKTtcbiAgICBjb25zdCBbc3RyZWFtMSwgc3RyZWFtMl0gPSByZXNwb25zZVN0cmVhbS50ZWUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdHJlYW06IGdlbmVyYXRlUmVzcG9uc2VTZXF1ZW5jZShzdHJlYW0xKSxcbiAgICAgICAgcmVzcG9uc2U6IGdldFJlc3BvbnNlUHJvbWlzZShzdHJlYW0yKSxcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVzcG9uc2VQcm9taXNlKHN0cmVhbSkge1xuICAgIGNvbnN0IGFsbFJlc3BvbnNlcyA9IFtdO1xuICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFkZEhlbHBlcnMoYWdncmVnYXRlUmVzcG9uc2VzKGFsbFJlc3BvbnNlcykpO1xuICAgICAgICB9XG4gICAgICAgIGFsbFJlc3BvbnNlcy5wdXNoKHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVJlc3BvbnNlU2VxdWVuY2Uoc3RyZWFtKSB7XG4gICAgcmV0dXJuIF9fYXN5bmNHZW5lcmF0b3IodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiogZ2VuZXJhdGVSZXNwb25zZVNlcXVlbmNlXzEoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IHlpZWxkIF9fYXdhaXQocmVhZGVyLnJlYWQoKSk7XG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgeWllbGQgX19hd2FpdChhZGRIZWxwZXJzKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogUmVhZHMgYSByYXcgc3RyZWFtIGZyb20gdGhlIGZldGNoIHJlc3BvbnNlIGFuZCBqb2luIGluY29tcGxldGVcbiAqIGNodW5rcywgcmV0dXJuaW5nIGEgbmV3IHN0cmVhbSB0aGF0IHByb3ZpZGVzIGEgc2luZ2xlIGNvbXBsZXRlXG4gKiBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZSBpbiBlYWNoIGl0ZXJhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVzcG9uc2VTdHJlYW0oaW5wdXRTdHJlYW0pIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dFN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRleHQgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHB1bXAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbigoeyB2YWx1ZSwgZG9uZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRleHQudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lcnJvcihuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2Ugc3RyZWFtXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRleHQgKz0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IGN1cnJlbnRUZXh0Lm1hdGNoKHJlc3BvbnNlTGluZVJFKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkUmVzcG9uc2UgPSBKU09OLnBhcnNlKG1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lcnJvcihuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoYEVycm9yIHBhcnNpbmcgSlNPTiByZXNwb25zZTogXCIke21hdGNoWzFdfVwiYCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShwYXJzZWRSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGV4dCA9IGN1cnJlbnRUZXh0LnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBjdXJyZW50VGV4dC5tYXRjaChyZXNwb25zZUxpbmVSRSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gc3RyZWFtO1xufVxuLyoqXG4gKiBBZ2dyZWdhdGVzIGFuIGFycmF5IG9mIGBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZWBzIGludG8gYSBzaW5nbGVcbiAqIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlLlxuICovXG5mdW5jdGlvbiBhZ2dyZWdhdGVSZXNwb25zZXMocmVzcG9uc2VzKSB7XG4gICAgY29uc3QgbGFzdFJlc3BvbnNlID0gcmVzcG9uc2VzW3Jlc3BvbnNlcy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBhZ2dyZWdhdGVkUmVzcG9uc2UgPSB7XG4gICAgICAgIHByb21wdEZlZWRiYWNrOiBsYXN0UmVzcG9uc2UgPT09IG51bGwgfHwgbGFzdFJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYXN0UmVzcG9uc2UucHJvbXB0RmVlZGJhY2ssXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHJlc3BvbnNlIG9mIHJlc3BvbnNlcykge1xuICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgcmVzcG9uc2UuY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBjYW5kaWRhdGUuaW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKCFhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGNhbmRpZGF0ZS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gS2VlcCBvdmVyd3JpdGluZywgdGhlIGxhc3Qgb25lIHdpbGwgYmUgZmluYWxcbiAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tpXS5jaXRhdGlvbk1ldGFkYXRhID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmNpdGF0aW9uTWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbaV0uZmluaXNoUmVhc29uID0gY2FuZGlkYXRlLmZpbmlzaFJlYXNvbjtcbiAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tpXS5maW5pc2hNZXNzYWdlID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmZpbmlzaE1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbaV0uc2FmZXR5UmF0aW5ncyA9XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS5zYWZldHlSYXRpbmdzO1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENhbmRpZGF0ZXMgc2hvdWxkIGFsd2F5cyBoYXZlIGNvbnRlbnQgYW5kIHBhcnRzLCBidXQgdGhpcyBoYW5kbGVzXG4gICAgICAgICAgICAgICAgICogcG9zc2libGUgbWFsZm9ybWVkIHJlc3BvbnNlcy5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlLmNvbnRlbnQgJiYgY2FuZGlkYXRlLmNvbnRlbnQucGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tpXS5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tpXS5jb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6IGNhbmRpZGF0ZS5jb250ZW50LnJvbGUgfHwgXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IFwiXCIgfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjYW5kaWRhdGUuY29udGVudC5wYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQudGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2ldLmNvbnRlbnQucGFydHNbMF0udGV4dCArPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFnZ3JlZ2F0ZWRSZXNwb25zZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29udGVudFN0cmVhbShhcGlLZXksIG1vZGVsLCBwYXJhbXMpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgUmVxdWVzdFVybChtb2RlbCwgVGFzay5TVFJFQU1fR0VORVJBVEVfQ09OVEVOVCwgYXBpS2V5LCBcbiAgICAvKiBzdHJlYW0gKi8gdHJ1ZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlUmVxdWVzdCh1cmwsIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIHJldHVybiBwcm9jZXNzU3RyZWFtKHJlc3BvbnNlKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29udGVudChhcGlLZXksIG1vZGVsLCBwYXJhbXMpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgUmVxdWVzdFVybChtb2RlbCwgVGFzay5HRU5FUkFURV9DT05URU5ULCBhcGlLZXksIFxuICAgIC8qIHN0cmVhbSAqLyBmYWxzZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlUmVxdWVzdCh1cmwsIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zdCBlbmhhbmNlZFJlc3BvbnNlID0gYWRkSGVscGVycyhyZXNwb25zZUpzb24pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3BvbnNlOiBlbmhhbmNlZFJlc3BvbnNlLFxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBmb3JtYXROZXdDb250ZW50KHJlcXVlc3QsIHJvbGUpIHtcbiAgICBsZXQgbmV3UGFydHMgPSBbXTtcbiAgICBpZiAodHlwZW9mIHJlcXVlc3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbmV3UGFydHMgPSBbeyB0ZXh0OiByZXF1ZXN0IH1dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0T3JTdHJpbmcgb2YgcmVxdWVzdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0T3JTdHJpbmcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHsgdGV4dDogcGFydE9yU3RyaW5nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0T3JTdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IHJvbGUsIHBhcnRzOiBuZXdQYXJ0cyB9O1xufVxuZnVuY3Rpb24gZm9ybWF0R2VuZXJhdGVDb250ZW50SW5wdXQocGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcy5jb250ZW50cykge1xuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGZvcm1hdE5ld0NvbnRlbnQocGFyYW1zLCBcInVzZXJcIik7XG4gICAgICAgIHJldHVybiB7IGNvbnRlbnRzOiBbY29udGVudF0gfTtcbiAgICB9XG59XG5mdW5jdGlvbiBmb3JtYXRFbWJlZENvbnRlbnRJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KHBhcmFtcykpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGZvcm1hdE5ld0NvbnRlbnQocGFyYW1zLCBcInVzZXJcIik7XG4gICAgICAgIHJldHVybiB7IGNvbnRlbnQgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG8gbm90IGxvZyBhIG1lc3NhZ2UgZm9yIHRoaXMgZXJyb3IuXG4gKi9cbmNvbnN0IFNJTEVOVF9FUlJPUiA9IFwiU0lMRU5UX0VSUk9SXCI7XG4vKipcbiAqIENoYXRTZXNzaW9uIGNsYXNzIHRoYXQgZW5hYmxlcyBzZW5kaW5nIGNoYXQgbWVzc2FnZXMgYW5kIHN0b3Jlc1xuICogaGlzdG9yeSBvZiBzZW50IGFuZCByZWNlaXZlZCBtZXNzYWdlcyBzbyBmYXIuXG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDaGF0U2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBtb2RlbCwgcGFyYW1zKSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuX2hpc3RvcnkgPSBbXTtcbiAgICAgICAgdGhpcy5fc2VuZFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgdGhpcy5fYXBpS2V5ID0gYXBpS2V5O1xuICAgICAgICBpZiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmhpc3RvcnkpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkgPSBwYXJhbXMuaGlzdG9yeS5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQucm9sZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJvbGUgZm9yIGhpc3RvcnkgaXRlbTogXCIgKyBKU09OLnN0cmluZ2lmeShjb250ZW50KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXROZXdDb250ZW50KGNvbnRlbnQucGFydHMsIGNvbnRlbnQucm9sZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjaGF0IGhpc3Rvcnkgc28gZmFyLiBCbG9ja2VkIHByb21wdHMgYXJlIG5vdCBhZGRlZCB0byBoaXN0b3J5LlxuICAgICAqIEJsb2NrZWQgY2FuZGlkYXRlcyBhcmUgbm90IGFkZGVkIHRvIGhpc3RvcnksIG5vciBhcmUgdGhlIHByb21wdHMgdGhhdFxuICAgICAqIGdlbmVyYXRlZCB0aGVtLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEhpc3RvcnkoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faGlzdG9yeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBjaGF0IG1lc3NhZ2UgYW5kIHJlY2VpdmVzIGEgbm9uLXN0cmVhbWluZ1xuICAgICAqIHtAbGluayBHZW5lcmF0ZUNvbnRlbnRSZXN1bHR9XG4gICAgICovXG4gICAgYXN5bmMgc2VuZE1lc3NhZ2UocmVxdWVzdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBhd2FpdCB0aGlzLl9zZW5kUHJvbWlzZTtcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGZvcm1hdE5ld0NvbnRlbnQocmVxdWVzdCwgXCJ1c2VyXCIpO1xuICAgICAgICBjb25zdCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IChfYSA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiAoX2IgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdlbmVyYXRpb25Db25maWcsXG4gICAgICAgICAgICBjb250ZW50czogWy4uLnRoaXMuX2hpc3RvcnksIG5ld0NvbnRlbnRdLFxuICAgICAgICB9O1xuICAgICAgICBsZXQgZmluYWxSZXN1bHQ7XG4gICAgICAgIC8vIEFkZCBvbnRvIHRoZSBjaGFpbi5cbiAgICAgICAgdGhpcy5fc2VuZFByb21pc2UgPSB0aGlzLl9zZW5kUHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gZ2VuZXJhdGVDb250ZW50KHRoaXMuX2FwaUtleSwgdGhpcy5tb2RlbCwgZ2VuZXJhdGVDb250ZW50UmVxdWVzdCkpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnJlc3BvbnNlLmNhbmRpZGF0ZXMgJiZcbiAgICAgICAgICAgICAgICByZXN1bHQucmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKG5ld0NvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlQ29udGVudCA9IE9iamVjdC5hc3NpZ24oeyBwYXJ0czogW10sIFxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNwb25zZSBzZWVtcyB0byBjb21lIGJhY2sgd2l0aG91dCBhIHJvbGUgc2V0LlxuICAgICAgICAgICAgICAgICAgICByb2xlOiBcIm1vZGVsXCIgfSwgKF9hID0gcmVzdWx0LnJlc3BvbnNlLmNhbmRpZGF0ZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnB1c2gocmVzcG9uc2VDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrRXJyb3JNZXNzYWdlID0gZm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzdWx0LnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBzZW5kTWVzc2FnZSgpIHdhcyB1bnN1Y2Nlc3NmdWwuICR7YmxvY2tFcnJvck1lc3NhZ2V9LiBJbnNwZWN0IHJlc3BvbnNlIG9iamVjdCBmb3IgZGV0YWlscy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbFJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICByZXR1cm4gZmluYWxSZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgY2hhdCBtZXNzYWdlIGFuZCByZWNlaXZlcyB0aGUgcmVzcG9uc2UgYXMgYVxuICAgICAqIHtAbGluayBHZW5lcmF0ZUNvbnRlbnRTdHJlYW1SZXN1bHR9IGNvbnRhaW5pbmcgYW4gaXRlcmFibGUgc3RyZWFtXG4gICAgICogYW5kIGEgcmVzcG9uc2UgcHJvbWlzZS5cbiAgICAgKi9cbiAgICBhc3luYyBzZW5kTWVzc2FnZVN0cmVhbShyZXF1ZXN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gZm9ybWF0TmV3Q29udGVudChyZXF1ZXN0LCBcInVzZXJcIik7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRlQ29udGVudFJlcXVlc3QgPSB7XG4gICAgICAgICAgICBzYWZldHlTZXR0aW5nczogKF9hID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zYWZldHlTZXR0aW5ncyxcbiAgICAgICAgICAgIGdlbmVyYXRpb25Db25maWc6IChfYiA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZ2VuZXJhdGlvbkNvbmZpZyxcbiAgICAgICAgICAgIGNvbnRlbnRzOiBbLi4udGhpcy5faGlzdG9yeSwgbmV3Q29udGVudF0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN0cmVhbVByb21pc2UgPSBnZW5lcmF0ZUNvbnRlbnRTdHJlYW0odGhpcy5fYXBpS2V5LCB0aGlzLm1vZGVsLCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0KTtcbiAgICAgICAgLy8gQWRkIG9udG8gdGhlIGNoYWluLlxuICAgICAgICB0aGlzLl9zZW5kUHJvbWlzZSA9IHRoaXMuX3NlbmRQcm9taXNlXG4gICAgICAgICAgICAudGhlbigoKSA9PiBzdHJlYW1Qcm9taXNlKVxuICAgICAgICAgICAgLy8gVGhpcyBtdXN0IGJlIGhhbmRsZWQgdG8gYXZvaWQgdW5oYW5kbGVkIHJlamVjdGlvbiwgYnV0IGp1bXBcbiAgICAgICAgICAgIC8vIHRvIHRoZSBmaW5hbCBjYXRjaCBibG9jayB3aXRoIGEgbGFiZWwgdG8gbm90IGxvZyB0aGlzIGVycm9yLlxuICAgICAgICAgICAgLmNhdGNoKChfaWdub3JlZCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFNJTEVOVF9FUlJPUik7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoc3RyZWFtUmVzdWx0KSA9PiBzdHJlYW1SZXN1bHQucmVzcG9uc2UpXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzICYmIHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkucHVzaChuZXdDb250ZW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUNvbnRlbnQgPSBPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIC8vIFJlc3BvbnNlIHNlZW1zIHRvIGNvbWUgYmFjayB3aXRob3V0IGEgcm9sZSBzZXQuXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZUNvbnRlbnQucm9sZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRlbnQucm9sZSA9IFwibW9kZWxcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKHJlc3BvbnNlQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBibG9ja0Vycm9yTWVzc2FnZSA9IGZvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBzZW5kTWVzc2FnZVN0cmVhbSgpIHdhcyB1bnN1Y2Nlc3NmdWwuICR7YmxvY2tFcnJvck1lc3NhZ2V9LiBJbnNwZWN0IHJlc3BvbnNlIG9iamVjdCBmb3IgZGV0YWlscy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIC8vIEVycm9ycyBpbiBzdHJlYW1Qcm9taXNlIGFyZSBhbHJlYWR5IGNhdGNoYWJsZSBieSB0aGUgdXNlciBhc1xuICAgICAgICAgICAgLy8gc3RyZWFtUHJvbWlzZSBpcyByZXR1cm5lZC5cbiAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0aW5nIHRoZSBlcnJvciBtZXNzYWdlIGluIGxvZ3MuXG4gICAgICAgICAgICBpZiAoZS5tZXNzYWdlICE9PSBTSUxFTlRfRVJST1IpIHtcbiAgICAgICAgICAgICAgICAvLyBVc2VycyBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gX3NlbmRQcm9taXNlIHRvIGNhdGNoIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIGRvd25zdHJlYW0gZnJvbSBzdHJlYW1Qcm9taXNlLCBzbyB0aGV5IHNob3VsZCBub3QgdGhyb3cuXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdHJlYW1Qcm9taXNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvdW50VG9rZW5zKGFwaUtleSwgbW9kZWwsIHBhcmFtcykge1xuICAgIGNvbnN0IHVybCA9IG5ldyBSZXF1ZXN0VXJsKG1vZGVsLCBUYXNrLkNPVU5UX1RPS0VOUywgYXBpS2V5LCBmYWxzZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlUmVxdWVzdCh1cmwsIEpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBtb2RlbCB9KSkpO1xuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBlbWJlZENvbnRlbnQoYXBpS2V5LCBtb2RlbCwgcGFyYW1zKSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFJlcXVlc3RVcmwobW9kZWwsIFRhc2suRU1CRURfQ09OVEVOVCwgYXBpS2V5LCBmYWxzZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlUmVxdWVzdCh1cmwsIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5hc3luYyBmdW5jdGlvbiBiYXRjaEVtYmVkQ29udGVudHMoYXBpS2V5LCBtb2RlbCwgcGFyYW1zKSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFJlcXVlc3RVcmwobW9kZWwsIFRhc2suQkFUQ0hfRU1CRURfQ09OVEVOVFMsIGFwaUtleSwgZmFsc2UpO1xuICAgIGNvbnN0IHJlcXVlc3RzV2l0aE1vZGVsID0gcGFyYW1zLnJlcXVlc3RzLm1hcCgocmVxdWVzdCkgPT4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBtb2RlbDogYG1vZGVscy8ke21vZGVsfWAgfSk7XG4gICAgfSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYWtlUmVxdWVzdCh1cmwsIEpTT04uc3RyaW5naWZ5KHsgcmVxdWVzdHM6IHJlcXVlc3RzV2l0aE1vZGVsIH0pKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDbGFzcyBmb3IgZ2VuZXJhdGl2ZSBtb2RlbCBBUElzLlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHZW5lcmF0aXZlTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKGFwaUtleSwgbW9kZWxQYXJhbXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgaWYgKG1vZGVsUGFyYW1zLm1vZGVsLnN0YXJ0c1dpdGgoXCJtb2RlbHMvXCIpKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gKF9hID0gbW9kZWxQYXJhbXMubW9kZWwuc3BsaXQoXCJtb2RlbHMvXCIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWxQYXJhbXMubW9kZWw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uQ29uZmlnID0gbW9kZWxQYXJhbXMuZ2VuZXJhdGlvbkNvbmZpZyB8fCB7fTtcbiAgICAgICAgdGhpcy5zYWZldHlTZXR0aW5ncyA9IG1vZGVsUGFyYW1zLnNhZmV0eVNldHRpbmdzIHx8IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBub24tc3RyZWFtaW5nIGNhbGwgdG8gdGhlIG1vZGVsXG4gICAgICogYW5kIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYSBzaW5nbGUge0BsaW5rIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlfS5cbiAgICAgKi9cbiAgICBhc3luYyBnZW5lcmF0ZUNvbnRlbnQocmVxdWVzdCkge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbXMgPSBmb3JtYXRHZW5lcmF0ZUNvbnRlbnRJbnB1dChyZXF1ZXN0KTtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlQ29udGVudCh0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgT2JqZWN0LmFzc2lnbih7IGdlbmVyYXRpb25Db25maWc6IHRoaXMuZ2VuZXJhdGlvbkNvbmZpZywgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MgfSwgZm9ybWF0dGVkUGFyYW1zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2luZ2xlIHN0cmVhbWluZyBjYWxsIHRvIHRoZSBtb2RlbFxuICAgICAqIGFuZCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGFuIGl0ZXJhYmxlIHN0cmVhbSB0aGF0IGl0ZXJhdGVzXG4gICAgICogb3ZlciBhbGwgY2h1bmtzIGluIHRoZSBzdHJlYW1pbmcgcmVzcG9uc2UgYXMgd2VsbCBhc1xuICAgICAqIGEgcHJvbWlzZSB0aGF0IHJldHVybnMgdGhlIGZpbmFsIGFnZ3JlZ2F0ZWQgcmVzcG9uc2UuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVDb250ZW50U3RyZWFtKHJlcXVlc3QpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkUGFyYW1zID0gZm9ybWF0R2VuZXJhdGVDb250ZW50SW5wdXQocmVxdWVzdCk7XG4gICAgICAgIHJldHVybiBnZW5lcmF0ZUNvbnRlbnRTdHJlYW0odGhpcy5hcGlLZXksIHRoaXMubW9kZWwsIE9iamVjdC5hc3NpZ24oeyBnZW5lcmF0aW9uQ29uZmlnOiB0aGlzLmdlbmVyYXRpb25Db25maWcsIHNhZmV0eVNldHRpbmdzOiB0aGlzLnNhZmV0eVNldHRpbmdzIH0sIGZvcm1hdHRlZFBhcmFtcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgbmV3IHtAbGluayBDaGF0U2Vzc2lvbn0gaW5zdGFuY2Ugd2hpY2ggY2FuIGJlIHVzZWQgZm9yXG4gICAgICogbXVsdGktdHVybiBjaGF0cy5cbiAgICAgKi9cbiAgICBzdGFydENoYXQoc3RhcnRDaGF0UGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdFNlc3Npb24odGhpcy5hcGlLZXksIHRoaXMubW9kZWwsIHN0YXJ0Q2hhdFBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvdW50cyB0aGUgdG9rZW5zIGluIHRoZSBwcm92aWRlZCByZXF1ZXN0LlxuICAgICAqL1xuICAgIGFzeW5jIGNvdW50VG9rZW5zKHJlcXVlc3QpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkUGFyYW1zID0gZm9ybWF0R2VuZXJhdGVDb250ZW50SW5wdXQocmVxdWVzdCk7XG4gICAgICAgIHJldHVybiBjb3VudFRva2Vucyh0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgZm9ybWF0dGVkUGFyYW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1iZWRzIHRoZSBwcm92aWRlZCBjb250ZW50LlxuICAgICAqL1xuICAgIGFzeW5jIGVtYmVkQ29udGVudChyZXF1ZXN0KSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBhcmFtcyA9IGZvcm1hdEVtYmVkQ29udGVudElucHV0KHJlcXVlc3QpO1xuICAgICAgICByZXR1cm4gZW1iZWRDb250ZW50KHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBmb3JtYXR0ZWRQYXJhbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWJlZHMgYW4gYXJyYXkgb2Yge0BsaW5rIEVtYmVkQ29udGVudFJlcXVlc3R9cy5cbiAgICAgKi9cbiAgICBhc3luYyBiYXRjaEVtYmVkQ29udGVudHMoYmF0Y2hFbWJlZENvbnRlbnRSZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiBiYXRjaEVtYmVkQ29udGVudHModGhpcy5hcGlLZXksIHRoaXMubW9kZWwsIGJhdGNoRW1iZWRDb250ZW50UmVxdWVzdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUb3AtbGV2ZWwgY2xhc3MgZm9yIHRoaXMgU0RLXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSSB7XG4gICAgY29uc3RydWN0b3IoYXBpS2V5KSB7XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEge0BsaW5rIEdlbmVyYXRpdmVNb2RlbH0gaW5zdGFuY2UgZm9yIHRoZSBwcm92aWRlZCBtb2RlbCBuYW1lLlxuICAgICAqL1xuICAgIGdldEdlbmVyYXRpdmVNb2RlbChtb2RlbFBhcmFtcykge1xuICAgICAgICBpZiAoIW1vZGVsUGFyYW1zLm1vZGVsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoYE11c3QgcHJvdmlkZSBhIG1vZGVsIG5hbWUuIGAgK1xuICAgICAgICAgICAgICAgIGBFeGFtcGxlOiBnZW5haS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogJ215LW1vZGVsLW5hbWUnIH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0aXZlTW9kZWwodGhpcy5hcGlLZXksIG1vZGVsUGFyYW1zKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEJsb2NrUmVhc29uLCBDaGF0U2Vzc2lvbiwgRmluaXNoUmVhc29uLCBHZW5lcmF0aXZlTW9kZWwsIEdvb2dsZUdlbmVyYXRpdmVBSSwgSGFybUJsb2NrVGhyZXNob2xkLCBIYXJtQ2F0ZWdvcnksIEhhcm1Qcm9iYWJpbGl0eSwgVGFza1R5cGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6WyJIYXJtQ2F0ZWdvcnkiLCJIYXJtQmxvY2tUaHJlc2hvbGQiLCJIYXJtUHJvYmFiaWxpdHkiLCJCbG9ja1JlYXNvbiIsIkZpbmlzaFJlYXNvbiIsIlRhc2tUeXBlIiwiR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIkdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IiLCJyZXNwb25zZSIsIkJBU0VfVVJMIiwiQVBJX1ZFUlNJT04iLCJQQUNLQUdFX1ZFUlNJT04iLCJQQUNLQUdFX0xPR19IRUFERVIiLCJUYXNrIiwiUmVxdWVzdFVybCIsIm1vZGVsIiwidGFzayIsImFwaUtleSIsInN0cmVhbSIsInRvU3RyaW5nIiwidXJsIiwiZ2V0Q2xpZW50SGVhZGVycyIsIm1ha2VSZXF1ZXN0IiwiYm9keSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIm9rIiwianNvbiIsImVycm9yIiwiZGV0YWlscyIsIkpTT04iLCJzdHJpbmdpZnkiLCJlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImVyciIsInN0YWNrIiwiYWRkSGVscGVycyIsInRleHQiLCJjYW5kaWRhdGVzIiwibGVuZ3RoIiwiY29uc29sZSIsIndhcm4iLCJoYWRCYWRGaW5pc2hSZWFzb24iLCJmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZSIsImdldFRleHQiLCJwcm9tcHRGZWVkYmFjayIsIl9hIiwiX2IiLCJfYyIsIl9kIiwiY29udGVudCIsInBhcnRzIiwiYmFkRmluaXNoUmVhc29ucyIsIlJFQ0lUQVRJT04iLCJTQUZFVFkiLCJjYW5kaWRhdGUiLCJmaW5pc2hSZWFzb24iLCJpbmNsdWRlcyIsImJsb2NrUmVhc29uIiwiYmxvY2tSZWFzb25NZXNzYWdlIiwiZmlyc3RDYW5kaWRhdGUiLCJmaW5pc2hNZXNzYWdlIiwiX19hd2FpdCIsInYiLCJfX2FzeW5jR2VuZXJhdG9yIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwiVHlwZUVycm9yIiwiZyIsImFwcGx5IiwiaSIsInEiLCJ2ZXJiIiwibiIsIlByb21pc2UiLCJhIiwiYiIsInB1c2giLCJyZXN1bWUiLCJzdGVwIiwic2V0dGxlIiwiciIsInZhbHVlIiwicmVzb2x2ZSIsInRoZW4iLCJmdWxmaWxsIiwicmVqZWN0IiwiZiIsInNoaWZ0IiwiU3VwcHJlc3NlZEVycm9yIiwic3VwcHJlc3NlZCIsIm5hbWUiLCJyZXNwb25zZUxpbmVSRSIsInByb2Nlc3NTdHJlYW0iLCJpbnB1dFN0cmVhbSIsInBpcGVUaHJvdWdoIiwiVGV4dERlY29kZXJTdHJlYW0iLCJmYXRhbCIsInJlc3BvbnNlU3RyZWFtIiwiZ2V0UmVzcG9uc2VTdHJlYW0iLCJzdHJlYW0xIiwic3RyZWFtMiIsInRlZSIsImdlbmVyYXRlUmVzcG9uc2VTZXF1ZW5jZSIsImdldFJlc3BvbnNlUHJvbWlzZSIsImFsbFJlc3BvbnNlcyIsInJlYWRlciIsImdldFJlYWRlciIsImRvbmUiLCJyZWFkIiwiYWdncmVnYXRlUmVzcG9uc2VzIiwiYXJndW1lbnRzIiwiZ2VuZXJhdGVSZXNwb25zZVNlcXVlbmNlXzEiLCJSZWFkYWJsZVN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsImN1cnJlbnRUZXh0IiwicHVtcCIsInRyaW0iLCJjbG9zZSIsIm1hdGNoIiwicGFyc2VkUmVzcG9uc2UiLCJwYXJzZSIsImVucXVldWUiLCJzdWJzdHJpbmciLCJyZXNwb25zZXMiLCJsYXN0UmVzcG9uc2UiLCJhZ2dyZWdhdGVkUmVzcG9uc2UiLCJpbmRleCIsImNpdGF0aW9uTWV0YWRhdGEiLCJzYWZldHlSYXRpbmdzIiwicm9sZSIsInBhcnQiLCJnZW5lcmF0ZUNvbnRlbnRTdHJlYW0iLCJwYXJhbXMiLCJTVFJFQU1fR0VORVJBVEVfQ09OVEVOVCIsImdlbmVyYXRlQ29udGVudCIsIkdFTkVSQVRFX0NPTlRFTlQiLCJyZXNwb25zZUpzb24iLCJlbmhhbmNlZFJlc3BvbnNlIiwiZm9ybWF0TmV3Q29udGVudCIsInJlcXVlc3QiLCJuZXdQYXJ0cyIsInBhcnRPclN0cmluZyIsImZvcm1hdEdlbmVyYXRlQ29udGVudElucHV0IiwiY29udGVudHMiLCJmb3JtYXRFbWJlZENvbnRlbnRJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsIlNJTEVOVF9FUlJPUiIsIkNoYXRTZXNzaW9uIiwiX2hpc3RvcnkiLCJfc2VuZFByb21pc2UiLCJfYXBpS2V5IiwiaGlzdG9yeSIsIm1hcCIsImdldEhpc3RvcnkiLCJzZW5kTWVzc2FnZSIsIm5ld0NvbnRlbnQiLCJnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0Iiwic2FmZXR5U2V0dGluZ3MiLCJnZW5lcmF0aW9uQ29uZmlnIiwiZmluYWxSZXN1bHQiLCJyZXN1bHQiLCJyZXNwb25zZUNvbnRlbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJibG9ja0Vycm9yTWVzc2FnZSIsInNlbmRNZXNzYWdlU3RyZWFtIiwic3RyZWFtUHJvbWlzZSIsImNhdGNoIiwiX2lnbm9yZWQiLCJzdHJlYW1SZXN1bHQiLCJjb3VudFRva2VucyIsIkNPVU5UX1RPS0VOUyIsImVtYmVkQ29udGVudCIsIkVNQkVEX0NPTlRFTlQiLCJiYXRjaEVtYmVkQ29udGVudHMiLCJCQVRDSF9FTUJFRF9DT05URU5UUyIsInJlcXVlc3RzV2l0aE1vZGVsIiwicmVxdWVzdHMiLCJHZW5lcmF0aXZlTW9kZWwiLCJtb2RlbFBhcmFtcyIsInN0YXJ0c1dpdGgiLCJzcGxpdCIsImZvcm1hdHRlZFBhcmFtcyIsInN0YXJ0Q2hhdCIsInN0YXJ0Q2hhdFBhcmFtcyIsImJhdGNoRW1iZWRDb250ZW50UmVxdWVzdCIsIkdvb2dsZUdlbmVyYXRpdmVBSSIsImdldEdlbmVyYXRpdmVNb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@google/generative-ai/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/pinecone/dist/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/pinecone/dist/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PineconeStore: () => (/* reexport safe */ _vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.PineconeStore)\n/* harmony export */ });\n/* harmony import */ var _vectorstores_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vectorstores.js */ \"(rsc)/./node_modules/@langchain/pinecone/dist/vectorstores.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9waW5lY29uZS9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9waW5lY29uZS9kaXN0L2luZGV4LmpzPzdlN2EiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vdmVjdG9yc3RvcmVzLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/pinecone/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/pinecone/dist/vectorstores.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/pinecone/dist/vectorstores.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PineconeStore: () => (/* binding */ PineconeStore)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var flat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! flat */ \"(rsc)/./node_modules/flat/index.js\");\n/* harmony import */ var _langchain_core_vectorstores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/vectorstores */ \"(rsc)/./node_modules/@langchain/core/vectorstores.js\");\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/documents */ \"(rsc)/./node_modules/@langchain/core/documents.js\");\n/* harmony import */ var _langchain_core_utils_async_caller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/async_caller */ \"(rsc)/./node_modules/@langchain/core/utils/async_caller.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\");\n/* harmony import */ var _langchain_core_utils_math__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @langchain/core/utils/math */ \"(rsc)/./node_modules/@langchain/core/utils/math.js\");\n\n\n\n\n\n\n\n/**\n * Class for managing and operating vector search applications with\n * Pinecone, the cloud-native high-scale vector database\n */ class PineconeStore extends _langchain_core_vectorstores__WEBPACK_IMPORTED_MODULE_1__.VectorStore {\n    _vectorstoreType() {\n        return \"pinecone\";\n    }\n    constructor(embeddings, params){\n        super(embeddings, params);\n        Object.defineProperty(this, \"textKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"pineconeIndex\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"filter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.embeddings = embeddings;\n        const { namespace, pineconeIndex, textKey, filter, ...asyncCallerArgs } = params;\n        this.namespace = namespace;\n        this.pineconeIndex = pineconeIndex;\n        this.textKey = textKey ?? \"text\";\n        this.filter = filter;\n        this.caller = new _langchain_core_utils_async_caller__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(asyncCallerArgs);\n    }\n    /**\n     * Method that adds documents to the Pinecone database.\n     * @param documents Array of documents to add to the Pinecone database.\n     * @param options Optional ids for the documents.\n     * @returns Promise that resolves with the ids of the added documents.\n     */ async addDocuments(documents, options) {\n        const texts = documents.map(({ pageContent })=>pageContent);\n        return this.addVectors(await this.embeddings.embedDocuments(texts), documents, options);\n    }\n    /**\n     * Method that adds vectors to the Pinecone database.\n     * @param vectors Array of vectors to add to the Pinecone database.\n     * @param documents Array of documents associated with the vectors.\n     * @param options Optional ids for the vectors.\n     * @returns Promise that resolves with the ids of the added vectors.\n     */ async addVectors(vectors, documents, options) {\n        const ids = Array.isArray(options) ? options : options?.ids;\n        const documentIds = ids == null ? documents.map(()=>uuid__WEBPACK_IMPORTED_MODULE_6__[\"default\"]()) : ids;\n        const pineconeVectors = vectors.map((values, idx)=>{\n            // Pinecone doesn't support nested objects, so we flatten them\n            const documentMetadata = {\n                ...documents[idx].metadata\n            };\n            // preserve string arrays which are allowed\n            const stringArrays = {};\n            for (const key of Object.keys(documentMetadata)){\n                if (Array.isArray(documentMetadata[key]) && // eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/no-explicit-any\n                documentMetadata[key].every((el)=>typeof el === \"string\")) {\n                    stringArrays[key] = documentMetadata[key];\n                    delete documentMetadata[key];\n                }\n            }\n            const metadata = {\n                ...flat__WEBPACK_IMPORTED_MODULE_0__(documentMetadata),\n                ...stringArrays,\n                [this.textKey]: documents[idx].pageContent\n            };\n            // Pinecone doesn't support null values, so we remove them\n            for (const key of Object.keys(metadata)){\n                if (metadata[key] == null) {\n                    delete metadata[key];\n                } else if (typeof metadata[key] === \"object\" && Object.keys(metadata[key]).length === 0) {\n                    delete metadata[key];\n                }\n            }\n            return {\n                id: documentIds[idx],\n                metadata,\n                values\n            };\n        });\n        const namespace = this.pineconeIndex.namespace(this.namespace ?? \"\");\n        // Pinecone recommends a limit of 100 vectors per upsert request\n        const chunkSize = 100;\n        const chunkedVectors = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__.chunkArray)(pineconeVectors, chunkSize);\n        const batchRequests = chunkedVectors.map((chunk)=>this.caller.call(async ()=>namespace.upsert(chunk)));\n        await Promise.all(batchRequests);\n        return documentIds;\n    }\n    /**\n     * Method that deletes vectors from the Pinecone database.\n     * @param params Parameters for the delete operation.\n     * @returns Promise that resolves when the delete operation is complete.\n     */ async delete(params) {\n        const { deleteAll, ids, filter } = params;\n        const namespace = this.pineconeIndex.namespace(this.namespace ?? \"\");\n        if (deleteAll) {\n            await namespace.deleteAll();\n        } else if (ids) {\n            const batchSize = 1000;\n            for(let i = 0; i < ids.length; i += batchSize){\n                const batchIds = ids.slice(i, i + batchSize);\n                await namespace.deleteMany(batchIds);\n            }\n        } else if (filter) {\n            await namespace.deleteMany(filter);\n        } else {\n            throw new Error(\"Either ids or delete_all must be provided.\");\n        }\n    }\n    async _runPineconeQuery(query, k, filter, options) {\n        if (filter && this.filter) {\n            throw new Error(\"cannot provide both `filter` and `this.filter`\");\n        }\n        const _filter = filter ?? this.filter;\n        const namespace = this.pineconeIndex.namespace(this.namespace ?? \"\");\n        const results = await namespace.query({\n            includeMetadata: true,\n            topK: k,\n            vector: query,\n            filter: _filter,\n            ...options\n        });\n        return results;\n    }\n    /**\n     * Method that performs a similarity search in the Pinecone database and\n     * returns the results along with their scores.\n     * @param query Query vector for the similarity search.\n     * @param k Number of top results to return.\n     * @param filter Optional filter to apply to the search.\n     * @returns Promise that resolves with an array of documents and their scores.\n     */ async similaritySearchVectorWithScore(query, k, filter) {\n        const results = await this._runPineconeQuery(query, k, filter);\n        const result = [];\n        if (results.matches) {\n            for (const res of results.matches){\n                const { [this.textKey]: pageContent, ...metadata } = res.metadata ?? {};\n                if (res.score) {\n                    result.push([\n                        new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_2__.Document({\n                            metadata,\n                            pageContent\n                        }),\n                        res.score\n                    ]);\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * Return documents selected using the maximal marginal relevance.\n     * Maximal marginal relevance optimizes for similarity to the query AND diversity\n     * among selected documents.\n     *\n     * @param {string} query - Text to look up documents similar to.\n     * @param {number} options.k - Number of documents to return.\n     * @param {number} options.fetchK=20 - Number of documents to fetch before passing to the MMR algorithm.\n     * @param {number} options.lambda=0.5 - Number between 0 and 1 that determines the degree of diversity among the results,\n     *                 where 0 corresponds to maximum diversity and 1 to minimum diversity.\n     * @param {PineconeMetadata} options.filter - Optional filter to apply to the search.\n     *\n     * @returns {Promise<DocumentInterface[]>} - List of documents selected by maximal marginal relevance.\n     */ async maxMarginalRelevanceSearch(query, options) {\n        const queryEmbedding = await this.embeddings.embedQuery(query);\n        const results = await this._runPineconeQuery(queryEmbedding, options.fetchK ?? 20, options.filter, {\n            includeValues: true\n        });\n        const matches = results?.matches ?? [];\n        const embeddingList = matches.map((match)=>match.values);\n        const mmrIndexes = (0,_langchain_core_utils_math__WEBPACK_IMPORTED_MODULE_5__.maximalMarginalRelevance)(queryEmbedding, embeddingList, options.lambda, options.k);\n        const topMmrMatches = mmrIndexes.map((idx)=>matches[idx]);\n        const finalResult = [];\n        for (const res of topMmrMatches){\n            const { [this.textKey]: pageContent, ...metadata } = res.metadata ?? {};\n            if (res.score) {\n                finalResult.push(new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_2__.Document({\n                    metadata,\n                    pageContent\n                }));\n            }\n        }\n        return finalResult;\n    }\n    /**\n     * Static method that creates a new instance of the PineconeStore class\n     * from texts.\n     * @param texts Array of texts to add to the Pinecone database.\n     * @param metadatas Metadata associated with the texts.\n     * @param embeddings Embeddings to use for the texts.\n     * @param dbConfig Configuration for the Pinecone database.\n     * @returns Promise that resolves with a new instance of the PineconeStore class.\n     */ static async fromTexts(texts, metadatas, embeddings, dbConfig) {\n        const docs = [];\n        for(let i = 0; i < texts.length; i += 1){\n            const metadata = Array.isArray(metadatas) ? metadatas[i] : metadatas;\n            const newDoc = new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_2__.Document({\n                pageContent: texts[i],\n                metadata\n            });\n            docs.push(newDoc);\n        }\n        const args = {\n            pineconeIndex: dbConfig.pineconeIndex,\n            textKey: dbConfig.textKey,\n            namespace: dbConfig.namespace\n        };\n        return PineconeStore.fromDocuments(docs, embeddings, args);\n    }\n    /**\n     * Static method that creates a new instance of the PineconeStore class\n     * from documents.\n     * @param docs Array of documents to add to the Pinecone database.\n     * @param embeddings Embeddings to use for the documents.\n     * @param dbConfig Configuration for the Pinecone database.\n     * @returns Promise that resolves with a new instance of the PineconeStore class.\n     */ static async fromDocuments(docs, embeddings, dbConfig) {\n        const args = dbConfig;\n        args.textKey = dbConfig.textKey ?? \"text\";\n        const instance = new this(embeddings, args);\n        await instance.addDocuments(docs);\n        return instance;\n    }\n    /**\n     * Static method that creates a new instance of the PineconeStore class\n     * from an existing index.\n     * @param embeddings Embeddings to use for the documents.\n     * @param dbConfig Configuration for the Pinecone database.\n     * @returns Promise that resolves with a new instance of the PineconeStore class.\n     */ static async fromExistingIndex(embeddings, dbConfig) {\n        const instance = new this(embeddings, dbConfig);\n        return instance;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9waW5lY29uZS9kaXN0L3ZlY3RvcnN0b3Jlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE2QjtBQUNGO0FBQ2lDO0FBQ1A7QUFDYTtBQUNIO0FBQ087QUFDdEU7OztDQUdDLEdBQ00sTUFBTU8sc0JBQXNCTCxxRUFBV0E7SUFDMUNNLG1CQUFtQjtRQUNmLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxVQUFVLEVBQUVDLE1BQU0sQ0FBRTtRQUM1QixLQUFLLENBQUNELFlBQVlDO1FBQ2xCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDUCxVQUFVLEdBQUdBO1FBQ2xCLE1BQU0sRUFBRVEsU0FBUyxFQUFFQyxhQUFhLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxFQUFFLEdBQUdDLGlCQUFpQixHQUFHWDtRQUMxRSxJQUFJLENBQUNPLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDQyxhQUFhLEdBQUdBO1FB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LE9BQU9JO0lBQ1g7SUFDQTs7Ozs7O0tBTUMsR0FDRCxhQUFhQyxrQkFBa0J6RixVQUFVLEVBQUVtRixRQUFRLEVBQUU7UUFDakQsTUFBTUssV0FBVyxJQUFJLElBQUksQ0FBQ3hGLFlBQVltRjtRQUN0QyxPQUFPSztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3BpbmVjb25lL2Rpc3QvdmVjdG9yc3RvcmVzLmpzPzVlNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IGZsYXR0ZW4gZnJvbSBcImZsYXRcIjtcbmltcG9ydCB7IFZlY3RvclN0b3JlLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdmVjdG9yc3RvcmVzXCI7XG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvZG9jdW1lbnRzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2FzeW5jX2NhbGxlclwiO1xuaW1wb3J0IHsgY2h1bmtBcnJheSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvY2h1bmtfYXJyYXlcIjtcbmltcG9ydCB7IG1heGltYWxNYXJnaW5hbFJlbGV2YW5jZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvbWF0aFwiO1xuLyoqXG4gKiBDbGFzcyBmb3IgbWFuYWdpbmcgYW5kIG9wZXJhdGluZyB2ZWN0b3Igc2VhcmNoIGFwcGxpY2F0aW9ucyB3aXRoXG4gKiBQaW5lY29uZSwgdGhlIGNsb3VkLW5hdGl2ZSBoaWdoLXNjYWxlIHZlY3RvciBkYXRhYmFzZVxuICovXG5leHBvcnQgY2xhc3MgUGluZWNvbmVTdG9yZSBleHRlbmRzIFZlY3RvclN0b3JlIHtcbiAgICBfdmVjdG9yc3RvcmVUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJwaW5lY29uZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihlbWJlZGRpbmdzLCBwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIoZW1iZWRkaW5ncywgcGFyYW1zKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dEtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGluZWNvbmVJbmRleFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaWx0ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW1iZWRkaW5ncyA9IGVtYmVkZGluZ3M7XG4gICAgICAgIGNvbnN0IHsgbmFtZXNwYWNlLCBwaW5lY29uZUluZGV4LCB0ZXh0S2V5LCBmaWx0ZXIsIC4uLmFzeW5jQ2FsbGVyQXJncyB9ID0gcGFyYW1zO1xuICAgICAgICB0aGlzLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcbiAgICAgICAgdGhpcy5waW5lY29uZUluZGV4ID0gcGluZWNvbmVJbmRleDtcbiAgICAgICAgdGhpcy50ZXh0S2V5ID0gdGV4dEtleSA/PyBcInRleHRcIjtcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBmaWx0ZXI7XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKGFzeW5jQ2FsbGVyQXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IGFkZHMgZG9jdW1lbnRzIHRvIHRoZSBQaW5lY29uZSBkYXRhYmFzZS5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRzIEFycmF5IG9mIGRvY3VtZW50cyB0byBhZGQgdG8gdGhlIFBpbmVjb25lIGRhdGFiYXNlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIGlkcyBmb3IgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgaWRzIG9mIHRoZSBhZGRlZCBkb2N1bWVudHMuXG4gICAgICovXG4gICAgYXN5bmMgYWRkRG9jdW1lbnRzKGRvY3VtZW50cywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB0ZXh0cyA9IGRvY3VtZW50cy5tYXAoKHsgcGFnZUNvbnRlbnQgfSkgPT4gcGFnZUNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRWZWN0b3JzKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZERvY3VtZW50cyh0ZXh0cyksIGRvY3VtZW50cywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IGFkZHMgdmVjdG9ycyB0byB0aGUgUGluZWNvbmUgZGF0YWJhc2UuXG4gICAgICogQHBhcmFtIHZlY3RvcnMgQXJyYXkgb2YgdmVjdG9ycyB0byBhZGQgdG8gdGhlIFBpbmVjb25lIGRhdGFiYXNlLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudHMgQXJyYXkgb2YgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmVjdG9ycy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBpZHMgZm9yIHRoZSB2ZWN0b3JzLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBpZHMgb2YgdGhlIGFkZGVkIHZlY3RvcnMuXG4gICAgICovXG4gICAgYXN5bmMgYWRkVmVjdG9ycyh2ZWN0b3JzLCBkb2N1bWVudHMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgaWRzID0gQXJyYXkuaXNBcnJheShvcHRpb25zKSA/IG9wdGlvbnMgOiBvcHRpb25zPy5pZHM7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50SWRzID0gaWRzID09IG51bGwgPyBkb2N1bWVudHMubWFwKCgpID0+IHV1aWQudjQoKSkgOiBpZHM7XG4gICAgICAgIGNvbnN0IHBpbmVjb25lVmVjdG9ycyA9IHZlY3RvcnMubWFwKCh2YWx1ZXMsIGlkeCkgPT4ge1xuICAgICAgICAgICAgLy8gUGluZWNvbmUgZG9lc24ndCBzdXBwb3J0IG5lc3RlZCBvYmplY3RzLCBzbyB3ZSBmbGF0dGVuIHRoZW1cbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50TWV0YWRhdGEgPSB7IC4uLmRvY3VtZW50c1tpZHhdLm1ldGFkYXRhIH07XG4gICAgICAgICAgICAvLyBwcmVzZXJ2ZSBzdHJpbmcgYXJyYXlzIHdoaWNoIGFyZSBhbGxvd2VkXG4gICAgICAgICAgICBjb25zdCBzdHJpbmdBcnJheXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGRvY3VtZW50TWV0YWRhdGEpKSB7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZG9jdW1lbnRNZXRhZGF0YVtrZXldKSAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudE1ldGFkYXRhW2tleV0uZXZlcnkoKGVsKSA9PiB0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ0FycmF5c1trZXldID0gZG9jdW1lbnRNZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZG9jdW1lbnRNZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgIC4uLmZsYXR0ZW4oZG9jdW1lbnRNZXRhZGF0YSksXG4gICAgICAgICAgICAgICAgLi4uc3RyaW5nQXJyYXlzLFxuICAgICAgICAgICAgICAgIFt0aGlzLnRleHRLZXldOiBkb2N1bWVudHNbaWR4XS5wYWdlQ29udGVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBQaW5lY29uZSBkb2Vzbid0IHN1cHBvcnQgbnVsbCB2YWx1ZXMsIHNvIHdlIHJlbW92ZSB0aGVtXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhtZXRhZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGFba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWV0YWRhdGFba2V5XSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtZXRhZGF0YVtrZXldKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1ldGFkYXRhW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogZG9jdW1lbnRJZHNbaWR4XSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB2YWx1ZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gdGhpcy5waW5lY29uZUluZGV4Lm5hbWVzcGFjZSh0aGlzLm5hbWVzcGFjZSA/PyBcIlwiKTtcbiAgICAgICAgLy8gUGluZWNvbmUgcmVjb21tZW5kcyBhIGxpbWl0IG9mIDEwMCB2ZWN0b3JzIHBlciB1cHNlcnQgcmVxdWVzdFxuICAgICAgICBjb25zdCBjaHVua1NpemUgPSAxMDA7XG4gICAgICAgIGNvbnN0IGNodW5rZWRWZWN0b3JzID0gY2h1bmtBcnJheShwaW5lY29uZVZlY3RvcnMsIGNodW5rU2l6ZSk7XG4gICAgICAgIGNvbnN0IGJhdGNoUmVxdWVzdHMgPSBjaHVua2VkVmVjdG9ycy5tYXAoKGNodW5rKSA9PiB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IG5hbWVzcGFjZS51cHNlcnQoY2h1bmspKSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGJhdGNoUmVxdWVzdHMpO1xuICAgICAgICByZXR1cm4gZG9jdW1lbnRJZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IGRlbGV0ZXMgdmVjdG9ycyBmcm9tIHRoZSBQaW5lY29uZSBkYXRhYmFzZS5cbiAgICAgKiBAcGFyYW0gcGFyYW1zIFBhcmFtZXRlcnMgZm9yIHRoZSBkZWxldGUgb3BlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBkZWxldGUgb3BlcmF0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZShwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyBkZWxldGVBbGwsIGlkcywgZmlsdGVyIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IHRoaXMucGluZWNvbmVJbmRleC5uYW1lc3BhY2UodGhpcy5uYW1lc3BhY2UgPz8gXCJcIik7XG4gICAgICAgIGlmIChkZWxldGVBbGwpIHtcbiAgICAgICAgICAgIGF3YWl0IG5hbWVzcGFjZS5kZWxldGVBbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDEwMDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hJZHMgPSBpZHMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmFtZXNwYWNlLmRlbGV0ZU1hbnkoYmF0Y2hJZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZpbHRlcikge1xuICAgICAgICAgICAgYXdhaXQgbmFtZXNwYWNlLmRlbGV0ZU1hbnkoZmlsdGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVpdGhlciBpZHMgb3IgZGVsZXRlX2FsbCBtdXN0IGJlIHByb3ZpZGVkLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfcnVuUGluZWNvbmVRdWVyeShxdWVyeSwgaywgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChmaWx0ZXIgJiYgdGhpcy5maWx0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBwcm92aWRlIGJvdGggYGZpbHRlcmAgYW5kIGB0aGlzLmZpbHRlcmBcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2ZpbHRlciA9IGZpbHRlciA/PyB0aGlzLmZpbHRlcjtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gdGhpcy5waW5lY29uZUluZGV4Lm5hbWVzcGFjZSh0aGlzLm5hbWVzcGFjZSA/PyBcIlwiKTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IG5hbWVzcGFjZS5xdWVyeSh7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGE6IHRydWUsXG4gICAgICAgICAgICB0b3BLOiBrLFxuICAgICAgICAgICAgdmVjdG9yOiBxdWVyeSxcbiAgICAgICAgICAgIGZpbHRlcjogX2ZpbHRlcixcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgcGVyZm9ybXMgYSBzaW1pbGFyaXR5IHNlYXJjaCBpbiB0aGUgUGluZWNvbmUgZGF0YWJhc2UgYW5kXG4gICAgICogcmV0dXJucyB0aGUgcmVzdWx0cyBhbG9uZyB3aXRoIHRoZWlyIHNjb3Jlcy5cbiAgICAgKiBAcGFyYW0gcXVlcnkgUXVlcnkgdmVjdG9yIGZvciB0aGUgc2ltaWxhcml0eSBzZWFyY2guXG4gICAgICogQHBhcmFtIGsgTnVtYmVyIG9mIHRvcCByZXN1bHRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0gZmlsdGVyIE9wdGlvbmFsIGZpbHRlciB0byBhcHBseSB0byB0aGUgc2VhcmNoLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIGFycmF5IG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgc2NvcmVzLlxuICAgICAqL1xuICAgIGFzeW5jIHNpbWlsYXJpdHlTZWFyY2hWZWN0b3JXaXRoU2NvcmUocXVlcnksIGssIGZpbHRlcikge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fcnVuUGluZWNvbmVRdWVyeShxdWVyeSwgaywgZmlsdGVyKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGlmIChyZXN1bHRzLm1hdGNoZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzIG9mIHJlc3VsdHMubWF0Y2hlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgW3RoaXMudGV4dEtleV06IHBhZ2VDb250ZW50LCAuLi5tZXRhZGF0YSB9ID0gKHJlcy5tZXRhZGF0YSA/P1xuICAgICAgICAgICAgICAgICAgICB7fSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zY29yZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbbmV3IERvY3VtZW50KHsgbWV0YWRhdGEsIHBhZ2VDb250ZW50IH0pLCByZXMuc2NvcmVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGRvY3VtZW50cyBzZWxlY3RlZCB1c2luZyB0aGUgbWF4aW1hbCBtYXJnaW5hbCByZWxldmFuY2UuXG4gICAgICogTWF4aW1hbCBtYXJnaW5hbCByZWxldmFuY2Ugb3B0aW1pemVzIGZvciBzaW1pbGFyaXR5IHRvIHRoZSBxdWVyeSBBTkQgZGl2ZXJzaXR5XG4gICAgICogYW1vbmcgc2VsZWN0ZWQgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5IC0gVGV4dCB0byBsb29rIHVwIGRvY3VtZW50cyBzaW1pbGFyIHRvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLmsgLSBOdW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5mZXRjaEs9MjAgLSBOdW1iZXIgb2YgZG9jdW1lbnRzIHRvIGZldGNoIGJlZm9yZSBwYXNzaW5nIHRvIHRoZSBNTVIgYWxnb3JpdGhtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLmxhbWJkYT0wLjUgLSBOdW1iZXIgYmV0d2VlbiAwIGFuZCAxIHRoYXQgZGV0ZXJtaW5lcyB0aGUgZGVncmVlIG9mIGRpdmVyc2l0eSBhbW9uZyB0aGUgcmVzdWx0cyxcbiAgICAgKiAgICAgICAgICAgICAgICAgd2hlcmUgMCBjb3JyZXNwb25kcyB0byBtYXhpbXVtIGRpdmVyc2l0eSBhbmQgMSB0byBtaW5pbXVtIGRpdmVyc2l0eS5cbiAgICAgKiBAcGFyYW0ge1BpbmVjb25lTWV0YWRhdGF9IG9wdGlvbnMuZmlsdGVyIC0gT3B0aW9uYWwgZmlsdGVyIHRvIGFwcGx5IHRvIHRoZSBzZWFyY2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudEludGVyZmFjZVtdPn0gLSBMaXN0IG9mIGRvY3VtZW50cyBzZWxlY3RlZCBieSBtYXhpbWFsIG1hcmdpbmFsIHJlbGV2YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBtYXhNYXJnaW5hbFJlbGV2YW5jZVNlYXJjaChxdWVyeSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBxdWVyeUVtYmVkZGluZyA9IGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZFF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuX3J1blBpbmVjb25lUXVlcnkocXVlcnlFbWJlZGRpbmcsIG9wdGlvbnMuZmV0Y2hLID8/IDIwLCBvcHRpb25zLmZpbHRlciwgeyBpbmNsdWRlVmFsdWVzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gcmVzdWx0cz8ubWF0Y2hlcyA/PyBbXTtcbiAgICAgICAgY29uc3QgZW1iZWRkaW5nTGlzdCA9IG1hdGNoZXMubWFwKChtYXRjaCkgPT4gbWF0Y2gudmFsdWVzKTtcbiAgICAgICAgY29uc3QgbW1ySW5kZXhlcyA9IG1heGltYWxNYXJnaW5hbFJlbGV2YW5jZShxdWVyeUVtYmVkZGluZywgZW1iZWRkaW5nTGlzdCwgb3B0aW9ucy5sYW1iZGEsIG9wdGlvbnMuayk7XG4gICAgICAgIGNvbnN0IHRvcE1tck1hdGNoZXMgPSBtbXJJbmRleGVzLm1hcCgoaWR4KSA9PiBtYXRjaGVzW2lkeF0pO1xuICAgICAgICBjb25zdCBmaW5hbFJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHJlcyBvZiB0b3BNbXJNYXRjaGVzKSB7XG4gICAgICAgICAgICBjb25zdCB7IFt0aGlzLnRleHRLZXldOiBwYWdlQ29udGVudCwgLi4ubWV0YWRhdGEgfSA9IChyZXMubWV0YWRhdGEgPz9cbiAgICAgICAgICAgICAgICB7fSk7XG4gICAgICAgICAgICBpZiAocmVzLnNjb3JlKSB7XG4gICAgICAgICAgICAgICAgZmluYWxSZXN1bHQucHVzaChuZXcgRG9jdW1lbnQoeyBtZXRhZGF0YSwgcGFnZUNvbnRlbnQgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaW5hbFJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIG1ldGhvZCB0aGF0IGNyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFBpbmVjb25lU3RvcmUgY2xhc3NcbiAgICAgKiBmcm9tIHRleHRzLlxuICAgICAqIEBwYXJhbSB0ZXh0cyBBcnJheSBvZiB0ZXh0cyB0byBhZGQgdG8gdGhlIFBpbmVjb25lIGRhdGFiYXNlLlxuICAgICAqIEBwYXJhbSBtZXRhZGF0YXMgTWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSB0ZXh0cy5cbiAgICAgKiBAcGFyYW0gZW1iZWRkaW5ncyBFbWJlZGRpbmdzIHRvIHVzZSBmb3IgdGhlIHRleHRzLlxuICAgICAqIEBwYXJhbSBkYkNvbmZpZyBDb25maWd1cmF0aW9uIGZvciB0aGUgUGluZWNvbmUgZGF0YWJhc2UuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFBpbmVjb25lU3RvcmUgY2xhc3MuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21UZXh0cyh0ZXh0cywgbWV0YWRhdGFzLCBlbWJlZGRpbmdzLCBkYkNvbmZpZykge1xuICAgICAgICBjb25zdCBkb2NzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gQXJyYXkuaXNBcnJheShtZXRhZGF0YXMpID8gbWV0YWRhdGFzW2ldIDogbWV0YWRhdGFzO1xuICAgICAgICAgICAgY29uc3QgbmV3RG9jID0gbmV3IERvY3VtZW50KHtcbiAgICAgICAgICAgICAgICBwYWdlQ29udGVudDogdGV4dHNbaV0sXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3MucHVzaChuZXdEb2MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICAgICAgICBwaW5lY29uZUluZGV4OiBkYkNvbmZpZy5waW5lY29uZUluZGV4LFxuICAgICAgICAgICAgdGV4dEtleTogZGJDb25maWcudGV4dEtleSxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogZGJDb25maWcubmFtZXNwYWNlLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGluZWNvbmVTdG9yZS5mcm9tRG9jdW1lbnRzKGRvY3MsIGVtYmVkZGluZ3MsIGFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRoYXQgY3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgUGluZWNvbmVTdG9yZSBjbGFzc1xuICAgICAqIGZyb20gZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBkb2NzIEFycmF5IG9mIGRvY3VtZW50cyB0byBhZGQgdG8gdGhlIFBpbmVjb25lIGRhdGFiYXNlLlxuICAgICAqIEBwYXJhbSBlbWJlZGRpbmdzIEVtYmVkZGluZ3MgdG8gdXNlIGZvciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBkYkNvbmZpZyBDb25maWd1cmF0aW9uIGZvciB0aGUgUGluZWNvbmUgZGF0YWJhc2UuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFBpbmVjb25lU3RvcmUgY2xhc3MuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21Eb2N1bWVudHMoZG9jcywgZW1iZWRkaW5ncywgZGJDb25maWcpIHtcbiAgICAgICAgY29uc3QgYXJncyA9IGRiQ29uZmlnO1xuICAgICAgICBhcmdzLnRleHRLZXkgPSBkYkNvbmZpZy50ZXh0S2V5ID8/IFwidGV4dFwiO1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyB0aGlzKGVtYmVkZGluZ3MsIGFyZ3MpO1xuICAgICAgICBhd2FpdCBpbnN0YW5jZS5hZGREb2N1bWVudHMoZG9jcyk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIG1ldGhvZCB0aGF0IGNyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFBpbmVjb25lU3RvcmUgY2xhc3NcbiAgICAgKiBmcm9tIGFuIGV4aXN0aW5nIGluZGV4LlxuICAgICAqIEBwYXJhbSBlbWJlZGRpbmdzIEVtYmVkZGluZ3MgdG8gdXNlIGZvciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBkYkNvbmZpZyBDb25maWd1cmF0aW9uIGZvciB0aGUgUGluZWNvbmUgZGF0YWJhc2UuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFBpbmVjb25lU3RvcmUgY2xhc3MuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21FeGlzdGluZ0luZGV4KGVtYmVkZGluZ3MsIGRiQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IHRoaXMoZW1iZWRkaW5ncywgZGJDb25maWcpO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInV1aWQiLCJmbGF0dGVuIiwiVmVjdG9yU3RvcmUiLCJEb2N1bWVudCIsIkFzeW5jQ2FsbGVyIiwiY2h1bmtBcnJheSIsIm1heGltYWxNYXJnaW5hbFJlbGV2YW5jZSIsIlBpbmVjb25lU3RvcmUiLCJfdmVjdG9yc3RvcmVUeXBlIiwiY29uc3RydWN0b3IiLCJlbWJlZGRpbmdzIiwicGFyYW1zIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm5hbWVzcGFjZSIsInBpbmVjb25lSW5kZXgiLCJ0ZXh0S2V5IiwiZmlsdGVyIiwiYXN5bmNDYWxsZXJBcmdzIiwiY2FsbGVyIiwiYWRkRG9jdW1lbnRzIiwiZG9jdW1lbnRzIiwib3B0aW9ucyIsInRleHRzIiwibWFwIiwicGFnZUNvbnRlbnQiLCJhZGRWZWN0b3JzIiwiZW1iZWREb2N1bWVudHMiLCJ2ZWN0b3JzIiwiaWRzIiwiQXJyYXkiLCJpc0FycmF5IiwiZG9jdW1lbnRJZHMiLCJ2NCIsInBpbmVjb25lVmVjdG9ycyIsInZhbHVlcyIsImlkeCIsImRvY3VtZW50TWV0YWRhdGEiLCJtZXRhZGF0YSIsInN0cmluZ0FycmF5cyIsImtleSIsImtleXMiLCJldmVyeSIsImVsIiwibGVuZ3RoIiwiaWQiLCJjaHVua1NpemUiLCJjaHVua2VkVmVjdG9ycyIsImJhdGNoUmVxdWVzdHMiLCJjaHVuayIsImNhbGwiLCJ1cHNlcnQiLCJQcm9taXNlIiwiYWxsIiwiZGVsZXRlIiwiZGVsZXRlQWxsIiwiYmF0Y2hTaXplIiwiaSIsImJhdGNoSWRzIiwic2xpY2UiLCJkZWxldGVNYW55IiwiRXJyb3IiLCJfcnVuUGluZWNvbmVRdWVyeSIsInF1ZXJ5IiwiayIsIl9maWx0ZXIiLCJyZXN1bHRzIiwiaW5jbHVkZU1ldGFkYXRhIiwidG9wSyIsInZlY3RvciIsInNpbWlsYXJpdHlTZWFyY2hWZWN0b3JXaXRoU2NvcmUiLCJyZXN1bHQiLCJtYXRjaGVzIiwicmVzIiwic2NvcmUiLCJwdXNoIiwibWF4TWFyZ2luYWxSZWxldmFuY2VTZWFyY2giLCJxdWVyeUVtYmVkZGluZyIsImVtYmVkUXVlcnkiLCJmZXRjaEsiLCJpbmNsdWRlVmFsdWVzIiwiZW1iZWRkaW5nTGlzdCIsIm1hdGNoIiwibW1ySW5kZXhlcyIsImxhbWJkYSIsInRvcE1tck1hdGNoZXMiLCJmaW5hbFJlc3VsdCIsImZyb21UZXh0cyIsIm1ldGFkYXRhcyIsImRiQ29uZmlnIiwiZG9jcyIsIm5ld0RvYyIsImFyZ3MiLCJmcm9tRG9jdW1lbnRzIiwiaW5zdGFuY2UiLCJmcm9tRXhpc3RpbmdJbmRleCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/pinecone/dist/vectorstores.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/pinecone/index.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/pinecone/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PineconeStore: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.PineconeStore)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/pinecone/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9waW5lY29uZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vcGluZWNvbmUvaW5kZXguanM/NTY0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/pinecone/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/dist/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/dist/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharacterTextSplitter: () => (/* reexport safe */ _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.CharacterTextSplitter),\n/* harmony export */   LatexTextSplitter: () => (/* reexport safe */ _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.LatexTextSplitter),\n/* harmony export */   MarkdownTextSplitter: () => (/* reexport safe */ _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.MarkdownTextSplitter),\n/* harmony export */   RecursiveCharacterTextSplitter: () => (/* reexport safe */ _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.RecursiveCharacterTextSplitter),\n/* harmony export */   SupportedTextSplitterLanguages: () => (/* reexport safe */ _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.SupportedTextSplitterLanguages),\n/* harmony export */   TextSplitter: () => (/* reexport safe */ _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.TextSplitter),\n/* harmony export */   TokenTextSplitter: () => (/* reexport safe */ _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.TokenTextSplitter)\n/* harmony export */ });\n/* harmony import */ var _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./text_splitter.js */ \"(rsc)/./node_modules/@langchain/textsplitters/dist/text_splitter.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvZGlzdC9pbmRleC5qcz8wMmE4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL3RleHRfc3BsaXR0ZXIuanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/dist/text_splitter.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/dist/text_splitter.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharacterTextSplitter: () => (/* binding */ CharacterTextSplitter),\n/* harmony export */   LatexTextSplitter: () => (/* binding */ LatexTextSplitter),\n/* harmony export */   MarkdownTextSplitter: () => (/* binding */ MarkdownTextSplitter),\n/* harmony export */   RecursiveCharacterTextSplitter: () => (/* binding */ RecursiveCharacterTextSplitter),\n/* harmony export */   SupportedTextSplitterLanguages: () => (/* binding */ SupportedTextSplitterLanguages),\n/* harmony export */   TextSplitter: () => (/* binding */ TextSplitter),\n/* harmony export */   TokenTextSplitter: () => (/* binding */ TokenTextSplitter)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/documents */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/documents.js\");\n/* harmony import */ var _langchain_core_utils_tiktoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/tiktoken */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/utils/tiktoken.js\");\n\n\nclass TextSplitter extends _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"document_transformers\",\n                \"text_splitters\"\n            ]\n        });\n        Object.defineProperty(this, \"chunkSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1000\n        });\n        Object.defineProperty(this, \"chunkOverlap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 200\n        });\n        Object.defineProperty(this, \"keepSeparator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lengthFunction\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.chunkSize = fields?.chunkSize ?? this.chunkSize;\n        this.chunkOverlap = fields?.chunkOverlap ?? this.chunkOverlap;\n        this.keepSeparator = fields?.keepSeparator ?? this.keepSeparator;\n        this.lengthFunction = fields?.lengthFunction ?? ((text)=>text.length);\n        if (this.chunkOverlap >= this.chunkSize) {\n            throw new Error(\"Cannot have chunkOverlap >= chunkSize\");\n        }\n    }\n    async transformDocuments(documents, chunkHeaderOptions = {}) {\n        return this.splitDocuments(documents, chunkHeaderOptions);\n    }\n    splitOnSeparator(text, separator) {\n        let splits;\n        if (separator) {\n            if (this.keepSeparator) {\n                const regexEscapedSeparator = separator.replace(/[/\\-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n                splits = text.split(new RegExp(`(?=${regexEscapedSeparator})`));\n            } else {\n                splits = text.split(separator);\n            }\n        } else {\n            splits = text.split(\"\");\n        }\n        return splits.filter((s)=>s !== \"\");\n    }\n    async createDocuments(texts, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    metadatas = [], chunkHeaderOptions = {}) {\n        // if no metadata is provided, we create an empty one for each text\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const _metadatas = metadatas.length > 0 ? metadatas : [\n            ...Array(texts.length)\n        ].map(()=>({}));\n        const { chunkHeader = \"\", chunkOverlapHeader = \"(cont'd) \", appendChunkOverlapHeader = false } = chunkHeaderOptions;\n        const documents = new Array();\n        for(let i = 0; i < texts.length; i += 1){\n            const text = texts[i];\n            let lineCounterIndex = 1;\n            let prevChunk = null;\n            let indexPrevChunk = -1;\n            for (const chunk of (await this.splitText(text))){\n                let pageContent = chunkHeader;\n                // we need to count the \\n that are in the text before getting removed by the splitting\n                const indexChunk = text.indexOf(chunk, indexPrevChunk + 1);\n                if (prevChunk === null) {\n                    const newLinesBeforeFirstChunk = this.numberOfNewLines(text, 0, indexChunk);\n                    lineCounterIndex += newLinesBeforeFirstChunk;\n                } else {\n                    const indexEndPrevChunk = indexPrevChunk + await this.lengthFunction(prevChunk);\n                    if (indexEndPrevChunk < indexChunk) {\n                        const numberOfIntermediateNewLines = this.numberOfNewLines(text, indexEndPrevChunk, indexChunk);\n                        lineCounterIndex += numberOfIntermediateNewLines;\n                    } else if (indexEndPrevChunk > indexChunk) {\n                        const numberOfIntermediateNewLines = this.numberOfNewLines(text, indexChunk, indexEndPrevChunk);\n                        lineCounterIndex -= numberOfIntermediateNewLines;\n                    }\n                    if (appendChunkOverlapHeader) {\n                        pageContent += chunkOverlapHeader;\n                    }\n                }\n                const newLinesCount = this.numberOfNewLines(chunk);\n                const loc = _metadatas[i].loc && typeof _metadatas[i].loc === \"object\" ? {\n                    ..._metadatas[i].loc\n                } : {};\n                loc.lines = {\n                    from: lineCounterIndex,\n                    to: lineCounterIndex + newLinesCount\n                };\n                const metadataWithLinesNumber = {\n                    ..._metadatas[i],\n                    loc\n                };\n                pageContent += chunk;\n                documents.push(new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__.Document({\n                    pageContent,\n                    metadata: metadataWithLinesNumber\n                }));\n                lineCounterIndex += newLinesCount;\n                prevChunk = chunk;\n                indexPrevChunk = indexChunk;\n            }\n        }\n        return documents;\n    }\n    numberOfNewLines(text, start, end) {\n        const textSection = text.slice(start, end);\n        return (textSection.match(/\\n/g) || []).length;\n    }\n    async splitDocuments(documents, chunkHeaderOptions = {}) {\n        const selectedDocuments = documents.filter((doc)=>doc.pageContent !== undefined);\n        const texts = selectedDocuments.map((doc)=>doc.pageContent);\n        const metadatas = selectedDocuments.map((doc)=>doc.metadata);\n        return this.createDocuments(texts, metadatas, chunkHeaderOptions);\n    }\n    joinDocs(docs, separator) {\n        const text = docs.join(separator).trim();\n        return text === \"\" ? null : text;\n    }\n    async mergeSplits(splits, separator) {\n        const docs = [];\n        const currentDoc = [];\n        let total = 0;\n        for (const d of splits){\n            const _len = await this.lengthFunction(d);\n            if (total + _len + currentDoc.length * separator.length > this.chunkSize) {\n                if (total > this.chunkSize) {\n                    console.warn(`Created a chunk of size ${total}, +\nwhich is longer than the specified ${this.chunkSize}`);\n                }\n                if (currentDoc.length > 0) {\n                    const doc = this.joinDocs(currentDoc, separator);\n                    if (doc !== null) {\n                        docs.push(doc);\n                    }\n                    // Keep on popping if:\n                    // - we have a larger chunk than in the chunk overlap\n                    // - or if we still have any chunks and the length is long\n                    while(total > this.chunkOverlap || total + _len + currentDoc.length * separator.length > this.chunkSize && total > 0){\n                        total -= await this.lengthFunction(currentDoc[0]);\n                        currentDoc.shift();\n                    }\n                }\n            }\n            currentDoc.push(d);\n            total += _len;\n        }\n        const doc = this.joinDocs(currentDoc, separator);\n        if (doc !== null) {\n            docs.push(doc);\n        }\n        return docs;\n    }\n}\nclass CharacterTextSplitter extends TextSplitter {\n    static lc_name() {\n        return \"CharacterTextSplitter\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"separator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\\n\\n\"\n        });\n        this.separator = fields?.separator ?? this.separator;\n    }\n    async splitText(text) {\n        // First we naively split the large input into a bunch of smaller ones.\n        const splits = this.splitOnSeparator(text, this.separator);\n        return this.mergeSplits(splits, this.keepSeparator ? \"\" : this.separator);\n    }\n}\nconst SupportedTextSplitterLanguages = [\n    \"cpp\",\n    \"go\",\n    \"java\",\n    \"js\",\n    \"php\",\n    \"proto\",\n    \"python\",\n    \"rst\",\n    \"ruby\",\n    \"rust\",\n    \"scala\",\n    \"swift\",\n    \"markdown\",\n    \"latex\",\n    \"html\",\n    \"sol\"\n];\nclass RecursiveCharacterTextSplitter extends TextSplitter {\n    static lc_name() {\n        return \"RecursiveCharacterTextSplitter\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"separators\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ]\n        });\n        this.separators = fields?.separators ?? this.separators;\n        this.keepSeparator = fields?.keepSeparator ?? true;\n    }\n    async _splitText(text, separators) {\n        const finalChunks = [];\n        // Get appropriate separator to use\n        let separator = separators[separators.length - 1];\n        let newSeparators;\n        for(let i = 0; i < separators.length; i += 1){\n            const s = separators[i];\n            if (s === \"\") {\n                separator = s;\n                break;\n            }\n            if (text.includes(s)) {\n                separator = s;\n                newSeparators = separators.slice(i + 1);\n                break;\n            }\n        }\n        // Now that we have the separator, split the text\n        const splits = this.splitOnSeparator(text, separator);\n        // Now go merging things, recursively splitting longer texts.\n        let goodSplits = [];\n        const _separator = this.keepSeparator ? \"\" : separator;\n        for (const s of splits){\n            if (await this.lengthFunction(s) < this.chunkSize) {\n                goodSplits.push(s);\n            } else {\n                if (goodSplits.length) {\n                    const mergedText = await this.mergeSplits(goodSplits, _separator);\n                    finalChunks.push(...mergedText);\n                    goodSplits = [];\n                }\n                if (!newSeparators) {\n                    finalChunks.push(s);\n                } else {\n                    const otherInfo = await this._splitText(s, newSeparators);\n                    finalChunks.push(...otherInfo);\n                }\n            }\n        }\n        if (goodSplits.length) {\n            const mergedText = await this.mergeSplits(goodSplits, _separator);\n            finalChunks.push(...mergedText);\n        }\n        return finalChunks;\n    }\n    async splitText(text) {\n        return this._splitText(text, this.separators);\n    }\n    static fromLanguage(language, options) {\n        return new RecursiveCharacterTextSplitter({\n            ...options,\n            separators: RecursiveCharacterTextSplitter.getSeparatorsForLanguage(language)\n        });\n    }\n    static getSeparatorsForLanguage(language) {\n        if (language === \"cpp\") {\n            return [\n                // Split along class definitions\n                \"\\nclass \",\n                // Split along function definitions\n                \"\\nvoid \",\n                \"\\nint \",\n                \"\\nfloat \",\n                \"\\ndouble \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"go\") {\n            return [\n                // Split along function definitions\n                \"\\nfunc \",\n                \"\\nvar \",\n                \"\\nconst \",\n                \"\\ntype \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"java\") {\n            return [\n                // Split along class definitions\n                \"\\nclass \",\n                // Split along method definitions\n                \"\\npublic \",\n                \"\\nprotected \",\n                \"\\nprivate \",\n                \"\\nstatic \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"js\") {\n            return [\n                // Split along function definitions\n                \"\\nfunction \",\n                \"\\nconst \",\n                \"\\nlet \",\n                \"\\nvar \",\n                \"\\nclass \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                \"\\ndefault \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"php\") {\n            return [\n                // Split along function definitions\n                \"\\nfunction \",\n                // Split along class definitions\n                \"\\nclass \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nforeach \",\n                \"\\nwhile \",\n                \"\\ndo \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"proto\") {\n            return [\n                // Split along message definitions\n                \"\\nmessage \",\n                // Split along service definitions\n                \"\\nservice \",\n                // Split along enum definitions\n                \"\\nenum \",\n                // Split along option definitions\n                \"\\noption \",\n                // Split along import statements\n                \"\\nimport \",\n                // Split along syntax declarations\n                \"\\nsyntax \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"python\") {\n            return [\n                // First, try to split along class definitions\n                \"\\nclass \",\n                \"\\ndef \",\n                \"\\n\tdef \",\n                // Now split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"rst\") {\n            return [\n                // Split along section titles\n                \"\\n===\\n\",\n                \"\\n---\\n\",\n                \"\\n***\\n\",\n                // Split along directive markers\n                \"\\n.. \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"ruby\") {\n            return [\n                // Split along method definitions\n                \"\\ndef \",\n                \"\\nclass \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nunless \",\n                \"\\nwhile \",\n                \"\\nfor \",\n                \"\\ndo \",\n                \"\\nbegin \",\n                \"\\nrescue \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"rust\") {\n            return [\n                // Split along function definitions\n                \"\\nfn \",\n                \"\\nconst \",\n                \"\\nlet \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nwhile \",\n                \"\\nfor \",\n                \"\\nloop \",\n                \"\\nmatch \",\n                \"\\nconst \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"scala\") {\n            return [\n                // Split along class definitions\n                \"\\nclass \",\n                \"\\nobject \",\n                // Split along method definitions\n                \"\\ndef \",\n                \"\\nval \",\n                \"\\nvar \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nmatch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"swift\") {\n            return [\n                // Split along function definitions\n                \"\\nfunc \",\n                // Split along class definitions\n                \"\\nclass \",\n                \"\\nstruct \",\n                \"\\nenum \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\ndo \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"markdown\") {\n            return [\n                // First, try to split along Markdown headings (starting with level 2)\n                \"\\n## \",\n                \"\\n### \",\n                \"\\n#### \",\n                \"\\n##### \",\n                \"\\n###### \",\n                // Note the alternative syntax for headings (below) is not handled here\n                // Heading level 2\n                // ---------------\n                // End of code block\n                \"```\\n\\n\",\n                // Horizontal lines\n                \"\\n\\n***\\n\\n\",\n                \"\\n\\n---\\n\\n\",\n                \"\\n\\n___\\n\\n\",\n                // Note that this splitter doesn't handle horizontal lines defined\n                // by *three or more* of ***, ---, or ___, but this is not handled\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"latex\") {\n            return [\n                // First, try to split along Latex sections\n                \"\\n\\\\chapter{\",\n                \"\\n\\\\section{\",\n                \"\\n\\\\subsection{\",\n                \"\\n\\\\subsubsection{\",\n                // Now split by environments\n                \"\\n\\\\begin{enumerate}\",\n                \"\\n\\\\begin{itemize}\",\n                \"\\n\\\\begin{description}\",\n                \"\\n\\\\begin{list}\",\n                \"\\n\\\\begin{quote}\",\n                \"\\n\\\\begin{quotation}\",\n                \"\\n\\\\begin{verse}\",\n                \"\\n\\\\begin{verbatim}\",\n                // Now split by math environments\n                \"\\n\\\\begin{align}\",\n                \"$$\",\n                \"$\",\n                // Now split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"html\") {\n            return [\n                // First, try to split along HTML tags\n                \"<body>\",\n                \"<div>\",\n                \"<p>\",\n                \"<br>\",\n                \"<li>\",\n                \"<h1>\",\n                \"<h2>\",\n                \"<h3>\",\n                \"<h4>\",\n                \"<h5>\",\n                \"<h6>\",\n                \"<span>\",\n                \"<table>\",\n                \"<tr>\",\n                \"<td>\",\n                \"<th>\",\n                \"<ul>\",\n                \"<ol>\",\n                \"<header>\",\n                \"<footer>\",\n                \"<nav>\",\n                // Head\n                \"<head>\",\n                \"<style>\",\n                \"<script>\",\n                \"<meta>\",\n                \"<title>\",\n                // Normal type of lines\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"sol\") {\n            return [\n                // Split along compiler informations definitions\n                \"\\npragma \",\n                \"\\nusing \",\n                // Split along contract definitions\n                \"\\ncontract \",\n                \"\\ninterface \",\n                \"\\nlibrary \",\n                // Split along method definitions\n                \"\\nconstructor \",\n                \"\\ntype \",\n                \"\\nfunction \",\n                \"\\nevent \",\n                \"\\nmodifier \",\n                \"\\nerror \",\n                \"\\nstruct \",\n                \"\\nenum \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\ndo while \",\n                \"\\nassembly \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else {\n            throw new Error(`Language ${language} is not supported.`);\n        }\n    }\n}\n/**\n * Implementation of splitter which looks at tokens.\n */ class TokenTextSplitter extends TextSplitter {\n    static lc_name() {\n        return \"TokenTextSplitter\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"encodingName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"allowedSpecial\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"disallowedSpecial\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tokenizer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.encodingName = fields?.encodingName ?? \"gpt2\";\n        this.allowedSpecial = fields?.allowedSpecial ?? [];\n        this.disallowedSpecial = fields?.disallowedSpecial ?? \"all\";\n    }\n    async splitText(text) {\n        if (!this.tokenizer) {\n            this.tokenizer = await (0,_langchain_core_utils_tiktoken__WEBPACK_IMPORTED_MODULE_1__.getEncoding)(this.encodingName);\n        }\n        const splits = [];\n        const input_ids = this.tokenizer.encode(text, this.allowedSpecial, this.disallowedSpecial);\n        let start_idx = 0;\n        while(start_idx < input_ids.length){\n            if (start_idx > 0) {\n                start_idx -= this.chunkOverlap;\n            }\n            const end_idx = Math.min(start_idx + this.chunkSize, input_ids.length);\n            const chunk_ids = input_ids.slice(start_idx, end_idx);\n            splits.push(this.tokenizer.decode(chunk_ids));\n            start_idx = end_idx;\n        }\n        return splits;\n    }\n}\nclass MarkdownTextSplitter extends RecursiveCharacterTextSplitter {\n    constructor(fields){\n        super({\n            ...fields,\n            separators: RecursiveCharacterTextSplitter.getSeparatorsForLanguage(\"markdown\")\n        });\n    }\n}\nclass LatexTextSplitter extends RecursiveCharacterTextSplitter {\n    constructor(fields){\n        super({\n            ...fields,\n            separators: RecursiveCharacterTextSplitter.getSeparatorsForLanguage(\"latex\")\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL2Rpc3QvdGV4dF9zcGxpdHRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEU7QUFDakI7QUFDdEQsTUFBTUcscUJBQXFCRiw4RUFBdUJBO0lBQ3JERyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBeUI7YUFBaUI7UUFDbkU7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR1AsUUFBUU8sYUFBYSxJQUFJLENBQUNBLFNBQVM7UUFDcEQsSUFBSSxDQUFDQyxZQUFZLEdBQUdSLFFBQVFRLGdCQUFnQixJQUFJLENBQUNBLFlBQVk7UUFDN0QsSUFBSSxDQUFDQyxhQUFhLEdBQUdULFFBQVFTLGlCQUFpQixJQUFJLENBQUNBLGFBQWE7UUFDaEUsSUFBSSxDQUFDQyxjQUFjLEdBQ2ZWLFFBQVFVLGtCQUFtQixFQUFDQyxPQUFTQSxLQUFLQyxNQUFN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RixPQUFPbUMsSUFBSSxDQUFDLElBQUksQ0FBQzJDLFNBQVMsQ0FBQ1EsTUFBTSxDQUFDRDtZQUNsQ0osWUFBWUM7UUFDaEI7UUFDQSxPQUFPbEY7SUFDWDtBQUNKO0FBQ08sTUFBTXVGLDZCQUE2QjNCO0lBQ3RDakYsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQztZQUNGLEdBQUdBLE1BQU07WUFDVGlGLFlBQVlELCtCQUErQmEsd0JBQXdCLENBQUM7UUFDeEU7SUFDSjtBQUNKO0FBQ08sTUFBTWUsMEJBQTBCNUI7SUFDbkNqRixZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDO1lBQ0YsR0FBR0EsTUFBTTtZQUNUaUYsWUFBWUQsK0JBQStCYSx3QkFBd0IsQ0FBQztRQUN4RTtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvZGlzdC90ZXh0X3NwbGl0dGVyLmpzPzkwYzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnQsIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9kb2N1bWVudHNcIjtcbmltcG9ydCB7IGdldEVuY29kaW5nIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy90aWt0b2tlblwiO1xuZXhwb3J0IGNsYXNzIFRleHRTcGxpdHRlciBleHRlbmRzIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJkb2N1bWVudF90cmFuc2Zvcm1lcnNcIiwgXCJ0ZXh0X3NwbGl0dGVyc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2h1bmtTaXplXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxMDAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaHVua092ZXJsYXBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDIwMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2VlcFNlcGFyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxlbmd0aEZ1bmN0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2h1bmtTaXplID0gZmllbGRzPy5jaHVua1NpemUgPz8gdGhpcy5jaHVua1NpemU7XG4gICAgICAgIHRoaXMuY2h1bmtPdmVybGFwID0gZmllbGRzPy5jaHVua092ZXJsYXAgPz8gdGhpcy5jaHVua092ZXJsYXA7XG4gICAgICAgIHRoaXMua2VlcFNlcGFyYXRvciA9IGZpZWxkcz8ua2VlcFNlcGFyYXRvciA/PyB0aGlzLmtlZXBTZXBhcmF0b3I7XG4gICAgICAgIHRoaXMubGVuZ3RoRnVuY3Rpb24gPVxuICAgICAgICAgICAgZmllbGRzPy5sZW5ndGhGdW5jdGlvbiA/PyAoKHRleHQpID0+IHRleHQubGVuZ3RoKTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtPdmVybGFwID49IHRoaXMuY2h1bmtTaXplKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGF2ZSBjaHVua092ZXJsYXAgPj0gY2h1bmtTaXplXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHRyYW5zZm9ybURvY3VtZW50cyhkb2N1bWVudHMsIGNodW5rSGVhZGVyT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwbGl0RG9jdW1lbnRzKGRvY3VtZW50cywgY2h1bmtIZWFkZXJPcHRpb25zKTtcbiAgICB9XG4gICAgc3BsaXRPblNlcGFyYXRvcih0ZXh0LCBzZXBhcmF0b3IpIHtcbiAgICAgICAgbGV0IHNwbGl0cztcbiAgICAgICAgaWYgKHNlcGFyYXRvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMua2VlcFNlcGFyYXRvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4RXNjYXBlZFNlcGFyYXRvciA9IHNlcGFyYXRvci5yZXBsYWNlKC9bL1xcLVxcXFxeJCorPy4oKXxbXFxde31dL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICAgICAgICAgIHNwbGl0cyA9IHRleHQuc3BsaXQobmV3IFJlZ0V4cChgKD89JHtyZWdleEVzY2FwZWRTZXBhcmF0b3J9KWApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNwbGl0cyA9IHRleHQuc3BsaXQoc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNwbGl0cyA9IHRleHQuc3BsaXQoXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwbGl0cy5maWx0ZXIoKHMpID0+IHMgIT09IFwiXCIpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVEb2N1bWVudHModGV4dHMsIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbWV0YWRhdGFzID0gW10sIGNodW5rSGVhZGVyT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8vIGlmIG5vIG1ldGFkYXRhIGlzIHByb3ZpZGVkLCB3ZSBjcmVhdGUgYW4gZW1wdHkgb25lIGZvciBlYWNoIHRleHRcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgX21ldGFkYXRhcyA9IG1ldGFkYXRhcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IG1ldGFkYXRhc1xuICAgICAgICAgICAgOiBbLi4uQXJyYXkodGV4dHMubGVuZ3RoKV0ubWFwKCgpID0+ICh7fSkpO1xuICAgICAgICBjb25zdCB7IGNodW5rSGVhZGVyID0gXCJcIiwgY2h1bmtPdmVybGFwSGVhZGVyID0gXCIoY29udCdkKSBcIiwgYXBwZW5kQ2h1bmtPdmVybGFwSGVhZGVyID0gZmFsc2UsIH0gPSBjaHVua0hlYWRlck9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGV4dHNbaV07XG4gICAgICAgICAgICBsZXQgbGluZUNvdW50ZXJJbmRleCA9IDE7XG4gICAgICAgICAgICBsZXQgcHJldkNodW5rID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBpbmRleFByZXZDaHVuayA9IC0xO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBhd2FpdCB0aGlzLnNwbGl0VGV4dCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIGxldCBwYWdlQ29udGVudCA9IGNodW5rSGVhZGVyO1xuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gY291bnQgdGhlIFxcbiB0aGF0IGFyZSBpbiB0aGUgdGV4dCBiZWZvcmUgZ2V0dGluZyByZW1vdmVkIGJ5IHRoZSBzcGxpdHRpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleENodW5rID0gdGV4dC5pbmRleE9mKGNodW5rLCBpbmRleFByZXZDaHVuayArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2Q2h1bmsgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZXNCZWZvcmVGaXJzdENodW5rID0gdGhpcy5udW1iZXJPZk5ld0xpbmVzKHRleHQsIDAsIGluZGV4Q2h1bmspO1xuICAgICAgICAgICAgICAgICAgICBsaW5lQ291bnRlckluZGV4ICs9IG5ld0xpbmVzQmVmb3JlRmlyc3RDaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4RW5kUHJldkNodW5rID0gaW5kZXhQcmV2Q2h1bmsgKyAoYXdhaXQgdGhpcy5sZW5ndGhGdW5jdGlvbihwcmV2Q2h1bmspKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4RW5kUHJldkNodW5rIDwgaW5kZXhDaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtYmVyT2ZJbnRlcm1lZGlhdGVOZXdMaW5lcyA9IHRoaXMubnVtYmVyT2ZOZXdMaW5lcyh0ZXh0LCBpbmRleEVuZFByZXZDaHVuaywgaW5kZXhDaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lQ291bnRlckluZGV4ICs9IG51bWJlck9mSW50ZXJtZWRpYXRlTmV3TGluZXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXhFbmRQcmV2Q2h1bmsgPiBpbmRleENodW5rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1iZXJPZkludGVybWVkaWF0ZU5ld0xpbmVzID0gdGhpcy5udW1iZXJPZk5ld0xpbmVzKHRleHQsIGluZGV4Q2h1bmssIGluZGV4RW5kUHJldkNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVDb3VudGVySW5kZXggLT0gbnVtYmVyT2ZJbnRlcm1lZGlhdGVOZXdMaW5lcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwZW5kQ2h1bmtPdmVybGFwSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlQ29udGVudCArPSBjaHVua092ZXJsYXBIZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZXNDb3VudCA9IHRoaXMubnVtYmVyT2ZOZXdMaW5lcyhjaHVuayk7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jID0gX21ldGFkYXRhc1tpXS5sb2MgJiYgdHlwZW9mIF9tZXRhZGF0YXNbaV0ubG9jID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgICAgICAgID8geyAuLi5fbWV0YWRhdGFzW2ldLmxvYyB9XG4gICAgICAgICAgICAgICAgICAgIDoge307XG4gICAgICAgICAgICAgICAgbG9jLmxpbmVzID0ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tOiBsaW5lQ291bnRlckluZGV4LFxuICAgICAgICAgICAgICAgICAgICB0bzogbGluZUNvdW50ZXJJbmRleCArIG5ld0xpbmVzQ291bnQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YVdpdGhMaW5lc051bWJlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uX21ldGFkYXRhc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgbG9jLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcGFnZUNvbnRlbnQgKz0gY2h1bms7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzLnB1c2gobmV3IERvY3VtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZUNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YVdpdGhMaW5lc051bWJlcixcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgbGluZUNvdW50ZXJJbmRleCArPSBuZXdMaW5lc0NvdW50O1xuICAgICAgICAgICAgICAgIHByZXZDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgICAgIGluZGV4UHJldkNodW5rID0gaW5kZXhDaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jdW1lbnRzO1xuICAgIH1cbiAgICBudW1iZXJPZk5ld0xpbmVzKHRleHQsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgY29uc3QgdGV4dFNlY3Rpb24gPSB0ZXh0LnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICByZXR1cm4gKHRleHRTZWN0aW9uLm1hdGNoKC9cXG4vZykgfHwgW10pLmxlbmd0aDtcbiAgICB9XG4gICAgYXN5bmMgc3BsaXREb2N1bWVudHMoZG9jdW1lbnRzLCBjaHVua0hlYWRlck9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZERvY3VtZW50cyA9IGRvY3VtZW50cy5maWx0ZXIoKGRvYykgPT4gZG9jLnBhZ2VDb250ZW50ICE9PSB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCB0ZXh0cyA9IHNlbGVjdGVkRG9jdW1lbnRzLm1hcCgoZG9jKSA9PiBkb2MucGFnZUNvbnRlbnQpO1xuICAgICAgICBjb25zdCBtZXRhZGF0YXMgPSBzZWxlY3RlZERvY3VtZW50cy5tYXAoKGRvYykgPT4gZG9jLm1ldGFkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRG9jdW1lbnRzKHRleHRzLCBtZXRhZGF0YXMsIGNodW5rSGVhZGVyT3B0aW9ucyk7XG4gICAgfVxuICAgIGpvaW5Eb2NzKGRvY3MsIHNlcGFyYXRvcikge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jcy5qb2luKHNlcGFyYXRvcikudHJpbSgpO1xuICAgICAgICByZXR1cm4gdGV4dCA9PT0gXCJcIiA/IG51bGwgOiB0ZXh0O1xuICAgIH1cbiAgICBhc3luYyBtZXJnZVNwbGl0cyhzcGxpdHMsIHNlcGFyYXRvcikge1xuICAgICAgICBjb25zdCBkb2NzID0gW107XG4gICAgICAgIGNvbnN0IGN1cnJlbnREb2MgPSBbXTtcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIHNwbGl0cykge1xuICAgICAgICAgICAgY29uc3QgX2xlbiA9IGF3YWl0IHRoaXMubGVuZ3RoRnVuY3Rpb24oZCk7XG4gICAgICAgICAgICBpZiAodG90YWwgKyBfbGVuICsgY3VycmVudERvYy5sZW5ndGggKiBzZXBhcmF0b3IubGVuZ3RoID5cbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rU2l6ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0b3RhbCA+IHRoaXMuY2h1bmtTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQ3JlYXRlZCBhIGNodW5rIG9mIHNpemUgJHt0b3RhbH0sICtcbndoaWNoIGlzIGxvbmdlciB0aGFuIHRoZSBzcGVjaWZpZWQgJHt0aGlzLmNodW5rU2l6ZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREb2MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSB0aGlzLmpvaW5Eb2NzKGN1cnJlbnREb2MsIHNlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2MgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3MucHVzaChkb2MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgb24gcG9wcGluZyBpZjpcbiAgICAgICAgICAgICAgICAgICAgLy8gLSB3ZSBoYXZlIGEgbGFyZ2VyIGNodW5rIHRoYW4gaW4gdGhlIGNodW5rIG92ZXJsYXBcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBvciBpZiB3ZSBzdGlsbCBoYXZlIGFueSBjaHVua3MgYW5kIHRoZSBsZW5ndGggaXMgbG9uZ1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodG90YWwgPiB0aGlzLmNodW5rT3ZlcmxhcCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRvdGFsICsgX2xlbiArIGN1cnJlbnREb2MubGVuZ3RoICogc2VwYXJhdG9yLmxlbmd0aCA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVua1NpemUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCAtPSBhd2FpdCB0aGlzLmxlbmd0aEZ1bmN0aW9uKGN1cnJlbnREb2NbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERvYy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudERvYy5wdXNoKGQpO1xuICAgICAgICAgICAgdG90YWwgKz0gX2xlbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb2MgPSB0aGlzLmpvaW5Eb2NzKGN1cnJlbnREb2MsIHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkb2MgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGRvY3MucHVzaChkb2MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb2NzO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIgZXh0ZW5kcyBUZXh0U3BsaXR0ZXIge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGFyYWN0ZXJUZXh0U3BsaXR0ZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlcGFyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJcXG5cXG5cIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSBmaWVsZHM/LnNlcGFyYXRvciA/PyB0aGlzLnNlcGFyYXRvcjtcbiAgICB9XG4gICAgYXN5bmMgc3BsaXRUZXh0KHRleHQpIHtcbiAgICAgICAgLy8gRmlyc3Qgd2UgbmFpdmVseSBzcGxpdCB0aGUgbGFyZ2UgaW5wdXQgaW50byBhIGJ1bmNoIG9mIHNtYWxsZXIgb25lcy5cbiAgICAgICAgY29uc3Qgc3BsaXRzID0gdGhpcy5zcGxpdE9uU2VwYXJhdG9yKHRleHQsIHRoaXMuc2VwYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2VTcGxpdHMoc3BsaXRzLCB0aGlzLmtlZXBTZXBhcmF0b3IgPyBcIlwiIDogdGhpcy5zZXBhcmF0b3IpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBTdXBwb3J0ZWRUZXh0U3BsaXR0ZXJMYW5ndWFnZXMgPSBbXG4gICAgXCJjcHBcIixcbiAgICBcImdvXCIsXG4gICAgXCJqYXZhXCIsXG4gICAgXCJqc1wiLFxuICAgIFwicGhwXCIsXG4gICAgXCJwcm90b1wiLFxuICAgIFwicHl0aG9uXCIsXG4gICAgXCJyc3RcIixcbiAgICBcInJ1YnlcIixcbiAgICBcInJ1c3RcIixcbiAgICBcInNjYWxhXCIsXG4gICAgXCJzd2lmdFwiLFxuICAgIFwibWFya2Rvd25cIixcbiAgICBcImxhdGV4XCIsXG4gICAgXCJodG1sXCIsXG4gICAgXCJzb2xcIixcbl07XG5leHBvcnQgY2xhc3MgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIGV4dGVuZHMgVGV4dFNwbGl0dGVyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXBhcmF0b3JzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJcXG5cXG5cIiwgXCJcXG5cIiwgXCIgXCIsIFwiXCJdXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlcGFyYXRvcnMgPSBmaWVsZHM/LnNlcGFyYXRvcnMgPz8gdGhpcy5zZXBhcmF0b3JzO1xuICAgICAgICB0aGlzLmtlZXBTZXBhcmF0b3IgPSBmaWVsZHM/LmtlZXBTZXBhcmF0b3IgPz8gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgX3NwbGl0VGV4dCh0ZXh0LCBzZXBhcmF0b3JzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsQ2h1bmtzID0gW107XG4gICAgICAgIC8vIEdldCBhcHByb3ByaWF0ZSBzZXBhcmF0b3IgdG8gdXNlXG4gICAgICAgIGxldCBzZXBhcmF0b3IgPSBzZXBhcmF0b3JzW3NlcGFyYXRvcnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCBuZXdTZXBhcmF0b3JzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlcGFyYXRvcnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzZXBhcmF0b3JzW2ldO1xuICAgICAgICAgICAgaWYgKHMgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IgPSBzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRleHQuaW5jbHVkZXMocykpIHtcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IgPSBzO1xuICAgICAgICAgICAgICAgIG5ld1NlcGFyYXRvcnMgPSBzZXBhcmF0b3JzLnNsaWNlKGkgKyAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBOb3cgdGhhdCB3ZSBoYXZlIHRoZSBzZXBhcmF0b3IsIHNwbGl0IHRoZSB0ZXh0XG4gICAgICAgIGNvbnN0IHNwbGl0cyA9IHRoaXMuc3BsaXRPblNlcGFyYXRvcih0ZXh0LCBzZXBhcmF0b3IpO1xuICAgICAgICAvLyBOb3cgZ28gbWVyZ2luZyB0aGluZ3MsIHJlY3Vyc2l2ZWx5IHNwbGl0dGluZyBsb25nZXIgdGV4dHMuXG4gICAgICAgIGxldCBnb29kU3BsaXRzID0gW107XG4gICAgICAgIGNvbnN0IF9zZXBhcmF0b3IgPSB0aGlzLmtlZXBTZXBhcmF0b3IgPyBcIlwiIDogc2VwYXJhdG9yO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc3BsaXRzKSB7XG4gICAgICAgICAgICBpZiAoKGF3YWl0IHRoaXMubGVuZ3RoRnVuY3Rpb24ocykpIDwgdGhpcy5jaHVua1NpemUpIHtcbiAgICAgICAgICAgICAgICBnb29kU3BsaXRzLnB1c2gocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ29vZFNwbGl0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkVGV4dCA9IGF3YWl0IHRoaXMubWVyZ2VTcGxpdHMoZ29vZFNwbGl0cywgX3NlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2goLi4ubWVyZ2VkVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGdvb2RTcGxpdHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdTZXBhcmF0b3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdGhlckluZm8gPSBhd2FpdCB0aGlzLl9zcGxpdFRleHQocywgbmV3U2VwYXJhdG9ycyk7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2goLi4ub3RoZXJJbmZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdvb2RTcGxpdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBtZXJnZWRUZXh0ID0gYXdhaXQgdGhpcy5tZXJnZVNwbGl0cyhnb29kU3BsaXRzLCBfc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2goLi4ubWVyZ2VkVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmFsQ2h1bmtzO1xuICAgIH1cbiAgICBhc3luYyBzcGxpdFRleHQodGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3BsaXRUZXh0KHRleHQsIHRoaXMuc2VwYXJhdG9ycyk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTGFuZ3VhZ2UobGFuZ3VhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHNlcGFyYXRvcnM6IFJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlci5nZXRTZXBhcmF0b3JzRm9yTGFuZ3VhZ2UobGFuZ3VhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdldFNlcGFyYXRvcnNGb3JMYW5ndWFnZShsYW5ndWFnZSkge1xuICAgICAgICBpZiAobGFuZ3VhZ2UgPT09IFwiY3BwXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY2xhc3MgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgICAgICBcIlxcbmNsYXNzIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGZ1bmN0aW9uIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG52b2lkIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuaW50IFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZmxvYXQgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5kb3VibGUgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY29udHJvbCBmbG93IHN0YXRlbWVudHNcbiAgICAgICAgICAgICAgICBcIlxcbmlmIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZm9yIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxud2hpbGUgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zd2l0Y2ggXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jYXNlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJnb1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGZ1bmN0aW9uIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5mdW5jIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxudmFyIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY29uc3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG50eXBlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnN3aXRjaCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmNhc2UgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcImphdmFcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjbGFzcyBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY2xhc3MgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgbWV0aG9kIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5wdWJsaWMgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5wcm90ZWN0ZWQgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5wcml2YXRlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuc3RhdGljIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuc3dpdGNoIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY2FzZSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwianNcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBmdW5jdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuZnVuY3Rpb24gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jb25zdCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmxldCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnZhciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmNsYXNzIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuc3dpdGNoIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY2FzZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmRlZmF1bHQgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcInBocFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGZ1bmN0aW9uIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5mdW5jdGlvbiBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjbGFzcyBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY2xhc3MgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY29udHJvbCBmbG93IHN0YXRlbWVudHNcbiAgICAgICAgICAgICAgICBcIlxcbmlmIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZm9yZWFjaCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZG8gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zd2l0Y2ggXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jYXNlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJwcm90b1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIG1lc3NhZ2UgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgICAgICBcIlxcbm1lc3NhZ2UgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgc2VydmljZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuc2VydmljZSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBlbnVtIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5lbnVtIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIG9wdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxub3B0aW9uIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGltcG9ydCBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pbXBvcnQgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgc3ludGF4IGRlY2xhcmF0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuc3ludGF4IFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJweXRob25cIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCwgdHJ5IHRvIHNwbGl0IGFsb25nIGNsYXNzIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5jbGFzcyBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmRlZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcblxcdGRlZiBcIixcbiAgICAgICAgICAgICAgICAvLyBOb3cgc3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcInJzdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIHNlY3Rpb24gdGl0bGVzXG4gICAgICAgICAgICAgICAgXCJcXG49PT1cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcbi0tLVxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuKioqXFxuXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgZGlyZWN0aXZlIG1hcmtlcnNcbiAgICAgICAgICAgICAgICBcIlxcbi4uIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJydWJ5XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgbWV0aG9kIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5kZWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jbGFzcyBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cm9sIGZsb3cgc3RhdGVtZW50c1xuICAgICAgICAgICAgICAgIFwiXFxuaWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG51bmxlc3MgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG53aGlsZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmRvIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuYmVnaW4gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5yZXNjdWUgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcInJ1c3RcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBmdW5jdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuZm4gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jb25zdCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmxldCBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cm9sIGZsb3cgc3RhdGVtZW50c1xuICAgICAgICAgICAgICAgIFwiXFxuaWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG53aGlsZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmxvb3AgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5tYXRjaCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmNvbnN0IFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJzY2FsYVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNsYXNzIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5jbGFzcyBcIixcbiAgICAgICAgICAgICAgICBcIlxcbm9iamVjdCBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBtZXRob2QgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgICAgICBcIlxcbmRlZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnZhbCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnZhciBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cm9sIGZsb3cgc3RhdGVtZW50c1xuICAgICAgICAgICAgICAgIFwiXFxuaWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5mb3IgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG53aGlsZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbm1hdGNoIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY2FzZSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwic3dpZnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBmdW5jdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuZnVuYyBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjbGFzcyBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY2xhc3MgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zdHJ1Y3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5lbnVtIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZG8gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zd2l0Y2ggXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jYXNlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJtYXJrZG93blwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gc3BsaXQgYWxvbmcgTWFya2Rvd24gaGVhZGluZ3MgKHN0YXJ0aW5nIHdpdGggbGV2ZWwgMilcbiAgICAgICAgICAgICAgICBcIlxcbiMjIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuIyMjIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuIyMjIyBcIixcbiAgICAgICAgICAgICAgICBcIlxcbiMjIyMjIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuIyMjIyMjIFwiLFxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhlIGFsdGVybmF0aXZlIHN5bnRheCBmb3IgaGVhZGluZ3MgKGJlbG93KSBpcyBub3QgaGFuZGxlZCBoZXJlXG4gICAgICAgICAgICAgICAgLy8gSGVhZGluZyBsZXZlbCAyXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gRW5kIG9mIGNvZGUgYmxvY2tcbiAgICAgICAgICAgICAgICBcImBgYFxcblxcblwiLFxuICAgICAgICAgICAgICAgIC8vIEhvcml6b250YWwgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcbioqKlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXFxuLS0tXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5fX19cXG5cXG5cIixcbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzcGxpdHRlciBkb2Vzbid0IGhhbmRsZSBob3Jpem9udGFsIGxpbmVzIGRlZmluZWRcbiAgICAgICAgICAgICAgICAvLyBieSAqdGhyZWUgb3IgbW9yZSogb2YgKioqLCAtLS0sIG9yIF9fXywgYnV0IHRoaXMgaXMgbm90IGhhbmRsZWRcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwibGF0ZXhcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCwgdHJ5IHRvIHNwbGl0IGFsb25nIExhdGV4IHNlY3Rpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcY2hhcHRlcntcIixcbiAgICAgICAgICAgICAgICBcIlxcblxcXFxzZWN0aW9ue1wiLFxuICAgICAgICAgICAgICAgIFwiXFxuXFxcXHN1YnNlY3Rpb257XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcc3Vic3Vic2VjdGlvbntcIixcbiAgICAgICAgICAgICAgICAvLyBOb3cgc3BsaXQgYnkgZW52aXJvbm1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57ZW51bWVyYXRlfVwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXFxcXGJlZ2lue2l0ZW1pemV9XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57ZGVzY3JpcHRpb259XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57bGlzdH1cIixcbiAgICAgICAgICAgICAgICBcIlxcblxcXFxiZWdpbntxdW90ZX1cIixcbiAgICAgICAgICAgICAgICBcIlxcblxcXFxiZWdpbntxdW90YXRpb259XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57dmVyc2V9XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57dmVyYmF0aW19XCIsXG4gICAgICAgICAgICAgICAgLy8gTm93IHNwbGl0IGJ5IG1hdGggZW52aXJvbm1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57YWxpZ259XCIsXG4gICAgICAgICAgICAgICAgXCIkJFwiLFxuICAgICAgICAgICAgICAgIFwiJFwiLFxuICAgICAgICAgICAgICAgIC8vIE5vdyBzcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwiaHRtbFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gc3BsaXQgYWxvbmcgSFRNTCB0YWdzXG4gICAgICAgICAgICAgICAgXCI8Ym9keT5cIixcbiAgICAgICAgICAgICAgICBcIjxkaXY+XCIsXG4gICAgICAgICAgICAgICAgXCI8cD5cIixcbiAgICAgICAgICAgICAgICBcIjxicj5cIixcbiAgICAgICAgICAgICAgICBcIjxsaT5cIixcbiAgICAgICAgICAgICAgICBcIjxoMT5cIixcbiAgICAgICAgICAgICAgICBcIjxoMj5cIixcbiAgICAgICAgICAgICAgICBcIjxoMz5cIixcbiAgICAgICAgICAgICAgICBcIjxoND5cIixcbiAgICAgICAgICAgICAgICBcIjxoNT5cIixcbiAgICAgICAgICAgICAgICBcIjxoNj5cIixcbiAgICAgICAgICAgICAgICBcIjxzcGFuPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRhYmxlPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRyPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRkPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRoPlwiLFxuICAgICAgICAgICAgICAgIFwiPHVsPlwiLFxuICAgICAgICAgICAgICAgIFwiPG9sPlwiLFxuICAgICAgICAgICAgICAgIFwiPGhlYWRlcj5cIixcbiAgICAgICAgICAgICAgICBcIjxmb290ZXI+XCIsXG4gICAgICAgICAgICAgICAgXCI8bmF2PlwiLFxuICAgICAgICAgICAgICAgIC8vIEhlYWRcbiAgICAgICAgICAgICAgICBcIjxoZWFkPlwiLFxuICAgICAgICAgICAgICAgIFwiPHN0eWxlPlwiLFxuICAgICAgICAgICAgICAgIFwiPHNjcmlwdD5cIixcbiAgICAgICAgICAgICAgICBcIjxtZXRhPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRpdGxlPlwiLFxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwic29sXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY29tcGlsZXIgaW5mb3JtYXRpb25zIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5wcmFnbWEgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG51c2luZyBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cmFjdCBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY29udHJhY3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5pbnRlcmZhY2UgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5saWJyYXJ5IFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIG1ldGhvZCBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY29uc3RydWN0b3IgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG50eXBlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZnVuY3Rpb24gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5ldmVudCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbm1vZGlmaWVyIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZXJyb3IgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zdHJ1Y3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5lbnVtIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZG8gd2hpbGUgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5hc3NlbWJseSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExhbmd1YWdlICR7bGFuZ3VhZ2V9IGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHNwbGl0dGVyIHdoaWNoIGxvb2tzIGF0IHRva2Vucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRva2VuVGV4dFNwbGl0dGVyIGV4dGVuZHMgVGV4dFNwbGl0dGVyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVG9rZW5UZXh0U3BsaXR0ZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuY29kaW5nTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhbGxvd2VkU3BlY2lhbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXNhbGxvd2VkU3BlY2lhbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b2tlbml6ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbmNvZGluZ05hbWUgPSBmaWVsZHM/LmVuY29kaW5nTmFtZSA/PyBcImdwdDJcIjtcbiAgICAgICAgdGhpcy5hbGxvd2VkU3BlY2lhbCA9IGZpZWxkcz8uYWxsb3dlZFNwZWNpYWwgPz8gW107XG4gICAgICAgIHRoaXMuZGlzYWxsb3dlZFNwZWNpYWwgPSBmaWVsZHM/LmRpc2FsbG93ZWRTcGVjaWFsID8/IFwiYWxsXCI7XG4gICAgfVxuICAgIGFzeW5jIHNwbGl0VGV4dCh0ZXh0KSB7XG4gICAgICAgIGlmICghdGhpcy50b2tlbml6ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudG9rZW5pemVyID0gYXdhaXQgZ2V0RW5jb2RpbmcodGhpcy5lbmNvZGluZ05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNwbGl0cyA9IFtdO1xuICAgICAgICBjb25zdCBpbnB1dF9pZHMgPSB0aGlzLnRva2VuaXplci5lbmNvZGUodGV4dCwgdGhpcy5hbGxvd2VkU3BlY2lhbCwgdGhpcy5kaXNhbGxvd2VkU3BlY2lhbCk7XG4gICAgICAgIGxldCBzdGFydF9pZHggPSAwO1xuICAgICAgICB3aGlsZSAoc3RhcnRfaWR4IDwgaW5wdXRfaWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0X2lkeCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdGFydF9pZHggLT0gdGhpcy5jaHVua092ZXJsYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlbmRfaWR4ID0gTWF0aC5taW4oc3RhcnRfaWR4ICsgdGhpcy5jaHVua1NpemUsIGlucHV0X2lkcy5sZW5ndGgpO1xuICAgICAgICAgICAgY29uc3QgY2h1bmtfaWRzID0gaW5wdXRfaWRzLnNsaWNlKHN0YXJ0X2lkeCwgZW5kX2lkeCk7XG4gICAgICAgICAgICBzcGxpdHMucHVzaCh0aGlzLnRva2VuaXplci5kZWNvZGUoY2h1bmtfaWRzKSk7XG4gICAgICAgICAgICBzdGFydF9pZHggPSBlbmRfaWR4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGxpdHM7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1hcmtkb3duVGV4dFNwbGl0dGVyIGV4dGVuZHMgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgc2VwYXJhdG9yczogUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyLmdldFNlcGFyYXRvcnNGb3JMYW5ndWFnZShcIm1hcmtkb3duXCIpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTGF0ZXhUZXh0U3BsaXR0ZXIgZXh0ZW5kcyBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICBzZXBhcmF0b3JzOiBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIuZ2V0U2VwYXJhdG9yc0Zvckxhbmd1YWdlKFwibGF0ZXhcIiksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJEb2N1bWVudCIsIkJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIiwiZ2V0RW5jb2RpbmciLCJUZXh0U3BsaXR0ZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJjaHVua1NpemUiLCJjaHVua092ZXJsYXAiLCJrZWVwU2VwYXJhdG9yIiwibGVuZ3RoRnVuY3Rpb24iLCJ0ZXh0IiwibGVuZ3RoIiwiRXJyb3IiLCJ0cmFuc2Zvcm1Eb2N1bWVudHMiLCJkb2N1bWVudHMiLCJjaHVua0hlYWRlck9wdGlvbnMiLCJzcGxpdERvY3VtZW50cyIsInNwbGl0T25TZXBhcmF0b3IiLCJzZXBhcmF0b3IiLCJzcGxpdHMiLCJyZWdleEVzY2FwZWRTZXBhcmF0b3IiLCJyZXBsYWNlIiwic3BsaXQiLCJSZWdFeHAiLCJmaWx0ZXIiLCJzIiwiY3JlYXRlRG9jdW1lbnRzIiwidGV4dHMiLCJtZXRhZGF0YXMiLCJfbWV0YWRhdGFzIiwiQXJyYXkiLCJtYXAiLCJjaHVua0hlYWRlciIsImNodW5rT3ZlcmxhcEhlYWRlciIsImFwcGVuZENodW5rT3ZlcmxhcEhlYWRlciIsImkiLCJsaW5lQ291bnRlckluZGV4IiwicHJldkNodW5rIiwiaW5kZXhQcmV2Q2h1bmsiLCJjaHVuayIsInNwbGl0VGV4dCIsInBhZ2VDb250ZW50IiwiaW5kZXhDaHVuayIsImluZGV4T2YiLCJuZXdMaW5lc0JlZm9yZUZpcnN0Q2h1bmsiLCJudW1iZXJPZk5ld0xpbmVzIiwiaW5kZXhFbmRQcmV2Q2h1bmsiLCJudW1iZXJPZkludGVybWVkaWF0ZU5ld0xpbmVzIiwibmV3TGluZXNDb3VudCIsImxvYyIsImxpbmVzIiwiZnJvbSIsInRvIiwibWV0YWRhdGFXaXRoTGluZXNOdW1iZXIiLCJwdXNoIiwibWV0YWRhdGEiLCJzdGFydCIsImVuZCIsInRleHRTZWN0aW9uIiwic2xpY2UiLCJtYXRjaCIsInNlbGVjdGVkRG9jdW1lbnRzIiwiZG9jIiwidW5kZWZpbmVkIiwiam9pbkRvY3MiLCJkb2NzIiwiam9pbiIsInRyaW0iLCJtZXJnZVNwbGl0cyIsImN1cnJlbnREb2MiLCJ0b3RhbCIsImQiLCJfbGVuIiwiY29uc29sZSIsIndhcm4iLCJzaGlmdCIsIkNoYXJhY3RlclRleHRTcGxpdHRlciIsImxjX25hbWUiLCJTdXBwb3J0ZWRUZXh0U3BsaXR0ZXJMYW5ndWFnZXMiLCJSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIiLCJzZXBhcmF0b3JzIiwiX3NwbGl0VGV4dCIsImZpbmFsQ2h1bmtzIiwibmV3U2VwYXJhdG9ycyIsImluY2x1ZGVzIiwiZ29vZFNwbGl0cyIsIl9zZXBhcmF0b3IiLCJtZXJnZWRUZXh0Iiwib3RoZXJJbmZvIiwiZnJvbUxhbmd1YWdlIiwibGFuZ3VhZ2UiLCJvcHRpb25zIiwiZ2V0U2VwYXJhdG9yc0Zvckxhbmd1YWdlIiwiVG9rZW5UZXh0U3BsaXR0ZXIiLCJlbmNvZGluZ05hbWUiLCJhbGxvd2VkU3BlY2lhbCIsImRpc2FsbG93ZWRTcGVjaWFsIiwidG9rZW5pemVyIiwiaW5wdXRfaWRzIiwiZW5jb2RlIiwic3RhcnRfaWR4IiwiZW5kX2lkeCIsIk1hdGgiLCJtaW4iLCJjaHVua19pZHMiLCJkZWNvZGUiLCJNYXJrZG93blRleHRTcGxpdHRlciIsIkxhdGV4VGV4dFNwbGl0dGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/dist/text_splitter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharacterTextSplitter: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.CharacterTextSplitter),\n/* harmony export */   LatexTextSplitter: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.LatexTextSplitter),\n/* harmony export */   MarkdownTextSplitter: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.MarkdownTextSplitter),\n/* harmony export */   RecursiveCharacterTextSplitter: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.RecursiveCharacterTextSplitter),\n/* harmony export */   SupportedTextSplitterLanguages: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.SupportedTextSplitterLanguages),\n/* harmony export */   TextSplitter: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.TextSplitter),\n/* harmony export */   TokenTextSplitter: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.TokenTextSplitter)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/textsplitters/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL2luZGV4LmpzPzhiOTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/base.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/base.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreCustomEvent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"raiseError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.ignoreCustomEvent = input.ignoreCustomEvent ?? this.ignoreCustomEvent;\n            this.raiseError = input.raiseError ?? this.raiseError;\n            this.awaitHandlers = this.raiseError || (input._awaitHandler ?? this.awaitHandlers);\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZCO0FBQytDO0FBQ25CO0FBQ3pEOzs7O0NBSUMsR0FDRCxNQUFNSTtBQUNOO0FBQ0E7Ozs7O0NBS0MsR0FDTSxNQUFNQyw0QkFBNEJEO0lBQ3JDLElBQUlFLGVBQWU7UUFDZixPQUFPO1lBQUM7WUFBa0I7WUFBYSxJQUFJLENBQUNDLElBQUk7U0FBQztJQUNyRDtJQUNBLElBQUlDLGFBQWE7UUFDYixPQUFPQztJQUNYO0lBQ0EsSUFBSUMsZ0JBQWdCO1FBQ2hCLE9BQU9EO0lBQ1g7SUFDQSxJQUFJRSxhQUFhO1FBQ2IsT0FBT0Y7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0QsT0FBT0csVUFBVTtRQUNiLE9BQU8sSUFBSSxDQUFDTCxJQUFJO0lBQ3BCO0lBQ0E7O0tBRUMsR0FDRCxJQUFJTSxRQUFRO1FBQ1IsT0FBTztlQUNBLElBQUksQ0FBQ1AsWUFBWTtZQUNwQkoseUVBQWtCQSxDQUFDLElBQUksQ0FBQ1ksV0FBVztTQUN0QztJQUNMO0lBQ0FBLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUs7UUFDTEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUscUJBQXFCO1lBQzdDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxpQkFBaUI7WUFDekNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9sQixxRUFBc0JBLENBQUMsc0NBQXNDO1FBQ3hFO1FBQ0EsSUFBSSxDQUFDbUIsU0FBUyxHQUFHUCxTQUFTLENBQUM7UUFDM0IsSUFBSUEsT0FBTztZQUNQLElBQUksQ0FBQ1EsU0FBUyxHQUFHUixNQUFNUSxTQUFTLElBQUksSUFBSSxDQUFDQSxTQUFTO1lBQ2xELElBQUksQ0FBQ0MsV0FBVyxHQUFHVCxNQUFNUyxXQUFXLElBQUksSUFBSSxDQUFDQSxXQUFXO1lBQ3hELElBQUksQ0FBQ0MsV0FBVyxHQUFHVixNQUFNVSxXQUFXLElBQUksSUFBSSxDQUFDQSxXQUFXO1lBQ3hELElBQUksQ0FBQ0MsZUFBZSxHQUFHWCxNQUFNVyxlQUFlLElBQUksSUFBSSxDQUFDQSxlQUFlO1lBQ3BFLElBQUksQ0FBQ0MsaUJBQWlCLEdBQ2xCWixNQUFNWSxpQkFBaUIsSUFBSSxJQUFJLENBQUNBLGlCQUFpQjtZQUNyRCxJQUFJLENBQUNDLFVBQVUsR0FBR2IsTUFBTWEsVUFBVSxJQUFJLElBQUksQ0FBQ0EsVUFBVTtZQUNyRCxJQUFJLENBQUNDLGFBQWEsR0FDZCxJQUFJLENBQUNELFVBQVUsSUFBS2IsQ0FBQUEsTUFBTWUsYUFBYSxJQUFJLElBQUksQ0FBQ0QsYUFBYTtRQUNyRTtJQUNKO0lBQ0FFLE9BQU87UUFDSCxPQUFPLElBQUksSUFBSSxDQUFDakIsV0FBVyxDQUFDLElBQUk7SUFDcEM7SUFDQWtCLFNBQVM7UUFDTCxPQUFPL0IsK0RBQVlBLENBQUNnQyxTQUFTLENBQUNELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLElBQUk7SUFDbEQ7SUFDQUMsdUJBQXVCO1FBQ25CLE9BQU9sQywrREFBWUEsQ0FBQ2dDLFNBQVMsQ0FBQ0Usb0JBQW9CLENBQUNELElBQUksQ0FBQyxJQUFJO0lBQ2hFO0lBQ0EsT0FBT0UsWUFBWUMsT0FBTyxFQUFFO1FBQ3hCLE1BQU1DLGdCQUFnQmpDO1lBQ2xCUyxhQUFjO2dCQUNWLEtBQUs7Z0JBQ0xFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtvQkFDaENDLFlBQVk7b0JBQ1pDLGNBQWM7b0JBQ2RDLFVBQVU7b0JBQ1ZDLE9BQU9yQiw0Q0FBTztnQkFDbEI7Z0JBQ0FnQixPQUFPd0IsTUFBTSxDQUFDLElBQUksRUFBRUg7WUFDeEI7UUFDSjtRQUNBLE9BQU8sSUFBSUM7SUFDZjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvYmFzZS5qcz8zZWRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHV1aWQgZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgZ2V0X2xjX3VuaXF1ZV9uYW1lLCB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBwcm92aWRlcyBhIHNldCBvZiBvcHRpb25hbCBtZXRob2RzIHRoYXQgY2FuIGJlXG4gKiBvdmVycmlkZGVuIGluIGRlcml2ZWQgY2xhc3NlcyB0byBoYW5kbGUgdmFyaW91cyBldmVudHMgZHVyaW5nIHRoZVxuICogZXhlY3V0aW9uIG9mIGEgTGFuZ0NoYWluIGFwcGxpY2F0aW9uLlxuICovXG5jbGFzcyBCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIHtcbn1cbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgY3JlYXRpbmcgY2FsbGJhY2sgaGFuZGxlcnMgaW4gdGhlIExhbmdDaGFpblxuICogZnJhbWV3b3JrLiBJdCBwcm92aWRlcyBhIHNldCBvZiBvcHRpb25hbCBtZXRob2RzIHRoYXQgY2FuIGJlIG92ZXJyaWRkZW5cbiAqIGluIGRlcml2ZWQgY2xhc3NlcyB0byBoYW5kbGUgdmFyaW91cyBldmVudHMgZHVyaW5nIHRoZSBleGVjdXRpb24gb2YgYVxuICogTGFuZ0NoYWluIGFwcGxpY2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3Mge1xuICAgIGdldCBsY19uYW1lc3BhY2UoKSB7XG4gICAgICAgIHJldHVybiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcImNhbGxiYWNrc1wiLCB0aGlzLm5hbWVdO1xuICAgIH1cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgc2VyaWFsaXphYmxlLiBPdmVycmlkZSB0byBwcm92aWRlIGFuIGFsaWFzIG9yXG4gICAgICogdG8gcHJlc2VydmUgdGhlIHNlcmlhbGl6ZWQgbW9kdWxlIG5hbWUgaW4gbWluaWZpZWQgZW52aXJvbm1lbnRzLlxuICAgICAqXG4gICAgICogSW1wbGVtZW50ZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIHN1cHBvcnQgbG9hZGluZyBsb2dpYy5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIHNlcmlhbGl6ZWQgaWRlbnRpZmllciBmb3IgdGhlIG1vZHVsZS5cbiAgICAgKi9cbiAgICBnZXQgbGNfaWQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi50aGlzLmxjX25hbWVzcGFjZSxcbiAgICAgICAgICAgIGdldF9sY191bmlxdWVfbmFtZSh0aGlzLmNvbnN0cnVjdG9yKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfa3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUxMTVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUNoYWluXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQWdlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVSZXRyaWV2ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVDdXN0b21FdmVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJhaXNlRXJyb3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhd2FpdEhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EXCIpICE9PSBcInRydWVcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sY19rd2FyZ3MgPSBpbnB1dCB8fCB7fTtcbiAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUxMTSA9IGlucHV0Lmlnbm9yZUxMTSA/PyB0aGlzLmlnbm9yZUxMTTtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQ2hhaW4gPSBpbnB1dC5pZ25vcmVDaGFpbiA/PyB0aGlzLmlnbm9yZUNoYWluO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVBZ2VudCA9IGlucHV0Lmlnbm9yZUFnZW50ID8/IHRoaXMuaWdub3JlQWdlbnQ7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZVJldHJpZXZlciA9IGlucHV0Lmlnbm9yZVJldHJpZXZlciA/PyB0aGlzLmlnbm9yZVJldHJpZXZlcjtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQ3VzdG9tRXZlbnQgPVxuICAgICAgICAgICAgICAgIGlucHV0Lmlnbm9yZUN1c3RvbUV2ZW50ID8/IHRoaXMuaWdub3JlQ3VzdG9tRXZlbnQ7XG4gICAgICAgICAgICB0aGlzLnJhaXNlRXJyb3IgPSBpbnB1dC5yYWlzZUVycm9yID8/IHRoaXMucmFpc2VFcnJvcjtcbiAgICAgICAgICAgIHRoaXMuYXdhaXRIYW5kbGVycyA9XG4gICAgICAgICAgICAgICAgdGhpcy5yYWlzZUVycm9yIHx8IChpbnB1dC5fYXdhaXRIYW5kbGVyID8/IHRoaXMuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemFibGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT05Ob3RJbXBsZW1lbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OTm90SW1wbGVtZW50ZWQuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21NZXRob2RzKG1ldGhvZHMpIHtcbiAgICAgICAgY2xhc3MgSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHV1aWQudjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgbWV0aG9kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIYW5kbGVyKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInV1aWQiLCJTZXJpYWxpemFibGUiLCJnZXRfbGNfdW5pcXVlX25hbWUiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyIsIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJsY19uYW1lc3BhY2UiLCJuYW1lIiwibGNfc2VjcmV0cyIsInVuZGVmaW5lZCIsImxjX2F0dHJpYnV0ZXMiLCJsY19hbGlhc2VzIiwibGNfbmFtZSIsImxjX2lkIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19rd2FyZ3MiLCJpZ25vcmVMTE0iLCJpZ25vcmVDaGFpbiIsImlnbm9yZUFnZW50IiwiaWdub3JlUmV0cmlldmVyIiwiaWdub3JlQ3VzdG9tRXZlbnQiLCJyYWlzZUVycm9yIiwiYXdhaXRIYW5kbGVycyIsIl9hd2FpdEhhbmRsZXIiLCJjb3B5IiwidG9KU09OIiwicHJvdG90eXBlIiwiY2FsbCIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiZnJvbU1ldGhvZHMiLCJtZXRob2RzIiwiSGFuZGxlciIsInY0IiwiYXNzaWduIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/manager.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   BaseRunManager: () => (/* binding */ BaseRunManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _messages_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/utils.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/promises.js\");\n/* harmony import */ var _utils_callbacks_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/callbacks.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/callbacks.js\");\n/* harmony import */ var _tracers_base_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n\n\n\n\n\n\nif (/* #__PURE__ */ (0,_utils_callbacks_js__WEBPACK_IMPORTED_MODULE_6__.isTracingEnabled)() && /* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\") {\n    /* #__PURE__ */ console.warn([\n        \"[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.\",\n        \"[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,\",\n        `[WARN]: we suggest setting \"process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true\" to avoid additional latency.`\n    ].join(\"\\n\"));\n}\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    get parentRunId() {\n        return this._parentRunId;\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleCustomEvent(eventName, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data, _runId, _tags, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _metadata) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleCustomEvent?.(eventName, data, this.runId, this.tags, this.metadata);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_8__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>{\n                if (handler.ignoreLLM) {\n                    return;\n                }\n                if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                    // Create and add run to the run map.\n                    // We do this synchronously to avoid race conditions\n                    // when callbacks are backgrounded.\n                    handler._createRunForLLMStart(llm, [\n                        prompt\n                    ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                }\n                return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                    try {\n                        await handler.handleLLMStart?.(llm, [\n                            prompt\n                        ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }, handler.awaitHandlers);\n            }));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_8__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>{\n                if (handler.ignoreLLM) {\n                    return;\n                }\n                if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                    // Create and add run to the run map.\n                    // We do this synchronously to avoid race conditions\n                    // when callbacks are backgrounded.\n                    handler._createRunForChatModelStart(llm, [\n                        messageGroup\n                    ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                }\n                return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                    try {\n                        if (handler.handleChatModelStart) {\n                            await handler.handleChatModelStart?.(llm, [\n                                messageGroup\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } else if (handler.handleLLMStart) {\n                            const messageString = (0,_messages_utils_js__WEBPACK_IMPORTED_MODULE_2__.getBufferString)(messageGroup);\n                            await handler.handleLLMStart?.(llm, [\n                                messageString\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        }\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }, handler.awaitHandlers);\n            }));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreChain) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForChainStart(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreAgent) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForToolStart(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>{\n            if (handler.ignoreRetriever) {\n                return;\n            }\n            if ((0,_tracers_base_js__WEBPACK_IMPORTED_MODULE_7__.isBaseTracer)(handler)) {\n                // Create and add run to the run map.\n                // We do this synchronously to avoid race conditions\n                // when callbacks are backgrounded.\n                handler._createRunForRetrieverStart(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n            }\n            return (0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                } catch (err) {\n                    const logFunction = handler.raiseError ? console.error : console.warn;\n                    logFunction(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    if (handler.raiseError) {\n                        throw err;\n                    }\n                }\n            }, handler.awaitHandlers);\n        }));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleCustomEvent(eventName, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data, runId, _tags, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _metadata) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_5__.consumeCallback)(async ()=>{\n                if (!handler.ignoreCustomEvent) {\n                    try {\n                        await handler.handleCustomEvent?.(eventName, data, runId, this.tags, this.metadata);\n                    } catch (err) {\n                        const logFunction = handler.raiseError ? console.error : console.warn;\n                        logFunction(`Error in handler ${handler.constructor.name}, handleCustomEvent: ${err}`);\n                        if (handler.raiseError) {\n                            throw err;\n                        }\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_8__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static async configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        return this._configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options);\n    }\n    // TODO: Deprecate async method in favor of this one.\n    static _configureSync(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer.getTraceableRunTree()?.tracingEnabled || (0,_utils_callbacks_js__WEBPACK_IMPORTED_MODULE_6__.isTracingEnabled)();\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    const tracerV2 = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer();\n                    callbackManager.addHandler(tracerV2, true);\n                    // handoff between langchain and langsmith/traceable\n                    // override the parent run ID\n                    callbackManager._parentRunId = _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer.getTraceableRunTree()?.id ?? callbackManager._parentRunId;\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(`What is the answer to {question}?`);\n *\n * // Example of using LLMChain to process a series of questions\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Process questions using the chain\n * const processQuestions = async (questions) => {\n *   for (const question of questions) {\n *     const result = await chain.call({ question });\n *     console.log(result);\n *   }\n * };\n *\n * // Example questions\n * const questions = [\n *   \"What is your name?\",\n *   \"What is your quest?\",\n *   \"What is your favorite color?\",\n * ];\n *\n * // Run the example\nconst logFunction = handler.raiseError ? console.error : console.warn;\n* processQuestions(questions).catch(consolelogFunction;\n *\n * ```\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_4__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQztBQUNhO0FBQ2M7QUFDUjtBQUNFO0FBQ1M7QUFDbEI7QUFDUztBQUNQO0FBQ2xELElBQ0EsYUFBYSxHQUFHUSxxRUFBZ0JBLE1BQzVCLGFBQWEsR0FBR0gscUVBQXNCQSxDQUFDLHNDQUNuQyxRQUFRO0lBQ1osYUFBYSxHQUFHSyxRQUFRQyxJQUFJLENBQUM7UUFDekI7UUFDQTtRQUNBLENBQUMseUdBQXlHLENBQUM7S0FDOUcsQ0FBQ0MsSUFBSSxDQUFDO0FBQ1g7QUFDTyxTQUFTQyx1QkFBdUJDLEdBQUc7SUFDdEMsSUFBSSxDQUFDQSxLQUFLO1FBQ04sT0FBTyxDQUFDO0lBQ1osT0FDSyxJQUFJQyxNQUFNQyxPQUFPLENBQUNGLFFBQVEsVUFBVUEsS0FBSztRQUMxQyxPQUFPO1lBQUVHLFdBQVdIO1FBQUk7SUFDNUIsT0FDSztRQUNELE9BQU9BO0lBQ1g7QUFDSjtBQUNBOztDQUVDLEdBQ00sTUFBTUk7SUFDVEMsV0FBV0MsT0FBTyxFQUFFO1FBQ2hCLE9BQU8sSUFBSSxDQUFDQyxXQUFXLENBQUM7WUFBQ0Q7U0FBUTtJQUNyQztBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNRTtJQUNUQyxZQUFZQyxLQUFLLEVBQUVDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVDLElBQUksRUFBRUMsZUFBZSxFQUFFQyxRQUFRLEVBQUVDLG1CQUFtQixFQUFFQyxZQUFZLENBQUU7UUFDbEhDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT2I7UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7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bW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9tYW5hZ2VyLmpzP2IwYTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ29uc29sZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2NvbnNvbGUuanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZXNzYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlciwgfSBmcm9tIFwiLi4vdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBjb25zdW1lQ2FsbGJhY2sgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgaXNUcmFjaW5nRW5hYmxlZCB9IGZyb20gXCIuLi91dGlscy9jYWxsYmFja3MuanNcIjtcbmltcG9ydCB7IGlzQmFzZVRyYWNlciB9IGZyb20gXCIuLi90cmFjZXJzL2Jhc2UuanNcIjtcbmlmIChcbi8qICNfX1BVUkVfXyAqLyBpc1RyYWNpbmdFbmFibGVkKCkgJiZcbiAgICAvKiAjX19QVVJFX18gKi8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORFwiKSAhPT1cbiAgICAgICAgXCJ0cnVlXCIpIHtcbiAgICAvKiAjX19QVVJFX18gKi8gY29uc29sZS53YXJuKFtcbiAgICAgICAgXCJbV0FSTl06IFlvdSBoYXZlIGVuYWJsZWQgTGFuZ1NtaXRoIHRyYWNpbmcgd2l0aG91dCBiYWNrZ3JvdW5kaW5nIGNhbGxiYWNrcy5cIixcbiAgICAgICAgXCJbV0FSTl06IElmIHlvdSBhcmUgbm90IHVzaW5nIGEgc2VydmVybGVzcyBlbnZpcm9ubWVudCB3aGVyZSB5b3UgbXVzdCB3YWl0IGZvciB0cmFjaW5nIGNhbGxzIHRvIGZpbmlzaCxcIixcbiAgICAgICAgYFtXQVJOXTogd2Ugc3VnZ2VzdCBzZXR0aW5nIFwicHJvY2Vzcy5lbnYuTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EPXRydWVcIiB0byBhdm9pZCBhZGRpdGlvbmFsIGxhdGVuY3kuYCxcbiAgICBdLmpvaW4oXCJcXG5cIikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoYXJnKSB7XG4gICAgaWYgKCFhcmcpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgfHwgXCJuYW1lXCIgaW4gYXJnKSB7XG4gICAgICAgIHJldHVybiB7IGNhbGxiYWNrczogYXJnIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlIGNhbGxiYWNrcyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzIG9mIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIHNldEhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRIYW5kbGVycyhbaGFuZGxlcl0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVuIG1hbmFnZXIgaW4gTGFuZ0NoYWluLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHJ1bklkLCBoYW5kbGVycywgaW5oZXJpdGFibGVIYW5kbGVycywgdGFncywgaW5oZXJpdGFibGVUYWdzLCBtZXRhZGF0YSwgaW5oZXJpdGFibGVNZXRhZGF0YSwgX3BhcmVudFJ1bklkKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBydW5JZFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZUhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZUhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0YWdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlVGFnc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZU1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZU1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcGFyZW50UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IF9wYXJlbnRSdW5JZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IHBhcmVudFJ1bklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRleHQodGV4dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUZXh0Py4odGV4dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVGV4dDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBkYXRhLCBfcnVuSWQsIF90YWdzLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9tZXRhZGF0YSkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDdXN0b21FdmVudD8uKGV2ZW50TmFtZSwgZGF0YSwgdGhpcy5ydW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDdXN0b21FdmVudDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuLyoqXG4gKiBNYW5hZ2VzIGNhbGxiYWNrcyBmb3IgcmV0cmlldmVyIHJ1bnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRW5kKGRvY3VtZW50cykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVJldHJpZXZlckVuZD8uKGRvY3VtZW50cywgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyYCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckxMTVJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBhc3luYyBoYW5kbGVMTE1OZXdUb2tlbih0b2tlbiwgaWR4LCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTU5ld1Rva2VuPy4odG9rZW4sIGlkeCA/PyB7IHByb21wdDogMCwgY29tcGxldGlvbjogMCB9LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBmaWVsZHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTU5ld1Rva2VuOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FbmQob3V0cHV0KSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1FbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yQ2hhaW5SdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FcnJvcihlcnIsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpbkVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBrd2FyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FbmQob3V0cHV0LCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIGt3YXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVBZ2VudEFjdGlvbj8uKGFjdGlvbiwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQWdlbnRBY3Rpb246ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRFbmQoYWN0aW9uKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVBZ2VudEVuZD8uKGFjdGlvbiwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQWdlbnRFbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCh0YWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICBtYW5hZ2VyLmFkZFRhZ3ModGhpcy5pbmhlcml0YWJsZVRhZ3MpO1xuICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG4gICAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xFcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFbmQob3V0cHV0KSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuLyoqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0ID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwiV2hhdCBpcyB0aGUgYW5zd2VyIHRvIHtxdWVzdGlvbn0/XCIpO1xuICpcbiAqIC8vIEV4YW1wbGUgb2YgdXNpbmcgTExNQ2hhaW4gd2l0aCBPcGVuQUkgYW5kIGEgc2ltcGxlIHByb21wdFxuICogY29uc3QgY2hhaW4gPSBuZXcgTExNQ2hhaW4oe1xuICogICBsbG06IG5ldyBDaGF0T3BlbkFJKHsgdGVtcGVyYXR1cmU6IDAuOSB9KSxcbiAqICAgcHJvbXB0LFxuICogfSk7XG4gKlxuICogLy8gUnVubmluZyB0aGUgY2hhaW4gd2l0aCBhIHNpbmdsZSBxdWVzdGlvblxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uY2FsbCh7XG4gKiAgIHF1ZXN0aW9uOiBcIldoYXQgaXMgdGhlIGFpcnNwZWVkIHZlbG9jaXR5IG9mIGFuIHVubGFkZW4gc3dhbGxvdz9cIixcbiAqIH0pO1xuICogY29uc29sZS5sb2coXCJUaGUgYW5zd2VyIGlzOlwiLCByZXN1bHQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRSdW5JZCwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlSGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZU1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjYWxsYmFja19tYW5hZ2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wYXJlbnRSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gb3B0aW9ucz8uaGFuZGxlcnMgPz8gdGhpcy5oYW5kbGVycztcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID1cbiAgICAgICAgICAgIG9wdGlvbnM/LmluaGVyaXRhYmxlSGFuZGxlcnMgPz8gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzO1xuICAgICAgICB0aGlzLnRhZ3MgPSBvcHRpb25zPy50YWdzID8/IHRoaXMudGFncztcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MgPSBvcHRpb25zPy5pbmhlcml0YWJsZVRhZ3MgPz8gdGhpcy5pbmhlcml0YWJsZVRhZ3M7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBvcHRpb25zPy5tZXRhZGF0YSA/PyB0aGlzLm1ldGFkYXRhO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEgPVxuICAgICAgICAgICAgb3B0aW9ucz8uaW5oZXJpdGFibGVNZXRhZGF0YSA/PyB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGE7XG4gICAgICAgIHRoaXMuX3BhcmVudFJ1bklkID0gcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHBhcmVudCBydW4gSUQsIGlmIGFueS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJlbnQgcnVuIElELlxuICAgICAqL1xuICAgIGdldFBhcmVudFJ1bklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQgPSB1bmRlZmluZWQsIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgZXh0cmFQYXJhbXMgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21wdHMubWFwKGFzeW5jIChwcm9tcHQsIGlkeCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2FuJ3QgaGF2ZSBkdXBsaWNhdGUgcnVucyB3aXRoIHRoZSBzYW1lIHJ1biBJRCAoaWYgcHJvdmlkZWQpXG4gICAgICAgICAgICBjb25zdCBydW5JZF8gPSBpZHggPT09IDAgJiYgcnVuSWQgPyBydW5JZCA6IHV1aWR2NCgpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIHJ1biB0byB0aGUgcnVuIG1hcC5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG8gdGhpcyBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLlxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JMTE1TdGFydChsbG0sIFtwcm9tcHRdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0Py4obGxtLCBbcHJvbXB0XSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckxMTVJ1bihydW5JZF8sIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQgPSB1bmRlZmluZWQsIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgZXh0cmFQYXJhbXMgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG1lc3NhZ2VzLm1hcChhc3luYyAobWVzc2FnZUdyb3VwLCBpZHgpID0+IHtcbiAgICAgICAgICAgIC8vIENhbid0IGhhdmUgZHVwbGljYXRlIHJ1bnMgd2l0aCB0aGUgc2FtZSBydW4gSUQgKGlmIHByb3ZpZGVkKVxuICAgICAgICAgICAgY29uc3QgcnVuSWRfID0gaWR4ID09PSAwICYmIHJ1bklkID8gcnVuSWQgOiB1dWlkdjQoKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzQmFzZVRyYWNlcihoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGFkZCBydW4gdG8gdGhlIHJ1biBtYXAuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvIHRoaXMgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZC5cbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5fY3JlYXRlUnVuRm9yQ2hhdE1vZGVsU3RhcnQobGxtLCBbbWVzc2FnZUdyb3VwXSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIuaGFuZGxlQ2hhdE1vZGVsU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0Py4obGxtLCBbbWVzc2FnZUdyb3VwXSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVN0cmluZyA9IGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlR3JvdXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIFttZXNzYWdlU3RyaW5nXSwgcnVuSWRfLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckxMTVJ1bihydW5JZF8sIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCA9IHV1aWR2NCgpLCBydW5UeXBlID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0Jhc2VUcmFjZXIoaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGFkZCBydW4gdG8gdGhlIHJ1biBtYXAuXG4gICAgICAgICAgICAgICAgLy8gV2UgZG8gdGhpcyBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQuXG4gICAgICAgICAgICAgICAgaGFuZGxlci5fY3JlYXRlUnVuRm9yQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuVHlwZSwgcnVuTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluU3RhcnQ/LihjaGFpbiwgaW5wdXRzLCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuVHlwZSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJhaXNlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycyk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQmFzZVRyYWNlcihoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIHJ1biB0byB0aGUgcnVuIG1hcC5cbiAgICAgICAgICAgICAgICAvLyBXZSBkbyB0aGlzIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZC5cbiAgICAgICAgICAgICAgICBoYW5kbGVyLl9jcmVhdGVSdW5Gb3JUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbFN0YXJ0Py4odG9vbCwgaW5wdXQsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGdW5jdGlvbiA9IGhhbmRsZXIucmFpc2VFcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjb25zb2xlLmVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgbG9nRnVuY3Rpb24oYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQgPSB1dWlkdjQoKSwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNCYXNlVHJhY2VyKGhhbmRsZXIpKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBhZGQgcnVuIHRvIHRoZSBydW4gbWFwLlxuICAgICAgICAgICAgICAgIC8vIFdlIGRvIHRoaXMgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLlxuICAgICAgICAgICAgICAgIGhhbmRsZXIuX2NyZWF0ZVJ1bkZvclJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyU3RhcnQ/LihyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nRnVuY3Rpb24gPSBoYW5kbGVyLnJhaXNlRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS5lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Z1bmN0aW9uKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yYWlzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDdXN0b21FdmVudChldmVudE5hbWUsIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZGF0YSwgcnVuSWQsIF90YWdzLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9tZXRhZGF0YSkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDdXN0b21FdmVudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ3VzdG9tRXZlbnQ/LihldmVudE5hbWUsIGRhdGEsIHJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGNvbnNvbGUuZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUN1c3RvbUV2ZW50OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucmFpc2VFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICB9XG4gICAgc2V0SGFuZGxlcnMoaGFuZGxlcnMsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRhZ3ModGFncywgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVUYWdzKHRhZ3MpOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICB0aGlzLnRhZ3MucHVzaCguLi50YWdzKTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzLnB1c2goLi4udGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlVGFncyh0YWdzKSB7XG4gICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5maWx0ZXIoKHRhZykgPT4gIXRhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuZmlsdGVyKCh0YWcpID0+ICF0YWdzLmluY2x1ZGVzKHRhZykpO1xuICAgIH1cbiAgICBhZGRNZXRhZGF0YShtZXRhZGF0YSwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHsgLi4udGhpcy5tZXRhZGF0YSwgLi4ubWV0YWRhdGEgfTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9IHsgLi4udGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCAuLi5tZXRhZGF0YSB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZU1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG1ldGFkYXRhKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubWV0YWRhdGFba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGFba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KGFkZGl0aW9uYWxIYW5kbGVycyA9IFtdLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVUYWdzLmluY2x1ZGVzKHRhZyk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLm1ldGFkYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGUgPSBPYmplY3Qua2V5cyh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpLmluY2x1ZGVzKGtleSk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHsgW2tleV06IHRoaXMubWV0YWRhdGFba2V5XSB9LCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGFkZGl0aW9uYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBjb3BpZXMgb2YgY29uc29sZV9jYWxsYmFja19oYW5kbGVyXG4gICAgICAgICAgICBtYW5hZ2VyLmhhbmRsZXJzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaCkgPT4gaC5uYW1lID09PSBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiKVxuICAgICAgICAgICAgICAgIC5zb21lKChoKSA9PiBoLm5hbWUgPT09IGhhbmRsZXIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21IYW5kbGVycyhoYW5kbGVycykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZHY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGhhbmRsZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IHRoaXMoKTtcbiAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKG5ldyBIYW5kbGVyKCkpO1xuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGNvbmZpZ3VyZShpbmhlcml0YWJsZUhhbmRsZXJzLCBsb2NhbEhhbmRsZXJzLCBpbmhlcml0YWJsZVRhZ3MsIGxvY2FsVGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgbG9jYWxNZXRhZGF0YSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlndXJlU3luYyhpbmhlcml0YWJsZUhhbmRsZXJzLCBsb2NhbEhhbmRsZXJzLCBpbmhlcml0YWJsZVRhZ3MsIGxvY2FsVGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgbG9jYWxNZXRhZGF0YSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8vIFRPRE86IERlcHJlY2F0ZSBhc3luYyBtZXRob2QgaW4gZmF2b3Igb2YgdGhpcyBvbmUuXG4gICAgc3RhdGljIF9jb25maWd1cmVTeW5jKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIGluaGVyaXRhYmxlVGFncywgbG9jYWxUYWdzLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBsb2NhbE1ldGFkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBjYWxsYmFja01hbmFnZXI7XG4gICAgICAgIGlmIChpbmhlcml0YWJsZUhhbmRsZXJzIHx8IGxvY2FsSGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGluaGVyaXRhYmxlSGFuZGxlcnMpIHx8ICFpbmhlcml0YWJsZUhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcigpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5zZXRIYW5kbGVycyhpbmhlcml0YWJsZUhhbmRsZXJzPy5tYXAoZW5zdXJlSGFuZGxlcikgPz8gW10sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gaW5oZXJpdGFibGVIYW5kbGVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IGNhbGxiYWNrTWFuYWdlci5jb3B5KEFycmF5LmlzQXJyYXkobG9jYWxIYW5kbGVycylcbiAgICAgICAgICAgICAgICA/IGxvY2FsSGFuZGxlcnMubWFwKGVuc3VyZUhhbmRsZXIpXG4gICAgICAgICAgICAgICAgOiBsb2NhbEhhbmRsZXJzPy5oYW5kbGVycywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZlcmJvc2VFbmFibGVkID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9WRVJCT1NFXCIpID09PSBcInRydWVcIiB8fFxuICAgICAgICAgICAgb3B0aW9ucz8udmVyYm9zZTtcbiAgICAgICAgY29uc3QgdHJhY2luZ1YyRW5hYmxlZCA9IExhbmdDaGFpblRyYWNlci5nZXRUcmFjZWFibGVSdW5UcmVlKCk/LnRyYWNpbmdFbmFibGVkIHx8XG4gICAgICAgICAgICBpc1RyYWNpbmdFbmFibGVkKCk7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdFbmFibGVkID0gdHJhY2luZ1YyRW5hYmxlZCB8fFxuICAgICAgICAgICAgKGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVFJBQ0lOR1wiKSA/PyBmYWxzZSk7XG4gICAgICAgIGlmICh2ZXJib3NlRW5hYmxlZCB8fCB0cmFjaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKCFjYWxsYmFja01hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmVyYm9zZUVuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gQ29uc29sZUNhbGxiYWNrSGFuZGxlci5wcm90b3R5cGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25zb2xlSGFuZGxlciA9IG5ldyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoY29uc29sZUhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYWNpbmdFbmFibGVkICYmXG4gICAgICAgICAgICAgICAgIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibGFuZ2NoYWluX3RyYWNlclwiKSkge1xuICAgICAgICAgICAgICAgIGlmICh0cmFjaW5nVjJFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNlclYyID0gbmV3IExhbmdDaGFpblRyYWNlcigpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcih0cmFjZXJWMiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRvZmYgYmV0d2VlbiBsYW5nY2hhaW4gYW5kIGxhbmdzbWl0aC90cmFjZWFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIHBhcmVudCBydW4gSURcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLl9wYXJlbnRSdW5JZCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBMYW5nQ2hhaW5UcmFjZXIuZ2V0VHJhY2VhYmxlUnVuVHJlZSgpPy5pZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5fcGFyZW50UnVuSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmhlcml0YWJsZVRhZ3MgfHwgbG9jYWxUYWdzKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZFRhZ3MoaW5oZXJpdGFibGVUYWdzID8/IFtdKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkVGFncyhsb2NhbFRhZ3MgPz8gW10sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdGFibGVNZXRhZGF0YSB8fCBsb2NhbE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZE1ldGFkYXRhKGluaGVyaXRhYmxlTWV0YWRhdGEgPz8ge30pO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShsb2NhbE1ldGFkYXRhID8/IHt9LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFuYWdlcjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgaWYgKFwibmFtZVwiIGluIGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfVxuICAgIHJldHVybiBCYXNlQ2FsbGJhY2tIYW5kbGVyLmZyb21NZXRob2RzKGhhbmRsZXIpO1xufVxuLyoqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0ID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9gKTtcbiAqXG4gKiAvLyBFeGFtcGxlIG9mIHVzaW5nIExMTUNoYWluIHRvIHByb2Nlc3MgYSBzZXJpZXMgb2YgcXVlc3Rpb25zXG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBQcm9jZXNzIHF1ZXN0aW9ucyB1c2luZyB0aGUgY2hhaW5cbiAqIGNvbnN0IHByb2Nlc3NRdWVzdGlvbnMgPSBhc3luYyAocXVlc3Rpb25zKSA9PiB7XG4gKiAgIGZvciAoY29uc3QgcXVlc3Rpb24gb2YgcXVlc3Rpb25zKSB7XG4gKiAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uY2FsbCh7IHF1ZXN0aW9uIH0pO1xuICogICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gKiAgIH1cbiAqIH07XG4gKlxuICogLy8gRXhhbXBsZSBxdWVzdGlvbnNcbiAqIGNvbnN0IHF1ZXN0aW9ucyA9IFtcbiAqICAgXCJXaGF0IGlzIHlvdXIgbmFtZT9cIixcbiAqICAgXCJXaGF0IGlzIHlvdXIgcXVlc3Q/XCIsXG4gKiAgIFwiV2hhdCBpcyB5b3VyIGZhdm9yaXRlIGNvbG9yP1wiLFxuICogXTtcbiAqXG4gKiAvLyBSdW4gdGhlIGV4YW1wbGVcbmNvbnN0IGxvZ0Z1bmN0aW9uID0gaGFuZGxlci5yYWlzZUVycm9yID8gY29uc29sZS5lcnJvciA6IGNvbnNvbGUud2FybjtcbiogcHJvY2Vzc1F1ZXN0aW9ucyhxdWVzdGlvbnMpLmNhdGNoKGNvbnNvbGVsb2dGdW5jdGlvbjtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYWNlR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKGdyb3VwTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJncm91cE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdyb3VwTmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3B0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFuYWdlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKGdyb3VwX25hbWUsIGlucHV0cywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYiA9IG5ldyBMYW5nQ2hhaW5UcmFjZXIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNtID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShbY2JdKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNtPy5oYW5kbGVDaGFpblN0YXJ0KHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJub3RfaW1wbGVtZW50ZWRcIixcbiAgICAgICAgICAgIGlkOiBbXCJsYW5nY2hhaW5cIiwgXCJjYWxsYmFja3NcIiwgXCJncm91cHNcIiwgZ3JvdXBfbmFtZV0sXG4gICAgICAgIH0sIGlucHV0cyA/PyB7fSk7XG4gICAgICAgIGlmICghcnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBydW4gZ3JvdXAgY2FsbGJhY2sgbWFuYWdlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KGlucHV0cykge1xuICAgICAgICBpZiAoIXRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gYXdhaXQgdGhpcy5nZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuZ3JvdXBOYW1lLCBpbnB1dHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTWFuYWdlci5nZXRDaGlsZCgpO1xuICAgIH1cbiAgICBhc3luYyBlcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5NYW5hZ2VyLmhhbmRsZUNoYWluRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBlbmQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuTWFuYWdlci5oYW5kbGVDaGFpbkVuZChvdXRwdXQgPz8ge30pO1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYWNlQXNHcm91cChncm91cE9wdGlvbnMsIGVuY2xvc2VkQ29kZSwgLi4uYXJncykge1xuICAgIGNvbnN0IHRyYWNlR3JvdXAgPSBuZXcgVHJhY2VHcm91cChncm91cE9wdGlvbnMubmFtZSwgZ3JvdXBPcHRpb25zKTtcbiAgICBjb25zdCBjYWxsYmFja01hbmFnZXIgPSBhd2FpdCB0cmFjZUdyb3VwLnN0YXJ0KHsgLi4uYXJncyB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbmNsb3NlZENvZGUoY2FsbGJhY2tNYW5hZ2VyLCAuLi5hcmdzKTtcbiAgICAgICAgYXdhaXQgdHJhY2VHcm91cC5lbmQoX2NvZXJjZVRvRGljdChyZXN1bHQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBhd2FpdCB0cmFjZUdyb3VwLmVycm9yKGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwiQ29uc29sZUNhbGxiYWNrSGFuZGxlciIsImdldEJ1ZmZlclN0cmluZyIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJMYW5nQ2hhaW5UcmFjZXIiLCJjb25zdW1lQ2FsbGJhY2siLCJpc1RyYWNpbmdFbmFibGVkIiwiaXNCYXNlVHJhY2VyIiwiY29uc29sZSIsIndhcm4iLCJqb2luIiwicGFyc2VDYWxsYmFja0NvbmZpZ0FyZyIsImFyZyIsIkFycmF5IiwiaXNBcnJheSIsImNhbGxiYWNrcyIsIkJhc2VDYWxsYmFja01hbmFnZXIiLCJzZXRIYW5kbGVyIiwiaGFuZGxlciIsInNldEhhbmRsZXJzIiwiQmFzZVJ1bk1hbmFnZXIiLCJjb25zdHJ1Y3RvciIsInJ1bklkIiwiaGFuZGxlcnMiLCJpbmhlcml0YWJsZUhhbmRsZXJzIiwidGFncyIsImluaGVyaXRhYmxlVGFncyIsIm1ldGFkYXRhIiwiaW5oZXJpdGFibGVNZXRhZGF0YSIsIl9wYXJlbnRSdW5JZCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJwYXJlbnRSdW5JZCIsImhhbmRsZVRleHQiLCJ0ZXh0IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImVyciIsImxvZ0Z1bmN0aW9uIiwicmFpc2VFcnJvciIsImVycm9yIiwibmFtZSIsImF3YWl0SGFuZGxlcnMiLCJoYW5kbGVDdXN0b21FdmVudCIsImV2ZW50TmFtZSIsImRhdGEiLCJfcnVuSWQiLCJfdGFncyIsIl9tZXRhZGF0YSIsIkNhbGxiYWNrTWFuYWdlckZvclJldHJpZXZlclJ1biIsImdldENoaWxkIiwidGFnIiwibWFuYWdlciIsIkNhbGxiYWNrTWFuYWdlciIsImFkZFRhZ3MiLCJhZGRNZXRhZGF0YSIsImhhbmRsZVJldHJpZXZlckVuZCIsImRvY3VtZW50cyIsImlnbm9yZVJldHJpZXZlciIsImhhbmRsZVJldHJpZXZlckVycm9yIiwiQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuIiwiaGFuZGxlTExNTmV3VG9rZW4iLCJ0b2tlbiIsImlkeCIsImZpZWxkcyIsImlnbm9yZUxMTSIsInByb21wdCIsImNvbXBsZXRpb24iLCJoYW5kbGVMTE1FcnJvciIsImhhbmRsZUxMTUVuZCIsIm91dHB1dCIsIkNhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIiwiaGFuZGxlQ2hhaW5FcnJvciIsImt3YXJncyIsImlnbm9yZUNoYWluIiwiaGFuZGxlQ2hhaW5FbmQiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImlnbm9yZUFnZW50IiwiaGFuZGxlQWdlbnRFbmQiLCJDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIiwiaGFuZGxlVG9vbEVycm9yIiwiaGFuZGxlVG9vbEVuZCIsIm9wdGlvbnMiLCJnZXRQYXJlbnRSdW5JZCIsImhhbmRsZUxMTVN0YXJ0IiwibGxtIiwicHJvbXB0cyIsInVuZGVmaW5lZCIsImV4dHJhUGFyYW1zIiwicnVuTmFtZSIsInJ1bklkXyIsIl9jcmVhdGVSdW5Gb3JMTE1TdGFydCIsImhhbmRsZUNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJtZXNzYWdlR3JvdXAiLCJfY3JlYXRlUnVuRm9yQ2hhdE1vZGVsU3RhcnQiLCJtZXNzYWdlU3RyaW5nIiwiaGFuZGxlQ2hhaW5TdGFydCIsImNoYWluIiwiaW5wdXRzIiwicnVuVHlwZSIsIl9jcmVhdGVSdW5Gb3JDaGFpblN0YXJ0IiwiaGFuZGxlVG9vbFN0YXJ0IiwidG9vbCIsImlucHV0IiwiX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCIsImhhbmRsZVJldHJpZXZlclN0YXJ0IiwicmV0cmlldmVyIiwicXVlcnkiLCJfY3JlYXRlUnVuRm9yUmV0cmlldmVyU3RhcnQiLCJpZ25vcmVDdXN0b21FdmVudCIsImFkZEhhbmRsZXIiLCJpbmhlcml0IiwicHVzaCIsInJlbW92ZUhhbmRsZXIiLCJmaWx0ZXIiLCJfaGFuZGxlciIsInJlbW92ZVRhZ3MiLCJpbmNsdWRlcyIsInJlbW92ZU1ldGFkYXRhIiwia2V5Iiwia2V5cyIsImNvcHkiLCJhZGRpdGlvbmFsSGFuZGxlcnMiLCJpbmhlcml0YWJsZSIsImgiLCJzb21lIiwiZnJvbUhhbmRsZXJzIiwiSGFuZGxlciIsImFzc2lnbiIsImNvbmZpZ3VyZSIsImxvY2FsSGFuZGxlcnMiLCJsb2NhbFRhZ3MiLCJsb2NhbE1ldGFkYXRhIiwiX2NvbmZpZ3VyZVN5bmMiLCJjYWxsYmFja01hbmFnZXIiLCJlbnN1cmVIYW5kbGVyIiwidmVyYm9zZUVuYWJsZWQiLCJ2ZXJib3NlIiwidHJhY2luZ1YyRW5hYmxlZCIsImdldFRyYWNlYWJsZVJ1blRyZWUiLCJ0cmFjaW5nRW5hYmxlZCIsInByb3RvdHlwZSIsImNvbnNvbGVIYW5kbGVyIiwidHJhY2VyVjIiLCJpZCIsImZyb21NZXRob2RzIiwiVHJhY2VHcm91cCIsImdyb3VwTmFtZSIsImdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIiLCJncm91cF9uYW1lIiwiY2IiLCJjbSIsInJ1bk1hbmFnZXIiLCJsYyIsInR5cGUiLCJFcnJvciIsInN0YXJ0IiwiZW5kIiwiX2NvZXJjZVRvRGljdCIsImRlZmF1bHRLZXkiLCJ0cmFjZUFzR3JvdXAiLCJncm91cE9wdGlvbnMiLCJlbmNsb3NlZENvZGUiLCJhcmdzIiwidHJhY2VHcm91cCIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/promises.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promiseFn Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        await promiseFn();\n    } else {\n        if (typeof queue === \"undefined\") {\n            queue = createQueue();\n        }\n        void queue.add(promiseFn);\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvcHJvbWlzZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBQ2hDLElBQUlDO0FBQ0o7Ozs7Q0FJQyxHQUNELFNBQVNDO0lBQ0wsTUFBTUMsU0FBUyxLQUFzQkgsR0FBR0EsK0NBQWlCLEdBQUdBLG9DQUFTQTtJQUNyRSxPQUFPLElBQUlHLE9BQU87UUFDZEUsV0FBVztRQUNYQyxhQUFhO0lBQ2pCO0FBQ0o7QUFDQTs7OztDQUlDLEdBQ00sZUFBZUMsZ0JBQWdCQyxTQUFTLEVBQUVDLElBQUk7SUFDakQsSUFBSUEsU0FBUyxNQUFNO1FBQ2YsTUFBTUQ7SUFDVixPQUNLO1FBQ0QsSUFBSSxPQUFPUCxVQUFVLGFBQWE7WUFDOUJBLFFBQVFDO1FBQ1o7UUFDQSxLQUFLRCxNQUFNUyxHQUFHLENBQUNGO0lBQ25CO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxTQUFTRztJQUNaLE9BQU8sT0FBT1YsVUFBVSxjQUFjQSxNQUFNVyxNQUFNLEtBQUtDLFFBQVFDLE9BQU87QUFDMUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9wcm9taXNlcy5qcz9hZWY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmxldCBxdWV1ZTtcbi8qKlxuICogQ3JlYXRlcyBhIHF1ZXVlIHVzaW5nIHRoZSBwLXF1ZXVlIGxpYnJhcnkuIFRoZSBxdWV1ZSBpcyBjb25maWd1cmVkIHRvXG4gKiBhdXRvLXN0YXJ0IGFuZCBoYXMgYSBjb25jdXJyZW5jeSBvZiAxLCBtZWFuaW5nIGl0IHdpbGwgcHJvY2VzcyB0YXNrc1xuICogb25lIGF0IGEgdGltZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUXVldWUoKSB7XG4gICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgcmV0dXJuIG5ldyBQUXVldWUoe1xuICAgICAgICBhdXRvU3RhcnQ6IHRydWUsXG4gICAgICAgIGNvbmN1cnJlbmN5OiAxLFxuICAgIH0pO1xufVxuLyoqXG4gKiBDb25zdW1lIGEgcHJvbWlzZSwgZWl0aGVyIGFkZGluZyBpdCB0byB0aGUgcXVldWUgb3Igd2FpdGluZyBmb3IgaXQgdG8gcmVzb2x2ZVxuICogQHBhcmFtIHByb21pc2VGbiBQcm9taXNlIHRvIGNvbnN1bWVcbiAqIEBwYXJhbSB3YWl0IFdoZXRoZXIgdG8gd2FpdCBmb3IgdGhlIHByb21pc2UgdG8gcmVzb2x2ZSBvciByZXNvbHZlIGltbWVkaWF0ZWx5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25zdW1lQ2FsbGJhY2socHJvbWlzZUZuLCB3YWl0KSB7XG4gICAgaWYgKHdhaXQgPT09IHRydWUpIHtcbiAgICAgICAgYXdhaXQgcHJvbWlzZUZuKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIHF1ZXVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBxdWV1ZSA9IGNyZWF0ZVF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdm9pZCBxdWV1ZS5hZGQocHJvbWlzZUZuKTtcbiAgICB9XG59XG4vKipcbiAqIFdhaXRzIGZvciBhbGwgcHJvbWlzZXMgaW4gdGhlIHF1ZXVlIHRvIHJlc29sdmUuIElmIHRoZSBxdWV1ZSBpc1xuICogdW5kZWZpbmVkLCBpdCBpbW1lZGlhdGVseSByZXNvbHZlcyBhIHByb21pc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhd2FpdEFsbENhbGxiYWNrcygpIHtcbiAgICByZXR1cm4gdHlwZW9mIHF1ZXVlICE9PSBcInVuZGVmaW5lZFwiID8gcXVldWUub25JZGxlKCkgOiBQcm9taXNlLnJlc29sdmUoKTtcbn1cbiJdLCJuYW1lcyI6WyJQUXVldWVNb2QiLCJxdWV1ZSIsImNyZWF0ZVF1ZXVlIiwiUFF1ZXVlIiwiZGVmYXVsdCIsImF1dG9TdGFydCIsImNvbmN1cnJlbmN5IiwiY29uc3VtZUNhbGxiYWNrIiwicHJvbWlzZUZuIiwid2FpdCIsImFkZCIsImF3YWl0QWxsQ2FsbGJhY2tzIiwib25JZGxlIiwiUHJvbWlzZSIsInJlc29sdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/document.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/document.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n/**\n * Interface for interacting with a document.\n */ class Document {\n    constructor(fields){\n        Object.defineProperty(this, \"pageContent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // The ID field is optional at the moment.\n        // It will likely become required in a future major release after\n        // it has been adopted by enough vectorstore implementations.\n        /**\n         * An optional identifier for the document.\n         *\n         * Ideally this should be unique across the document collection and formatted\n         * as a UUID, but this will not be enforced.\n         */ Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pageContent = fields.pageContent !== undefined ? fields.pageContent.toString() : \"\";\n        this.metadata = fields.metadata ?? {};\n        this.id = fields.id;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvZG9jdW1lbnQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztDQUVDLEdBQ00sTUFBTUE7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLDBDQUEwQztRQUMxQyxpRUFBaUU7UUFDakUsNkRBQTZEO1FBQzdEOzs7OztTQUtDLEdBQ0RMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsTUFBTTtZQUM5QkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxXQUFXLEdBQ1pQLE9BQU9PLFdBQVcsS0FBS0MsWUFBWVIsT0FBT08sV0FBVyxDQUFDRSxRQUFRLEtBQUs7UUFDdkUsSUFBSSxDQUFDQyxRQUFRLEdBQUdWLE9BQU9VLFFBQVEsSUFBSSxDQUFDO1FBQ3BDLElBQUksQ0FBQ0MsRUFBRSxHQUFHWCxPQUFPVyxFQUFFO0lBQ3ZCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy9kb2N1bWVudC5qcz85NmRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZXJmYWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhZ2VDb250ZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRoZSBJRCBmaWVsZCBpcyBvcHRpb25hbCBhdCB0aGUgbW9tZW50LlxuICAgICAgICAvLyBJdCB3aWxsIGxpa2VseSBiZWNvbWUgcmVxdWlyZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZSBhZnRlclxuICAgICAgICAvLyBpdCBoYXMgYmVlbiBhZG9wdGVkIGJ5IGVub3VnaCB2ZWN0b3JzdG9yZSBpbXBsZW1lbnRhdGlvbnMuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBvcHRpb25hbCBpZGVudGlmaWVyIGZvciB0aGUgZG9jdW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIElkZWFsbHkgdGhpcyBzaG91bGQgYmUgdW5pcXVlIGFjcm9zcyB0aGUgZG9jdW1lbnQgY29sbGVjdGlvbiBhbmQgZm9ybWF0dGVkXG4gICAgICAgICAqIGFzIGEgVVVJRCwgYnV0IHRoaXMgd2lsbCBub3QgYmUgZW5mb3JjZWQuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBhZ2VDb250ZW50ID1cbiAgICAgICAgICAgIGZpZWxkcy5wYWdlQ29udGVudCAhPT0gdW5kZWZpbmVkID8gZmllbGRzLnBhZ2VDb250ZW50LnRvU3RyaW5nKCkgOiBcIlwiO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gZmllbGRzLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICB0aGlzLmlkID0gZmllbGRzLmlkO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJEb2N1bWVudCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInBhZ2VDb250ZW50IiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJtZXRhZGF0YSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/index.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/index.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/transformers.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEI7QUFDSSIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzPzA5YzYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vZG9jdW1lbnQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYW5zZm9ybWVycy5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/transformers.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/transformers.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* binding */ BaseDocumentTransformer),\n/* harmony export */   MappingDocumentTransformer: () => (/* binding */ MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/base.js\");\n\n/**\n * Abstract base class for document transformation systems.\n *\n * A document transformation system takes an array of Documents and returns an\n * array of transformed Documents. These arrays do not necessarily have to have\n * the same length.\n *\n * One example of this is a text splitter that splits a large document into\n * many smaller documents.\n */ class BaseDocumentTransformer extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"documents\",\n                \"transformers\"\n            ]\n        });\n    }\n    /**\n     * Method to invoke the document transformation. This method calls the\n     * transformDocuments method with the provided input.\n     * @param input The input documents to be transformed.\n     * @param _options Optional configuration object to customize the behavior of callbacks.\n     * @returns A Promise that resolves to the transformed documents.\n     */ invoke(input, _options) {\n        return this.transformDocuments(input);\n    }\n}\n/**\n * Class for document transformers that return exactly one transformed document\n * for each input document.\n */ class MappingDocumentTransformer extends BaseDocumentTransformer {\n    async transformDocuments(documents) {\n        const newDocuments = [];\n        for (const document of documents){\n            const transformedDocument = await this._transformDocument(document);\n            newDocuments.push(transformedDocument);\n        }\n        return newDocuments;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvdHJhbnNmb3JtZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUNoRDs7Ozs7Ozs7O0NBU0MsR0FDTSxNQUFNQyxnQ0FBZ0NELHdEQUFRQTtJQUNqREUsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2dCQUFhO2FBQWU7UUFDMUQ7SUFDSjtJQUNBOzs7Ozs7S0FNQyxHQUNEQyxPQUFPQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNGO0lBQ25DO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNRyxtQ0FBbUNiO0lBQzVDLE1BQU1ZLG1CQUFtQkUsU0FBUyxFQUFFO1FBQ2hDLE1BQU1DLGVBQWUsRUFBRTtRQUN2QixLQUFLLE1BQU1DLFlBQVlGLFVBQVc7WUFDOUIsTUFBTUcsc0JBQXNCLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ0Y7WUFDMURELGFBQWFJLElBQUksQ0FBQ0Y7UUFDdEI7UUFDQSxPQUFPRjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy90cmFuc2Zvcm1lcnMuanM/NjcxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbiBzeXN0ZW1zLlxuICpcbiAqIEEgZG9jdW1lbnQgdHJhbnNmb3JtYXRpb24gc3lzdGVtIHRha2VzIGFuIGFycmF5IG9mIERvY3VtZW50cyBhbmQgcmV0dXJucyBhblxuICogYXJyYXkgb2YgdHJhbnNmb3JtZWQgRG9jdW1lbnRzLiBUaGVzZSBhcnJheXMgZG8gbm90IG5lY2Vzc2FyaWx5IGhhdmUgdG8gaGF2ZVxuICogdGhlIHNhbWUgbGVuZ3RoLlxuICpcbiAqIE9uZSBleGFtcGxlIG9mIHRoaXMgaXMgYSB0ZXh0IHNwbGl0dGVyIHRoYXQgc3BsaXRzIGEgbGFyZ2UgZG9jdW1lbnQgaW50b1xuICogbWFueSBzbWFsbGVyIGRvY3VtZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwiZG9jdW1lbnRzXCIsIFwidHJhbnNmb3JtZXJzXCJdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gaW52b2tlIHRoZSBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbi4gVGhpcyBtZXRob2QgY2FsbHMgdGhlXG4gICAgICogdHJhbnNmb3JtRG9jdW1lbnRzIG1ldGhvZCB3aXRoIHRoZSBwcm92aWRlZCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGRvY3VtZW50cyB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcGFyYW0gX29wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gY3VzdG9taXplIHRoZSBiZWhhdmlvciBvZiBjYWxsYmFja3MuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50cy5cbiAgICAgKi9cbiAgICBpbnZva2UoaW5wdXQsIF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybURvY3VtZW50cyhpbnB1dCk7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyBmb3IgZG9jdW1lbnQgdHJhbnNmb3JtZXJzIHRoYXQgcmV0dXJuIGV4YWN0bHkgb25lIHRyYW5zZm9ybWVkIGRvY3VtZW50XG4gKiBmb3IgZWFjaCBpbnB1dCBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hcHBpbmdEb2N1bWVudFRyYW5zZm9ybWVyIGV4dGVuZHMgQmFzZURvY3VtZW50VHJhbnNmb3JtZXIge1xuICAgIGFzeW5jIHRyYW5zZm9ybURvY3VtZW50cyhkb2N1bWVudHMpIHtcbiAgICAgICAgY29uc3QgbmV3RG9jdW1lbnRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZG9jdW1lbnQgb2YgZG9jdW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZERvY3VtZW50ID0gYXdhaXQgdGhpcy5fdHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgbmV3RG9jdW1lbnRzLnB1c2godHJhbnNmb3JtZWREb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0RvY3VtZW50cztcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGUiLCJCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImludm9rZSIsImlucHV0IiwiX29wdGlvbnMiLCJ0cmFuc2Zvcm1Eb2N1bWVudHMiLCJNYXBwaW5nRG9jdW1lbnRUcmFuc2Zvcm1lciIsImRvY3VtZW50cyIsIm5ld0RvY3VtZW50cyIsImRvY3VtZW50IiwidHJhbnNmb3JtZWREb2N1bWVudCIsIl90cmFuc2Zvcm1Eb2N1bWVudCIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/map_keys.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/map_keys.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL21hcF9rZXlzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW1DO0FBQ0Q7QUFDM0IsU0FBU0UsVUFBVUMsR0FBRyxFQUFFQyxHQUFHO0lBQzlCLE9BQU9BLEtBQUssQ0FBQ0QsSUFBSSxJQUFJSCx1Q0FBU0EsQ0FBQ0c7QUFDbkM7QUFDTyxTQUFTRSxZQUFZRixHQUFHLEVBQUVDLEdBQUc7SUFDaEMsT0FBT0EsS0FBSyxDQUFDRCxJQUFJLElBQUlGLHNDQUFTQSxDQUFDRTtBQUNuQztBQUNPLFNBQVNHLFFBQVFDLE1BQU0sRUFBRUMsTUFBTSxFQUFFSixHQUFHO0lBQ3ZDLE1BQU1LLFNBQVMsQ0FBQztJQUNoQixJQUFLLE1BQU1OLE9BQU9JLE9BQVE7UUFDdEIsSUFBSUcsT0FBT0MsTUFBTSxDQUFDSixRQUFRSixNQUFNO1lBQzVCTSxNQUFNLENBQUNELE9BQU9MLEtBQUtDLEtBQUssR0FBR0csTUFBTSxDQUFDSixJQUFJO1FBQzFDO0lBQ0o7SUFDQSxPQUFPTTtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL21hcF9rZXlzLmpzPzEwNmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNuYWtlQ2FzZSBmcm9tIFwiZGVjYW1lbGl6ZVwiO1xuaW1wb3J0IGNhbWVsQ2FzZSBmcm9tIFwiY2FtZWxjYXNlXCI7XG5leHBvcnQgZnVuY3Rpb24ga2V5VG9Kc29uKGtleSwgbWFwKSB7XG4gICAgcmV0dXJuIG1hcD8uW2tleV0gfHwgc25ha2VDYXNlKGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24ga2V5RnJvbUpzb24oa2V5LCBtYXApIHtcbiAgICByZXR1cm4gbWFwPy5ba2V5XSB8fCBjYW1lbENhc2Uoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBLZXlzKGZpZWxkcywgbWFwcGVyLCBtYXApIHtcbiAgICBjb25zdCBtYXBwZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmaWVsZHMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd24oZmllbGRzLCBrZXkpKSB7XG4gICAgICAgICAgICBtYXBwZWRbbWFwcGVyKGtleSwgbWFwKV0gPSBmaWVsZHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwcGVkO1xufVxuIl0sIm5hbWVzIjpbInNuYWtlQ2FzZSIsImNhbWVsQ2FzZSIsImtleVRvSnNvbiIsImtleSIsIm1hcCIsImtleUZyb21Kc29uIiwibWFwS2V5cyIsImZpZWxkcyIsIm1hcHBlciIsIm1hcHBlZCIsIk9iamVjdCIsImhhc093biJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/serializable.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/serializable.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_kwargs = kwargs || {};\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL3NlcmlhbGl6YWJsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUQ7QUFDbkQsU0FBU0UsWUFBWUMsR0FBRztJQUNwQixPQUFPQyxNQUFNQyxPQUFPLENBQUNGLE9BQU87V0FBSUE7S0FBSSxHQUFHO1FBQUUsR0FBR0EsR0FBRztJQUFDO0FBQ3BEO0FBQ0EsU0FBU0csZUFBZUMsSUFBSSxFQUFFQyxVQUFVO0lBQ3BDLE1BQU1DLFNBQVNQLFlBQVlLO0lBQzNCLEtBQUssTUFBTSxDQUFDRyxNQUFNQyxTQUFTLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ0wsWUFBYTtRQUN2RCxNQUFNLENBQUNNLE1BQU0sR0FBR0MsYUFBYSxHQUFHTCxLQUFLTSxLQUFLLENBQUMsS0FBS0MsT0FBTztRQUN2RCw4REFBOEQ7UUFDOUQsSUFBSUMsVUFBVVQ7UUFDZCxLQUFLLE1BQU1VLFFBQVFKLGFBQWFFLE9BQU8sR0FBSTtZQUN2QyxJQUFJQyxPQUFPLENBQUNDLEtBQUssS0FBS0MsV0FBVztnQkFDN0I7WUFDSjtZQUNBRixPQUFPLENBQUNDLEtBQUssR0FBR2pCLFlBQVlnQixPQUFPLENBQUNDLEtBQUs7WUFDekNELFVBQVVBLE9BQU8sQ0FBQ0MsS0FBSztRQUMzQjtRQUNBLElBQUlELE9BQU8sQ0FBQ0osS0FBSyxLQUFLTSxXQUFXO1lBQzdCRixPQUFPLENBQUNKLEtBQUssR0FBRztnQkFDWk8sSUFBSTtnQkFDSkMsTUFBTTtnQkFDTkMsSUFBSTtvQkFBQ1o7aUJBQVM7WUFDbEI7UUFDSjtJQUNKO0lBQ0EsT0FBT0Y7QUFDWDtBQUNBOzs7Q0FHQyxHQUNNLFNBQVNlLG1CQUNoQixtRUFBbUU7QUFDbkVDLGlCQUFpQjtJQUNiLGdFQUFnRTtJQUNoRSw0RUFBNEU7SUFDNUUsTUFBTUMsY0FBY2QsT0FBT2UsY0FBYyxDQUFDRjtJQUMx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b2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvc2VyaWFsaXphYmxlLmpzPzJmYTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsga2V5VG9Kc29uLCBtYXBLZXlzIH0gZnJvbSBcIi4vbWFwX2tleXMuanNcIjtcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KG9iaikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9iaikgPyBbLi4ub2JqXSA6IHsgLi4ub2JqIH07XG59XG5mdW5jdGlvbiByZXBsYWNlU2VjcmV0cyhyb290LCBzZWNyZXRzTWFwKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc2hhbGxvd0NvcHkocm9vdCk7XG4gICAgZm9yIChjb25zdCBbcGF0aCwgc2VjcmV0SWRdIG9mIE9iamVjdC5lbnRyaWVzKHNlY3JldHNNYXApKSB7XG4gICAgICAgIGNvbnN0IFtsYXN0LCAuLi5wYXJ0c1JldmVyc2VdID0gcGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgY3VycmVudCA9IHJlc3VsdDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50W3BhcnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRbcGFydF0gPSBzaGFsbG93Q29weShjdXJyZW50W3BhcnRdKTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50W2xhc3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRbbGFzdF0gPSB7XG4gICAgICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZWNyZXRcIixcbiAgICAgICAgICAgICAgICBpZDogW3NlY3JldElkXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogR2V0IGEgdW5pcXVlIG5hbWUgZm9yIHRoZSBtb2R1bGUsIHJhdGhlciB0aGFuIHBhcmVudCBjbGFzcyBpbXBsZW1lbnRhdGlvbnMuXG4gKiBTaG91bGQgbm90IGJlIHN1YmNsYXNzZWQsIHN1YmNsYXNzIGxjX25hbWUgYWJvdmUgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldF9sY191bmlxdWVfbmFtZShcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbnNlcmlhbGl6YWJsZUNsYXNzKSB7XG4gICAgLy8gXCJzdXBlclwiIGhlcmUgd291bGQgcmVmZXIgdG8gdGhlIHBhcmVudCBjbGFzcyBvZiBTZXJpYWxpemFibGUsXG4gICAgLy8gd2hlbiB3ZSB3YW50IHRoZSBwYXJlbnQgY2xhc3Mgb2YgdGhlIG1vZHVsZSBhY3R1YWxseSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICAgIGNvbnN0IHBhcmVudENsYXNzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHNlcmlhbGl6YWJsZUNsYXNzKTtcbiAgICBjb25zdCBsY05hbWVJc1N1YmNsYXNzZWQgPSB0eXBlb2Ygc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICh0eXBlb2YgcGFyZW50Q2xhc3MubGNfbmFtZSAhPT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICAgICBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCkgIT09IHBhcmVudENsYXNzLmxjX25hbWUoKSk7XG4gICAgaWYgKGxjTmFtZUlzU3ViY2xhc3NlZCkge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6YWJsZUNsYXNzLm5hbWU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNlcmlhbGl6YWJsZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHNlcmlhbGl6YWJsZS4gT3ZlcnJpZGUgdG8gcHJvdmlkZSBhbiBhbGlhcyBvclxuICAgICAqIHRvIHByZXNlcnZlIHRoZSBzZXJpYWxpemVkIG1vZHVsZSBuYW1lIGluIG1pbmlmaWVkIGVudmlyb25tZW50cy5cbiAgICAgKlxuICAgICAqIEltcGxlbWVudGVkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBzdXBwb3J0IGxvYWRpbmcgbG9naWMuXG4gICAgICovXG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBzZXJpYWxpemVkIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUuXG4gICAgICovXG4gICAgZ2V0IGxjX2lkKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4udGhpcy5sY19uYW1lc3BhY2UsXG4gICAgICAgICAgICBnZXRfbGNfdW5pcXVlX25hbWUodGhpcy5jb25zdHJ1Y3RvciksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHNlY3JldHMsIHdoaWNoIHdpbGwgYmUgb21pdHRlZCBmcm9tIHNlcmlhbGl6YXRpb24uXG4gICAgICogS2V5cyBhcmUgcGF0aHMgdG8gdGhlIHNlY3JldCBpbiBjb25zdHJ1Y3RvciBhcmdzLCBlLmcuIFwiZm9vLmJhci5iYXpcIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBzZWNyZXQgaWRzLCB3aGljaCB3aWxsIGJlIHVzZWQgd2hlbiBkZXNlcmlhbGl6aW5nLlxuICAgICAqL1xuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiBhZGRpdGlvbmFsIGF0dHJpYnV0ZXMgdG8gbWVyZ2Ugd2l0aCBjb25zdHJ1Y3RvciBhcmdzLlxuICAgICAqIEtleXMgYXJlIHRoZSBhdHRyaWJ1dGUgbmFtZXMsIGUuZy4gXCJmb29cIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBhdHRyaWJ1dGUgdmFsdWVzLCB3aGljaCB3aWxsIGJlIHNlcmlhbGl6ZWQuXG4gICAgICogVGhlc2UgYXR0cmlidXRlcyBuZWVkIHRvIGJlIGFjY2VwdGVkIGJ5IHRoZSBjb25zdHJ1Y3RvciBhcyBhcmd1bWVudHMuXG4gICAgICovXG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGFsaWFzZXMgZm9yIGNvbnN0cnVjdG9yIGFyZ3MuXG4gICAgICogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIGFsaWFzIHRoYXQgd2lsbCByZXBsYWNlIHRoZSBrZXkgaW4gc2VyaWFsaXphdGlvbi5cbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZWcuIG1ha2UgYXJndW1lbnQgbmFtZXMgbWF0Y2ggUHl0aG9uLlxuICAgICAqL1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihrd2FyZ3MsIC4uLl9hcmdzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxjX2t3YXJncyA9IGt3YXJncyB8fCB7fTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAoIXRoaXMubGNfc2VyaWFsaXphYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT05Ob3RJbXBsZW1lbnRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICB0aGlzLmxjX2t3YXJncyBpbnN0YW5jZW9mIFNlcmlhbGl6YWJsZSB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMubGNfa3dhcmdzICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHRoaXMubGNfa3dhcmdzKSkge1xuICAgICAgICAgICAgLy8gV2UgZG8gbm90IHN1cHBvcnQgc2VyaWFsaXphdGlvbiBvZiBjbGFzc2VzIHdpdGggYXJnIG5vdCBhIFBPSk9cbiAgICAgICAgICAgIC8vIEknbSBhd2FyZSB0aGUgY2hlY2sgYWJvdmUgaXNuJ3QgYXMgc3RyaWN0IGFzIGl0IGNvdWxkIGJlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT05Ob3RJbXBsZW1lbnRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSB7fTtcbiAgICAgICAgY29uc3Qgc2VjcmV0cyA9IHt9O1xuICAgICAgICBjb25zdCBrd2FyZ3MgPSBPYmplY3Qua2V5cyh0aGlzLmxjX2t3YXJncykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgICAgICAgYWNjW2tleV0gPSBrZXkgaW4gdGhpcyA/IHRoaXNba2V5XSA6IHRoaXMubGNfa3dhcmdzW2tleV07XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGdldCBzZWNyZXRzLCBhdHRyaWJ1dGVzIGFuZCBhbGlhc2VzIGZyb20gYWxsIHN1cGVyY2xhc3Nlc1xuICAgICAgICBmb3IgKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyk7IGN1cnJlbnQ7IGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudCkpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYWxpYXNlcywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19hbGlhc2VzXCIsIHRoaXMpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VjcmV0cywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19zZWNyZXRzXCIsIHRoaXMpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oa3dhcmdzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX2F0dHJpYnV0ZXNcIiwgdGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluY2x1ZGUgYWxsIHNlY3JldHMgdXNlZCwgZXZlbiBpZiBub3QgaW4ga3dhcmdzLFxuICAgICAgICAvLyB3aWxsIGJlIHJlcGxhY2VkIHdpdGggc2VudGluZWwgdmFsdWUgaW4gcmVwbGFjZVNlY3JldHNcbiAgICAgICAgT2JqZWN0LmtleXMoc2VjcmV0cykuZm9yRWFjaCgoa2V5UGF0aCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgcmVhZCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgbGV0IHdyaXRlID0ga3dhcmdzO1xuICAgICAgICAgICAgY29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBrZXlQYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXJ0c1JldmVyc2UucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHJlYWQpIHx8IHJlYWRba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHdyaXRlKSB8fCB3cml0ZVtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWFkW2tleV0gPT09IFwib2JqZWN0XCIgJiYgcmVhZFtrZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlW2tleV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlYWRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlW2tleV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWFkID0gcmVhZFtrZXldO1xuICAgICAgICAgICAgICAgIHdyaXRlID0gd3JpdGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXN0IGluIHJlYWQgJiYgcmVhZFtsYXN0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVbbGFzdF0gPSB3cml0ZVtsYXN0XSB8fCByZWFkW2xhc3RdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJjb25zdHJ1Y3RvclwiLFxuICAgICAgICAgICAgaWQ6IHRoaXMubGNfaWQsXG4gICAgICAgICAgICBrd2FyZ3M6IG1hcEtleXMoT2JqZWN0LmtleXMoc2VjcmV0cykubGVuZ3RoID8gcmVwbGFjZVNlY3JldHMoa3dhcmdzLCBzZWNyZXRzKSA6IGt3YXJncywga2V5VG9Kc29uLCBhbGlhc2VzKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9KU09OTm90SW1wbGVtZW50ZWQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgIHR5cGU6IFwibm90X2ltcGxlbWVudGVkXCIsXG4gICAgICAgICAgICBpZDogdGhpcy5sY19pZCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsia2V5VG9Kc29uIiwibWFwS2V5cyIsInNoYWxsb3dDb3B5Iiwib2JqIiwiQXJyYXkiLCJpc0FycmF5IiwicmVwbGFjZVNlY3JldHMiLCJyb290Iiwic2VjcmV0c01hcCIsInJlc3VsdCIsInBhdGgiLCJzZWNyZXRJZCIsIk9iamVjdCIsImVudHJpZXMiLCJsYXN0IiwicGFydHNSZXZlcnNlIiwic3BsaXQiLCJyZXZlcnNlIiwiY3VycmVudCIsInBhcnQiLCJ1bmRlZmluZWQiLCJsYyIsInR5cGUiLCJpZCIsImdldF9sY191bmlxdWVfbmFtZSIsInNlcmlhbGl6YWJsZUNsYXNzIiwicGFyZW50Q2xhc3MiLCJnZXRQcm90b3R5cGVPZiIsImxjTmFtZUlzU3ViY2xhc3NlZCIsImxjX25hbWUiLCJuYW1lIiwiU2VyaWFsaXphYmxlIiwibGNfaWQiLCJsY19uYW1lc3BhY2UiLCJjb25zdHJ1Y3RvciIsImxjX3NlY3JldHMiLCJsY19hdHRyaWJ1dGVzIiwibGNfYWxpYXNlcyIsImt3YXJncyIsIl9hcmdzIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX2t3YXJncyIsInRvSlNPTiIsImxjX3NlcmlhbGl6YWJsZSIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiYWxpYXNlcyIsInNlY3JldHMiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwia2V5IiwiYXNzaWduIiwiUmVmbGVjdCIsImdldCIsImZvckVhY2giLCJrZXlQYXRoIiwicmVhZCIsIndyaXRlIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/ai.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/ai.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   isAIMessage: () => (/* binding */ isAIMessage),\n/* harmony export */   isAIMessageChunk: () => (/* binding */ isAIMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\"\n        };\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                additional_kwargs: kwargs ?? {}\n            };\n        } else {\n            initParams = fields;\n            const rawToolCalls = initParams.additional_kwargs?.tool_calls;\n            const toolCalls = initParams.tool_calls;\n            if (!(rawToolCalls == null) && rawToolCalls.length > 0 && (toolCalls === undefined || toolCalls.length === 0)) {\n                console.warn([\n                    \"New LangChain packages are available that more efficiently handle\",\n                    \"tool calling.\\n\\nPlease upgrade your packages to versions that set\",\n                    \"message tool calls. e.g., `yarn add @langchain/anthropic`,\",\n                    \"yarn add @langchain/openai`, etc.\"\n                ].join(\" \"));\n            }\n            try {\n                if (!(rawToolCalls == null) && toolCalls === undefined) {\n                    const [toolCalls, invalidToolCalls] = (0,_tool_js__WEBPACK_IMPORTED_MODULE_2__.defaultToolCallParser)(rawToolCalls);\n                    initParams.tool_calls = toolCalls ?? [];\n                    initParams.invalid_tool_calls = invalidToolCalls ?? [];\n                } else {\n                    initParams.tool_calls = initParams.tool_calls ?? [];\n                    initParams.invalid_tool_calls = initParams.invalid_tool_calls ?? [];\n                }\n            } catch (e) {\n                // Do nothing if parsing fails\n                initParams.tool_calls = [];\n                initParams.invalid_tool_calls = [];\n            }\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        /**\n         * If provided, token usage information associated with the message.\n         */ Object.defineProperty(this, \"usage_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof initParams !== \"string\") {\n            this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n            this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        }\n        this.usage_metadata = initParams.usage_metadata;\n    }\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_calls: this.tool_calls,\n            invalid_tool_calls: this.invalid_tool_calls,\n            usage_metadata: this.usage_metadata\n        };\n    }\n}\nfunction isAIMessage(x) {\n    return x._getType() === \"ai\";\n}\nfunction isAIMessageChunk(x) {\n    return x._getType() === \"ai\";\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk {\n    constructor(fields){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else if (fields.tool_call_chunks === undefined) {\n            initParams = {\n                ...fields,\n                tool_calls: fields.tool_calls ?? [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else {\n            const toolCalls = [];\n            const invalidToolCalls = [];\n            for (const toolCallChunk of fields.tool_call_chunks){\n                let parsedArgs = {};\n                try {\n                    parsedArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(toolCallChunk.args || \"{}\");\n                    if (parsedArgs === null || typeof parsedArgs !== \"object\" || Array.isArray(parsedArgs)) {\n                        throw new Error(\"Malformed tool call chunk args.\");\n                    }\n                    toolCalls.push({\n                        name: toolCallChunk.name ?? \"\",\n                        args: parsedArgs,\n                        id: toolCallChunk.id,\n                        type: \"tool_call\"\n                    });\n                } catch (e) {\n                    invalidToolCalls.push({\n                        name: toolCallChunk.name,\n                        args: toolCallChunk.args,\n                        id: toolCallChunk.id,\n                        error: \"Malformed args.\",\n                        type: \"invalid_tool_call\"\n                    });\n                }\n            }\n            initParams = {\n                ...fields,\n                tool_calls: toolCalls,\n                invalid_tool_calls: invalidToolCalls\n            };\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // Must redeclare tool call fields since there is no multiple inheritance in JS.\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tool_call_chunks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        /**\n         * If provided, token usage information associated with the message.\n         */ Object.defineProperty(this, \"usage_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_chunks = initParams.tool_call_chunks ?? this.tool_call_chunks;\n        this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n        this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        this.usage_metadata = initParams.usage_metadata;\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\",\n            tool_call_chunks: \"tool_call_chunks\"\n        };\n    }\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_calls: this.tool_calls,\n            tool_call_chunks: this.tool_call_chunks,\n            invalid_tool_calls: this.invalid_tool_calls,\n            usage_metadata: this.usage_metadata\n        };\n    }\n    concat(chunk) {\n        const combinedFields = {\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_chunks: [],\n            id: this.id ?? chunk.id\n        };\n        if (this.tool_call_chunks !== undefined || chunk.tool_call_chunks !== undefined) {\n            const rawToolCalls = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists)(this.tool_call_chunks, chunk.tool_call_chunks);\n            if (rawToolCalls !== undefined && rawToolCalls.length > 0) {\n                combinedFields.tool_call_chunks = rawToolCalls;\n            }\n        }\n        if (this.usage_metadata !== undefined || chunk.usage_metadata !== undefined) {\n            const left = this.usage_metadata ?? {\n                input_tokens: 0,\n                output_tokens: 0,\n                total_tokens: 0\n            };\n            const right = chunk.usage_metadata ?? {\n                input_tokens: 0,\n                output_tokens: 0,\n                total_tokens: 0\n            };\n            const usage_metadata = {\n                input_tokens: left.input_tokens + right.input_tokens,\n                output_tokens: left.output_tokens + right.output_tokens,\n                total_tokens: left.total_tokens + right.total_tokens\n            };\n            combinedFields.usage_metadata = usage_metadata;\n        }\n        return new AIMessageChunk(combinedFields);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9haS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9EO0FBQytDO0FBQ2hEO0FBQ25EOztDQUVDLEdBQ00sTUFBTU8sa0JBQWtCTixpREFBV0E7SUFDdEMsSUFBSU8sYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQ0gsR0FBRyxLQUFLLENBQUNBLFVBQVU7WUFDbkJDLFlBQVk7WUFDWkMsb0JBQW9CO1FBQ3hCO0lBQ0o7SUFDQUMsWUFBWUMsTUFBTSxFQUNsQixnQkFBZ0IsR0FDaEJDLE1BQU0sQ0FBRTtRQUNKLElBQUlDO1FBQ0osSUFBSSxPQUFPRixXQUFXLFVBQVU7WUFDNUJFLGFBQWE7Z0JBQ1RDLFNBQVNIO2dCQUNUSCxZQUFZLEVBQUU7Z0JBQ2RDLG9CQUFvQixFQUFFO2dCQUN0Qk0sbUJBQW1CSCxVQUFVLENBQUM7WUFDbEM7UUFDSixPQUNLO1lBQ0RDLGFBQWFGO1lBQ2IsTUFBTUssZUFBZUgsV0FBV0UsaUJBQWlCLEVBQUVQO1lBQ25ELE1BQU1TLFlBQVlKLFdBQVdMLFVBQVU7WUFDdkMsSUFBSSxDQUFFUSxDQUFBQSxnQkFBZ0IsSUFBRyxLQUNyQkEsYUFBYUUsTUFBTSxHQUFHLEtBQ3JCRCxDQUFBQSxjQUFjRSxhQUFhRixVQUFVQyxNQUFNLEtBQUssSUFBSTtnQkFDckRFLFFBQVFDLElBQUksQ0FBQztvQkFDVDtvQkFDQTtvQkFDQTtvQkFDQTtpQkFDSCxDQUFDQyxJQUFJLENBQUM7WUFDWDtZQUNBLElBQUk7Z0JBQ0EsSUFBSSxDQUFFTixDQUFBQSxnQkFBZ0IsSUFBRyxLQUFNQyxjQUFjRSxXQUFXO29CQUNwRCxNQUFNLENBQUNGLFdBQVdNLGlCQUFpQixHQUFHbEIsK0RBQXFCQSxDQUFDVztvQkFDNURILFdBQVdMLFVBQVUsR0FBR1MsYUFBYSxFQUFFO29CQUN2Q0osV0FBV0osa0JBQWtCLEdBQUdjLG9CQUFvQixFQUFFO2dCQUMxRCxPQUNLO29CQUNEVixXQUFXTCxVQUFVLEdBQUdLLFdBQVdMLFVBQVUsSUFBSSxFQUFFO29CQUNuREssV0FBV0osa0JBQWtCLEdBQUdJLFdBQVdKLGtCQUFrQixJQUFJLEVBQUU7Z0JBQ3ZFO1lBQ0osRUFDQSxPQUFPZSxHQUFHO2dCQUNOLDhCQUE4QjtnQkFDOUJYLFdBQVdMLFVBQVUsR0FBRyxFQUFFO2dCQUMxQkssV0FBV0osa0JBQWtCLEdBQUcsRUFBRTtZQUN0QztRQUNKO1FBQ0EsdUVBQXVFO1FBQ3ZFLGlFQUFpRTtRQUNqRSxLQUFLLENBQUNJO1FBQ04sOEVBQThFO1FBQzlFLG9CQUFvQjtRQUNwQlksT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEVBQUU7UUFDYjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHNCQUFzQjtZQUM5Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxFQUFFO1FBQ2I7UUFDQTs7U0FFQyxHQUNETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxPQUFPakIsZUFBZSxVQUFVO1lBQ2hDLElBQUksQ0FBQ0wsVUFBVSxHQUFHSyxXQUFXTCxVQUFVLElBQUksSUFBSSxDQUFDQSxVQUFVO1lBQzFELElBQUksQ0FBQ0Msa0JBQWtCLEdBQ25CSSxXQUFXSixrQkFBa0IsSUFBSSxJQUFJLENBQUNBLGtCQUFrQjtRQUNoRTtRQUNBLElBQUksQ0FBQ3NCLGNBQWMsR0FBR2xCLFdBQVdrQixjQUFjO0lBQ25EO0lBQ0EsT0FBT0MsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0EsSUFBSUMsbUJBQW1CO1FBQ25CLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsZ0JBQWdCO1lBQ3pCMUIsWUFBWSxJQUFJLENBQUNBLFVBQVU7WUFDM0JDLG9CQUFvQixJQUFJLENBQUNBLGtCQUFrQjtZQUMzQ3NCLGdCQUFnQixJQUFJLENBQUNBLGNBQWM7UUFDdkM7SUFDSjtBQUNKO0FBQ08sU0FBU0ksWUFBWUMsQ0FBQztJQUN6QixPQUFPQSxFQUFFSCxRQUFRLE9BQU87QUFDNUI7QUFDTyxTQUFTSSxpQkFBaUJELENBQUM7SUFDOUIsT0FBT0EsRUFBRUgsUUFBUSxPQUFPO0FBQzVCO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUssdUJBQXVCckMsc0RBQWdCQTtJQUNoRFMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLElBQUlFO1FBQ0osSUFBSSxPQUFPRixXQUFXLFVBQVU7WUFDNUJFLGFBQWE7Z0JBQ1RDLFNBQVNIO2dCQUNUSCxZQUFZLEVBQUU7Z0JBQ2RDLG9CQUFvQixFQUFFO2dCQUN0QjhCLGtCQUFrQixFQUFFO1lBQ3hCO1FBQ0osT0FDSyxJQUFJNUIsT0FBTzRCLGdCQUFnQixLQUFLcEIsV0FBVztZQUM1Q04sYUFBYTtnQkFDVCxHQUFHRixNQUFNO2dCQUNUSCxZQUFZRyxPQUFPSCxVQUFVLElBQUksRUFBRTtnQkFDbkNDLG9CQUFvQixFQUFFO2dCQUN0QjhCLGtCQUFrQixFQUFFO1lBQ3hCO1FBQ0osT0FDSztZQUNELE1BQU10QixZQUFZLEVBQUU7WUFDcEIsTUFBTU0sbUJBQW1CLEVBQUU7WUFDM0IsS0FBSyxNQUFNaUIsaUJBQWlCN0IsT0FBTzRCLGdCQUFnQixDQUFFO2dCQUNqRCxJQUFJRSxhQUFhLENBQUM7Z0JBQ2xCLElBQUk7b0JBQ0FBLGFBQWExQyxnRUFBZ0JBLENBQUN5QyxjQUFjRSxJQUFJLElBQUk7b0JBQ3BELElBQUlELGVBQWUsUUFDZixPQUFPQSxlQUFlLFlBQ3RCRSxNQUFNQyxPQUFPLENBQUNILGFBQWE7d0JBQzNCLE1BQU0sSUFBSUksTUFBTTtvQkFDcEI7b0JBQ0E1QixVQUFVNkIsSUFBSSxDQUFDO3dCQUNYQyxNQUFNUCxjQUFjTyxJQUFJLElBQUk7d0JBQzVCTCxNQUFNRDt3QkFDTk8sSUFBSVIsY0FBY1EsRUFBRTt3QkFDcEJDLE1BQU07b0JBQ1Y7Z0JBQ0osRUFDQSxPQUFPekIsR0FBRztvQkFDTkQsaUJBQWlCdUIsSUFBSSxDQUFDO3dCQUNsQkMsTUFBTVAsY0FBY08sSUFBSTt3QkFDeEJMLE1BQU1GLGNBQWNFLElBQUk7d0JBQ3hCTSxJQUFJUixjQUFjUSxFQUFFO3dCQUNwQkUsT0FBTzt3QkFDUEQsTUFBTTtvQkFDVjtnQkFDSjtZQUNKO1lBQ0FwQyxhQUFhO2dCQUNULEdBQUdGLE1BQU07Z0JBQ1RILFlBQVlTO2dCQUNaUixvQkFBb0JjO1lBQ3hCO1FBQ0o7UUFDQSx1RUFBdUU7UUFDdkUsaUVBQWlFO1FBQ2pFLEtBQUssQ0FBQ1Y7UUFDTixnRkFBZ0Y7UUFDaEYsOEVBQThFO1FBQzlFLG9CQUFvQjtRQUNwQlksT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEVBQUU7UUFDYjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHNCQUFzQjtZQUM5Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxFQUFFO1FBQ2I7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxvQkFBb0I7WUFDNUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sRUFBRTtRQUNiO1FBQ0E7O1NBRUMsR0FDREwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1MsZ0JBQWdCLEdBQ2pCMUIsV0FBVzBCLGdCQUFnQixJQUFJLElBQUksQ0FBQ0EsZ0JBQWdCO1FBQ3hELElBQUksQ0FBQy9CLFVBQVUsR0FBR0ssV0FBV0wsVUFBVSxJQUFJLElBQUksQ0FBQ0EsVUFBVTtRQUMxRCxJQUFJLENBQUNDLGtCQUFrQixHQUNuQkksV0FBV0osa0JBQWtCLElBQUksSUFBSSxDQUFDQSxrQkFBa0I7UUFDNUQsSUFBSSxDQUFDc0IsY0FBYyxHQUFHbEIsV0FBV2tCLGNBQWM7SUFDbkQ7SUFDQSxJQUFJeEIsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQ0gsR0FBRyxLQUFLLENBQUNBLFVBQVU7WUFDbkJDLFlBQVk7WUFDWkMsb0JBQW9CO1lBQ3BCOEIsa0JBQWtCO1FBQ3RCO0lBQ0o7SUFDQSxPQUFPUCxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQSxJQUFJQyxtQkFBbUI7UUFDbkIsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxnQkFBZ0I7WUFDekIxQixZQUFZLElBQUksQ0FBQ0EsVUFBVTtZQUMzQitCLGtCQUFrQixJQUFJLENBQUNBLGdCQUFnQjtZQUN2QzlCLG9CQUFvQixJQUFJLENBQUNBLGtCQUFrQjtZQUMzQ3NCLGdCQUFnQixJQUFJLENBQUNBLGNBQWM7UUFDdkM7SUFDSjtJQUNBb0IsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsTUFBTUMsaUJBQWlCO1lBQ25CdkMsU0FBU1osc0RBQVlBLENBQUMsSUFBSSxDQUFDWSxPQUFPLEVBQUVzQyxNQUFNdEMsT0FBTztZQUNqREMsbUJBQW1CWixxREFBV0EsQ0FBQyxJQUFJLENBQUNZLGlCQUFpQixFQUFFcUMsTUFBTXJDLGlCQUFpQjtZQUM5RXVDLG1CQUFtQm5ELHFEQUFXQSxDQUFDLElBQUksQ0FBQ21ELGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVmLGtCQUFrQixFQUFFO1lBQ3BCUyxJQUFJLElBQUksQ0FBQ0EsRUFBRSxJQUFJSSxNQUFNSixFQUFFO1FBQzNCO1FBQ0EsSUFBSSxJQUFJLENBQUNULGdCQUFnQixLQUFLcEIsYUFDMUJpQyxNQUFNYixnQkFBZ0IsS0FBS3BCLFdBQVc7WUFDdEMsTUFBTUgsZUFBZVoscURBQVdBLENBQUMsSUFBSSxDQUFDbUMsZ0JBQWdCLEVBQUVhLE1BQU1iLGdCQUFnQjtZQUM5RSxJQUFJdkIsaUJBQWlCRyxhQUFhSCxhQUFhRSxNQUFNLEdBQUcsR0FBRztnQkFDdkRtQyxlQUFlZCxnQkFBZ0IsR0FBR3ZCO1lBQ3RDO1FBQ0o7UUFDQSxJQUFJLElBQUksQ0FBQ2UsY0FBYyxLQUFLWixhQUN4QmlDLE1BQU1yQixjQUFjLEtBQUtaLFdBQVc7WUFDcEMsTUFBTW9DLE9BQU8sSUFBSSxDQUFDeEIsY0FBYyxJQUFJO2dCQUNoQ3lCLGNBQWM7Z0JBQ2RDLGVBQWU7Z0JBQ2ZDLGNBQWM7WUFDbEI7WUFDQSxNQUFNQyxRQUFRUCxNQUFNckIsY0FBYyxJQUFJO2dCQUNsQ3lCLGNBQWM7Z0JBQ2RDLGVBQWU7Z0JBQ2ZDLGNBQWM7WUFDbEI7WUFDQSxNQUFNM0IsaUJBQWlCO2dCQUNuQnlCLGNBQWNELEtBQUtDLFlBQVksR0FBR0csTUFBTUgsWUFBWTtnQkFDcERDLGVBQWVGLEtBQUtFLGFBQWEsR0FBR0UsTUFBTUYsYUFBYTtnQkFDdkRDLGNBQWNILEtBQUtHLFlBQVksR0FBR0MsTUFBTUQsWUFBWTtZQUN4RDtZQUNBTCxlQUFldEIsY0FBYyxHQUFHQTtRQUNwQztRQUNBLE9BQU8sSUFBSU8sZUFBZWU7SUFDOUI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYWkuanM/MmE5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVBhcnRpYWxKc29uIH0gZnJvbSBcIi4uL3V0aWxzL2pzb24uanNcIjtcbmltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCBfbWVyZ2VMaXN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0VG9vbENhbGxQYXJzZXIsIH0gZnJvbSBcIi4vdG9vbC5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIEFJIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBBSU1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIC8vIGV4Y2x1ZGUgc25ha2UgY2FzZSBjb252ZXJzaW9uIHRvIHBhc2NhbCBjYXNlXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5sY19hbGlhc2VzLFxuICAgICAgICAgICAgdG9vbF9jYWxsczogXCJ0b29sX2NhbGxzXCIsXG4gICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFwiaW52YWxpZF90b29sX2NhbGxzXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAga3dhcmdzKSB7XG4gICAgICAgIGxldCBpbml0UGFyYW1zO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoga3dhcmdzID8/IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSBmaWVsZHM7XG4gICAgICAgICAgICBjb25zdCByYXdUb29sQ2FsbHMgPSBpbml0UGFyYW1zLmFkZGl0aW9uYWxfa3dhcmdzPy50b29sX2NhbGxzO1xuICAgICAgICAgICAgY29uc3QgdG9vbENhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzO1xuICAgICAgICAgICAgaWYgKCEocmF3VG9vbENhbGxzID09IG51bGwpICYmXG4gICAgICAgICAgICAgICAgcmF3VG9vbENhbGxzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAodG9vbENhbGxzID09PSB1bmRlZmluZWQgfHwgdG9vbENhbGxzLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oW1xuICAgICAgICAgICAgICAgICAgICBcIk5ldyBMYW5nQ2hhaW4gcGFja2FnZXMgYXJlIGF2YWlsYWJsZSB0aGF0IG1vcmUgZWZmaWNpZW50bHkgaGFuZGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidG9vbCBjYWxsaW5nLlxcblxcblBsZWFzZSB1cGdyYWRlIHlvdXIgcGFja2FnZXMgdG8gdmVyc2lvbnMgdGhhdCBzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtZXNzYWdlIHRvb2wgY2FsbHMuIGUuZy4sIGB5YXJuIGFkZCBAbGFuZ2NoYWluL2FudGhyb3BpY2AsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwieWFybiBhZGQgQGxhbmdjaGFpbi9vcGVuYWlgLCBldGMuXCIsXG4gICAgICAgICAgICAgICAgXS5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghKHJhd1Rvb2xDYWxscyA9PSBudWxsKSAmJiB0b29sQ2FsbHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbdG9vbENhbGxzLCBpbnZhbGlkVG9vbENhbGxzXSA9IGRlZmF1bHRUb29sQ2FsbFBhcnNlcihyYXdUb29sQ2FsbHMpO1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSB0b29sQ2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gaW52YWxpZFRvb2xDYWxscyA/PyBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMudG9vbF9jYWxscyA9IGluaXRQYXJhbXMudG9vbF9jYWxscyA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPSBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA/PyBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgcGFyc2luZyBmYWlsc1xuICAgICAgICAgICAgICAgIGluaXRQYXJhbXMudG9vbF9jYWxscyA9IFtdO1xuICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2FkbHksIFR5cGVTY3JpcHQgb25seSBhbGxvd3Mgc3VwZXIoKSBjYWxscyBhdCByb290IGlmIHRoZSBjbGFzcyBoYXNcbiAgICAgICAgLy8gcHJvcGVydGllcyB3aXRoIGluaXRpYWxpemVycywgc28gd2UgaGF2ZSB0byBjaGVjayB0eXBlcyB0d2ljZS5cbiAgICAgICAgc3VwZXIoaW5pdFBhcmFtcyk7XG4gICAgICAgIC8vIFRoZXNlIGFyZSB0eXBlZCBhcyBvcHRpb25hbCB0byBhdm9pZCBicmVha2luZyBjaGFuZ2VzIGFuZCBhbGxvdyBmb3IgY2FzdGluZ1xuICAgICAgICAvLyBmcm9tIEJhc2VNZXNzYWdlLlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW52YWxpZF90b29sX2NhbGxzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHByb3ZpZGVkLCB0b2tlbiB1c2FnZSBpbmZvcm1hdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2UuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2FnZV9tZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGluaXRQYXJhbXMgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMudG9vbF9jYWxscyA9IGluaXRQYXJhbXMudG9vbF9jYWxscyA/PyB0aGlzLnRvb2xfY2FsbHM7XG4gICAgICAgICAgICB0aGlzLmludmFsaWRfdG9vbF9jYWxscyA9XG4gICAgICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51c2FnZV9tZXRhZGF0YSA9IGluaXRQYXJhbXMudXNhZ2VfbWV0YWRhdGE7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJBSU1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRoaXMudG9vbF9jYWxscyxcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMsXG4gICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogdGhpcy51c2FnZV9tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBSU1lc3NhZ2UoeCkge1xuICAgIHJldHVybiB4Ll9nZXRUeXBlKCkgPT09IFwiYWlcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FJTWVzc2FnZUNodW5rKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImFpXCI7XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhbiBBSSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIEFJIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgbGV0IGluaXRQYXJhbXM7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWVsZHMudG9vbF9jYWxsX2NodW5rcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBmaWVsZHMudG9vbF9jYWxscyA/PyBbXSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZFRvb2xDYWxscyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sQ2FsbENodW5rIG9mIGZpZWxkcy50b29sX2NhbGxfY2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gcGFyc2VQYXJ0aWFsSnNvbih0b29sQ2FsbENodW5rLmFyZ3MgfHwgXCJ7fVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZEFyZ3MgPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBwYXJzZWRBcmdzICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHBhcnNlZEFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdG9vbCBjYWxsIGNodW5rIGFyZ3MuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsQ2h1bmsubmFtZSA/PyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogcGFyc2VkQXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbENodW5rLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sX2NhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRUb29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbENodW5rLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiB0b29sQ2FsbENodW5rLmFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGxDaHVuay5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBcIk1hbGZvcm1lZCBhcmdzLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnZhbGlkX3Rvb2xfY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiB0b29sQ2FsbHMsXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBpbnZhbGlkVG9vbENhbGxzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTYWRseSwgVHlwZVNjcmlwdCBvbmx5IGFsbG93cyBzdXBlcigpIGNhbGxzIGF0IHJvb3QgaWYgdGhlIGNsYXNzIGhhc1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIHdpdGggaW5pdGlhbGl6ZXJzLCBzbyB3ZSBoYXZlIHRvIGNoZWNrIHR5cGVzIHR3aWNlLlxuICAgICAgICBzdXBlcihpbml0UGFyYW1zKTtcbiAgICAgICAgLy8gTXVzdCByZWRlY2xhcmUgdG9vbCBjYWxsIGZpZWxkcyBzaW5jZSB0aGVyZSBpcyBubyBtdWx0aXBsZSBpbmhlcml0YW5jZSBpbiBKUy5cbiAgICAgICAgLy8gVGhlc2UgYXJlIHR5cGVkIGFzIG9wdGlvbmFsIHRvIGF2b2lkIGJyZWFraW5nIGNoYW5nZXMgYW5kIGFsbG93IGZvciBjYXN0aW5nXG4gICAgICAgIC8vIGZyb20gQmFzZU1lc3NhZ2UuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfY2h1bmtzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHByb3ZpZGVkLCB0b2tlbiB1c2FnZSBpbmZvcm1hdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2UuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2FnZV9tZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbF9jaHVua3MgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxfY2h1bmtzID8/IHRoaXMudG9vbF9jYWxsX2NodW5rcztcbiAgICAgICAgdGhpcy50b29sX2NhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzID8/IHRoaXMudG9vbF9jYWxscztcbiAgICAgICAgdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHM7XG4gICAgICAgIHRoaXMudXNhZ2VfbWV0YWRhdGEgPSBpbml0UGFyYW1zLnVzYWdlX21ldGFkYXRhO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmxjX2FsaWFzZXMsXG4gICAgICAgICAgICB0b29sX2NhbGxzOiBcInRvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogXCJpbnZhbGlkX3Rvb2xfY2FsbHNcIixcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFwidG9vbF9jYWxsX2NodW5rc1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRoaXMudG9vbF9jYWxscyxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IHRoaXMudG9vbF9jYWxsX2NodW5rcyxcbiAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMsXG4gICAgICAgICAgICB1c2FnZV9tZXRhZGF0YTogdGhpcy51c2FnZV9tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkRmllbGRzID0ge1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnRvb2xfY2FsbF9jaHVua3MgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY2h1bmsudG9vbF9jYWxsX2NodW5rcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCByYXdUb29sQ2FsbHMgPSBfbWVyZ2VMaXN0cyh0aGlzLnRvb2xfY2FsbF9jaHVua3MsIGNodW5rLnRvb2xfY2FsbF9jaHVua3MpO1xuICAgICAgICAgICAgaWYgKHJhd1Rvb2xDYWxscyAhPT0gdW5kZWZpbmVkICYmIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29tYmluZWRGaWVsZHMudG9vbF9jYWxsX2NodW5rcyA9IHJhd1Rvb2xDYWxscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjaHVuay51c2FnZV9tZXRhZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy51c2FnZV9tZXRhZGF0YSA/PyB7XG4gICAgICAgICAgICAgICAgaW5wdXRfdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgIG91dHB1dF90b2tlbnM6IDAsXG4gICAgICAgICAgICAgICAgdG90YWxfdG9rZW5zOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gY2h1bmsudXNhZ2VfbWV0YWRhdGEgPz8ge1xuICAgICAgICAgICAgICAgIGlucHV0X3Rva2VuczogMCxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCB1c2FnZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBpbnB1dF90b2tlbnM6IGxlZnQuaW5wdXRfdG9rZW5zICsgcmlnaHQuaW5wdXRfdG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dF90b2tlbnM6IGxlZnQub3V0cHV0X3Rva2VucyArIHJpZ2h0Lm91dHB1dF90b2tlbnMsXG4gICAgICAgICAgICAgICAgdG90YWxfdG9rZW5zOiBsZWZ0LnRvdGFsX3Rva2VucyArIHJpZ2h0LnRvdGFsX3Rva2VucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb21iaW5lZEZpZWxkcy51c2FnZV9tZXRhZGF0YSA9IHVzYWdlX21ldGFkYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlQ2h1bmsoY29tYmluZWRGaWVsZHMpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwYXJzZVBhcnRpYWxKc29uIiwiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJfbWVyZ2VMaXN0cyIsImRlZmF1bHRUb29sQ2FsbFBhcnNlciIsIkFJTWVzc2FnZSIsImxjX2FsaWFzZXMiLCJ0b29sX2NhbGxzIiwiaW52YWxpZF90b29sX2NhbGxzIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJrd2FyZ3MiLCJpbml0UGFyYW1zIiwiY29udGVudCIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmF3VG9vbENhbGxzIiwidG9vbENhbGxzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29uc29sZSIsIndhcm4iLCJqb2luIiwiaW52YWxpZFRvb2xDYWxscyIsImUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidXNhZ2VfbWV0YWRhdGEiLCJsY19uYW1lIiwiX2dldFR5cGUiLCJfcHJpbnRhYmxlRmllbGRzIiwiaXNBSU1lc3NhZ2UiLCJ4IiwiaXNBSU1lc3NhZ2VDaHVuayIsIkFJTWVzc2FnZUNodW5rIiwidG9vbF9jYWxsX2NodW5rcyIsInRvb2xDYWxsQ2h1bmsiLCJwYXJzZWRBcmdzIiwiYXJncyIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwicHVzaCIsIm5hbWUiLCJpZCIsInR5cGUiLCJlcnJvciIsImNvbmNhdCIsImNodW5rIiwiY29tYmluZWRGaWVsZHMiLCJyZXNwb25zZV9tZXRhZGF0YSIsImxlZnQiLCJpbnB1dF90b2tlbnMiLCJvdXRwdXRfdG9rZW5zIiwidG90YWxfdG9rZW5zIiwicmlnaHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/ai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   _isMessageFieldWithRole: () => (/* binding */ _isMessageFieldWithRole),\n/* harmony export */   _mergeDicts: () => (/* binding */ _mergeDicts),\n/* harmony export */   _mergeLists: () => (/* binding */ _mergeLists),\n/* harmony export */   _mergeObj: () => (/* binding */ _mergeObj),\n/* harmony export */   _mergeStatus: () => (/* binding */ _mergeStatus),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* binding */ isOpenAIToolCallArray),\n/* harmony export */   mergeContent: () => (/* binding */ mergeContent)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/serializable.js\");\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return _mergeLists(firstContent, secondContent) ?? [\n            ...firstContent,\n            ...secondContent\n        ];\n    } else {\n        // Otherwise, add the second content as a new element of the list\n        return [\n            ...firstContent,\n            {\n                type: \"text\",\n                text: secondContent\n            }\n        ];\n    }\n}\n/**\n * 'Merge' two statuses. If either value passed is 'error', it will return 'error'. Else\n * it will return 'success'.\n *\n * @param {\"success\" | \"error\" | undefined} left The existing value to 'merge' with the new value.\n * @param {\"success\" | \"error\" | undefined} right The new value to 'merge' with the existing value\n * @returns {\"success\" | \"error\"} The 'merged' value.\n */ function _mergeStatus(left, right) {\n    if (left === \"error\" || right === \"error\") {\n        return \"error\";\n    }\n    return \"success\";\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction stringifyWithDepthLimit(obj, depthLimit) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function helper(obj, currentDepth) {\n        if (typeof obj !== \"object\" || obj === null || obj === undefined) {\n            return obj;\n        }\n        if (currentDepth >= depthLimit) {\n            if (Array.isArray(obj)) {\n                return \"[Array]\";\n            }\n            return \"[Object]\";\n        }\n        if (Array.isArray(obj)) {\n            return obj.map((item)=>helper(item, currentDepth + 1));\n        }\n        const result = {};\n        for (const key of Object.keys(obj)){\n            result[key] = helper(obj[key], currentDepth + 1);\n        }\n        return result;\n    }\n    return JSON.stringify(helper(obj, 0), null, 2);\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\",\n            response_metadata: \"response_metadata\"\n        };\n    }\n    /**\n     * @deprecated\n     * Use {@link BaseMessage.content} instead.\n     */ get text() {\n        return typeof this.content === \"string\" ? this.content : \"\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs,\n                response_metadata: {}\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        if (!fields.response_metadata) {\n            // eslint-disable-next-line no-param-reassign\n            fields.response_metadata = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Response metadata. For example: response headers, logprobs, token counts. */ Object.defineProperty(this, \"response_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * An optional unique identifier for the message. This should ideally be\n         * provided by the provider/model which created the message.\n         */ Object.defineProperty(this, \"id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n        this.response_metadata = fields.response_metadata;\n        this.id = fields.id;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n    static lc_name() {\n        return \"BaseMessage\";\n    }\n    // Can't be protected for silly reasons\n    get _printableFields() {\n        return {\n            id: this.id,\n            content: this.content,\n            name: this.name,\n            additional_kwargs: this.additional_kwargs,\n            response_metadata: this.response_metadata\n        };\n    }\n    // this private method is used to update the ID for the runtime\n    // value as well as in lc_kwargs for serialisation\n    _updateId(value) {\n        this.id = value;\n        // lc_attributes wouldn't work here, because jest compares the\n        // whole object\n        this.lc_kwargs.id = value;\n    }\n    get [Symbol.toStringTag]() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.constructor.lc_name();\n    }\n    // Override the default behavior of console.log\n    [Symbol.for(\"nodejs.util.inspect.custom\")](depth) {\n        if (depth === null) {\n            return this;\n        }\n        const printable = stringifyWithDepthLimit(this._printableFields, Math.max(4, depth));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return `${this.constructor.lc_name()} ${printable}`;\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\nfunction _mergeDicts(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nleft, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nright) {\n    const merged = {\n        ...left\n    };\n    for (const [key, value] of Object.entries(right)){\n        if (merged[key] == null) {\n            merged[key] = value;\n        } else if (value == null) {\n            continue;\n        } else if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) {\n            throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n        } else if (typeof merged[key] === \"string\") {\n            if (key === \"type\") {\n                continue;\n            }\n            merged[key] += value;\n        } else if (typeof merged[key] === \"object\" && !Array.isArray(merged[key])) {\n            merged[key] = _mergeDicts(merged[key], value);\n        } else if (Array.isArray(merged[key])) {\n            merged[key] = _mergeLists(merged[key], value);\n        } else if (merged[key] === value) {\n            continue;\n        } else {\n            console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n        }\n    }\n    return merged;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeLists(left, right) {\n    if (left === undefined && right === undefined) {\n        return undefined;\n    } else if (left === undefined || right === undefined) {\n        return left || right;\n    } else {\n        const merged = [\n            ...left\n        ];\n        for (const item of right){\n            if (typeof item === \"object\" && \"index\" in item && typeof item.index === \"number\") {\n                const toMerge = merged.findIndex((leftItem)=>leftItem.index === item.index);\n                if (toMerge !== -1) {\n                    merged[toMerge] = _mergeDicts(merged[toMerge], item);\n                } else {\n                    merged.push(item);\n                }\n            } else if (typeof item === \"object\" && \"text\" in item && item.text === \"\") {\n                continue;\n            } else {\n                merged.push(item);\n            }\n        }\n        return merged;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeObj(left, right) {\n    if (!left && !right) {\n        throw new Error(\"Cannot merge two undefined objects.\");\n    }\n    if (!left || !right) {\n        return left || right;\n    } else if (typeof left !== typeof right) {\n        throw new Error(`Cannot merge objects of different types.\\nLeft ${typeof left}\\nRight ${typeof right}`);\n    } else if (typeof left === \"string\" && typeof right === \"string\") {\n        return left + right;\n    } else if (Array.isArray(left) && Array.isArray(right)) {\n        return _mergeLists(left, right);\n    } else if (typeof left === \"object\" && typeof right === \"object\") {\n        return _mergeDicts(left, right);\n    } else if (left === right) {\n        return left;\n    } else {\n        throw new Error(`Can not merge objects of different types.\\nLeft ${left}\\nRight ${right}`);\n    }\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n}\nfunction _isMessageFieldWithRole(x) {\n    return typeof x.role === \"string\";\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNoRCxTQUFTQyxhQUFhQyxZQUFZLEVBQUVDLGFBQWE7SUFDcEQsK0JBQStCO0lBQy9CLElBQUksT0FBT0QsaUJBQWlCLFVBQVU7UUFDbEMsSUFBSSxPQUFPQyxrQkFBa0IsVUFBVTtZQUNuQyxPQUFPRCxlQUFlQztRQUMxQixPQUNLO1lBQ0QsT0FBTztnQkFBQztvQkFBRUMsTUFBTTtvQkFBUUMsTUFBTUg7Z0JBQWE7bUJBQU1DO2FBQWM7UUFDbkU7SUFDQSxxQkFBcUI7SUFDekIsT0FDSyxJQUFJRyxNQUFNQyxPQUFPLENBQUNKLGdCQUFnQjtRQUNuQyxPQUFRSyxZQUFZTixjQUFjQyxrQkFBa0I7ZUFDN0NEO2VBQ0FDO1NBQ047SUFDTCxPQUNLO1FBQ0QsaUVBQWlFO1FBQ2pFLE9BQU87ZUFBSUQ7WUFBYztnQkFBRUUsTUFBTTtnQkFBUUMsTUFBTUY7WUFBYztTQUFFO0lBQ25FO0FBQ0o7QUFDQTs7Ozs7OztDQU9DLEdBQ00sU0FBU00sYUFBYUMsSUFBSSxFQUFFQyxLQUFLO0lBQ3BDLElBQUlELFNBQVMsV0FBV0MsVUFBVSxTQUFTO1FBQ3ZDLE9BQU87SUFDWDtJQUNBLE9BQU87QUFDWDtBQUNBLDhEQUE4RDtBQUM5RCxTQUFTQyx3QkFBd0JDLEdBQUcsRUFBRUMsVUFBVTtJQUM1Qyw4REFBOEQ7SUFDOUQsU0FBU0MsT0FBT0YsR0FBRyxFQUFFRyxZQUFZO1FBQzdCLElBQUksT0FBT0gsUUFBUSxZQUFZQSxRQUFRLFFBQVFBLFFBQVFJLFdBQVc7WUFDOUQsT0FBT0o7UUFDWDtRQUNBLElBQUlHLGdCQUFnQkYsWUFBWTtZQUM1QixJQUFJUixNQUFNQyxPQUFPLENBQUNNLE1BQU07Z0JBQ3BCLE9BQU87WUFDWDtZQUNBLE9B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TSxJQUFJb0QsTUFBTTtJQUNwQjtJQUNBLElBQUksQ0FBQ3JELFFBQVEsQ0FBQ0MsT0FBTztRQUNqQixPQUFPRCxRQUFRQztJQUNuQixPQUNLLElBQUksT0FBT0QsU0FBUyxPQUFPQyxPQUFPO1FBQ25DLE1BQU0sSUFBSW9ELE1BQU0sQ0FBQywrQ0FBK0MsRUFBRSxPQUFPckQsS0FBSyxRQUFRLEVBQUUsT0FBT0MsTUFBTSxDQUFDO0lBQzFHLE9BQ0ssSUFBSSxPQUFPRCxTQUFTLFlBQVksT0FBT0MsVUFBVSxVQUFVO1FBQzVELE9BQVFELE9BQU9DO0lBQ25CLE9BQ0ssSUFBSUwsTUFBTUMsT0FBTyxDQUFDRyxTQUFTSixNQUFNQyxPQUFPLENBQUNJLFFBQVE7UUFDbEQsT0FBT0gsWUFBWUUsTUFBTUM7SUFDN0IsT0FDSyxJQUFJLE9BQU9ELFNBQVMsWUFBWSxPQUFPQyxVQUFVLFVBQVU7UUFDNUQsT0FBT2lELFlBQVlsRCxNQUFNQztJQUM3QixPQUNLLElBQUlELFNBQVNDLE9BQU87UUFDckIsT0FBT0Q7SUFDWCxPQUNLO1FBQ0QsTUFBTSxJQUFJcUQsTUFBTSxDQUFDLGdEQUFnRCxFQUFFckQsS0FBSyxRQUFRLEVBQUVDLE1BQU0sQ0FBQztJQUM3RjtBQUNKO0FBQ0E7Ozs7OztDQU1DLEdBQ00sTUFBTTRELHlCQUF5QjdDO0FBQ3RDO0FBQ08sU0FBUzhDLHdCQUF3QkMsQ0FBQztJQUNyQyxPQUFPLE9BQU9BLEVBQUVDLElBQUksS0FBSztBQUM3QjtBQUNPLFNBQVNDLGNBQWNDLFdBQVc7SUFDckMsT0FBTyxPQUFPQSxhQUFhbEMsYUFBYTtBQUM1QztBQUNPLFNBQVNtQyxtQkFBbUJELFdBQVc7SUFDMUMsT0FBUUQsY0FBY0MsZ0JBQ2xCLE9BQU9BLFlBQVlFLE1BQU0sS0FBSztBQUN0QyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmFzZS5qcz8xZDhiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQ29udGVudChmaXJzdENvbnRlbnQsIHNlY29uZENvbnRlbnQpIHtcbiAgICAvLyBJZiBmaXJzdCBjb250ZW50IGlzIGEgc3RyaW5nXG4gICAgaWYgKHR5cGVvZiBmaXJzdENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWNvbmRDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RDb250ZW50ICsgc2Vjb25kQ29udGVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbeyB0eXBlOiBcInRleHRcIiwgdGV4dDogZmlyc3RDb250ZW50IH0sIC4uLnNlY29uZENvbnRlbnRdO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGJvdGggYXJlIGFycmF5c1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNlY29uZENvbnRlbnQpKSB7XG4gICAgICAgIHJldHVybiAoX21lcmdlTGlzdHMoZmlyc3RDb250ZW50LCBzZWNvbmRDb250ZW50KSA/PyBbXG4gICAgICAgICAgICAuLi5maXJzdENvbnRlbnQsXG4gICAgICAgICAgICAuLi5zZWNvbmRDb250ZW50LFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgYWRkIHRoZSBzZWNvbmQgY29udGVudCBhcyBhIG5ldyBlbGVtZW50IG9mIHRoZSBsaXN0XG4gICAgICAgIHJldHVybiBbLi4uZmlyc3RDb250ZW50LCB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBzZWNvbmRDb250ZW50IH1dO1xuICAgIH1cbn1cbi8qKlxuICogJ01lcmdlJyB0d28gc3RhdHVzZXMuIElmIGVpdGhlciB2YWx1ZSBwYXNzZWQgaXMgJ2Vycm9yJywgaXQgd2lsbCByZXR1cm4gJ2Vycm9yJy4gRWxzZVxuICogaXQgd2lsbCByZXR1cm4gJ3N1Y2Nlc3MnLlxuICpcbiAqIEBwYXJhbSB7XCJzdWNjZXNzXCIgfCBcImVycm9yXCIgfCB1bmRlZmluZWR9IGxlZnQgVGhlIGV4aXN0aW5nIHZhbHVlIHRvICdtZXJnZScgd2l0aCB0aGUgbmV3IHZhbHVlLlxuICogQHBhcmFtIHtcInN1Y2Nlc3NcIiB8IFwiZXJyb3JcIiB8IHVuZGVmaW5lZH0gcmlnaHQgVGhlIG5ldyB2YWx1ZSB0byAnbWVyZ2UnIHdpdGggdGhlIGV4aXN0aW5nIHZhbHVlXG4gKiBAcmV0dXJucyB7XCJzdWNjZXNzXCIgfCBcImVycm9yXCJ9IFRoZSAnbWVyZ2VkJyB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9tZXJnZVN0YXR1cyhsZWZ0LCByaWdodCkge1xuICAgIGlmIChsZWZ0ID09PSBcImVycm9yXCIgfHwgcmlnaHQgPT09IFwiZXJyb3JcIikge1xuICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xuICAgIH1cbiAgICByZXR1cm4gXCJzdWNjZXNzXCI7XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gc3RyaW5naWZ5V2l0aERlcHRoTGltaXQob2JqLCBkZXB0aExpbWl0KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBmdW5jdGlvbiBoZWxwZXIob2JqLCBjdXJyZW50RGVwdGgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgfHwgb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50RGVwdGggPj0gZGVwdGhMaW1pdCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIltBcnJheV1cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIltPYmplY3RdXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5tYXAoKGl0ZW0pID0+IGhlbHBlcihpdGVtLCBjdXJyZW50RGVwdGggKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9iaikpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gaGVscGVyKG9ialtrZXldLCBjdXJyZW50RGVwdGggKyAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaGVscGVyKG9iaiwgMCksIG51bGwsIDIpO1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgdHlwZXMgb2YgbWVzc2FnZXMgaW4gYSBjb252ZXJzYXRpb24uIEl0IGluY2x1ZGVzXG4gKiBwcm9wZXJ0aWVzIGxpa2UgYGNvbnRlbnRgLCBgbmFtZWAsIGFuZCBgYWRkaXRpb25hbF9rd2FyZ3NgLiBJdCBhbHNvXG4gKiBpbmNsdWRlcyBtZXRob2RzIGxpa2UgYHRvRGljdCgpYCBhbmQgYF9nZXRUeXBlKClgLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2UgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IFwiYWRkaXRpb25hbF9rd2FyZ3NcIixcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBcInJlc3BvbnNlX21ldGFkYXRhXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogVXNlIHtAbGluayBCYXNlTWVzc2FnZS5jb250ZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IHRoaXMuY29udGVudCA6IFwiXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAga3dhcmdzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGt3YXJncyxcbiAgICAgICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YToge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYWRkaXRpb25hbF9rd2FyZ3MgaXMgcGFzc2VkIGludG8gc3VwZXIoKSBmb3Igc2VyaWFsaXphdGlvblxuICAgICAgICBpZiAoIWZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMuYWRkaXRpb25hbF9rd2FyZ3MgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwibWVzc2FnZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb250ZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgbWVzc2FnZSBzZW5kZXIgaW4gYSBtdWx0aS11c2VyIGNoYXQuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEFkZGl0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRkaXRpb25hbF9rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFJlc3BvbnNlIG1ldGFkYXRhLiBGb3IgZXhhbXBsZTogcmVzcG9uc2UgaGVhZGVycywgbG9ncHJvYnMsIHRva2VuIGNvdW50cy4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVzcG9uc2VfbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9wdGlvbmFsIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgbWVzc2FnZS4gVGhpcyBzaG91bGQgaWRlYWxseSBiZVxuICAgICAgICAgKiBwcm92aWRlZCBieSB0aGUgcHJvdmlkZXIvbW9kZWwgd2hpY2ggY3JlYXRlZCB0aGUgbWVzc2FnZS5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBmaWVsZHMuY29udGVudDtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsX2t3YXJncyA9IGZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncztcbiAgICAgICAgdGhpcy5yZXNwb25zZV9tZXRhZGF0YSA9IGZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YTtcbiAgICAgICAgdGhpcy5pZCA9IGZpZWxkcy5pZDtcbiAgICB9XG4gICAgdG9EaWN0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy5fZ2V0VHlwZSgpLFxuICAgICAgICAgICAgZGF0YTogdGhpcy50b0pTT04oKVxuICAgICAgICAgICAgICAgIC5rd2FyZ3MsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJCYXNlTWVzc2FnZVwiO1xuICAgIH1cbiAgICAvLyBDYW4ndCBiZSBwcm90ZWN0ZWQgZm9yIHNpbGx5IHJlYXNvbnNcbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogdGhpcy5yZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gdGhpcyBwcml2YXRlIG1ldGhvZCBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgSUQgZm9yIHRoZSBydW50aW1lXG4gICAgLy8gdmFsdWUgYXMgd2VsbCBhcyBpbiBsY19rd2FyZ3MgZm9yIHNlcmlhbGlzYXRpb25cbiAgICBfdXBkYXRlSWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pZCA9IHZhbHVlO1xuICAgICAgICAvLyBsY19hdHRyaWJ1dGVzIHdvdWxkbid0IHdvcmsgaGVyZSwgYmVjYXVzZSBqZXN0IGNvbXBhcmVzIHRoZVxuICAgICAgICAvLyB3aG9sZSBvYmplY3RcbiAgICAgICAgdGhpcy5sY19rd2FyZ3MuaWQgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5sY19uYW1lKCk7XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIGNvbnNvbGUubG9nXG4gICAgW1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKV0oZGVwdGgpIHtcbiAgICAgICAgaWYgKGRlcHRoID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmludGFibGUgPSBzdHJpbmdpZnlXaXRoRGVwdGhMaW1pdCh0aGlzLl9wcmludGFibGVGaWVsZHMsIE1hdGgubWF4KDQsIGRlcHRoKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLmxjX25hbWUoKX0gJHtwcmludGFibGV9YDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNPcGVuQUlUb29sQ2FsbEFycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgICB2YWx1ZS5ldmVyeSgodikgPT4gdHlwZW9mIHYuaW5kZXggPT09IFwibnVtYmVyXCIpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VEaWN0cyhcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5sZWZ0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5yaWdodFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbikge1xuICAgIGNvbnN0IG1lcmdlZCA9IHsgLi4ubGVmdCB9O1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJpZ2h0KSkge1xuICAgICAgICBpZiAobWVyZ2VkW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbWVyZ2VkW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gIT09IHR5cGVvZiB2YWx1ZSB8fFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkgIT09IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpZWxkWyR7a2V5fV0gYWxyZWFkeSBleGlzdHMgaW4gdGhlIG1lc3NhZ2UgY2h1bmssIGJ1dCB3aXRoIGEgZGlmZmVyZW50IHR5cGUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lcmdlZFtrZXldID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcInR5cGVcIikge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdCBtZXJnZSAndHlwZScgZmllbGRzXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRba2V5XSArPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IF9tZXJnZURpY3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gX21lcmdlTGlzdHMobWVyZ2VkW2tleV0sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXJnZWRba2V5XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBmaWVsZFske2tleX1dIGFscmVhZHkgZXhpc3RzIGluIHRoaXMgbWVzc2FnZSBjaHVuayBhbmQgdmFsdWUgaGFzIHVuc3VwcG9ydGVkIHR5cGUuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZDtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gX21lcmdlTGlzdHMobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAobGVmdCA9PT0gdW5kZWZpbmVkICYmIHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAobGVmdCA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQgfHwgcmlnaHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBbLi4ubGVmdF07XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByaWdodCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgXCJpbmRleFwiIGluIGl0ZW0gJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgaXRlbS5pbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvTWVyZ2UgPSBtZXJnZWQuZmluZEluZGV4KChsZWZ0SXRlbSkgPT4gbGVmdEl0ZW0uaW5kZXggPT09IGl0ZW0uaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0b01lcmdlICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRbdG9NZXJnZV0gPSBfbWVyZ2VEaWN0cyhtZXJnZWRbdG9NZXJnZV0sIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBcInRleHRcIiBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS50ZXh0ID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgLy8gTm8tb3AgLSBza2lwIGVtcHR5IHRleHQgYmxvY2tzXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXJnZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgIH1cbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gX21lcmdlT2JqKGxlZnQsIHJpZ2h0KSB7XG4gICAgaWYgKCFsZWZ0ICYmICFyaWdodCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgbWVyZ2UgdHdvIHVuZGVmaW5lZCBvYmplY3RzLlwiKTtcbiAgICB9XG4gICAgaWYgKCFsZWZ0IHx8ICFyaWdodCkge1xuICAgICAgICByZXR1cm4gbGVmdCB8fCByaWdodDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGxlZnQgIT09IHR5cGVvZiByaWdodCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtZXJnZSBvYmplY3RzIG9mIGRpZmZlcmVudCB0eXBlcy5cXG5MZWZ0ICR7dHlwZW9mIGxlZnR9XFxuUmlnaHQgJHt0eXBlb2YgcmlnaHR9YCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBsZWZ0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiByaWdodCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gKGxlZnQgKyByaWdodCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobGVmdCkgJiYgQXJyYXkuaXNBcnJheShyaWdodCkpIHtcbiAgICAgICAgcmV0dXJuIF9tZXJnZUxpc3RzKGxlZnQsIHJpZ2h0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGxlZnQgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJpZ2h0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBfbWVyZ2VEaWN0cyhsZWZ0LCByaWdodCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxlZnQgPT09IHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IG1lcmdlIG9iamVjdHMgb2YgZGlmZmVyZW50IHR5cGVzLlxcbkxlZnQgJHtsZWZ0fVxcblJpZ2h0ICR7cmlnaHR9YCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbiAqIG1lc3NhZ2UgY2h1bmtzLiBJdCBpbmNsdWRlcyBhIG1ldGhvZCBgX21lcmdlX2t3YXJnc19kaWN0KClgIGZvciBtZXJnaW5nXG4gKiBhZGRpdGlvbmFsIGtleXdvcmQgYXJndW1lbnRzIGZyb20gYW5vdGhlciBgQmFzZU1lc3NhZ2VDaHVua2AgaW50byB0aGlzXG4gKiBvbmUuIEl0IGFsc28gb3ZlcnJpZGVzIHRoZSBgX19hZGRfXygpYCBtZXRob2QgdG8gc3VwcG9ydCBjb25jYXRlbmF0aW9uXG4gKiBvZiBgQmFzZU1lc3NhZ2VDaHVua2AgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfaXNNZXNzYWdlRmllbGRXaXRoUm9sZSh4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4LnJvbGUgPT09IFwic3RyaW5nXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZUxpa2U/Ll9nZXRUeXBlID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlTWVzc2FnZUNodW5rKG1lc3NhZ2VMaWtlKSB7XG4gICAgcmV0dXJuIChpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSAmJlxuICAgICAgICB0eXBlb2YgbWVzc2FnZUxpa2UuY29uY2F0ID09PSBcImZ1bmN0aW9uXCIpO1xufVxuIl0sIm5hbWVzIjpbIlNlcmlhbGl6YWJsZSIsIm1lcmdlQ29udGVudCIsImZpcnN0Q29udGVudCIsInNlY29uZENvbnRlbnQiLCJ0eXBlIiwidGV4dCIsIkFycmF5IiwiaXNBcnJheSIsIl9tZXJnZUxpc3RzIiwiX21lcmdlU3RhdHVzIiwibGVmdCIsInJpZ2h0Iiwic3RyaW5naWZ5V2l0aERlcHRoTGltaXQiLCJvYmoiLCJkZXB0aExpbWl0IiwiaGVscGVyIiwiY3VycmVudERlcHRoIiwidW5kZWZpbmVkIiwibWFwIiwiaXRlbSIsInJlc3VsdCIsImtleSIsIk9iamVjdCIsImtleXMiLCJKU09OIiwic3RyaW5naWZ5IiwiQmFzZU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImNvbnRlbnQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImt3YXJncyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJuYW1lIiwiaWQiLCJ0b0RpY3QiLCJfZ2V0VHlwZSIsImRhdGEiLCJ0b0pTT04iLCJsY19uYW1lIiwiX3ByaW50YWJsZUZpZWxkcyIsIl91cGRhdGVJZCIsImxjX2t3YXJncyIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiZm9yIiwiZGVwdGgiLCJwcmludGFibGUiLCJNYXRoIiwibWF4IiwiaXNPcGVuQUlUb29sQ2FsbEFycmF5IiwiZXZlcnkiLCJ2IiwiaW5kZXgiLCJfbWVyZ2VEaWN0cyIsIm1lcmdlZCIsImVudHJpZXMiLCJFcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwidG9NZXJnZSIsImZpbmRJbmRleCIsImxlZnRJdGVtIiwicHVzaCIsIl9tZXJnZU9iaiIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJfaXNNZXNzYWdlRmllbGRXaXRoUm9sZSIsIngiLCJyb2xlIiwiaXNCYXNlTWVzc2FnZSIsIm1lc3NhZ2VMaWtlIiwiaXNCYXNlTWVzc2FnZUNodW5rIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/chat.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/chat.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            role: this.role\n        };\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            role: this.role,\n            id: this.id ?? chunk.id\n        });\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            role: this.role\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9jaGF0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLG9CQUFvQkosaURBQVdBO0lBQ3hDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQSxPQUFPQyxvQkFBb0I7UUFDdkIsT0FBT0Y7SUFDWDtJQUNBRyxZQUFZQyxNQUFNLEVBQUVDLElBQUksQ0FBRTtRQUN0QixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1AsSUFBSSxHQUFHRCxPQUFPQyxJQUFJO0lBQzNCO0lBQ0FRLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQSxPQUFPQyxXQUFXQyxPQUFPLEVBQUU7UUFDdkIsT0FBT0EsUUFBUUYsUUFBUSxPQUFPO0lBQ2xDO0lBQ0EsSUFBSUcsbUJBQW1CO1FBQ25CLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsZ0JBQWdCO1lBQ3pCWCxNQUFNLElBQUksQ0FBQ0EsSUFBSTtRQUNuQjtJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNWSx5QkFBeUJwQixzREFBZ0JBO0lBQ2xELE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUUsWUFBWUMsTUFBTSxFQUFFQyxJQUFJLENBQUU7UUFDdEIsSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsdUZBQXVGO1lBQ3ZGQSxTQUFTO2dCQUFFRSxTQUFTRjtnQkFBUUMsTUFBTUE7WUFBSztRQUMzQztRQUNBLEtBQUssQ0FBQ0Q7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNQLElBQUksR0FBR0QsT0FBT0MsSUFBSTtJQUMzQjtJQUNBUSxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FLLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsaUJBQWlCO1lBQ3hCWCxTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRWEsTUFBTWIsT0FBTztZQUNqRGMsbUJBQW1CckIscURBQVdBLENBQUMsSUFBSSxDQUFDcUIsaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CdEIscURBQVdBLENBQUMsSUFBSSxDQUFDc0IsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RWhCLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZpQixJQUFJLElBQUksQ0FBQ0EsRUFBRSxJQUFJSCxNQUFNRyxFQUFFO1FBQzNCO0lBQ0o7SUFDQSxJQUFJTixtQkFBbUI7UUFDbkIsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxnQkFBZ0I7WUFDekJYLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1FBQ25CO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY2hhdC5qcz8xZmY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYXQgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0TWVzc2FnZVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NoYXRNZXNzYWdlQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiBDaGF0TWVzc2FnZTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgc3RhdGljIGlzSW5zdGFuY2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgZ2V0IF9wcmludGFibGVGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5fcHJpbnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgcm9sZTogdGhpcy5yb2xlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgY2hhdCBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgcm9sZTogdGhpcy5yb2xlLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG4gICAgICAgICAgICByb2xlOiB0aGlzLnJvbGUsXG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiQ2hhdE1lc3NhZ2UiLCJsY19uYW1lIiwiX2NoYXRNZXNzYWdlQ2xhc3MiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsInJvbGUiLCJjb250ZW50IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9nZXRUeXBlIiwiaXNJbnN0YW5jZSIsIm1lc3NhZ2UiLCJfcHJpbnRhYmxlRmllbGRzIiwiQ2hhdE1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/function.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/function.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            name: this.name ?? \"\",\n            id: this.id ?? chunk.id\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9mdW5jdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSx3QkFBd0JKLGlEQUFXQTtJQUM1QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxJQUFJLENBQUU7UUFDRixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtJQUNWO0lBQ0FHLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDZCQUE2QlYsc0RBQWdCQTtJQUN0RCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FLLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixxQkFBcUI7WUFDNUJGLFNBQVNQLHNEQUFZQSxDQUFDLElBQUksQ0FBQ08sT0FBTyxFQUFFSSxNQUFNSixPQUFPO1lBQ2pESyxtQkFBbUJYLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1csaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CWixxREFBV0EsQ0FBQyxJQUFJLENBQUNZLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVQLE1BQU0sSUFBSSxDQUFDQSxJQUFJLElBQUk7WUFDbkJRLElBQUksSUFBSSxDQUFDQSxFQUFFLElBQUlILE1BQU1HLEVBQUU7UUFDM0I7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9mdW5jdGlvbi5qcz9hNjE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGZ1bmN0aW9uIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBGdW5jdGlvbk1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkZ1bmN0aW9uTWVzc2FnZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIG5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIG5hbWU6IG5hbWUgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGZ1bmN0aW9uIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWRcbiAqIHdpdGggb3RoZXIgZnVuY3Rpb24gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBGdW5jdGlvbk1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSA/PyBcIlwiLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgPz8gY2h1bmsuaWQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIkZ1bmN0aW9uTWVzc2FnZSIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIm5hbWUiLCJjb250ZW50IiwiX2dldFR5cGUiLCJGdW5jdGlvbk1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/function.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/human.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/human.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            id: this.id ?? chunk.id\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9odW1hbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSxxQkFBcUJKLGlEQUFXQTtJQUN6QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDBCQUEwQk4sc0RBQWdCQTtJQUNuRCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixrQkFBa0I7WUFDekJHLFNBQVNSLHNEQUFZQSxDQUFDLElBQUksQ0FBQ1EsT0FBTyxFQUFFRCxNQUFNQyxPQUFPO1lBQ2pEQyxtQkFBbUJSLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1EsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RUMsbUJBQW1CVCxxREFBV0EsQ0FBQyxJQUFJLENBQUNTLGlCQUFpQixFQUFFSCxNQUFNRyxpQkFBaUI7WUFDOUVDLElBQUksSUFBSSxDQUFDQSxFQUFFLElBQUlKLE1BQU1JLEVBQUU7UUFDM0I7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9odW1hbi5qcz8yNGU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBIdW1hbk1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZVwiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGh1bWFuIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuICogb3RoZXIgaHVtYW4gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBIdW1hbk1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJIdW1hbk1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8/IGNodW5rLmlkLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJIdW1hbk1lc3NhZ2UiLCJsY19uYW1lIiwiX2dldFR5cGUiLCJIdW1hbk1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiY29udGVudCIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/human.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/system.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/system.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            id: this.id ?? chunk.id\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9zeXN0ZW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUksc0JBQXNCSixpREFBV0E7SUFDMUMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQywyQkFBMkJOLHNEQUFnQkE7SUFDcEQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FFLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsbUJBQW1CO1lBQzFCRyxTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRUQsTUFBTUMsT0FBTztZQUNqREMsbUJBQW1CUixxREFBV0EsQ0FBQyxJQUFJLENBQUNRLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVDLG1CQUFtQlQscURBQVdBLENBQUMsSUFBSSxDQUFDUyxpQkFBaUIsRUFBRUgsTUFBTUcsaUJBQWlCO1lBQzlFQyxJQUFJLElBQUksQ0FBQ0EsRUFBRSxJQUFJSixNQUFNSSxFQUFFO1FBQzNCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvc3lzdGVtLmpzPzg0OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgc3lzdGVtIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHN5c3RlbSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIHN5c3RlbSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8/IGNodW5rLmlkLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJTeXN0ZW1NZXNzYWdlIiwibGNfbmFtZSIsIl9nZXRUeXBlIiwiU3lzdGVtTWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJjb250ZW50IiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/system.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/tool.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/tool.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   defaultToolCallParser: () => (/* binding */ defaultToolCallParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        /**\n         * Status of the tool invocation.\n         * @version 0.2.19\n         */ Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Artifact of the Tool execution which is not meant to be sent to the model.\n         *\n         * Should only be specified if it is different from the message content, e.g. if only\n         * a subset of the full tool output is being passed as message content but the full\n         * output is needed in other parts of the code.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"artifact\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n        this.artifact = fields.artifact;\n        this.status = fields.status;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_call_id: this.tool_call_id,\n            artifact: this.artifact\n        };\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Status of the tool invocation.\n         * @version 0.2.19\n         */ Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /**\n         * Artifact of the Tool execution which is not meant to be sent to the model.\n         *\n         * Should only be specified if it is different from the message content, e.g. if only\n         * a subset of the full tool output is being passed as message content but the full\n         * output is needed in other parts of the code.\n         */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"artifact\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n        this.artifact = fields.artifact;\n        this.status = fields.status;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            artifact: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeObj)(this.artifact, chunk.artifact),\n            tool_call_id: this.tool_call_id,\n            id: this.id ?? chunk.id,\n            status: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeStatus)(this.status, chunk.status)\n        });\n    }\n    get _printableFields() {\n        return {\n            ...super._printableFields,\n            tool_call_id: this.tool_call_id,\n            artifact: this.artifact\n        };\n    }\n}\nfunction defaultToolCallParser(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCalls) {\n    const toolCalls = [];\n    const invalidToolCalls = [];\n    for (const toolCall of rawToolCalls){\n        if (!toolCall.function) {\n            continue;\n        } else {\n            const functionName = toolCall.function.name;\n            try {\n                const functionArgs = JSON.parse(toolCall.function.arguments);\n                const parsed = {\n                    name: functionName || \"\",\n                    args: functionArgs || {},\n                    id: toolCall.id\n                };\n                toolCalls.push(parsed);\n            } catch (error) {\n                invalidToolCalls.push({\n                    name: functionName,\n                    args: toolCall.function.arguments,\n                    id: toolCall.id,\n                    error: \"Malformed args.\"\n                });\n            }\n        }\n    }\n    return [\n        toolCalls,\n        invalidToolCalls\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy90b29sLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0c7QUFDL0c7O0NBRUMsR0FDTSxNQUFNTSxvQkFBb0JOLGlEQUFXQTtJQUN4QyxPQUFPTyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQUVDLGNBQWM7UUFBZTtJQUMxQztJQUNBQyxZQUFZQyxNQUFNLEVBQUVGLFlBQVksRUFBRUcsSUFBSSxDQUFFO1FBQ3BDLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLHVGQUF1RjtZQUN2RkEsU0FBUztnQkFBRUUsU0FBU0Y7Z0JBQVFDO2dCQUFNSCxjQUFjQTtZQUFhO1FBQ2pFO1FBQ0EsS0FBSyxDQUFDRTtRQUNOOzs7U0FHQyxHQUNERyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0E7Ozs7OztTQU1DLEdBQ0QsOERBQThEO1FBQzlETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1YsWUFBWSxHQUFHRSxPQUFPRixZQUFZO1FBQ3ZDLElBQUksQ0FBQ1csUUFBUSxHQUFHVCxPQUFPUyxRQUFRO1FBQy9CLElBQUksQ0FBQ0MsTUFBTSxHQUFHVixPQUFPVSxNQUFNO0lBQy9CO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7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TSxNQUFNUixTQUFTQyxRQUFRLENBQUNLLFNBQVM7b0JBQ2pDWCxJQUFJSyxTQUFTTCxFQUFFO29CQUNmZSxPQUFPO2dCQUNYO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsT0FBTztRQUFDWjtRQUFXQztLQUFpQjtBQUN4QyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdG9vbC5qcz9lZWRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCBfbWVyZ2VPYmosIF9tZXJnZVN0YXR1cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSB0b29sIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVG9vbE1lc3NhZ2VcIjtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIC8vIGV4Y2x1ZGUgc25ha2UgY2FzZSBjb252ZXJzaW9uIHRvIHBhc2NhbCBjYXNlXG4gICAgICAgIHJldHVybiB7IHRvb2xfY2FsbF9pZDogXCJ0b29sX2NhbGxfaWRcIiB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIHRvb2xfY2FsbF9pZCwgbmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgbmFtZSwgdG9vbF9jYWxsX2lkOiB0b29sX2NhbGxfaWQgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RhdHVzIG9mIHRoZSB0b29sIGludm9jYXRpb24uXG4gICAgICAgICAqIEB2ZXJzaW9uIDAuMi4xOVxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhdHVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbF9pZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXJ0aWZhY3Qgb2YgdGhlIFRvb2wgZXhlY3V0aW9uIHdoaWNoIGlzIG5vdCBtZWFudCB0byBiZSBzZW50IHRvIHRoZSBtb2RlbC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2hvdWxkIG9ubHkgYmUgc3BlY2lmaWVkIGlmIGl0IGlzIGRpZmZlcmVudCBmcm9tIHRoZSBtZXNzYWdlIGNvbnRlbnQsIGUuZy4gaWYgb25seVxuICAgICAgICAgKiBhIHN1YnNldCBvZiB0aGUgZnVsbCB0b29sIG91dHB1dCBpcyBiZWluZyBwYXNzZWQgYXMgbWVzc2FnZSBjb250ZW50IGJ1dCB0aGUgZnVsbFxuICAgICAgICAgKiBvdXRwdXQgaXMgbmVlZGVkIGluIG90aGVyIHBhcnRzIG9mIHRoZSBjb2RlLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJ0aWZhY3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfaWQgPSBmaWVsZHMudG9vbF9jYWxsX2lkO1xuICAgICAgICB0aGlzLmFydGlmYWN0ID0gZmllbGRzLmFydGlmYWN0O1xuICAgICAgICB0aGlzLnN0YXR1cyA9IGZpZWxkcy5zdGF0dXM7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJ0b29sXCI7XG4gICAgfVxuICAgIGdldCBfcHJpbnRhYmxlRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuX3ByaW50YWJsZUZpZWxkcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdGhpcy50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICBhcnRpZmFjdDogdGhpcy5hcnRpZmFjdCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHRvb2wgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZFxuICogd2l0aCBvdGhlciB0b29sIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXR1cyBvZiB0aGUgdG9vbCBpbnZvY2F0aW9uLlxuICAgICAgICAgKiBAdmVyc2lvbiAwLjIuMTlcbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXR1c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXJ0aWZhY3Qgb2YgdGhlIFRvb2wgZXhlY3V0aW9uIHdoaWNoIGlzIG5vdCBtZWFudCB0byBiZSBzZW50IHRvIHRoZSBtb2RlbC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2hvdWxkIG9ubHkgYmUgc3BlY2lmaWVkIGlmIGl0IGlzIGRpZmZlcmVudCBmcm9tIHRoZSBtZXNzYWdlIGNvbnRlbnQsIGUuZy4gaWYgb25seVxuICAgICAgICAgKiBhIHN1YnNldCBvZiB0aGUgZnVsbCB0b29sIG91dHB1dCBpcyBiZWluZyBwYXNzZWQgYXMgbWVzc2FnZSBjb250ZW50IGJ1dCB0aGUgZnVsbFxuICAgICAgICAgKiBvdXRwdXQgaXMgbmVlZGVkIGluIG90aGVyIHBhcnRzIG9mIHRoZSBjb2RlLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJ0aWZhY3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfaWQgPSBmaWVsZHMudG9vbF9jYWxsX2lkO1xuICAgICAgICB0aGlzLmFydGlmYWN0ID0gZmllbGRzLmFydGlmYWN0O1xuICAgICAgICB0aGlzLnN0YXR1cyA9IGZpZWxkcy5zdGF0dXM7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJUb29sTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIGFydGlmYWN0OiBfbWVyZ2VPYmoodGhpcy5hcnRpZmFjdCwgY2h1bmsuYXJ0aWZhY3QpLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0aGlzLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8/IGNodW5rLmlkLFxuICAgICAgICAgICAgc3RhdHVzOiBfbWVyZ2VTdGF0dXModGhpcy5zdGF0dXMsIGNodW5rLnN0YXR1cyksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgX3ByaW50YWJsZUZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLl9wcmludGFibGVGaWVsZHMsXG4gICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHRoaXMudG9vbF9jYWxsX2lkLFxuICAgICAgICAgICAgYXJ0aWZhY3Q6IHRoaXMuYXJ0aWZhY3QsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRUb29sQ2FsbFBhcnNlcihcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5yYXdUb29sQ2FsbHMpIHtcbiAgICBjb25zdCB0b29sQ2FsbHMgPSBbXTtcbiAgICBjb25zdCBpbnZhbGlkVG9vbENhbGxzID0gW107XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiByYXdUb29sQ2FsbHMpIHtcbiAgICAgICAgaWYgKCF0b29sQ2FsbC5mdW5jdGlvbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvbk5hbWUgPSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbkFyZ3MgPSBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgYXJnczogZnVuY3Rpb25BcmdzIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaChwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaW52YWxpZFRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFwiTWFsZm9ybWVkIGFyZ3MuXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFt0b29sQ2FsbHMsIGludmFsaWRUb29sQ2FsbHNdO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiX21lcmdlT2JqIiwiX21lcmdlU3RhdHVzIiwiVG9vbE1lc3NhZ2UiLCJsY19uYW1lIiwibGNfYWxpYXNlcyIsInRvb2xfY2FsbF9pZCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwibmFtZSIsImNvbnRlbnQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXJ0aWZhY3QiLCJzdGF0dXMiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJtZXNzYWdlIiwiX3ByaW50YWJsZUZpZWxkcyIsIlRvb2xNZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJpZCIsImRlZmF1bHRUb29sQ2FsbFBhcnNlciIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsImludmFsaWRUb29sQ2FsbHMiLCJ0b29sQ2FsbCIsImZ1bmN0aW9uIiwiZnVuY3Rpb25OYW1lIiwiZnVuY3Rpb25BcmdzIiwiSlNPTiIsInBhcnNlIiwiYXJndW1lbnRzIiwicGFyc2VkIiwiYXJncyIsInB1c2giLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/utils.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/utils.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* binding */ convertToChunk),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../tools/utils.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tools/utils.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n\nfunction _coerceToolCall(toolCall) {\n    if ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_0__._isToolCall)(toolCall)) {\n        return toolCall;\n    } else if (typeof toolCall.id === \"string\" && toolCall.type === \"function\" && typeof toolCall.function === \"object\" && toolCall.function !== null && \"arguments\" in toolCall.function && typeof toolCall.function.arguments === \"string\" && \"name\" in toolCall.function && typeof toolCall.function.name === \"string\") {\n        // Handle OpenAI tool call format\n        return {\n            id: toolCall.id,\n            args: JSON.parse(toolCall.function.arguments),\n            name: toolCall.function.name,\n            type: \"tool_call\"\n        };\n    } else {\n        // TODO: Throw an error?\n        return toolCall;\n    }\n}\nfunction _constructMessageFromParams(params) {\n    const { type, ...rest } = params;\n    if (type === \"human\" || type === \"user\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessage(rest);\n    } else if (type === \"ai\" || type === \"assistant\") {\n        const { tool_calls: rawToolCalls, ...other } = rest;\n        if (!Array.isArray(rawToolCalls)) {\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(rest);\n        }\n        const tool_calls = rawToolCalls.map(_coerceToolCall);\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage({\n            ...other,\n            tool_calls\n        });\n    } else if (type === \"system\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessage(rest);\n    } else if (type === \"tool\" && \"tool_call_id\" in rest) {\n        return new _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessage({\n            ...rest,\n            content: rest.content,\n            tool_call_id: rest.tool_call_id,\n            name: rest.name\n        });\n    } else {\n        throw new Error(`Unable to coerce message from array: only human, AI, or system message coercion is currently supported.`);\n    }\n}\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessage(messageLike);\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_2__.isBaseMessage)(messageLike)) {\n        return messageLike;\n    }\n    if (Array.isArray(messageLike)) {\n        const [type, content] = messageLike;\n        return _constructMessageFromParams({\n            type,\n            content\n        });\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_2__._isMessageFieldWithRole)(messageLike)) {\n        const { role: type, ...rest } = messageLike;\n        return _constructMessageFromParams({\n            ...rest,\n            type\n        });\n    } else {\n        return _constructMessageFromParams(messageLike);\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        const readableContent = typeof m.content === \"string\" ? m.content : JSON.stringify(m.content, null, 2);\n        string_messages.push(`${role}: ${nameStr}${readableContent}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(storedMessage.data);\n        case \"system\":\n            return new _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessage(storedMessage.data);\n        case \"generic\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\nfunction convertToChunk(message) {\n    const type = message._getType();\n    if (type === \"human\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _human_js__WEBPACK_IMPORTED_MODULE_5__.HumanMessageChunk({\n            ...message\n        });\n    } else if (type === \"ai\") {\n        let aiChunkFields = {\n            ...message\n        };\n        if (\"tool_calls\" in aiChunkFields) {\n            aiChunkFields = {\n                ...aiChunkFields,\n                tool_call_chunks: aiChunkFields.tool_calls?.map((tc)=>({\n                        ...tc,\n                        type: \"tool_call_chunk\",\n                        index: undefined,\n                        args: JSON.stringify(tc.args)\n                    }))\n            };\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_1__.AIMessageChunk({\n            ...aiChunkFields\n        });\n    } else if (type === \"system\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _system_js__WEBPACK_IMPORTED_MODULE_6__.SystemMessageChunk({\n            ...message\n        });\n    } else if (type === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _function_js__WEBPACK_IMPORTED_MODULE_4__.FunctionMessageChunk({\n            ...message\n        });\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    } else if (_chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessage.isInstance(message)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _chat_js__WEBPACK_IMPORTED_MODULE_3__.ChatMessageChunk({\n            ...message\n        });\n    } else {\n        throw new Error(\"Unknown message type.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNJO0FBQ2dCO0FBQ1Q7QUFDWTtBQUNWO0FBQ0c7QUFDdkI7QUFDekMsU0FBU2MsZ0JBQWdCQyxRQUFRO0lBQzdCLElBQUlmLDREQUFXQSxDQUFDZSxXQUFXO1FBQ3ZCLE9BQU9BO0lBQ1gsT0FDSyxJQUFJLE9BQU9BLFNBQVNDLEVBQUUsS0FBSyxZQUM1QkQsU0FBU0UsSUFBSSxLQUFLLGNBQ2xCLE9BQU9GLFNBQVNHLFFBQVEsS0FBSyxZQUM3QkgsU0FBU0csUUFBUSxLQUFLLFFBQ3RCLGVBQWVILFNBQVNHLFFBQVEsSUFDaEMsT0FBT0gsU0FBU0csUUFBUSxDQUFDQyxTQUFTLEtBQUssWUFDdkMsVUFBVUosU0FBU0csUUFBUSxJQUMzQixPQUFPSCxTQUFTRyxRQUFRLENBQUNFLElBQUksS0FBSyxVQUFVO1FBQzVDLGlDQUFpQztRQUNqQyxPQUFPO1lBQ0hKLElBQUlELFNBQVNDLEVBQUU7WUFDZkssTUFBTUMsS0FBS0MsS0FBSyxDQUFDUixTQUFTRyxRQUFRLENBQUNDLFNBQVM7WUFDNUNDLE1BQU1MLFNBQVNHLFFBQVEsQ0FBQ0UsSUFBSTtZQUM1QkgsTUFBTTtRQUNWO0lBQ0osT0FDSztRQUNELHdCQUF3QjtRQUN4QixPQUFPRjtJQUNYO0FBQ0o7QUFDQSxTQUFTUyw0QkFBNEJDLE1BQU07SUFDdkMsTUFBTSxFQUFFUixJQUFJLEVBQUUsR0FBR1MsTUFBTSxHQUFHRDtJQUMxQixJQUFJUixTQUFTLFdBQVdBLFNBQVMsUUFBUTtRQUNyQyxPQUFPLElBQUlSLG1EQUFZQSxDQUFDaUI7SUFDNUIsT0FDSyxJQUFJVCxTQUFTLFFBQVFBLFNBQVMsYUFBYTtRQUM1QyxNQUFNLEVBQUVVLFlBQVlDLFlBQVksRUFBRSxHQUFH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QyxtRUFBbUU7UUFDbkUsT0FBTyxJQUFJOUMsc0RBQWdCQSxDQUFDO1lBQUUsR0FBRzhDLE9BQU87UUFBQztJQUM3QyxPQUNLO1FBQ0QsTUFBTSxJQUFJakIsTUFBTTtJQUNwQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy91dGlscy5qcz9jNWU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9pc1Rvb2xDYWxsIH0gZnJvbSBcIi4uL3Rvb2xzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2UsIEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vYWkuanNcIjtcbmltcG9ydCB7IGlzQmFzZU1lc3NhZ2UsIF9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBDaGF0TWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL2NoYXQuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uTWVzc2FnZSwgRnVuY3Rpb25NZXNzYWdlQ2h1bmssIH0gZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IEh1bWFuTWVzc2FnZSwgSHVtYW5NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9odW1hbi5qc1wiO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZSwgU3lzdGVtTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vc3lzdGVtLmpzXCI7XG5pbXBvcnQgeyBUb29sTWVzc2FnZSwgfSBmcm9tIFwiLi90b29sLmpzXCI7XG5mdW5jdGlvbiBfY29lcmNlVG9vbENhbGwodG9vbENhbGwpIHtcbiAgICBpZiAoX2lzVG9vbENhbGwodG9vbENhbGwpKSB7XG4gICAgICAgIHJldHVybiB0b29sQ2FsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHRvb2xDYWxsLmlkID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHRvb2xDYWxsLnR5cGUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0eXBlb2YgdG9vbENhbGwuZnVuY3Rpb24gPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdG9vbENhbGwuZnVuY3Rpb24gIT09IG51bGwgJiZcbiAgICAgICAgXCJhcmd1bWVudHNcIiBpbiB0b29sQ2FsbC5mdW5jdGlvbiAmJlxuICAgICAgICB0eXBlb2YgdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIFwibmFtZVwiIGluIHRvb2xDYWxsLmZ1bmN0aW9uICYmXG4gICAgICAgIHR5cGVvZiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIC8vIEhhbmRsZSBPcGVuQUkgdG9vbCBjYWxsIGZvcm1hdFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgYXJnczogSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpLFxuICAgICAgICAgICAgbmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbF9jYWxsXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBUT0RPOiBUaHJvdyBhbiBlcnJvcj9cbiAgICAgICAgcmV0dXJuIHRvb2xDYWxsO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyhwYXJhbXMpIHtcbiAgICBjb25zdCB7IHR5cGUsIC4uLnJlc3QgfSA9IHBhcmFtcztcbiAgICBpZiAodHlwZSA9PT0gXCJodW1hblwiIHx8IHR5cGUgPT09IFwidXNlclwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKHJlc3QpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImFpXCIgfHwgdHlwZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICBjb25zdCB7IHRvb2xfY2FsbHM6IHJhd1Rvb2xDYWxscywgLi4ub3RoZXIgfSA9IHJlc3Q7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyYXdUb29sQ2FsbHMpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZShyZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29sX2NhbGxzID0gcmF3VG9vbENhbGxzLm1hcChfY29lcmNlVG9vbENhbGwpO1xuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZSh7IC4uLm90aGVyLCB0b29sX2NhbGxzIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShyZXN0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJ0b29sXCIgJiYgXCJ0b29sX2NhbGxfaWRcIiBpbiByZXN0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVG9vbE1lc3NhZ2Uoe1xuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHJlc3QuY29udGVudCxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogcmVzdC50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICBuYW1lOiByZXN0Lm5hbWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gY29lcmNlIG1lc3NhZ2UgZnJvbSBhcnJheTogb25seSBodW1hbiwgQUksIG9yIHN5c3RlbSBtZXNzYWdlIGNvZXJjaW9uIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQuYCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKG1lc3NhZ2VMaWtlKSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlTGlrZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShtZXNzYWdlTGlrZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlTGlrZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZUxpa2UpKSB7XG4gICAgICAgIGNvbnN0IFt0eXBlLCBjb250ZW50XSA9IG1lc3NhZ2VMaWtlO1xuICAgICAgICByZXR1cm4gX2NvbnN0cnVjdE1lc3NhZ2VGcm9tUGFyYW1zKHsgdHlwZSwgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoX2lzTWVzc2FnZUZpZWxkV2l0aFJvbGUobWVzc2FnZUxpa2UpKSB7XG4gICAgICAgIGNvbnN0IHsgcm9sZTogdHlwZSwgLi4ucmVzdCB9ID0gbWVzc2FnZUxpa2U7XG4gICAgICAgIHJldHVybiBfY29uc3RydWN0TWVzc2FnZUZyb21QYXJhbXMoeyAuLi5yZXN0LCB0eXBlIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyhtZXNzYWdlTGlrZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgbWVtb3J5IGNsYXNzZXMgdG8gZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gKiBvZiB0aGUgY2hhdCBtZXNzYWdlIGhpc3RvcnksIGJhc2VkIG9uIHRoZSBtZXNzYWdlIGNvbnRlbnQgYW5kIHJvbGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZXMsIGh1bWFuUHJlZml4ID0gXCJIdW1hblwiLCBhaVByZWZpeCA9IFwiQUlcIikge1xuICAgIGNvbnN0IHN0cmluZ19tZXNzYWdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgbSBvZiBtZXNzYWdlcykge1xuICAgICAgICBsZXQgcm9sZTtcbiAgICAgICAgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgICAgICByb2xlID0gaHVtYW5QcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBhaVByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIlN5c3RlbVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJGdW5jdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIlRvb2xcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiKSB7XG4gICAgICAgICAgICByb2xlID0gbS5yb2xlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5zdXBwb3J0ZWQgbWVzc2FnZSB0eXBlOiAke20uX2dldFR5cGUoKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lU3RyID0gbS5uYW1lID8gYCR7bS5uYW1lfSwgYCA6IFwiXCI7XG4gICAgICAgIGNvbnN0IHJlYWRhYmxlQ29udGVudCA9IHR5cGVvZiBtLmNvbnRlbnQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gbS5jb250ZW50XG4gICAgICAgICAgICA6IEpTT04uc3RyaW5naWZ5KG0uY29udGVudCwgbnVsbCwgMik7XG4gICAgICAgIHN0cmluZ19tZXNzYWdlcy5wdXNoKGAke3JvbGV9OiAke25hbWVTdHJ9JHtyZWFkYWJsZUNvbnRlbnR9YCk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdfbWVzc2FnZXMuam9pbihcIlxcblwiKTtcbn1cbi8qKlxuICogTWFwcyBtZXNzYWdlcyBmcm9tIGFuIG9sZGVyIGZvcm1hdCAoVjEpIHRvIHRoZSBjdXJyZW50IGBTdG9yZWRNZXNzYWdlYFxuICogZm9ybWF0LiBJZiB0aGUgbWVzc2FnZSBpcyBhbHJlYWR5IGluIHRoZSBgU3RvcmVkTWVzc2FnZWAgZm9ybWF0LCBpdCBpc1xuICogcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgaXQgdHJhbnNmb3JtcyB0aGUgVjEgbWVzc2FnZSBpbnRvIGFcbiAqIGBTdG9yZWRNZXNzYWdlYC4gVGhpcyBmdW5jdGlvbiBpcyBpbXBvcnRhbnQgZm9yIG1haW50YWluaW5nXG4gKiBjb21wYXRpYmlsaXR5IHdpdGggb2xkZXIgbWVzc2FnZSBmb3JtYXRzLlxuICovXG5mdW5jdGlvbiBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIG1hcHBlciB3aGVuIHdlIGRlcHJlY2F0ZSB0aGUgb2xkIG1lc3NhZ2UgZm9ybWF0LlxuICAgIGlmIChtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHYxTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB2MU1lc3NhZ2UudHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiB2MU1lc3NhZ2UudGV4dCxcbiAgICAgICAgICAgICAgICByb2xlOiB2MU1lc3NhZ2Uucm9sZSxcbiAgICAgICAgICAgICAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc3Qgc3RvcmVkTWVzc2FnZSA9IG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZShtZXNzYWdlKTtcbiAgICBzd2l0Y2ggKHN0b3JlZE1lc3NhZ2UudHlwZSkge1xuICAgICAgICBjYXNlIFwiaHVtYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJhaVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcInN5c3RlbVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOYW1lIG11c3QgYmUgZGVmaW5lZCBmb3IgZnVuY3Rpb24gbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS50b29sX2NhbGxfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvb2wgY2FsbCBJRCBtdXN0IGJlIGRlZmluZWQgZm9yIHRvb2wgbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJnZW5lcmljXCI6IHtcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEucm9sZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUm9sZSBtdXN0IGJlIGRlZmluZWQgZm9yIGNoYXQgbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVuZXhwZWN0ZWQgdHlwZTogJHtzdG9yZWRNZXNzYWdlLnR5cGV9YCk7XG4gICAgfVxufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGFycmF5IG9mIGBTdG9yZWRNZXNzYWdlYCBpbnN0YW5jZXMgaW50byBhbiBhcnJheSBvZlxuICogYEJhc2VNZXNzYWdlYCBpbnN0YW5jZXMuIEl0IHVzZXMgdGhlIGBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2VgXG4gKiBmdW5jdGlvbiB0byBlbnN1cmUgYWxsIG1lc3NhZ2VzIGFyZSBpbiB0aGUgYFN0b3JlZE1lc3NhZ2VgIGZvcm1hdCwgdGhlblxuICogY3JlYXRlcyBuZXcgaW5zdGFuY2VzIG9mIHRoZSBhcHByb3ByaWF0ZSBgQmFzZU1lc3NhZ2VgIHN1YmNsYXNzIGJhc2VkXG4gKiBvbiB0aGUgdHlwZSBvZiBlYWNoIG1lc3NhZ2UuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBwcmVwYXJlIHN0b3JlZFxuICogbWVzc2FnZXMgZm9yIHVzZSBpbiBhIGNoYXQgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBhcnJheSBvZiBgQmFzZU1lc3NhZ2VgIGluc3RhbmNlcyBpbnRvIGFuIGFycmF5IG9mXG4gKiBgU3RvcmVkTWVzc2FnZWAgaW5zdGFuY2VzLiBJdCBkb2VzIHRoaXMgYnkgY2FsbGluZyB0aGUgYHRvRGljdGAgbWV0aG9kXG4gKiBvbiBlYWNoIGBCYXNlTWVzc2FnZWAsIHdoaWNoIHJldHVybnMgYSBgU3RvcmVkTWVzc2FnZWAuIFRoaXMgZnVuY3Rpb25cbiAqIGlzIHVzZWQgdG8gcHJlcGFyZSBjaGF0IG1lc3NhZ2VzIGZvciBzdG9yYWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcyhtZXNzYWdlcykge1xuICAgIHJldHVybiBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IG1lc3NhZ2UudG9EaWN0KCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb0NodW5rKG1lc3NhZ2UpIHtcbiAgICBjb25zdCB0eXBlID0gbWVzc2FnZS5fZ2V0VHlwZSgpO1xuICAgIGlmICh0eXBlID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJhaVwiKSB7XG4gICAgICAgIGxldCBhaUNodW5rRmllbGRzID0ge1xuICAgICAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwidG9vbF9jYWxsc1wiIGluIGFpQ2h1bmtGaWVsZHMpIHtcbiAgICAgICAgICAgIGFpQ2h1bmtGaWVsZHMgPSB7XG4gICAgICAgICAgICAgICAgLi4uYWlDaHVua0ZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBhaUNodW5rRmllbGRzLnRvb2xfY2FsbHM/Lm1hcCgodGMpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRjLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfY2FsbF9jaHVua1wiLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBKU09OLnN0cmluZ2lmeSh0Yy5hcmdzKSxcbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2VDaHVuayh7IC4uLmFpQ2h1bmtGaWVsZHMgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgfVxuICAgIGVsc2UgaWYgKENoYXRNZXNzYWdlLmlzSW5zdGFuY2UobWVzc2FnZSkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBtZXNzYWdlIHR5cGUuXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJfaXNUb29sQ2FsbCIsIkFJTWVzc2FnZSIsIkFJTWVzc2FnZUNodW5rIiwiaXNCYXNlTWVzc2FnZSIsIl9pc01lc3NhZ2VGaWVsZFdpdGhSb2xlIiwiQ2hhdE1lc3NhZ2UiLCJDaGF0TWVzc2FnZUNodW5rIiwiRnVuY3Rpb25NZXNzYWdlIiwiRnVuY3Rpb25NZXNzYWdlQ2h1bmsiLCJIdW1hbk1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2VDaHVuayIsIlN5c3RlbU1lc3NhZ2UiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJUb29sTWVzc2FnZSIsIl9jb2VyY2VUb29sQ2FsbCIsInRvb2xDYWxsIiwiaWQiLCJ0eXBlIiwiZnVuY3Rpb24iLCJhcmd1bWVudHMiLCJuYW1lIiwiYXJncyIsIkpTT04iLCJwYXJzZSIsIl9jb25zdHJ1Y3RNZXNzYWdlRnJvbVBhcmFtcyIsInBhcmFtcyIsInJlc3QiLCJ0b29sX2NhbGxzIiwicmF3VG9vbENhbGxzIiwib3RoZXIiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJjb250ZW50IiwidG9vbF9jYWxsX2lkIiwiRXJyb3IiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsIm1lc3NhZ2VMaWtlIiwicm9sZSIsImdldEJ1ZmZlclN0cmluZyIsIm1lc3NhZ2VzIiwiaHVtYW5QcmVmaXgiLCJhaVByZWZpeCIsInN0cmluZ19tZXNzYWdlcyIsIm0iLCJfZ2V0VHlwZSIsIm5hbWVTdHIiLCJyZWFkYWJsZUNvbnRlbnQiLCJzdHJpbmdpZnkiLCJwdXNoIiwiam9pbiIsIm1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZSIsIm1lc3NhZ2UiLCJkYXRhIiwidW5kZWZpbmVkIiwidjFNZXNzYWdlIiwidGV4dCIsIm1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlIiwic3RvcmVkTWVzc2FnZSIsIm1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMiLCJtYXBDaGF0TWVzc2FnZXNUb1N0b3JlZE1lc3NhZ2VzIiwidG9EaWN0IiwiY29udmVydFRvQ2h1bmsiLCJhaUNodW5rRmllbGRzIiwidG9vbF9jYWxsX2NodW5rcyIsInRjIiwiaW5kZXgiLCJpc0luc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/outputs.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/outputs.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* binding */ ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* binding */ GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* binding */ RUN_KEY)\n/* harmony export */ });\nconst RUN_KEY = \"__run\";\n/**\n * Chunk of a single generation. Used for streaming.\n */ class GenerationChunk {\n    constructor(fields){\n        Object.defineProperty(this, \"text\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"generationInfo\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.text = fields.text;\n        this.generationInfo = fields.generationInfo;\n    }\n    concat(chunk) {\n        return new GenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            }\n        });\n    }\n}\nclass ChatGenerationChunk extends GenerationChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"message\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.message = fields.message;\n    }\n    concat(chunk) {\n        return new ChatGenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            },\n            message: this.message.concat(chunk.message)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLFVBQVUsUUFBUTtBQUMvQjs7Q0FFQyxHQUNNLE1BQU1DO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSw4REFBOEQ7UUFDOURMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLElBQUksR0FBR1AsT0FBT08sSUFBSTtRQUN2QixJQUFJLENBQUNDLGNBQWMsR0FBR1IsT0FBT1EsY0FBYztJQUMvQztJQUNBQyxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlaLGdCQUFnQjtZQUN2QlMsTUFBTSxJQUFJLENBQUNBLElBQUksR0FBR0csTUFBTUgsSUFBSTtZQUM1QkMsZ0JBQWdCO2dCQUNaLEdBQUcsSUFBSSxDQUFDQSxjQUFjO2dCQUN0QixHQUFHRSxNQUFNRixjQUFjO1lBQzNCO1FBQ0o7SUFDSjtBQUNKO0FBQ08sTUFBTUcsNEJBQTRCYjtJQUNyQ0MsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNNLE9BQU8sR0FBR1osT0FBT1ksT0FBTztJQUNqQztJQUNBSCxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlDLG9CQUFvQjtZQUMzQkosTUFBTSxJQUFJLENBQUNBLElBQUksR0FBR0csTUFBTUgsSUFBSTtZQUM1QkMsZ0JBQWdCO2dCQUNaLEdBQUcsSUFBSSxDQUFDQSxjQUFjO2dCQUN0QixHQUFHRSxNQUFNRixjQUFjO1lBQzNCO1lBQ0FJLFNBQVMsSUFBSSxDQUFDQSxPQUFPLENBQUNILE1BQU0sQ0FBQ0MsTUFBTUUsT0FBTztRQUM5QztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dHMuanM/MzU0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUlVOX0tFWSA9IFwiX19ydW5cIjtcbi8qKlxuICogQ2h1bmsgb2YgYSBzaW5nbGUgZ2VuZXJhdGlvbi4gVXNlZCBmb3Igc3RyZWFtaW5nLlxuICovXG5leHBvcnQgY2xhc3MgR2VuZXJhdGlvbkNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZW5lcmF0aW9uSW5mb1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRleHQgPSBmaWVsZHMudGV4dDtcbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uSW5mbyA9IGZpZWxkcy5nZW5lcmF0aW9uSW5mbztcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCArIGNodW5rLnRleHQsXG4gICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2hhdEdlbmVyYXRpb25DaHVuayBleHRlbmRzIEdlbmVyYXRpb25DaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZmllbGRzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0ICsgY2h1bmsudGV4dCxcbiAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAuLi5jaHVuay5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UuY29uY2F0KGNodW5rLm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUlVOX0tFWSIsIkdlbmVyYXRpb25DaHVuayIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRleHQiLCJnZW5lcmF0aW9uSW5mbyIsImNvbmNhdCIsImNodW5rIiwiQ2hhdEdlbmVyYXRpb25DaHVuayIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/base.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/base.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableToolLike: () => (/* binding */ RunnableToolLike),\n/* harmony export */   RunnableTraceable: () => (/* binding */ RunnableTraceable),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable),\n/* harmony export */   convertRunnableToTool: () => (/* binding */ convertRunnableToTool)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(rsc)/./node_modules/langsmith/singletons/traceable.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tracers/event_stream.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/event_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _utils_signal_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/signal.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/signal.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph.js\");\n/* harmony import */ var _wrappers_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./wrappers.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/wrappers.js\");\n/* harmony import */ var _iter_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./iter.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/iter.js\");\n/* harmony import */ var _tools_utils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tools/utils.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tools/utils.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_4__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param kwargs\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        const fallbacks = Array.isArray(fields) ? fields : fields.fallbacks;\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options) && options.length !== length) {\n            throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n        }\n        if (Array.isArray(options)) {\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig);\n        }\n        if (length > 1 && !Array.isArray(options) && options.runId) {\n            console.warn(\"Provided runId will be used only for the first element of the batch.\");\n            const subsequent = Object.fromEntries(Object.entries(options).filter(([key])=>key !== \"runId\"));\n            return Array.from({\n                length\n            }, (_, i)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(i === 0 ? options : subsequent));\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_8__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this._streamIterator(input, config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        let runnableConfig;\n        if (options === undefined) {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        } else {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)({\n                callbacks: options.callbacks,\n                tags: options.tags,\n                metadata: options.metadata,\n                runName: options.runName,\n                configurable: options.configurable,\n                recursionLimit: options.recursionLimit,\n                maxConcurrency: options.maxConcurrency,\n                runId: options.runId,\n                timeout: options.timeout,\n                signal: options.signal\n            });\n        }\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        delete callOptions.runId;\n        delete callOptions.timeout;\n        delete callOptions.signal;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        delete config.runId;\n        let output;\n        try {\n            const promise = func.call(this, input, config, runManager);\n            output = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), optionsList[i].runId, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName());\n            delete optionsList[i].runId;\n            return handleStartRes;\n        }));\n        let outputs;\n        try {\n            const promise = func.call(this, inputs, optionsList, runManagers, batchOptions);\n            outputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, optionsList?.[0]?.signal);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalInput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalInput, chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, config.runId, config.runType, undefined, undefined, config.runName ?? this.getName()), options?.signal, config);\n            delete config.runId;\n            runManager = pipe.setup;\n            const streamEventsHandler = runManager?.handlers.find(_tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__.isStreamEventsHandler);\n            let iterator = pipe.output;\n            if (streamEventsHandler !== undefined && runManager !== undefined) {\n                iterator = streamEventsHandler.tapOutputIterable(runManager.runId, iterator);\n            }\n            const streamLogHandler = runManager?.handlers.find(_tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.isLogStreamHandler);\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = streamLogHandler.tapOutputIterable(runManager.runId, iterator);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    getGraph(_) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_12__.Graph();\n        // TODO: Add input schema for runnables\n        const inputNode = graph.addNode({\n            name: `${this.getName()}Input`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_16__.z.any()\n        });\n        const runnableNode = graph.addNode(this);\n        // TODO: Add output schemas for runnables\n        const outputNode = graph.addNode({\n            name: `${this.getName()}Output`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_16__.z.any()\n        });\n        graph.addEdge(inputNode, runnableNode);\n        graph.addEdge(runnableNode, outputNode);\n        return graph;\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.addHandler(logStreamCallbackHandler, true);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    streamEvents(input, options, streamOptions) {\n        let stream;\n        if (options.version === \"v1\") {\n            stream = this._streamEventsV1(input, options, streamOptions);\n        } else if (options.version === \"v2\") {\n            stream = this._streamEventsV2(input, options, streamOptions);\n        } else {\n            throw new Error(`Only versions \"v1\" and \"v2\" of the schema are currently supported.`);\n        }\n        if (options.encoding === \"text/event-stream\") {\n            return (0,_wrappers_js__WEBPACK_IMPORTED_MODULE_13__.convertToHttpEventStream)(stream);\n        } else {\n            return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(stream);\n        }\n    }\n    async *_streamEventsV2(input, options, streamOptions) {\n        const eventStreamer = new _tracers_event_stream_js__WEBPACK_IMPORTED_MODULE_3__.EventStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const runId = config.runId ?? (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n        config.runId = runId;\n        const callbacks = config.callbacks;\n        if (callbacks === undefined) {\n            config.callbacks = [\n                eventStreamer\n            ];\n        } else if (Array.isArray(callbacks)) {\n            config.callbacks = callbacks.concat(eventStreamer);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.addHandler(eventStreamer, true);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        // Call the runnable in streaming mode,\n        // add each chunk to the output stream\n        const outerThis = this;\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await outerThis.stream(input, config);\n                const tappedStream = eventStreamer.tapOutputIterable(runId, runnableStream);\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                for await (const _ of tappedStream){\n                // Just iterate so that the callback handler picks up events\n                }\n            } finally{\n                await eventStreamer.finish();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        let firstEventSent = false;\n        let firstEventRunId;\n        try {\n            for await (const event of eventStreamer){\n                // This is a work-around an issue where the inputs into the\n                // chain are not available until the entire input is consumed.\n                // As a temporary solution, we'll modify the input to be the input\n                // that was passed into the chain.\n                if (!firstEventSent) {\n                    event.data.input = input;\n                    firstEventSent = true;\n                    firstEventRunId = event.run_id;\n                    yield event;\n                    continue;\n                }\n                if (event.run_id === firstEventRunId && event.event.endsWith(\"_end\")) {\n                    // If it's the end event corresponding to the root runnable\n                    // we dont include the input in the event since it's guaranteed\n                    // to be included in the first event.\n                    if (event.data?.input) {\n                        delete event.data.input;\n                    }\n                }\n                yield event;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    async *_streamEventsV1(input, options, streamOptions) {\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_10__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_10__.isRunnableInterface)(thing);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n    /**\n     * Convert a runnable to a tool. Return a new instance of `RunnableToolLike`\n     * which contains the runnable, name, description and schema.\n     *\n     * @template {T extends RunInput = RunInput} RunInput - The input type of the runnable. Should be the same as the `RunInput` type of the runnable.\n     *\n     * @param fields\n     * @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n     * @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n     * @param {z.ZodType<T>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n     * @returns {RunnableToolLike<z.ZodType<T>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n     */ asTool(fields) {\n        return convertRunnableToTool(this, fields);\n    }\n}\n/**\n * A runnable that delegates calls to another runnable with a set of kwargs.\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound.withRetry(fields),\n            kwargs: this.kwargs,\n            config: this.config\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(individualOption), this.kwargs))) : await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    async *transform(generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), this.kwargs));\n    }\n    streamEvents(input, options, streamOptions) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const outerThis = this;\n        const generator = async function*() {\n            yield* outerThis.bound.streamEvents(input, {\n                ...await outerThis._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options), outerThis.kwargs),\n                version: options.version\n            }, streamOptions);\n        };\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(generator());\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_9__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke, inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            onFailedAttempt: (error)=>this.onFailedAttempt(error, input),\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            firstException.input = remainingInputs[i];\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onFailedAttempt: (error)=>this.onFailedAttempt(error, error.input),\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({})]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                const promise = step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n                nextStepInput = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            if (options?.signal?.aborted) {\n                throw new Error(\"Aborted\");\n            }\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                const promise = step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(`seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n                nextStepInputs = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, configList[0]?.signal);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherOptions, {\n                callbacks: runManager?.getChild(`seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                options?.signal?.throwIfAborted();\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    getGraph(config) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_12__.Graph();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let currentLastNode = null;\n        this.steps.forEach((step, index)=>{\n            const stepGraph = step.getGraph(config);\n            if (index !== 0) {\n                stepGraph.trimFirstNode();\n            }\n            if (index !== this.steps.length - 1) {\n                stepGraph.trimLastNode();\n            }\n            graph.extend(stepGraph);\n            const stepFirstNode = stepGraph.firstNode();\n            if (!stepFirstNode) {\n                throw new Error(`Runnable ${step} has no first node`);\n            }\n            if (currentLastNode) {\n                graph.addEdge(currentLastNode, stepFirstNode);\n            }\n            currentLastNode = stepGraph.lastNode();\n        });\n        return graph;\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], name) {\n        return new RunnableSequence({\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1]),\n            name\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            const promises = Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            });\n            await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(Promise.all(promises), options?.signal);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const promise = Promise.race(tasks.values());\n            const { key, result, gen } = await (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, options?.signal);\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that wraps a traced LangSmith function.\n */ class RunnableTraceable extends Runnable {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (!(0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(fields.func)) {\n            throw new Error(\"RunnableTraceable requires a function that is wrapped in traceable higher-order function\");\n        }\n        this.func = fields.func;\n    }\n    async invoke(input, options) {\n        const [config] = this._getOptionsList(options ?? {}, 1);\n        const callbacks = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config);\n        const promise = this.func((0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks\n        }), input);\n        return (0,_utils_signal_js__WEBPACK_IMPORTED_MODULE_6__.raceWithSignal)(promise, config?.signal);\n    }\n    async *_streamIterator(input, options) {\n        const [config] = this._getOptionsList(options ?? {}, 1);\n        const result = await this.invoke(input, options);\n        if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(result)) {\n            for await (const item of result){\n                config?.signal?.throwIfAborted();\n                yield item;\n            }\n            return;\n        }\n        if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterator)(result)) {\n            while(true){\n                config?.signal?.throwIfAborted();\n                const state = result.next();\n                if (state.done) break;\n                yield state.value;\n            }\n            return;\n        }\n        yield result;\n    }\n    static from(func) {\n        return new RunnableTraceable({\n            func\n        });\n    }\n}\nfunction assertNonTraceableFunction(func) {\n    if ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(func)) {\n        throw new Error(\"RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.\");\n    }\n}\n/**\n * A runnable that runs a callable.\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        if ((0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_1__.isTraceableFunction)(fields.func)) {\n            // eslint-disable-next-line no-constructor-return\n            return RunnableTraceable.from(fields.func);\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        assertNonTraceableFunction(fields.func);\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig(childConfig, async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(output)) {\n                        let finalOutput;\n                        for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, output)){\n                            config?.signal?.throwIfAborted();\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterableIterator)(output)) {\n                        let finalOutput;\n                        for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeIteratorInContext)(childConfig, output)){\n                            config?.signal?.throwIfAborted();\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                // Make a best effort to gather, for any type that supports concat.\n                                try {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = chunk;\n                                }\n                            }\n                        }\n                        output = finalOutput;\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke, input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(config, {\n            callbacks: runManager?.getChild(),\n            recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_RECURSION_LIMIT) - 1\n        });\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_11__.AsyncLocalStorageProviderSingleton.runWithConfig(childConfig, async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, childConfig);\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isAsyncIterable)(output)) {\n            for await (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeAsyncIterableInContext)(childConfig, output)){\n                config?.signal?.throwIfAborted();\n                yield chunk;\n            }\n        } else if ((0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.isIterableIterator)(output)) {\n            for (const chunk of (0,_iter_js__WEBPACK_IMPORTED_MODULE_14__.consumeIteratorInContext)(childConfig, output)){\n                config?.signal?.throwIfAborted();\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n * External APIs (e.g., APIs for a language model) may at times experience\n * degraded performance or even downtime.\n *\n * In these cases, it can be useful to have a fallback Runnable that can be\n * used in place of the original Runnable (e.g., fallback to another LLM provider).\n *\n * Fallbacks can be defined at the level of a single Runnable, or at the level\n * of a chain of Runnables. Fallbacks are tried in order until one succeeds or\n * all fail.\n *\n * While you can instantiate a `RunnableWithFallbacks` directly, it is usually\n * more convenient to use the `withFallbacks` method on an existing Runnable.\n *\n * When streaming, fallbacks will only be called on failures during the initial\n * stream creation. Errors that occur after a stream starts will not fallback\n * to the next Runnable.\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherConfigFields } = config;\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherConfigFields?.runName);\n        let firstError;\n        for (const runnable of this.runnables()){\n            config?.signal?.throwIfAborted();\n            try {\n                const output = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherConfigFields, {\n                    callbacks: runManager?.getChild()\n                }));\n                await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                return output;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (firstError === undefined) {\n            throw new Error(\"No error stored at end of fallback.\");\n        }\n        await runManager?.handleChainError(firstError);\n        throw firstError;\n    }\n    async *_streamIterator(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherConfigFields } = config;\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherConfigFields?.runName);\n        let firstError;\n        let stream;\n        for (const runnable of this.runnables()){\n            config?.signal?.throwIfAborted();\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(otherConfigFields, {\n                callbacks: runManager?.getChild()\n            });\n            try {\n                stream = await runnable.stream(input, childConfig);\n                break;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (stream === undefined) {\n            const error = firstError ?? new Error(\"No error stored at end of fallback.\");\n            await runManager?.handleChainError(error);\n            throw error;\n        }\n        let output;\n        try {\n            for await (const chunk of stream){\n                yield chunk;\n                try {\n                    output = output === undefined ? output : (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.concat)(output, chunk);\n                } catch (e) {\n                    output = undefined;\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.getCallbackManagerForConfig)(config)));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            configList[0].signal?.throwIfAborted();\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_7__.ensureConfig)(options);\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.AsyncGeneratorWithSetup({\n            generator: this.transform(generator(), config),\n            config\n        });\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_5__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableToolLike extends RunnableBinding {\n    constructor(fields){\n        const sequence = RunnableSequence.from([\n            RunnableLambda.from(async (input)=>{\n                let toolInput;\n                if ((0,_tools_utils_js__WEBPACK_IMPORTED_MODULE_15__._isToolCall)(input)) {\n                    try {\n                        toolInput = await this.schema.parseAsync(input.args);\n                    } catch (e) {\n                        throw new _tools_utils_js__WEBPACK_IMPORTED_MODULE_15__.ToolInputParsingException(`Received tool input did not match expected schema`, JSON.stringify(input.args));\n                    }\n                } else {\n                    toolInput = input;\n                }\n                return toolInput;\n            }).withConfig({\n                runName: `${fields.name}:parse_input`\n            }),\n            fields.bound\n        ]).withConfig({\n            runName: fields.name\n        });\n        super({\n            bound: sequence,\n            config: fields.config ?? {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.schema = fields.schema;\n    }\n    static lc_name() {\n        return \"RunnableToolLike\";\n    }\n}\n/**\n * Given a runnable and a Zod schema, convert the runnable to a tool.\n *\n * @template RunInput The input type for the runnable.\n * @template RunOutput The output type for the runnable.\n *\n * @param {Runnable<RunInput, RunOutput>} runnable The runnable to convert to a tool.\n * @param fields\n * @param {string | undefined} [fields.name] The name of the tool. If not provided, it will default to the name of the runnable.\n * @param {string | undefined} [fields.description] The description of the tool. Falls back to the description on the Zod schema if not provided, or undefined if neither are provided.\n * @param {z.ZodType<RunInput>} [fields.schema] The Zod schema for the input of the tool. Infers the Zod type from the input type of the runnable.\n * @returns {RunnableToolLike<z.ZodType<RunInput>, RunOutput>} An instance of `RunnableToolLike` which is a runnable that can be used as a tool.\n */ function convertRunnableToTool(runnable, fields) {\n    const name = fields.name ?? runnable.getName();\n    const description = fields.description ?? fields.schema?.description;\n    if (fields.schema.constructor === zod__WEBPACK_IMPORTED_MODULE_16__.z.ZodString) {\n        return new RunnableToolLike({\n            name,\n            description,\n            schema: zod__WEBPACK_IMPORTED_MODULE_16__.z.object({\n                input: zod__WEBPACK_IMPORTED_MODULE_16__.z.string()\n            }).transform((input)=>input.input),\n            bound: runnable\n        });\n    }\n    return new RunnableToolLike({\n        name,\n        description,\n        schema: fields.schema,\n        bound: runnable\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0s7QUFDTztBQUNrQztBQUN3QztBQUNkO0FBQ3pDO0FBQ3FFO0FBQ3hFO0FBQ3lFO0FBQ3RFO0FBQ1c7QUFDQztBQUNTO0FBQ3pDO0FBQ3NCO0FBQzZFO0FBQzNEO0FBQzNFLDhEQUE4RDtBQUN2RCxTQUFTcUMsY0FBY0MsS0FBSyxFQUFFQyxVQUFVO0lBQzNDLE9BQU9ELFNBQ0gsQ0FBQ0UsTUFBTUMsT0FBTyxDQUFDSCxVQUNmLHVEQUF1RDtJQUN2RCxDQUFFQSxDQUFBQSxpQkFBaUJJLElBQUcsS0FDdEIsT0FBT0osVUFBVSxXQUNmQSxRQUNBO1FBQUUsQ0FBQ0MsV0FBVyxFQUFFRDtJQUFNO0FBQ2hDO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUssaUJBQWlCaEMsK0RBQVlBO0lBQ3RDaUMsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO1FBQ1g7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBYSxRQUFRQyxNQUFNLEVBQUU7UUFDWixNQUFNQyxPQUNOLDhEQUE4RDtRQUM5RCxJQUFJLENBQUNBLElBQUksSUFBSSxJQUFJLENBQUNULFdBQVcsQ0FBQ1UsT0FBTyxNQUFNLElBQUksQ0FBQ1YsV0FBVyxDQUFDUyxJQUFJO1FBQ2hFLE9BQU9ELFNBQVMsQ0FBQyxFQUFFQyxLQUFLLEVBQUVELE9BQU8sQ0FBQyxHQUFH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YzlSLE9BQU84UixXQUFXLElBQUk5UixPQUFPK0YsTUFBTSxFQUFFK0w7SUFDekQsSUFBSTlSLE9BQU8rRixNQUFNLENBQUNsSCxXQUFXLEtBQUs1QyxtQ0FBQ0EsQ0FBQzhWLFNBQVMsRUFBRTtRQUMzQyxPQUFPLElBQUlSLGlCQUFpQjtZQUN4QmpTO1lBQ0F3UztZQUNBL0wsUUFBUTlKLG1DQUFDQSxDQUNKK1YsTUFBTSxDQUFDO2dCQUNSL1AsT0FBT2hHLG1DQUFDQSxDQUFDZ1csTUFBTTtZQUNuQixHQUNLaEwsU0FBUyxDQUFDLENBQUNoRixRQUFVQSxNQUFNQSxLQUFLO1lBQ3JDdEMsT0FBT2E7UUFDWDtJQUNKO0lBQ0EsT0FBTyxJQUFJK1EsaUJBQWlCO1FBQ3hCalM7UUFDQXdTO1FBQ0EvTCxRQUFRL0YsT0FBTytGLE1BQU07UUFDckJwRyxPQUFPYTtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9iYXNlLmpzPzYwMDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBpc1RyYWNlYWJsZUZ1bmN0aW9uLCB9IGZyb20gXCJsYW5nc21pdGgvc2luZ2xldG9ucy90cmFjZWFibGVcIjtcbmltcG9ydCB7IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgUnVuTG9nLCBSdW5Mb2dQYXRjaCwgaXNMb2dTdHJlYW1IYW5kbGVyLCB9IGZyb20gXCIuLi90cmFjZXJzL2xvZ19zdHJlYW0uanNcIjtcbmltcG9ydCB7IEV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBpc1N0cmVhbUV2ZW50c0hhbmRsZXIsIH0gZnJvbSBcIi4uL3RyYWNlcnMvZXZlbnRfc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0sIGNvbmNhdCwgYXRlZSwgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCwgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAsIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgcmFjZVdpdGhTaWduYWwgfSBmcm9tIFwiLi4vdXRpbHMvc2lnbmFsLmpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCwgZW5zdXJlQ29uZmlnLCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIG1lcmdlQ29uZmlncywgcGF0Y2hDb25maWcsIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IFJvb3RMaXN0ZW5lcnNUcmFjZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzXCI7XG5pbXBvcnQgeyBfUm9vdEV2ZW50RmlsdGVyLCBpc1J1bm5hYmxlSW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgR3JhcGggfSBmcm9tIFwiLi9ncmFwaC5qc1wiO1xuaW1wb3J0IHsgY29udmVydFRvSHR0cEV2ZW50U3RyZWFtIH0gZnJvbSBcIi4vd3JhcHBlcnMuanNcIjtcbmltcG9ydCB7IGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0LCBjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQsIGlzQXN5bmNJdGVyYWJsZSwgaXNJdGVyYWJsZUl0ZXJhdG9yLCBpc0l0ZXJhdG9yLCB9IGZyb20gXCIuL2l0ZXIuanNcIjtcbmltcG9ydCB7IF9pc1Rvb2xDYWxsLCBUb29sSW5wdXRQYXJzaW5nRXhjZXB0aW9uIH0gZnJvbSBcIi4uL3Rvb2xzL3V0aWxzLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiZcbiAgICAgICAgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgISh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vKipcbiAqIEEgUnVubmFibGUgaXMgYSBnZW5lcmljIHVuaXQgb2Ygd29yayB0aGF0IGNhbiBiZSBpbnZva2VkLCBiYXRjaGVkLCBzdHJlYW1lZCwgYW5kL29yXG4gKiB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfcnVubmFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0TmFtZShzdWZmaXgpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0aGlzLm5hbWUgPz8gdGhpcy5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPz8gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICByZXR1cm4gc3VmZml4ID8gYCR7bmFtZX0ke3N1ZmZpeH1gIDogbmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBhcmd1bWVudHMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBrd2FyZ3NcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZUJpbmRpbmcgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIGFwcGx5IHRoZSBib3VuZCBhcmdzLlxuICAgICAqL1xuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoeyBib3VuZDogdGhpcywga3dhcmdzLCBjb25maWc6IHt9IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBuZXcgUnVubmFibGUgdGhhdCBtYXBzIGEgbGlzdCBvZiBpbnB1dHMgdG8gYSBsaXN0IG9mIG91dHB1dHMsXG4gICAgICogYnkgY2FsbGluZyBpbnZva2UoKSB3aXRoIGVhY2ggaW5wdXQuXG4gICAgICovXG4gICAgbWFwKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHsgYm91bmQ6IHRoaXMgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCByZXRyeSBsb2dpYyB0byBhbiBleGlzdGluZyBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ga3dhcmdzXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVSZXRyeSB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgcmV0cnkgYWNjb3JkaW5nIHRvIHRoZSBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHdpdGhSZXRyeShmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlUmV0cnkoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBrd2FyZ3M6IHt9LFxuICAgICAgICAgICAgY29uZmlnOiB7fSxcbiAgICAgICAgICAgIG1heEF0dGVtcHROdW1iZXI6IGZpZWxkcz8uc3RvcEFmdGVyQXR0ZW1wdCxcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgY29uZmlnIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE5ldyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgdG8gYXR0YWNoIHRvIHRoZSBuZXcgcnVubmFibGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCaW5kaW5nIHdpdGggYSBjb25maWcgbWF0Y2hpbmcgd2hhdCdzIHBhc3NlZC5cbiAgICAgKi9cbiAgICB3aXRoQ29uZmlnKGNvbmZpZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAga3dhcmdzOiB7fSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBydW5uYWJsZSBmcm9tIHRoZSBjdXJyZW50IG9uZSB0aGF0IHdpbGwgdHJ5IGludm9raW5nXG4gICAgICogb3RoZXIgcGFzc2VkIGZhbGxiYWNrIHJ1bm5hYmxlcyBpZiB0aGUgaW5pdGlhbCBpbnZvY2F0aW9uIGZhaWxzLlxuICAgICAqIEBwYXJhbSBmaWVsZHMuZmFsbGJhY2tzIE90aGVyIHJ1bm5hYmxlcyB0byBjYWxsIGlmIHRoZSBydW5uYWJsZSBlcnJvcnMuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzLlxuICAgICAqL1xuICAgIHdpdGhGYWxsYmFja3MoZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrcyA9IEFycmF5LmlzQXJyYXkoZmllbGRzKSA/IGZpZWxkcyA6IGZpZWxkcy5mYWxsYmFja3M7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3Moe1xuICAgICAgICAgICAgcnVubmFibGU6IHRoaXMsXG4gICAgICAgICAgICBmYWxsYmFja3MsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucywgbGVuZ3RoID0gMCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhc3NlZCBcIm9wdGlvbnNcIiBtdXN0IGJlIGFuIGFycmF5IHdpdGggdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBpbnB1dHMsIGJ1dCBnb3QgJHtvcHRpb25zLmxlbmd0aH0gb3B0aW9ucyBmb3IgJHtsZW5ndGh9IGlucHV0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoZW5zdXJlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID4gMSAmJiAhQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLnJ1bklkKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJQcm92aWRlZCBydW5JZCB3aWxsIGJlIHVzZWQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJhdGNoLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNlcXVlbnQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob3B0aW9ucykuZmlsdGVyKChba2V5XSkgPT4ga2V5ICE9PSBcInJ1bklkXCIpKTtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiBlbnN1cmVDb25maWcoaSA9PT0gMCA/IG9wdGlvbnMgOiBzdWJzZXF1ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBtYXhDb25jdXJyZW5jeSA9IGNvbmZpZ0xpc3RbMF0/Lm1heENvbmN1cnJlbmN5ID8/IGJhdGNoT3B0aW9ucz8ubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGNvbnN0IGNhbGxlciA9IG5ldyBBc3luY0NhbGxlcih7XG4gICAgICAgICAgICBtYXhDb25jdXJyZW5jeSxcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJhdGNoQ2FsbHMgPSBpbnB1dHMubWFwKChpbnB1dCwgaSkgPT4gY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmludm9rZShpbnB1dCwgY29uZmlnTGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYmF0Y2hDYWxscyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgc3RyZWFtaW5nIGltcGxlbWVudGF0aW9uLlxuICAgICAqIFN1YmNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGlmIHRoZXkgc3VwcG9ydCBzdHJlYW1pbmcgb3V0cHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCB0aGlzLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBvdXRwdXQgaW4gY2h1bmtzLlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gdGhhdCBpcyBhbHNvIGFuIGl0ZXJhYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBCdWZmZXIgdGhlIGZpcnN0IHN0cmVhbWVkIGNodW5rIHRvIGFsbG93IGZvciBpbml0aWFsIGVycm9yc1xuICAgICAgICAvLyB0byBzdXJmYWNlIGltbWVkaWF0ZWx5LlxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBsZXQgcnVubmFibGVDb25maWc7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlQ29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcnVubmFibGVDb25maWcgPSBlbnN1cmVDb25maWcoe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogb3B0aW9ucy5jYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgdGFnczogb3B0aW9ucy50YWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBvcHRpb25zLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHJ1bk5hbWU6IG9wdGlvbnMucnVuTmFtZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IG9wdGlvbnMuY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiBvcHRpb25zLnJlY3Vyc2lvbkxpbWl0LFxuICAgICAgICAgICAgICAgIG1heENvbmN1cnJlbmN5OiBvcHRpb25zLm1heENvbmN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIHJ1bklkOiBvcHRpb25zLnJ1bklkLFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCxcbiAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbE9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLmNhbGxiYWNrcztcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnRhZ3M7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5tZXRhZGF0YTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnJ1bk5hbWU7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5jb25maWd1cmFibGU7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5yZWN1cnNpb25MaW1pdDtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLm1heENvbmN1cnJlbmN5O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucnVuSWQ7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy50aW1lb3V0O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMuc2lnbmFsO1xuICAgICAgICByZXR1cm4gW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc107XG4gICAgfVxuICAgIGFzeW5jIF9jYWxsV2l0aENvbmZpZyhmdW5jLCBpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnLnJ1bklkLCBjb25maWc/LnJ1blR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWc/LnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpO1xuICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIG9wdGlvbnM/LnNpZ25hbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IGhhbmRsZXMgYmF0Y2hpbmcgYW5kIGNvbmZpZ3VyYXRpb24gZm9yIGEgcnVubmFibGVcbiAgICAgKiBJdCB0YWtlcyBhIGZ1bmN0aW9uLCBpbnB1dCB2YWx1ZXMsIGFuZCBvcHRpb25hbCBjb25maWd1cmF0aW9uLCBhbmRcbiAgICAgKiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBmb3IgZWFjaCBpbnB1dCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHZhbHVlcyB0byBiZSBwcm9jZXNzZWQuXG4gICAgICogQHBhcmFtIGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgZnVuY3Rpb24gZXhlY3V0aW9uLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgdmFsdWVzLlxuICAgICAqL1xuICAgIGFzeW5jIF9iYXRjaFdpdGhDb25maWcoZnVuYywgaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKG9wdGlvbnNMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja01hbmFnZXJzLm1hcChhc3luYyAoY2FsbGJhY2tNYW5hZ2VyLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVTdGFydFJlcyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgb3B0aW9uc0xpc3RbaV0ucnVuSWQsIG9wdGlvbnNMaXN0W2ldLnJ1blR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRpb25zTGlzdFtpXS5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgb3V0cHV0cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBmdW5jLmNhbGwodGhpcywgaW5wdXRzLCBvcHRpb25zTGlzdCwgcnVuTWFuYWdlcnMsIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICBvdXRwdXRzID0gYXdhaXQgcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgb3B0aW9uc0xpc3Q/LlswXT8uc2lnbmFsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXRzLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gdHJhbnNmb3JtIGFuIEl0ZXJhdG9yIG9mIElucHV0IHZhbHVlcyBpbnRvIGFuIEl0ZXJhdG9yIG9mXG4gICAgICogT3V0cHV0IHZhbHVlcywgd2l0aCBjYWxsYmFja3MuXG4gICAgICogVXNlIHRoaXMgdG8gaW1wbGVtZW50IGBzdHJlYW0oKWAgb3IgYHRyYW5zZm9ybSgpYCBpbiBSdW5uYWJsZSBzdWJjbGFzc2VzLlxuICAgICAqL1xuICAgIGFzeW5jICpfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhpbnB1dEdlbmVyYXRvciwgdHJhbnNmb3JtZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGZpbmFsSW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbElucHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIHdyYXBJbnB1dEZvclRyYWNpbmcoKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSBjb25jYXQoZmluYWxJbnB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBydW5NYW5hZ2VyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGlwZSA9IGF3YWl0IHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodHJhbnNmb3JtZXIuYmluZCh0aGlzKSwgd3JhcElucHV0Rm9yVHJhY2luZygpLCBhc3luYyAoKSA9PiBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHsgaW5wdXQ6IFwiXCIgfSwgY29uZmlnLnJ1bklkLCBjb25maWcucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKSwgb3B0aW9ucz8uc2lnbmFsLCBjb25maWcpO1xuICAgICAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgICAgIHJ1bk1hbmFnZXIgPSBwaXBlLnNldHVwO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtRXZlbnRzSGFuZGxlciA9IHJ1bk1hbmFnZXI/LmhhbmRsZXJzLmZpbmQoaXNTdHJlYW1FdmVudHNIYW5kbGVyKTtcbiAgICAgICAgICAgIGxldCBpdGVyYXRvciA9IHBpcGUub3V0cHV0O1xuICAgICAgICAgICAgaWYgKHN0cmVhbUV2ZW50c0hhbmRsZXIgIT09IHVuZGVmaW5lZCAmJiBydW5NYW5hZ2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvciA9IHN0cmVhbUV2ZW50c0hhbmRsZXIudGFwT3V0cHV0SXRlcmFibGUocnVuTWFuYWdlci5ydW5JZCwgaXRlcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9nSGFuZGxlciA9IHJ1bk1hbmFnZXI/LmhhbmRsZXJzLmZpbmQoaXNMb2dTdHJlYW1IYW5kbGVyKTtcbiAgICAgICAgICAgIGlmIChzdHJlYW1Mb2dIYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgcnVuTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBzdHJlYW1Mb2dIYW5kbGVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bk1hbmFnZXIucnVuSWQsIGl0ZXJhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSB9KTtcbiAgICB9XG4gICAgZ2V0R3JhcGgoXykge1xuICAgICAgICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgaW5wdXQgc2NoZW1hIGZvciBydW5uYWJsZXNcbiAgICAgICAgY29uc3QgaW5wdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1JbnB1dGAsXG4gICAgICAgICAgICBzY2hlbWE6IHouYW55KCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBydW5uYWJsZU5vZGUgPSBncmFwaC5hZGROb2RlKHRoaXMpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgb3V0cHV0IHNjaGVtYXMgZm9yIHJ1bm5hYmxlc1xuICAgICAgICBjb25zdCBvdXRwdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1PdXRwdXRgLFxuICAgICAgICAgICAgc2NoZW1hOiB6LmFueSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgZ3JhcGguYWRkRWRnZShpbnB1dE5vZGUsIHJ1bm5hYmxlTm9kZSk7XG4gICAgICAgIGdyYXBoLmFkZEVkZ2UocnVubmFibGVOb2RlLCBvdXRwdXROb2RlKTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcnVubmFibGUgc2VxdWVuY2UgdGhhdCBydW5zIGVhY2ggaW5kaXZpZHVhbCBydW5uYWJsZSBpbiBzZXJpZXMsXG4gICAgICogcGlwaW5nIHRoZSBvdXRwdXQgb2Ygb25lIHJ1bm5hYmxlIGludG8gYW5vdGhlciBydW5uYWJsZSBvciBydW5uYWJsZS1saWtlLlxuICAgICAqIEBwYXJhbSBjb2VyY2VhYmxlIEEgcnVubmFibGUsIGZ1bmN0aW9uLCBvciBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBmdW5jdGlvbnMgb3IgcnVubmFibGVzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIHBpcGUoY29lcmNlYWJsZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICBmaXJzdDogdGhpcyxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGljayBrZXlzIGZyb20gdGhlIGRpY3Qgb3V0cHV0IG9mIHRoaXMgcnVubmFibGUuIFJldHVybnMgYSBuZXcgcnVubmFibGUuXG4gICAgICovXG4gICAgcGljayhrZXlzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZShuZXcgUnVubmFibGVQaWNrKGtleXMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBuZXcgZmllbGRzIHRvIHRoZSBkaWN0IG91dHB1dCBvZiB0aGlzIHJ1bm5hYmxlLiBSZXR1cm5zIGEgbmV3IHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzc2lnbihtYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpcGUoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgbmV3IFJ1bm5hYmxlQXNzaWduKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzOiBtYXBwaW5nIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdHJhbnNmb3JtLCB3aGljaCBidWZmZXJzIGlucHV0IGFuZCB0aGVuIGNhbGxzIHN0cmVhbS5cbiAgICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IGNhbiBzdGFydCBwcm9kdWNpbmcgb3V0cHV0IHdoaWxlXG4gICAgICogaW5wdXQgaXMgc3RpbGwgYmVpbmcgZ2VuZXJhdGVkLlxuICAgICAqIEBwYXJhbSBnZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICp0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBmaW5hbENodW5rO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBiZXN0IGVmZm9ydCB0byBnYXRoZXIsIGZvciBhbnkgdHlwZSB0aGF0IHN1cHBvcnRzIGNvbmNhdC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgZ2F0aGVyaW5nIGZhaWxzLlxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGZpbmFsQ2h1bmssIGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBhbGwgb3V0cHV0IGZyb20gYSBydW5uYWJsZSwgYXMgcmVwb3J0ZWQgdG8gdGhlIGNhbGxiYWNrIHN5c3RlbS5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIGFsbCBpbm5lciBydW5zIG9mIExMTXMsIFJldHJpZXZlcnMsIFRvb2xzLCBldGMuXG4gICAgICogT3V0cHV0IGlzIHN0cmVhbWVkIGFzIExvZyBvYmplY3RzLCB3aGljaCBpbmNsdWRlIGEgbGlzdCBvZlxuICAgICAqIGpzb25wYXRjaCBvcHMgdGhhdCBkZXNjcmliZSBob3cgdGhlIHN0YXRlIG9mIHRoZSBydW4gaGFzIGNoYW5nZWQgaW4gZWFjaFxuICAgICAqIHN0ZXAsIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIHJ1bi5cbiAgICAgKiBUaGUganNvbnBhdGNoIG9wcyBjYW4gYmUgYXBwbGllZCBpbiBvcmRlciB0byBjb25zdHJ1Y3Qgc3RhdGUuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gc3RyZWFtT3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICpzdHJlYW1Mb2coaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyID0gbmV3IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIF9zY2hlbWFGb3JtYXQ6IFwib3JpZ2luYWxcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpIHtcbiAgICAgICAgY29uc3QgeyBjYWxsYmFja3MgfSA9IGNvbmZpZztcbiAgICAgICAgaWYgKGNhbGxiYWNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb25jYXQoW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgIGNvcGllZENhbGxiYWNrcy5hZGRIYW5kbGVyKGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjb3BpZWRDYWxsYmFja3M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Qcm9taXNlID0gdGhpcy5zdHJlYW0oaW5wdXQsIGNvbmZpZyk7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW0gPSBhd2FpdCBydW5uYWJsZVN0cmVhbVByb21pc2U7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBydW5uYWJsZVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9zdHJlYW1lZF9vdXRwdXQvLVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSA9IGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBsb2cgb2YgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgbG9nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgYXdhaXQgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHN0cmVhbTtcbiAgICAgICAgaWYgKG9wdGlvbnMudmVyc2lvbiA9PT0gXCJ2MVwiKSB7XG4gICAgICAgICAgICBzdHJlYW0gPSB0aGlzLl9zdHJlYW1FdmVudHNWMShpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy52ZXJzaW9uID09PSBcInYyXCIpIHtcbiAgICAgICAgICAgIHN0cmVhbSA9IHRoaXMuX3N0cmVhbUV2ZW50c1YyKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25seSB2ZXJzaW9ucyBcInYxXCIgYW5kIFwidjJcIiBvZiB0aGUgc2NoZW1hIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmVuY29kaW5nID09PSBcInRleHQvZXZlbnQtc3RyZWFtXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0VG9IdHRwRXZlbnRTdHJlYW0oc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcihzdHJlYW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtRXZlbnRzVjIoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZXZlbnRTdHJlYW1lciA9IG5ldyBFdmVudFN0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcnVuSWQgPSBjb25maWcucnVuSWQgPz8gdXVpZHY0KCk7XG4gICAgICAgIGNvbmZpZy5ydW5JZCA9IHJ1bklkO1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBjb25maWcuY2FsbGJhY2tzO1xuICAgICAgICBpZiAoY2FsbGJhY2tzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbZXZlbnRTdHJlYW1lcl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFja3MpKSB7XG4gICAgICAgICAgICBjb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvbmNhdChldmVudFN0cmVhbWVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvcGllZENhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICBjb3BpZWRDYWxsYmFja3MuYWRkSGFuZGxlcihldmVudFN0cmVhbWVyLCB0cnVlKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxsIHRoZSBydW5uYWJsZSBpbiBzdHJlYW1pbmcgbW9kZSxcbiAgICAgICAgLy8gYWRkIGVhY2ggY2h1bmsgdG8gdGhlIG91dHB1dCBzdHJlYW1cbiAgICAgICAgY29uc3Qgb3V0ZXJUaGlzID0gdGhpcztcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbSA9IGF3YWl0IG91dGVyVGhpcy5zdHJlYW0oaW5wdXQsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFwcGVkU3RyZWFtID0gZXZlbnRTdHJlYW1lci50YXBPdXRwdXRJdGVyYWJsZShydW5JZCwgcnVubmFibGVTdHJlYW0pO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IF8gb2YgdGFwcGVkU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEp1c3QgaXRlcmF0ZSBzbyB0aGF0IHRoZSBjYWxsYmFjayBoYW5kbGVyIHBpY2tzIHVwIGV2ZW50c1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGV2ZW50U3RyZWFtZXIuZmluaXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSA9IGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpO1xuICAgICAgICBsZXQgZmlyc3RFdmVudFNlbnQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGZpcnN0RXZlbnRSdW5JZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2YgZXZlbnRTdHJlYW1lcikge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSB3b3JrLWFyb3VuZCBhbiBpc3N1ZSB3aGVyZSB0aGUgaW5wdXRzIGludG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gY2hhaW4gYXJlIG5vdCBhdmFpbGFibGUgdW50aWwgdGhlIGVudGlyZSBpbnB1dCBpcyBjb25zdW1lZC5cbiAgICAgICAgICAgICAgICAvLyBBcyBhIHRlbXBvcmFyeSBzb2x1dGlvbiwgd2UnbGwgbW9kaWZ5IHRoZSBpbnB1dCB0byBiZSB0aGUgaW5wdXRcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdhcyBwYXNzZWQgaW50byB0aGUgY2hhaW4uXG4gICAgICAgICAgICAgICAgaWYgKCFmaXJzdEV2ZW50U2VudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXZlbnRTZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFdmVudFJ1bklkID0gZXZlbnQucnVuX2lkO1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudC5ydW5faWQgPT09IGZpcnN0RXZlbnRSdW5JZCAmJiBldmVudC5ldmVudC5lbmRzV2l0aChcIl9lbmRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyB0aGUgZW5kIGV2ZW50IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHJvb3QgcnVubmFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgZG9udCBpbmNsdWRlIHRoZSBpbnB1dCBpbiB0aGUgZXZlbnQgc2luY2UgaXQncyBndWFyYW50ZWVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBmaXJzdCBldmVudC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGE/LmlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnQuZGF0YS5pbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1FdmVudHNWMShpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBsZXQgcnVuTG9nO1xuICAgICAgICBsZXQgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgcm9vdFRhZ3MgPSBjb25maWcudGFncyA/PyBbXTtcbiAgICAgICAgY29uc3Qgcm9vdE1ldGFkYXRhID0gY29uZmlnLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICBjb25zdCByb290TmFtZSA9IGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgX3NjaGVtYUZvcm1hdDogXCJzdHJlYW1pbmdfZXZlbnRzXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByb290RXZlbnRGaWx0ZXIgPSBuZXcgX1Jvb3RFdmVudEZpbHRlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtID0gdGhpcy5fc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZyk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbG9nIG9mIGxvZ1N0cmVhbSkge1xuICAgICAgICAgICAgaWYgKCFydW5Mb2cpIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBSdW5Mb2cuZnJvbVJ1bkxvZ1BhdGNoKGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBydW5Mb2cuY29uY2F0KGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVuTG9nLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVybmFsIGVycm9yOiBcInN0cmVhbUV2ZW50c1wiIHN0YXRlIGlzIG1pc3NpbmcuIFBsZWFzZSBvcGVuIGEgYnVnIHJlcG9ydC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFlpZWxkIHRoZSBzdGFydCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUgaWYgaXQgaGFzbid0IGJlZW4gc2Vlbi5cbiAgICAgICAgICAgIC8vIFRoZSByb290IHJ1biBpcyBuZXZlciBmaWx0ZXJlZCBvdXRcbiAgICAgICAgICAgIGlmICghaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHsgLi4ucnVuTG9nLnN0YXRlIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9zdGFydGAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiByb290VGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGF0aHMgPSBsb2cub3BzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigob3ApID0+IG9wLnBhdGguc3RhcnRzV2l0aChcIi9sb2dzL1wiKSlcbiAgICAgICAgICAgICAgICAubWFwKChvcCkgPT4gb3AucGF0aC5zcGxpdChcIi9cIilbMl0pO1xuICAgICAgICAgICAgY29uc3QgZGVkdXBlZFBhdGhzID0gWy4uLm5ldyBTZXQocGF0aHMpXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBkZWR1cGVkUGF0aHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRUeXBlO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRW50cnkgPSBydW5Mb2cuc3RhdGUubG9nc1twYXRoXTtcbiAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuZW5kX3RpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwic3RyZWFtXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwiZW5kXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudFR5cGUgPT09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBpbnB1dHMgd2l0aCB0aGUgc3RhcnQgZXZlbnQgaWYgdGhleSBhcmUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgICAgICAvLyBVc3VhbGx5IHRoZXkgd2lsbCBOT1QgYmUgYXZhaWxhYmxlIGZvciBjb21wb25lbnRzIHRoYXQgb3BlcmF0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBzdHJlYW1zLCBzaW5jZSB0aG9zZSBjb21wb25lbnRzIHN0cmVhbSB0aGUgaW5wdXQgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGtub3cgaXRzIGZpbmFsIHZhbHVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0ID0gbG9nRW50cnkuaW5wdXRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJlbmRcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBsb2dFbnRyeS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5vdXRwdXQgPSBsb2dFbnRyeS5maW5hbF9vdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJzdHJlYW1cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0NvdW50ID0gbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rQ291bnQgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke2xvZ0VudHJ5Lm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0geyBjaHVuazogbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gQW5kIHRoaXMgYXZvaWRzIGR1cGxpY2F0ZXMgYXMgd2VsbCFcbiAgICAgICAgICAgICAgICAgICAgbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0ID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke2xvZ0VudHJ5LnR5cGV9XyR7ZXZlbnRUeXBlfWAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvZ0VudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogbG9nRW50cnkuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IGxvZ0VudHJ5LnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBsb2dFbnRyeS5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWxseSwgd2UgdGFrZSBjYXJlIG9mIHRoZSBzdHJlYW1pbmcgb3V0cHV0IGZyb20gdGhlIHJvb3QgY2hhaW5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFueS5cbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdGUgfSA9IHJ1bkxvZztcbiAgICAgICAgICAgIGlmIChzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjaHVua0NvdW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke3N0YXRlLm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsgY2h1bms6IHN0YXRlLnN0cmVhbWVkX291dHB1dFswXSB9O1xuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X3N0cmVhbWAsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBydW5Mb2c/LnN0YXRlO1xuICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgeWllbGQgdGhlIGVuZCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUuXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fZW5kYCxcbiAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICBydW5faWQ6IHN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHN0YXRlLmZpbmFsX291dHB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSlcbiAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlKHRoaW5nKSB7XG4gICAgICAgIHJldHVybiBpc1J1bm5hYmxlSW50ZXJmYWNlKHRoaW5nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBsaWZlY3ljbGUgbGlzdGVuZXJzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBUaGUgUnVuIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcnVuLCBpbmNsdWRpbmcgaXRzIGlkLFxuICAgICAqIHR5cGUsIGlucHV0LCBvdXRwdXQsIGVycm9yLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFuZCBhbnkgdGFncyBvciBtZXRhZGF0YVxuICAgICAqIGFkZGVkIHRvIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vblN0YXJ0IC0gQ2FsbGVkIGJlZm9yZSB0aGUgcnVubmFibGUgc3RhcnRzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVuZCAtIENhbGxlZCBhZnRlciB0aGUgcnVubmFibGUgZmluaXNoZXMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRXJyb3IgLSBDYWxsZWQgaWYgdGhlIHJ1bm5hYmxlIHRocm93cyBhbiBlcnJvciwgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKi9cbiAgICB3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzoge30sXG4gICAgICAgICAgICBjb25maWdGYWN0b3JpZXM6IFtcbiAgICAgICAgICAgICAgICAoY29uZmlnKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSb290TGlzdGVuZXJzVHJhY2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydCBhIHJ1bm5hYmxlIHRvIGEgdG9vbC4gUmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGBSdW5uYWJsZVRvb2xMaWtlYFxuICAgICAqIHdoaWNoIGNvbnRhaW5zIHRoZSBydW5uYWJsZSwgbmFtZSwgZGVzY3JpcHRpb24gYW5kIHNjaGVtYS5cbiAgICAgKlxuICAgICAqIEB0ZW1wbGF0ZSB7VCBleHRlbmRzIFJ1bklucHV0ID0gUnVuSW5wdXR9IFJ1bklucHV0IC0gVGhlIGlucHV0IHR5cGUgb2YgdGhlIHJ1bm5hYmxlLiBTaG91bGQgYmUgdGhlIHNhbWUgYXMgdGhlIGBSdW5JbnB1dGAgdHlwZSBvZiB0aGUgcnVubmFibGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRzXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IFtmaWVsZHMubmFtZV0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuIElmIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBkZWZhdWx0IHRvIHRoZSBuYW1lIG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gW2ZpZWxkcy5kZXNjcmlwdGlvbl0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLiBGYWxscyBiYWNrIHRvIHRoZSBkZXNjcmlwdGlvbiBvbiB0aGUgWm9kIHNjaGVtYSBpZiBub3QgcHJvdmlkZWQsIG9yIHVuZGVmaW5lZCBpZiBuZWl0aGVyIGFyZSBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge3ouWm9kVHlwZTxUPn0gW2ZpZWxkcy5zY2hlbWFdIFRoZSBab2Qgc2NoZW1hIGZvciB0aGUgaW5wdXQgb2YgdGhlIHRvb2wuIEluZmVycyB0aGUgWm9kIHR5cGUgZnJvbSB0aGUgaW5wdXQgdHlwZSBvZiB0aGUgcnVubmFibGUuXG4gICAgICogQHJldHVybnMge1J1bm5hYmxlVG9vbExpa2U8ei5ab2RUeXBlPFQ+LCBSdW5PdXRwdXQ+fSBBbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAgd2hpY2ggaXMgYSBydW5uYWJsZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdG9vbC5cbiAgICAgKi9cbiAgICBhc1Rvb2woZmllbGRzKSB7XG4gICAgICAgIHJldHVybiBjb252ZXJ0UnVubmFibGVUb1Rvb2wodGhpcywgZmllbGRzKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBkZWxlZ2F0ZXMgY2FsbHMgdG8gYW5vdGhlciBydW5uYWJsZSB3aXRoIGEgc2V0IG9mIGt3YXJncy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlQmluZGluZyBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVCaW5kaW5nXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJvdW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnRmFjdG9yaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYm91bmQgPSBmaWVsZHMuYm91bmQ7XG4gICAgICAgIHRoaXMua3dhcmdzID0gZmllbGRzLmt3YXJncztcbiAgICAgICAgdGhpcy5jb25maWcgPSBmaWVsZHMuY29uZmlnO1xuICAgICAgICB0aGlzLmNvbmZpZ0ZhY3RvcmllcyA9IGZpZWxkcy5jb25maWdGYWN0b3JpZXM7XG4gICAgfVxuICAgIGdldE5hbWUoc3VmZml4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmdldE5hbWUoc3VmZml4KTtcbiAgICB9XG4gICAgYXN5bmMgX21lcmdlQ29uZmlnKC4uLm9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gbWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCAuLi5vcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG1lcmdlQ29uZmlncyhjb25maWcsIC4uLih0aGlzLmNvbmZpZ0ZhY3Rvcmllc1xuICAgICAgICAgICAgPyBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmNvbmZpZ0ZhY3Rvcmllcy5tYXAoYXN5bmMgKGNvbmZpZ0ZhY3RvcnkpID0+IGF3YWl0IGNvbmZpZ0ZhY3RvcnkoY29uZmlnKSkpXG4gICAgICAgICAgICA6IFtdKSk7XG4gICAgfVxuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogeyAuLi50aGlzLmt3YXJncywgLi4ua3dhcmdzIH0sXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2l0aENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogeyAuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3aXRoUmV0cnkoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC53aXRoUmV0cnkoZmllbGRzKSxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmludm9rZShpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBtZXJnZWRPcHRpb25zID0gQXJyYXkuaXNBcnJheShvcHRpb25zKVxuICAgICAgICAgICAgPyBhd2FpdCBQcm9taXNlLmFsbChvcHRpb25zLm1hcChhc3luYyAoaW5kaXZpZHVhbE9wdGlvbikgPT4gdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKGluZGl2aWR1YWxPcHRpb24pLCB0aGlzLmt3YXJncykpKVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuYmF0Y2goaW5wdXRzLCBtZXJnZWRPcHRpb25zLCBiYXRjaE9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLmJvdW5kLl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuc3RyZWFtKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jICp0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLmJvdW5kLnRyYW5zZm9ybShnZW5lcmF0b3IsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgc3RyZWFtRXZlbnRzKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBjb25zdCBvdXRlclRoaXMgPSB0aGlzO1xuICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSBhc3luYyBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQqIG91dGVyVGhpcy5ib3VuZC5zdHJlYW1FdmVudHMoaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAuLi4oYXdhaXQgb3V0ZXJUaGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIG91dGVyVGhpcy5rd2FyZ3MpKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBvcHRpb25zLnZlcnNpb24sXG4gICAgICAgICAgICB9LCBzdHJlYW1PcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKGdlbmVyYXRvcigpKTtcbiAgICB9XG4gICAgc3RhdGljIGlzUnVubmFibGVCaW5kaW5nKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdGhpbmdcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpbmcuYm91bmQgJiYgUnVubmFibGUuaXNSdW5uYWJsZSh0aGluZy5ib3VuZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgICAgICBjb25maWdGYWN0b3JpZXM6IFtcbiAgICAgICAgICAgICAgICAoY29uZmlnKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSb290TGlzdGVuZXJzVHJhY2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBkZWxlZ2F0ZXMgY2FsbHMgdG8gYW5vdGhlciBydW5uYWJsZVxuICogd2l0aCBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVFYWNoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUVhY2hcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm91bmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ib3VuZCA9IGZpZWxkcy5ib3VuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZHMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIGt3YXJncyBUaGUgYXJndW1lbnRzIHRvIGJpbmQgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBSdW5uYWJsZUVhY2hgIGNsYXNzIHRoYXQgaXMgYm91bmQgd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC5iaW5kKGt3YXJncyksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0cywgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0cywgY29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCBhbmQgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWd1cmF0aW9uIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBfaW52b2tlKGlucHV0cywgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmJhdGNoKGlucHV0cywgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLndpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBydW5uYWJsZXMgdGhhdCBjYW4gYmUgcmV0cmllZCBhXG4gKiBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVSZXRyeSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlUmV0cnlcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heEF0dGVtcHROdW1iZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDNcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogKCkgPT4geyB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heEF0dGVtcHROdW1iZXIgPSBmaWVsZHMubWF4QXR0ZW1wdE51bWJlciA/PyB0aGlzLm1heEF0dGVtcHROdW1iZXI7XG4gICAgICAgIHRoaXMub25GYWlsZWRBdHRlbXB0ID0gZmllbGRzLm9uRmFpbGVkQXR0ZW1wdCA/PyB0aGlzLm9uRmFpbGVkQXR0ZW1wdDtcbiAgICB9XG4gICAgX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHRhZyA9IGF0dGVtcHQgPiAxID8gYHJldHJ5OmF0dGVtcHQ6JHthdHRlbXB0fWAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0YWcpIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIHBSZXRyeSgoYXR0ZW1wdE51bWJlcikgPT4gc3VwZXIuaW52b2tlKGlucHV0LCB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZywgcnVuTWFuYWdlcikpLCB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZXJyb3IpID0+IHRoaXMub25GYWlsZWRBdHRlbXB0KGVycm9yLCBpbnB1dCksXG4gICAgICAgICAgICByZXRyaWVzOiBNYXRoLm1heCh0aGlzLm1heEF0dGVtcHROdW1iZXIgLSAxLCAwKSxcbiAgICAgICAgICAgIHJhbmRvbWl6ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IGludm9rZXMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCwgcnVuIG1hbmFnZXIsXG4gICAgICogYW5kIGNvbmZpZy4gSXQgaGFuZGxlcyB0aGUgcmV0cnkgbG9naWMgYnkgY2F0Y2hpbmcgYW55IGVycm9ycyBhbmRcbiAgICAgKiByZWN1cnNpdmVseSBpbnZva2luZyBpdHNlbGYgd2l0aCB0aGUgdXBkYXRlZCBjb25maWcgZm9yIHRoZSBuZXh0IHJldHJ5XG4gICAgICogYXR0ZW1wdC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHBhcmFtIHJ1bk1hbmFnZXIgVGhlIHJ1biBtYW5hZ2VyIGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlnIGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXQsIGNvbmZpZyk7XG4gICAgfVxuICAgIGFzeW5jIF9iYXRjaChpbnB1dHMsIGNvbmZpZ3MsIHJ1bk1hbmFnZXJzLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0c01hcCA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgcFJldHJ5KGFzeW5jIChhdHRlbXB0TnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nSW5kZXhlcyA9IGlucHV0c1xuICAgICAgICAgICAgICAgICAgICAubWFwKChfLCBpKSA9PiBpKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChpKSA9PiByZXN1bHRzTWFwW2kudG9TdHJpbmcoKV0gPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXBbaS50b1N0cmluZygpXSBpbnN0YW5jZW9mIEVycm9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdJbnB1dHMgPSByZW1haW5pbmdJbmRleGVzLm1hcCgoaSkgPT4gaW5wdXRzW2ldKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaGVkQ29uZmlncyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZ3M/LltpXSwgcnVuTWFuYWdlcnM/LltpXSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzdXBlci5iYXRjaChyZW1haW5pbmdJbnB1dHMsIHBhdGNoZWRDb25maWdzLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmJhdGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRXhjZXB0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3VsdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdE1hcEluZGV4ID0gcmVtYWluaW5nSW5kZXhlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEV4Y2VwdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RFeGNlcHRpb24gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEV4Y2VwdGlvbi5pbnB1dCA9IHJlbWFpbmluZ0lucHV0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTWFwW3Jlc3VsdE1hcEluZGV4LnRvU3RyaW5nKCldID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFeGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZXJyb3IpID0+IHRoaXMub25GYWlsZWRBdHRlbXB0KGVycm9yLCBlcnJvci5pbnB1dCksXG4gICAgICAgICAgICAgICAgcmV0cmllczogTWF0aC5tYXgodGhpcy5tYXhBdHRlbXB0TnVtYmVyIC0gMSwgMCksXG4gICAgICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXN1bHRzTWFwKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEsIDEwKSAtIHBhcnNlSW50KGIsIDEwKSlcbiAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gcmVzdWx0c01hcFtwYXJzZUludChrZXksIDEwKV0pO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmF0Y2hXaXRoQ29uZmlnKHRoaXMuX2JhdGNoLmJpbmQodGhpcyksIGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIEEgc2VxdWVuY2Ugb2YgcnVubmFibGVzLCB3aGVyZSB0aGUgb3V0cHV0IG9mIGVhY2ggaXMgdGhlIGlucHV0IG9mIHRoZSBuZXh0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdFRlbXBsYXRlID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICBcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIixcbiAqICk7XG4gKiBjb25zdCBjaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbcHJvbXB0VGVtcGxhdGUsIG5ldyBDaGF0T3BlbkFJKHt9KV0pO1xuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVTZXF1ZW5jZSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVTZXF1ZW5jZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWlkZGxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGFzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZmlyc3QgPSBmaWVsZHMuZmlyc3Q7XG4gICAgICAgIHRoaXMubWlkZGxlID0gZmllbGRzLm1pZGRsZSA/PyB0aGlzLm1pZGRsZTtcbiAgICAgICAgdGhpcy5sYXN0ID0gZmllbGRzLmxhc3Q7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgIH1cbiAgICBnZXQgc3RlcHMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnLnJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWc/LnJ1bk5hbWUpO1xuICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dCA9IGlucHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsU3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGVdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbml0aWFsU3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gaW5pdGlhbFN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBzdGVwLmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXBJbnB1dCA9IGF3YWl0IHJhY2VXaXRoU2lnbmFsKHByb21pc2UsIG9wdGlvbnM/LnNpZ25hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUeXBlU2NyaXB0IGNhbid0IGRldGVjdCB0aGF0IHRoZSBsYXN0IG91dHB1dCBvZiB0aGUgc2VxdWVuY2UgcmV0dXJucyBSdW5PdXRwdXQsIHNvIGNhbGwgaXQgb3V0IG9mIHRoZSBsb29wIGhlcmVcbiAgICAgICAgICAgIGlmIChvcHRpb25zPy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBYm9ydGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBhd2FpdCB0aGlzLmxhc3QuaW52b2tlKG5leHRTdGVwSW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYHNlcTpzdGVwOiR7dGhpcy5zdGVwcy5sZW5ndGh9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QoZmluYWxPdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIGZpbmFsT3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25maWdMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja01hbmFnZXJzLm1hcChhc3luYyAoY2FsbGJhY2tNYW5hZ2VyLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVTdGFydFJlcyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgY29uZmlnTGlzdFtpXS5ydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnTGlzdFtpXS5ydW5OYW1lKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb25maWdMaXN0W2ldLnJ1bklkO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVN0YXJ0UmVzO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBuZXh0U3RlcElucHV0cyA9IGlucHV0cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSB0aGlzLnN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBzdGVwLmJhdGNoKG5leHRTdGVwSW5wdXRzLCBydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGopID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRSdW5NYW5hZ2VyID0gcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYHNlcTpzdGVwOiR7aSArIDF9YCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRjaENvbmZpZyhjb25maWdMaXN0W2pdLCB7IGNhbGxiYWNrczogY2hpbGRSdW5NYW5hZ2VyIH0pO1xuICAgICAgICAgICAgICAgIH0pLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwSW5wdXRzID0gYXdhaXQgcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgY29uZmlnTGlzdFswXT8uc2lnbmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChuZXh0U3RlcElucHV0cywgXCJvdXRwdXRcIikpKSk7XG4gICAgICAgIHJldHVybiBuZXh0U3RlcElucHV0cztcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5vdGhlck9wdGlvbnMgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlck9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBjb25zdCBzdGVwcyA9IFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XTtcbiAgICAgICAgbGV0IGNvbmNhdFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGlucHV0R2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBmaW5hbEdlbmVyYXRvciA9IHN0ZXBzWzBdLnRyYW5zZm9ybShpbnB1dEdlbmVyYXRvcigpLCBwYXRjaENvbmZpZyhvdGhlck9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoxYCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGZpbmFsR2VuZXJhdG9yID0gYXdhaXQgc3RlcC50cmFuc2Zvcm0oZmluYWxHZW5lcmF0b3IsIHBhdGNoQ29uZmlnKG90aGVyT3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZmluYWxHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmNhdFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChmaW5hbE91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBnZXRHcmFwaChjb25maWcpIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGN1cnJlbnRMYXN0Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBHcmFwaCA9IHN0ZXAuZ2V0R3JhcGgoY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltRmlyc3ROb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc3RlcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltTGFzdE5vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyYXBoLmV4dGVuZChzdGVwR3JhcGgpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcEZpcnN0Tm9kZSA9IHN0ZXBHcmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgICAgIGlmICghc3RlcEZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGUgJHtzdGVwfSBoYXMgbm8gZmlyc3Qgbm9kZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2UoY3VycmVudExhc3ROb2RlLCBzdGVwRmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRMYXN0Tm9kZSA9IHN0ZXBHcmFwaC5sYXN0Tm9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgaWYgKFJ1bm5hYmxlU2VxdWVuY2UuaXNSdW5uYWJsZVNlcXVlbmNlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogdGhpcy5taWRkbGUuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VhYmxlLmZpcnN0LFxuICAgICAgICAgICAgICAgICAgICAuLi5jb2VyY2VhYmxlLm1pZGRsZSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBsYXN0OiBjb2VyY2VhYmxlLmxhc3QsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IGNvZXJjZWFibGUubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogdGhpcy5maXJzdCxcbiAgICAgICAgICAgICAgICBtaWRkbGU6IFsuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XSxcbiAgICAgICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlU2VxdWVuY2UodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcubWlkZGxlKSAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShbZmlyc3QsIC4uLnJ1bm5hYmxlc10sIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgIGZpcnN0OiBfY29lcmNlVG9SdW5uYWJsZShmaXJzdCksXG4gICAgICAgICAgICBtaWRkbGU6IHJ1bm5hYmxlcy5zbGljZSgwLCAtMSkubWFwKF9jb2VyY2VUb1J1bm5hYmxlKSxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKHJ1bm5hYmxlc1tydW5uYWJsZXMubGVuZ3RoIC0gMV0pLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgcnVucyBhIG1hcHBpbmcgb2YgcnVubmFibGVzIGluIHBhcmFsbGVsLFxuICogYW5kIHJldHVybnMgYSBtYXBwaW5nIG9mIHRoZWlyIG91dHB1dHMuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbWFwQ2hhaW4gPSBSdW5uYWJsZU1hcC5mcm9tKHtcbiAqICAgam9rZTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwiVGVsbCBtZSBhIGpva2UgYWJvdXQge3RvcGljfVwiKS5waXBlKFxuICogICAgIG5ldyBDaGF0QW50aHJvcGljKHt9KSxcbiAqICAgKSxcbiAqICAgcG9lbTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwid3JpdGUgYSAyLWxpbmUgcG9lbSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogfSk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXBDaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyXCIgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlTWFwIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZU1hcFwiO1xuICAgIH1cbiAgICBnZXRTdGVwc0tleXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0ZXBzKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RlcHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGVwcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMuc3RlcHMpKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXBzW2tleV0gPSBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb20oc3RlcHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHtcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICB9LCBjb25maWcucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLnN0ZXBzKS5tYXAoYXN5bmMgKFtrZXksIHJ1bm5hYmxlXSkgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gYXdhaXQgcnVubmFibGUuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgbWFwOmtleToke2tleX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHJhY2VXaXRoU2lnbmFsKFByb21pc2UuYWxsKHByb21pc2VzKSwgb3B0aW9ucz8uc2lnbmFsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQob3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIHNoYWxsb3cgY29weSBzdGVwcyB0byBpZ25vcmUgY2hhbmdlcyB3aGlsZSBpdGVyYXRpbmdcbiAgICAgICAgY29uc3Qgc3RlcHMgPSB7IC4uLnRoaXMuc3RlcHMgfTtcbiAgICAgICAgLy8gZWFjaCBzdGVwIGdldHMgYSBjb3B5IG9mIHRoZSBpbnB1dCBpdGVyYXRvclxuICAgICAgICBjb25zdCBpbnB1dENvcGllcyA9IGF0ZWUoZ2VuZXJhdG9yLCBPYmplY3Qua2V5cyhzdGVwcykubGVuZ3RoKTtcbiAgICAgICAgLy8gc3RhcnQgdGhlIGZpcnN0IGl0ZXJhdGlvbiBvZiBlYWNoIG91dHB1dCBpdGVyYXRvclxuICAgICAgICBjb25zdCB0YXNrcyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoc3RlcHMpLm1hcCgoW2tleSwgcnVubmFibGVdLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBnZW4gPSBydW5uYWJsZS50cmFuc2Zvcm0oaW5wdXRDb3BpZXNbaV0sIHBhdGNoQ29uZmlnKG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBtYXA6a2V5OiR7a2V5fWApLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIFtrZXksIGdlbi5uZXh0KCkudGhlbigocmVzdWx0KSA9PiAoeyBrZXksIGdlbiwgcmVzdWx0IH0pKV07XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8geWllbGQgY2h1bmtzIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSxcbiAgICAgICAgLy8gc3RhcnRpbmcgbmV3IGl0ZXJhdGlvbnMgYXMgbmVlZGVkLFxuICAgICAgICAvLyB1bnRpbCBhbGwgaXRlcmF0b3JzIGFyZSBkb25lXG4gICAgICAgIHdoaWxlICh0YXNrcy5zaXplKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gUHJvbWlzZS5yYWNlKHRhc2tzLnZhbHVlcygpKTtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCByZXN1bHQsIGdlbiB9ID0gYXdhaXQgcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgb3B0aW9ucz8uc2lnbmFsKTtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHsgW2tleV06IHJlc3VsdC52YWx1ZSB9O1xuICAgICAgICAgICAgICAgIHRhc2tzLnNldChrZXksIGdlbi5uZXh0KCkudGhlbigocmVzdWx0KSA9PiAoeyBrZXksIGdlbiwgcmVzdWx0IH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCB3cmFwcyBhIHRyYWNlZCBMYW5nU21pdGggZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVRyYWNlYWJsZSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnVuY1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWlzVHJhY2VhYmxlRnVuY3Rpb24oZmllbGRzLmZ1bmMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSdW5uYWJsZVRyYWNlYWJsZSByZXF1aXJlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgd3JhcHBlZCBpbiB0cmFjZWFibGUgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnVuYyA9IGZpZWxkcy5mdW5jO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgW2NvbmZpZ10gPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCAxKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmZ1bmMocGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrcyB9KSwgaW5wdXQpO1xuICAgICAgICByZXR1cm4gcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgY29uZmlnPy5zaWduYWwpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IFtjb25maWddID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgMSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKGlzQXN5bmNJdGVyYWJsZShyZXN1bHQpKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJdGVyYXRvcihyZXN1bHQpKSB7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gcmVzdWx0Lm5leHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuZG9uZSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgeWllbGQgc3RhdGUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQgcmVzdWx0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbShmdW5jKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVUcmFjZWFibGUoeyBmdW5jIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydE5vblRyYWNlYWJsZUZ1bmN0aW9uKGZ1bmMpIHtcbiAgICBpZiAoaXNUcmFjZWFibGVGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSdW5uYWJsZUxhbWJkYSByZXF1aXJlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgbm90IHdyYXBwZWQgaW4gdHJhY2VhYmxlIGhpZ2hlci1vcmRlciBmdW5jdGlvbi4gVGhpcyBzaG91bGRuJ3QgaGFwcGVuLlwiKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgY2FsbGFibGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUxhbWJkYSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVMYW1iZGFcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmIChpc1RyYWNlYWJsZUZ1bmN0aW9uKGZpZWxkcy5mdW5jKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0cnVjdG9yLXJldHVyblxuICAgICAgICAgICAgcmV0dXJuIFJ1bm5hYmxlVHJhY2VhYmxlLmZyb20oZmllbGRzLmZ1bmMpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgYXNzZXJ0Tm9uVHJhY2VhYmxlRnVuY3Rpb24oZmllbGRzLmZ1bmMpO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICB9XG4gICAgc3RhdGljIGZyb20oZnVuYykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTGFtYmRhKHtcbiAgICAgICAgICAgIGZ1bmMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2b2lkIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhjaGlsZENvbmZpZywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvdXRwdXQgPSBhd2FpdCB0aGlzLmZ1bmMoaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBjaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgJiYgUnVubmFibGUuaXNSdW5uYWJsZShvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY3Vyc2lvbiBsaW1pdCByZWFjaGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IG91dHB1dC5pbnZva2UoaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNoaWxkQ29uZmlnLnJlY3Vyc2lvbkxpbWl0ID8/IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlUKSAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FzeW5jSXRlcmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dChjaGlsZENvbmZpZywgb3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZpbmFsT3V0cHV0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSXRlcmFibGVJdGVyYXRvcihvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNvbnN1bWVJdGVyYXRvckluQ29udGV4dChjaGlsZENvbmZpZywgb3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGZpbmFsT3V0cHV0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBjb25maWcpIHtcbiAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAoZmluYWxDaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIGJlc3QgZWZmb3J0IHRvIGdhdGhlciwgZm9yIGFueSB0eXBlIHRoYXQgc3VwcG9ydHMgY29uY2F0LlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjb25jYXQoZmluYWxDaHVuaywgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCksXG4gICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5ydW5XaXRoQ29uZmlnKGNoaWxkQ29uZmlnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5mdW5jKGZpbmFsQ2h1bmssIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBjaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG91dHB1dCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgIGlmIChjb25maWc/LnJlY3Vyc2lvbkxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVjdXJzaW9uIGxpbWl0IHJlYWNoZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgb3V0cHV0LnN0cmVhbShmaW5hbENodW5rLCBjaGlsZENvbmZpZyk7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQXN5bmNJdGVyYWJsZShvdXRwdXQpKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNJdGVyYWJsZUl0ZXJhdG9yKG91dHB1dCkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0KGNoaWxkQ29uZmlnLCBvdXRwdXQpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnPy5zaWduYWw/LnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5aWVsZCBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVubmFibGVQYXJhbGxlbCBleHRlbmRzIFJ1bm5hYmxlTWFwIHtcbn1cbi8qKlxuICogQSBSdW5uYWJsZSB0aGF0IGNhbiBmYWxsYmFjayB0byBvdGhlciBSdW5uYWJsZXMgaWYgaXQgZmFpbHMuXG4gKiBFeHRlcm5hbCBBUElzIChlLmcuLCBBUElzIGZvciBhIGxhbmd1YWdlIG1vZGVsKSBtYXkgYXQgdGltZXMgZXhwZXJpZW5jZVxuICogZGVncmFkZWQgcGVyZm9ybWFuY2Ugb3IgZXZlbiBkb3dudGltZS5cbiAqXG4gKiBJbiB0aGVzZSBjYXNlcywgaXQgY2FuIGJlIHVzZWZ1bCB0byBoYXZlIGEgZmFsbGJhY2sgUnVubmFibGUgdGhhdCBjYW4gYmVcbiAqIHVzZWQgaW4gcGxhY2Ugb2YgdGhlIG9yaWdpbmFsIFJ1bm5hYmxlIChlLmcuLCBmYWxsYmFjayB0byBhbm90aGVyIExMTSBwcm92aWRlcikuXG4gKlxuICogRmFsbGJhY2tzIGNhbiBiZSBkZWZpbmVkIGF0IHRoZSBsZXZlbCBvZiBhIHNpbmdsZSBSdW5uYWJsZSwgb3IgYXQgdGhlIGxldmVsXG4gKiBvZiBhIGNoYWluIG9mIFJ1bm5hYmxlcy4gRmFsbGJhY2tzIGFyZSB0cmllZCBpbiBvcmRlciB1bnRpbCBvbmUgc3VjY2VlZHMgb3JcbiAqIGFsbCBmYWlsLlxuICpcbiAqIFdoaWxlIHlvdSBjYW4gaW5zdGFudGlhdGUgYSBgUnVubmFibGVXaXRoRmFsbGJhY2tzYCBkaXJlY3RseSwgaXQgaXMgdXN1YWxseVxuICogbW9yZSBjb252ZW5pZW50IHRvIHVzZSB0aGUgYHdpdGhGYWxsYmFja3NgIG1ldGhvZCBvbiBhbiBleGlzdGluZyBSdW5uYWJsZS5cbiAqXG4gKiBXaGVuIHN0cmVhbWluZywgZmFsbGJhY2tzIHdpbGwgb25seSBiZSBjYWxsZWQgb24gZmFpbHVyZXMgZHVyaW5nIHRoZSBpbml0aWFsXG4gKiBzdHJlYW0gY3JlYXRpb24uIEVycm9ycyB0aGF0IG9jY3VyIGFmdGVyIGEgc3RyZWFtIHN0YXJ0cyB3aWxsIG5vdCBmYWxsYmFja1xuICogdG8gdGhlIG5leHQgUnVubmFibGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVdpdGhGYWxsYmFja3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlV2l0aEZhbGxiYWNrc1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ydW5uYWJsZSA9IGZpZWxkcy5ydW5uYWJsZTtcbiAgICAgICAgdGhpcy5mYWxsYmFja3MgPSBmaWVsZHMuZmFsbGJhY2tzO1xuICAgIH1cbiAgICAqcnVubmFibGVzKCkge1xuICAgICAgICB5aWVsZCB0aGlzLnJ1bm5hYmxlO1xuICAgICAgICBmb3IgKGNvbnN0IGZhbGxiYWNrIG9mIHRoaXMuZmFsbGJhY2tzKSB7XG4gICAgICAgICAgICB5aWVsZCBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5vdGhlckNvbmZpZ0ZpZWxkcyB9ID0gY29uZmlnO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3RoZXJDb25maWdGaWVsZHM/LnJ1bk5hbWUpO1xuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICBjb25maWc/LnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgcnVubmFibGUuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhvdGhlckNvbmZpZ0ZpZWxkcywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihmaXJzdEVycm9yKTtcbiAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgcnVuSWQsIC4uLm90aGVyQ29uZmlnRmllbGRzIH0gPSBjb25maWc7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlckNvbmZpZ0ZpZWxkcz8ucnVuTmFtZSk7XG4gICAgICAgIGxldCBmaXJzdEVycm9yO1xuICAgICAgICBsZXQgc3RyZWFtO1xuICAgICAgICBmb3IgKGNvbnN0IHJ1bm5hYmxlIG9mIHRoaXMucnVubmFibGVzKCkpIHtcbiAgICAgICAgICAgIGNvbmZpZz8uc2lnbmFsPy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRDb25maWcgPSBwYXRjaENvbmZpZyhvdGhlckNvbmZpZ0ZpZWxkcywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdHJlYW0gPSBhd2FpdCBydW5uYWJsZS5zdHJlYW0oaW5wdXQsIGNoaWxkQ29uZmlnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGZpcnN0RXJyb3IgPz8gbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCA9PT0gdW5kZWZpbmVkID8gb3V0cHV0IDogY29uY2F0KG91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbmZpZ0xpc3QubWFwKChjb25maWcpID0+IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIGNvbmZpZ0xpc3RbaV0ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICBjb25maWdMaXN0WzBdLnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IGF3YWl0IHJ1bm5hYmxlLmJhdGNoKGlucHV0cywgcnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBqKSA9PiBwYXRjaENvbmZpZyhjb25maWdMaXN0W2pdLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICB9KSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBpKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHNbaV0sIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpcnN0RXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGVycm9yIHN0b3JlZCBhdCBlbmQgb2YgZmFsbGJhY2tzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZmlyc3RFcnJvcikpKTtcbiAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICB9XG59XG4vLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSB0aGUgY29tcGlsZXIgbmVlZHMgaGVscCBlbGltaW5hdGluZyBFcnJvciBhcyBhIFJ1bk91dHB1dCB0eXBlXG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZVRvUnVubmFibGUoY29lcmNlYWJsZSkge1xuICAgIGlmICh0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVMYW1iZGEoeyBmdW5jOiBjb2VyY2VhYmxlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgIHJldHVybiBjb2VyY2VhYmxlO1xuICAgIH1cbiAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShjb2VyY2VhYmxlKSAmJiB0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zdCBydW5uYWJsZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlc1trZXldID0gX2NvZXJjZVRvUnVubmFibGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVNYXAoe1xuICAgICAgICAgICAgc3RlcHM6IHJ1bm5hYmxlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgUnVubmFibGUsIGZ1bmN0aW9uIG9yIG9iamVjdC5cXG5JbnN0ZWFkIGdvdCBhbiB1bnN1cHBvcnRlZCB0eXBlLmApO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGFzc2lnbnMga2V5LXZhbHVlIHBhaXJzIHRvIGlucHV0cyBvZiB0eXBlIGBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPmAuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUFzc2lnbiBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVBc3NpZ25cIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgaWYgKGZpZWxkcyBpbnN0YW5jZW9mIFJ1bm5hYmxlTWFwKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgbWFwcGVyOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1hcHBlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1hcHBlciA9IGZpZWxkcy5tYXBwZXI7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBtYXBwZXJSZXN1bHQgPSBhd2FpdCB0aGlzLm1hcHBlci5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaW5wdXQsXG4gICAgICAgICAgICAuLi5tYXBwZXJSZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvciwgcnVuTWFuYWdlciwgb3B0aW9ucykge1xuICAgICAgICAvLyBjb2xsZWN0IG1hcHBlciBrZXlzXG4gICAgICAgIGNvbnN0IG1hcHBlcktleXMgPSB0aGlzLm1hcHBlci5nZXRTdGVwc0tleXMoKTtcbiAgICAgICAgLy8gY3JlYXRlIHR3byBpbnB1dCBnZW5zLCBvbmUgZm9yIHRoZSBtYXBwZXIsIG9uZSBmb3IgdGhlIGlucHV0XG4gICAgICAgIGNvbnN0IFtmb3JQYXNzdGhyb3VnaCwgZm9yTWFwcGVyXSA9IGF0ZWUoZ2VuZXJhdG9yKTtcbiAgICAgICAgLy8gY3JlYXRlIG1hcHBlciBvdXRwdXQgZ2VuXG4gICAgICAgIGNvbnN0IG1hcHBlck91dHB1dCA9IHRoaXMubWFwcGVyLnRyYW5zZm9ybShmb3JNYXBwZXIsIHBhdGNoQ29uZmlnKG9wdGlvbnMsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pKTtcbiAgICAgICAgLy8gc3RhcnQgdGhlIG1hcHBlclxuICAgICAgICBjb25zdCBmaXJzdE1hcHBlckNodW5rUHJvbWlzZSA9IG1hcHBlck91dHB1dC5uZXh0KCk7XG4gICAgICAgIC8vIHlpZWxkIHRoZSBwYXNzdGhyb3VnaFxuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGZvclBhc3N0aHJvdWdoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rICE9PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkoY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSdW5uYWJsZUFzc2lnbiBjYW4gb25seSBiZSB1c2VkIHdpdGggb2JqZWN0cyBhcyBpbnB1dCwgZ290ICR7dHlwZW9mIGNodW5rfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY2h1bmspLmZpbHRlcigoW2tleV0pID0+ICFtYXBwZXJLZXlzLmluY2x1ZGVzKGtleSkpKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmaWx0ZXJlZCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGZpbHRlcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHlpZWxkIHRoZSBtYXBwZXIgb3V0cHV0XG4gICAgICAgIHlpZWxkIChhd2FpdCBmaXJzdE1hcHBlckNodW5rUHJvbWlzZSkudmFsdWU7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgbWFwcGVyT3V0cHV0KSB7XG4gICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh7XG4gICAgICAgICAgICBnZW5lcmF0b3I6IHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBjb25maWcpLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGFzc2lnbnMga2V5LXZhbHVlIHBhaXJzIHRvIGlucHV0cyBvZiB0eXBlIGBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPmAuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVBpY2sgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlUGlja1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsga2V5czogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrZXlzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMua2V5cyA9IGZpZWxkcy5rZXlzO1xuICAgIH1cbiAgICBhc3luYyBfcGljayhpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMua2V5cyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0W3RoaXMua2V5c107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwaWNrZWQgPSB0aGlzLmtleXNcbiAgICAgICAgICAgICAgICAubWFwKChrZXkpID0+IFtrZXksIGlucHV0W2tleV1dKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHYpID0+IHZbMV0gIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICByZXR1cm4gcGlja2VkLmxlbmd0aCA9PT0gMCA/IHVuZGVmaW5lZCA6IE9iamVjdC5mcm9tRW50cmllcyhwaWNrZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5fcGljay5iaW5kKHRoaXMpLCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvcikge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgY29uc3QgcGlja2VkID0gYXdhaXQgdGhpcy5fcGljayhjaHVuayk7XG4gICAgICAgICAgICBpZiAocGlja2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBwaWNrZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoe1xuICAgICAgICAgICAgZ2VuZXJhdG9yOiB0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgY29uZmlnKSxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVubmFibGVUb29sTGlrZSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHNlcXVlbmNlID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAgICAgICAgICAgIFJ1bm5hYmxlTGFtYmRhLmZyb20oYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRvb2xJbnB1dDtcbiAgICAgICAgICAgICAgICBpZiAoX2lzVG9vbENhbGwoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sSW5wdXQgPSBhd2FpdCB0aGlzLnNjaGVtYS5wYXJzZUFzeW5jKGlucHV0LmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbihgUmVjZWl2ZWQgdG9vbCBpbnB1dCBkaWQgbm90IG1hdGNoIGV4cGVjdGVkIHNjaGVtYWAsIEpTT04uc3RyaW5naWZ5KGlucHV0LmFyZ3MpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbElucHV0ID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0b29sSW5wdXQ7XG4gICAgICAgICAgICB9KS53aXRoQ29uZmlnKHsgcnVuTmFtZTogYCR7ZmllbGRzLm5hbWV9OnBhcnNlX2lucHV0YCB9KSxcbiAgICAgICAgICAgIGZpZWxkcy5ib3VuZCxcbiAgICAgICAgXSkud2l0aENvbmZpZyh7IHJ1bk5hbWU6IGZpZWxkcy5uYW1lIH0pO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBib3VuZDogc2VxdWVuY2UsXG4gICAgICAgICAgICBjb25maWc6IGZpZWxkcy5jb25maWcgPz8ge30sXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlc2NyaXB0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjaGVtYVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZHMubmFtZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBmaWVsZHMuc2NoZW1hO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVUb29sTGlrZVwiO1xuICAgIH1cbn1cbi8qKlxuICogR2l2ZW4gYSBydW5uYWJsZSBhbmQgYSBab2Qgc2NoZW1hLCBjb252ZXJ0IHRoZSBydW5uYWJsZSB0byBhIHRvb2wuXG4gKlxuICogQHRlbXBsYXRlIFJ1bklucHV0IFRoZSBpbnB1dCB0eXBlIGZvciB0aGUgcnVubmFibGUuXG4gKiBAdGVtcGxhdGUgUnVuT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBmb3IgdGhlIHJ1bm5hYmxlLlxuICpcbiAqIEBwYXJhbSB7UnVubmFibGU8UnVuSW5wdXQsIFJ1bk91dHB1dD59IHJ1bm5hYmxlIFRoZSBydW5uYWJsZSB0byBjb252ZXJ0IHRvIGEgdG9vbC5cbiAqIEBwYXJhbSBmaWVsZHNcbiAqIEBwYXJhbSB7c3RyaW5nIHwgdW5kZWZpbmVkfSBbZmllbGRzLm5hbWVdIFRoZSBuYW1lIG9mIHRoZSB0b29sLiBJZiBub3QgcHJvdmlkZWQsIGl0IHdpbGwgZGVmYXVsdCB0byB0aGUgbmFtZSBvZiB0aGUgcnVubmFibGUuXG4gKiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gW2ZpZWxkcy5kZXNjcmlwdGlvbl0gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLiBGYWxscyBiYWNrIHRvIHRoZSBkZXNjcmlwdGlvbiBvbiB0aGUgWm9kIHNjaGVtYSBpZiBub3QgcHJvdmlkZWQsIG9yIHVuZGVmaW5lZCBpZiBuZWl0aGVyIGFyZSBwcm92aWRlZC5cbiAqIEBwYXJhbSB7ei5ab2RUeXBlPFJ1bklucHV0Pn0gW2ZpZWxkcy5zY2hlbWFdIFRoZSBab2Qgc2NoZW1hIGZvciB0aGUgaW5wdXQgb2YgdGhlIHRvb2wuIEluZmVycyB0aGUgWm9kIHR5cGUgZnJvbSB0aGUgaW5wdXQgdHlwZSBvZiB0aGUgcnVubmFibGUuXG4gKiBAcmV0dXJucyB7UnVubmFibGVUb29sTGlrZTx6LlpvZFR5cGU8UnVuSW5wdXQ+LCBSdW5PdXRwdXQ+fSBBbiBpbnN0YW5jZSBvZiBgUnVubmFibGVUb29sTGlrZWAgd2hpY2ggaXMgYSBydW5uYWJsZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdG9vbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRSdW5uYWJsZVRvVG9vbChydW5uYWJsZSwgZmllbGRzKSB7XG4gICAgY29uc3QgbmFtZSA9IGZpZWxkcy5uYW1lID8/IHJ1bm5hYmxlLmdldE5hbWUoKTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbiA/PyBmaWVsZHMuc2NoZW1hPy5kZXNjcmlwdGlvbjtcbiAgICBpZiAoZmllbGRzLnNjaGVtYS5jb25zdHJ1Y3RvciA9PT0gei5ab2RTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVRvb2xMaWtlKHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHNjaGVtYTogelxuICAgICAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIGlucHV0OiB6LnN0cmluZygpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudHJhbnNmb3JtKChpbnB1dCkgPT4gaW5wdXQuaW5wdXQpLFxuICAgICAgICAgICAgYm91bmQ6IHJ1bm5hYmxlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSdW5uYWJsZVRvb2xMaWtlKHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIHNjaGVtYTogZmllbGRzLnNjaGVtYSxcbiAgICAgICAgYm91bmQ6IHJ1bm5hYmxlLFxuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbInoiLCJwUmV0cnkiLCJ2NCIsInV1aWR2NCIsImlzVHJhY2VhYmxlRnVuY3Rpb24iLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJSdW5Mb2ciLCJSdW5Mb2dQYXRjaCIsImlzTG9nU3RyZWFtSGFuZGxlciIsIkV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiaXNTdHJlYW1FdmVudHNIYW5kbGVyIiwiU2VyaWFsaXphYmxlIiwiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsImNvbmNhdCIsImF0ZWUiLCJwaXBlR2VuZXJhdG9yV2l0aFNldHVwIiwiQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAiLCJyYWNlV2l0aFNpZ25hbCIsIkRFRkFVTFRfUkVDVVJTSU9OX0xJTUlUIiwiZW5zdXJlQ29uZmlnIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwibWVyZ2VDb25maWdzIiwicGF0Y2hDb25maWciLCJBc3luY0NhbGxlciIsIlJvb3RMaXN0ZW5lcnNUcmFjZXIiLCJfUm9vdEV2ZW50RmlsdGVyIiwiaXNSdW5uYWJsZUludGVyZmFjZSIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJHcmFwaCIsImNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbSIsImNvbnN1bWVBc3luY0l0ZXJhYmxlSW5Db250ZXh0IiwiY29uc3VtZUl0ZXJhdG9ySW5Db250ZXh0IiwiaXNBc3luY0l0ZXJhYmxlIiwiaXNJdGVyYWJsZUl0ZXJhdG9yIiwiaXNJdGVyYXRvciIsIl9pc1Rvb2xDYWxsIiwiVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiIsIl9jb2VyY2VUb0RpY3QiLCJ2YWx1ZSIsImRlZmF1bHRLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJEYXRlIiwiUnVubmFibGUiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2V0TmFtZSIsInN1ZmZpeCIsIm5hbWUiLCJsY19uYW1lIiwiYmluZCIsImt3YXJncyIsIlJ1bm5hYmxlQmluZGluZyIsImJvdW5kIiwiY29uZmlnIiwibWFwIiwiUnVubmFibGVFYWNoIiwid2l0aFJldHJ5IiwiZmllbGRzIiwiUnVubmFibGVSZXRyeSIsIm1heEF0dGVtcHROdW1iZXIiLCJzdG9wQWZ0ZXJBdHRlbXB0Iiwid2l0aENvbmZpZyIsIndpdGhGYWxsYmFja3MiLCJmYWxsYmFja3MiLCJSdW5uYWJsZVdpdGhGYWxsYmFja3MiLCJydW5uYWJsZSIsIl9nZXRPcHRpb25zTGlzdCIsIm9wdGlvbnMiLCJsZW5ndGgiLCJFcnJvciIsInJ1bklkIiwiY29uc29sZSIsIndhcm4iLCJzdWJzZXF1ZW50IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiZmlsdGVyIiwia2V5IiwiZnJvbSIsIl8iLCJpIiwiYmF0Y2giLCJpbnB1dHMiLCJiYXRjaE9wdGlvbnMiLCJjb25maWdMaXN0IiwibWF4Q29uY3VycmVuY3kiLCJjYWxsZXIiLCJvbkZhaWxlZEF0dGVtcHQiLCJlIiwiYmF0Y2hDYWxscyIsImlucHV0IiwiY2FsbCIsInJlc3VsdCIsImludm9rZSIsInJldHVybkV4Y2VwdGlvbnMiLCJQcm9taXNlIiwiYWxsIiwiX3N0cmVhbUl0ZXJhdG9yIiwic3RyZWFtIiwid3JhcHBlZEdlbmVyYXRvciIsImdlbmVyYXRvciIsInNldHVwIiwiZnJvbUFzeW5jR2VuZXJhdG9yIiwiX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMiLCJydW5uYWJsZUNvbmZpZyIsInVuZGVmaW5lZCIsImNhbGxiYWNrcyIsInRhZ3MiLCJtZXRhZGF0YSIsInJ1bk5hbWUiLCJyZWN1cnNpb25MaW1pdCIsInRpbWVvdXQiLCJzaWduYWwiLCJjYWxsT3B0aW9ucyIsIl9jYWxsV2l0aENvbmZpZyIsImZ1bmMiLCJjYWxsYmFja01hbmFnZXJfIiwicnVuTWFuYWdlciIsImhhbmRsZUNoYWluU3RhcnQiLCJ0b0pTT04iLCJydW5UeXBlIiwib3V0cHV0IiwicHJvbWlzZSIsImhhbmRsZUNoYWluRXJyb3IiLCJoYW5kbGVDaGFpbkVuZCIsIl9iYXRjaFdpdGhDb25maWciLCJvcHRpb25zTGlzdCIsImNhbGxiYWNrTWFuYWdlcnMiLCJydW5NYW5hZ2VycyIsImNhbGxiYWNrTWFuYWdlciIsImhhbmRsZVN0YXJ0UmVzIiwib3V0cHV0cyIsIl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnIiwiaW5wdXRHZW5lcmF0b3IiLCJ0cmFuc2Zvcm1lciIsImZpbmFsSW5wdXQiLCJmaW5hbElucHV0U3VwcG9ydGVkIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsIndyYXBJbnB1dEZvclRyYWNpbmciLCJjaHVuayIsInBpcGUiLCJzdHJlYW1FdmVudHNIYW5kbGVyIiwiaGFuZGxlcnMiLCJmaW5kIiwiaXRlcmF0b3IiLCJ0YXBPdXRwdXRJdGVyYWJsZSIsInN0cmVhbUxvZ0hhbmRsZXIiLCJnZXRHcmFwaCIsImdyYXBoIiwiaW5wdXROb2RlIiwiYWRkTm9kZSIsInNjaGVtYSIsImFueSIsInJ1bm5hYmxlTm9kZSIsIm91dHB1dE5vZGUiLCJhZGRFZGdlIiwiY29lcmNlYWJsZSIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJmaXJzdCIsImxhc3QiLCJfY29lcmNlVG9SdW5uYWJsZSIsInBpY2siLCJrZXlzIiwiUnVubmFibGVQaWNrIiwiYXNzaWduIiwibWFwcGluZyIsIlJ1bm5hYmxlQXNzaWduIiwiUnVubmFibGVNYXAiLCJzdGVwcyIsInRyYW5zZm9ybSIsImZpbmFsQ2h1bmsiLCJzdHJlYW1Mb2ciLCJzdHJlYW1PcHRpb25zIiwibG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiX3NjaGVtYUZvcm1hdCIsIl9zdHJlYW1Mb2ciLCJjb3BpZWRDYWxsYmFja3MiLCJjb3B5IiwiYWRkSGFuZGxlciIsInJ1bm5hYmxlU3RyZWFtUHJvbWlzZSIsImNvbnN1bWVSdW5uYWJsZVN0cmVhbSIsInJ1bm5hYmxlU3RyZWFtIiwicGF0Y2giLCJvcHMiLCJvcCIsInBhdGgiLCJ3cml0ZXIiLCJ3cml0ZSIsImNsb3NlIiwicnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSIsImxvZyIsInN0cmVhbUV2ZW50cyIsInZlcnNpb24iLCJfc3RyZWFtRXZlbnRzVjEiLCJfc3RyZWFtRXZlbnRzVjIiLCJlbmNvZGluZyIsImV2ZW50U3RyZWFtZXIiLCJvdXRlclRoaXMiLCJ0YXBwZWRTdHJlYW0iLCJmaW5pc2giLCJmaXJzdEV2ZW50U2VudCIsImZpcnN0RXZlbnRSdW5JZCIsImV2ZW50IiwiZGF0YSIsInJ1bl9pZCIsImVuZHNXaXRoIiwicnVuTG9nIiwiaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50Iiwicm9vdFRhZ3MiLCJyb290TWV0YWRhdGEiLCJyb290TmFtZSIsInJvb3RFdmVudEZpbHRlciIsImxvZ1N0cmVhbSIsImZyb21SdW5Mb2dQYXRjaCIsInN0YXRlIiwiaWQiLCJ0eXBlIiwiaW5jbHVkZUV2ZW50IiwicGF0aHMiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJkZWR1cGVkUGF0aHMiLCJTZXQiLCJldmVudFR5cGUiLCJsb2dFbnRyeSIsImxvZ3MiLCJlbmRfdGltZSIsInN0cmVhbWVkX291dHB1dCIsImZpbmFsX291dHB1dCIsImNodW5rQ291bnQiLCJpc1J1bm5hYmxlIiwidGhpbmciLCJ3aXRoTGlzdGVuZXJzIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsImNvbmZpZ0ZhY3RvcmllcyIsImFzVG9vbCIsImNvbnZlcnRSdW5uYWJsZVRvVG9vbCIsIl9tZXJnZUNvbmZpZyIsImNvbmZpZ0ZhY3RvcnkiLCJtZXJnZWRPcHRpb25zIiwiaW5kaXZpZHVhbE9wdGlvbiIsImlzUnVubmFibGVCaW5kaW5nIiwiX2ludm9rZSIsImdldENoaWxkIiwiX3BhdGNoQ29uZmlnRm9yUmV0cnkiLCJhdHRlbXB0IiwidGFnIiwiYXR0ZW1wdE51bWJlciIsImVycm9yIiwicmV0cmllcyIsIk1hdGgiLCJtYXgiLCJyYW5kb21pemUiLCJfYmF0Y2giLCJjb25maWdzIiwicmVzdWx0c01hcCIsInJlbWFpbmluZ0luZGV4ZXMiLCJ0b1N0cmluZyIsInJlbWFpbmluZ0lucHV0cyIsInBhdGNoZWRDb25maWdzIiwicmVzdWx0cyIsImZpcnN0RXhjZXB0aW9uIiwicmVzdWx0TWFwSW5kZXgiLCJzb3J0IiwiYSIsImIiLCJwYXJzZUludCIsIm1pZGRsZSIsIm5leHRTdGVwSW5wdXQiLCJpbml0aWFsU3RlcHMiLCJzdGVwIiwiYWJvcnRlZCIsIm5leHRTdGVwSW5wdXRzIiwiaiIsImNoaWxkUnVuTWFuYWdlciIsIm90aGVyT3B0aW9ucyIsImNvbmNhdFN1cHBvcnRlZCIsImZpbmFsR2VuZXJhdG9yIiwidGhyb3dJZkFib3J0ZWQiLCJjdXJyZW50TGFzdE5vZGUiLCJmb3JFYWNoIiwiaW5kZXgiLCJzdGVwR3JhcGgiLCJ0cmltRmlyc3ROb2RlIiwidHJpbUxhc3ROb2RlIiwiZXh0ZW5kIiwic3RlcEZpcnN0Tm9kZSIsImZpcnN0Tm9kZSIsImxhc3ROb2RlIiwiaXNSdW5uYWJsZVNlcXVlbmNlIiwicnVubmFibGVzIiwic2xpY2UiLCJnZXRTdGVwc0tleXMiLCJwcm9taXNlcyIsIl90cmFuc2Zvcm0iLCJpbnB1dENvcGllcyIsInRhc2tzIiwiTWFwIiwiZ2VuIiwibmV4dCIsInRoZW4iLCJzaXplIiwicmFjZSIsInZhbHVlcyIsImRlbGV0ZSIsImRvbmUiLCJzZXQiLCJSdW5uYWJsZVRyYWNlYWJsZSIsIml0ZW0iLCJhc3NlcnROb25UcmFjZWFibGVGdW5jdGlvbiIsIlJ1bm5hYmxlTGFtYmRhIiwicmVzb2x2ZSIsInJlamVjdCIsImNoaWxkQ29uZmlnIiwicnVuV2l0aENvbmZpZyIsInJlcyIsIlJ1bm5hYmxlUGFyYWxsZWwiLCJmYWxsYmFjayIsIm90aGVyQ29uZmlnRmllbGRzIiwiZmlyc3RFcnJvciIsIm1hcHBlciIsIm1hcHBlclJlc3VsdCIsIm1hcHBlcktleXMiLCJmb3JQYXNzdGhyb3VnaCIsImZvck1hcHBlciIsIm1hcHBlck91dHB1dCIsImZpcnN0TWFwcGVyQ2h1bmtQcm9taXNlIiwiZmlsdGVyZWQiLCJpbmNsdWRlcyIsIl9waWNrIiwicGlja2VkIiwidiIsIlJ1bm5hYmxlVG9vbExpa2UiLCJzZXF1ZW5jZSIsInRvb2xJbnB1dCIsInBhcnNlQXN5bmMiLCJhcmdzIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlc2NyaXB0aW9uIiwiWm9kU3RyaW5nIiwib2JqZWN0Iiwic3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/config.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/config.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager._configureSync(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // We do not want to call ensureConfig on the empty state here as this may cause\n    // double loading of callbacks if async local storage is being used.\n    const copy = {};\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                const baseKeys = copy[key] ?? [];\n                copy[key] = [\n                    ...new Set(baseKeys.concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"timeout\") {\n                if (copy.timeout === undefined) {\n                    copy.timeout = options.timeout;\n                } else if (options.timeout !== undefined) {\n                    copy.timeout = Math.min(copy.timeout, options.timeout);\n                }\n            } else if (key === \"signal\") {\n                if (copy.signal === undefined) {\n                    copy.signal = options.signal;\n                } else if (options.signal !== undefined) {\n                    if (\"any\" in AbortSignal) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        copy.signal = AbortSignal.any([\n                            copy.signal,\n                            options.signal\n                        ]);\n                    } else {\n                        copy.signal = options.signal;\n                    }\n                }\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n */ function ensureConfig(config) {\n    const implicitConfig = _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getRunnableConfig();\n    let empty = {\n        tags: [],\n        metadata: {},\n        recursionLimit: 25,\n        runId: undefined\n    };\n    if (implicitConfig) {\n        // Don't allow runId and runName to be loaded implicitly, as this can cause\n        // child runs to improperly inherit their parents' run ids.\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { runId, runName, ...rest } = implicitConfig;\n        empty = Object.entries(rest).reduce(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (currentConfig, [key, value])=>{\n            if (value !== undefined) {\n                // eslint-disable-next-line no-param-reassign\n                currentConfig[key] = value;\n            }\n            return currentConfig;\n        }, empty);\n    }\n    if (config) {\n        empty = Object.entries(config).reduce(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (currentConfig, [key, value])=>{\n            if (value !== undefined) {\n                // eslint-disable-next-line no-param-reassign\n                currentConfig[key] = value;\n            }\n            return currentConfig;\n        }, empty);\n    }\n    if (empty?.configurable) {\n        for (const key of Object.keys(empty.configurable)){\n            if (PRIMITIVES.has(typeof empty.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = empty.configurable[key];\n            }\n        }\n    }\n    if (empty.timeout !== undefined) {\n        if (empty.timeout <= 0) {\n            throw new Error(\"Timeout must be a positive number\");\n        }\n        const timeoutSignal = AbortSignal.timeout(empty.timeout);\n        if (empty.signal !== undefined) {\n            if (\"any\" in AbortSignal) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                empty.signal = AbortSignal.any([\n                    empty.signal,\n                    timeoutSignal\n                ]);\n            }\n        } else {\n            empty.signal = timeoutSignal;\n        }\n        delete empty.timeout;\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable, runId } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    if (runId !== undefined) {\n        delete newConfig.runId;\n    }\n    return newConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBeUU7QUFDRztBQUNyRSxNQUFNRywwQkFBMEIsR0FBRztBQUNuQyxlQUFlQyw0QkFBNEJDLE1BQU07SUFDcEQsT0FBT0wsa0VBQWVBLENBQUNNLGNBQWMsQ0FBQ0QsUUFBUUUsV0FBV0MsV0FBV0gsUUFBUUksTUFBTUQsV0FBV0gsUUFBUUs7QUFDekc7QUFDTyxTQUFTQyxhQUFhLEdBQUdDLE9BQU87SUFDbkMsZ0ZBQWdGO0lBQ2hGLG9FQUFvRTtJQUNwRSxNQUFNQyxPQUFPLENBQUM7SUFDZCxLQUFLLE1BQU1DLFdBQVdGLFFBQVFHLE1BQU0sQ0FBQyxDQUFDQyxJQUFNLENBQUMsQ0FBQ0EsR0FBSTtRQUM5QyxLQUFLLE1BQU1DLE9BQU9DLE9BQU9DLElBQUksQ0FBQ0wsU0FBVTtZQUNwQyxJQUFJRyxRQUFRLFlBQVk7Z0JBQ3BCSixJQUFJLENBQUNJLElBQUksR0FBRztvQkFBRSxHQUFHSixJQUFJLENBQUNJLElBQUk7b0JBQUUsR0FBR0gsT0FBTyxDQUFDRyxJQUFJO2dCQUFDO1lBQ2hELE9BQ0ssSUFBSUEsUUFBUSxRQUFRO2dCQUNyQixNQUFNRyxXQUFXUCxJQUFJLENBQUNJLElBQUksSUFBSSxFQUFFO2dCQUNoQ0osSUFBSSxDQUFDSSxJQUFJLEdBQUc7dUJBQUksSUFBSUksSUFBSUQsU0FBU0UsTUFBTSxDQUFDUixPQUFPLENBQUNHLElBQUksSUFBSSxFQUFFO2lCQUFHO1lBQ2pFLE9BQ0ssSUFBSUEsUUFBUSxnQkFBZ0I7Z0JBQzdCSixJQUFJLENBQUNJLElBQUksR0FBRztvQkFBRSxHQUFHSixJQUFJLENBQUNJLElBQUk7b0JBQUUsR0FBR0gsT0FBTyxDQUFDRyxJQUFJO2dCQUFDO1lBQ2hELE9BQ0ssSUFBSUEsUUFBUSxXQUFX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QUM5QnFELFVBQVVkLGNBQWMsR0FBR0E7SUFDL0I7SUFDQSxJQUFJYSxtQkFBbUJwRCxXQUFXO1FBQzlCcUQsVUFBVUQsY0FBYyxHQUFHQTtJQUMvQjtJQUNBLElBQUlYLFlBQVl6QyxXQUFXO1FBQ3ZCcUQsVUFBVVosT0FBTyxHQUFHQTtJQUN4QjtJQUNBLElBQUlNLGlCQUFpQi9DLFdBQVc7UUFDNUJxRCxVQUFVTixZQUFZLEdBQUc7WUFBRSxHQUFHTSxVQUFVTixZQUFZO1lBQUUsR0FBR0EsWUFBWTtRQUFDO0lBQzFFO0lBQ0EsSUFBSVAsVUFBVXhDLFdBQVc7UUFDckIsT0FBT3FELFVBQVViLEtBQUs7SUFDMUI7SUFDQSxPQUFPYTtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvY29uZmlnLmpzPzNmYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyLCBlbnN1cmVIYW5kbGVyIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCA9IDI1O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpIHtcbiAgICByZXR1cm4gQ2FsbGJhY2tNYW5hZ2VyLl9jb25maWd1cmVTeW5jKGNvbmZpZz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIGNvbmZpZz8udGFncywgdW5kZWZpbmVkLCBjb25maWc/Lm1ldGFkYXRhKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbmZpZ3MoLi4uY29uZmlncykge1xuICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIGNhbGwgZW5zdXJlQ29uZmlnIG9uIHRoZSBlbXB0eSBzdGF0ZSBoZXJlIGFzIHRoaXMgbWF5IGNhdXNlXG4gICAgLy8gZG91YmxlIGxvYWRpbmcgb2YgY2FsbGJhY2tzIGlmIGFzeW5jIGxvY2FsIHN0b3JhZ2UgaXMgYmVpbmcgdXNlZC5cbiAgICBjb25zdCBjb3B5ID0ge307XG4gICAgZm9yIChjb25zdCBvcHRpb25zIG9mIGNvbmZpZ3MuZmlsdGVyKChjKSA9PiAhIWMpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcIm1ldGFkYXRhXCIpIHtcbiAgICAgICAgICAgICAgICBjb3B5W2tleV0gPSB7IC4uLmNvcHlba2V5XSwgLi4ub3B0aW9uc1trZXldIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwidGFnc1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUtleXMgPSBjb3B5W2tleV0gPz8gW107XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0gWy4uLm5ldyBTZXQoYmFzZUtleXMuY29uY2F0KG9wdGlvbnNba2V5XSA/PyBbXSkpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJjb25maWd1cmFibGVcIikge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHsgLi4uY29weVtrZXldLCAuLi5vcHRpb25zW2tleV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJ0aW1lb3V0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29weS50aW1lb3V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29weS50aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb3B5LnRpbWVvdXQgPSBNYXRoLm1pbihjb3B5LnRpbWVvdXQsIG9wdGlvbnMudGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcInNpZ25hbFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvcHkuc2lnbmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29weS5zaWduYWwgPSBvcHRpb25zLnNpZ25hbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5zaWduYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJhbnlcIiBpbiBBYm9ydFNpZ25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuc2lnbmFsID0gQWJvcnRTaWduYWwuYW55KFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5LnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5zaWduYWwgPSBvcHRpb25zLnNpZ25hbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJjYWxsYmFja3NcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VDYWxsYmFja3MgPSBjb3B5LmNhbGxiYWNrcztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlZENhbGxiYWNrcyA9IG9wdGlvbnMuY2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrcyBjYW4gYmUgZWl0aGVyIHVuZGVmaW5lZCwgQXJyYXk8aGFuZGxlcj4gb3IgbWFuYWdlclxuICAgICAgICAgICAgICAgIC8vIHNvIG1lcmdpbmcgdHdvIGNhbGxiYWNrcyB2YWx1ZXMgaGFzIDYgY2FzZXNcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm92aWRlZENhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IHByb3ZpZGVkQ2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYmFzZUNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gYmFzZUNhbGxiYWNrcy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFzZUNhbGxiYWNrcyBpcyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZXIgPSBiYXNlQ2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgcHJvdmlkZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIoZW5zdXJlSGFuZGxlcihjYWxsYmFjayksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBtYW5hZ2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3ZpZGVkQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3ZpZGVkQ2FsbGJhY2tzIGlzIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gcHJvdmlkZWRDYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiYXNlQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFuYWdlciA9IHByb3ZpZGVkQ2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihlbnN1cmVIYW5kbGVyKGNhbGxiYWNrKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG1hbmFnZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlQ2FsbGJhY2tzIGlzIGFsc28gYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG5ldyBDYWxsYmFja01hbmFnZXIocHJvdmlkZWRDYWxsYmFja3MuX3BhcmVudFJ1bklkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnM6IGJhc2VDYWxsYmFja3MuaGFuZGxlcnMuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmhhbmRsZXJzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0YWJsZUhhbmRsZXJzOiBiYXNlQ2FsbGJhY2tzLmluaGVyaXRhYmxlSGFuZGxlcnMuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmluaGVyaXRhYmxlSGFuZGxlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLnRhZ3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLnRhZ3MpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGFibGVUYWdzOiBBcnJheS5mcm9tKG5ldyBTZXQoYmFzZUNhbGxiYWNrcy5pbmhlcml0YWJsZVRhZ3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmluaGVyaXRhYmxlVGFncykpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iYXNlQ2FsbGJhY2tzLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm92aWRlZENhbGxiYWNrcy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBjb3B5W3R5cGVkS2V5XSA9IG9wdGlvbnNbdHlwZWRLZXldID8/IGNvcHlbdHlwZWRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xufVxuY29uc3QgUFJJTUlUSVZFUyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYm9vbGVhblwiXSk7XG4vKipcbiAqIEVuc3VyZSB0aGF0IGEgcGFzc2VkIGNvbmZpZyBpcyBhbiBvYmplY3Qgd2l0aCBhbGwgcmVxdWlyZWQga2V5cyBwcmVzZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlQ29uZmlnKGNvbmZpZykge1xuICAgIGNvbnN0IGltcGxpY2l0Q29uZmlnID0gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRSdW5uYWJsZUNvbmZpZygpO1xuICAgIGxldCBlbXB0eSA9IHtcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgICAgcmVjdXJzaW9uTGltaXQ6IDI1LFxuICAgICAgICBydW5JZDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgaWYgKGltcGxpY2l0Q29uZmlnKSB7XG4gICAgICAgIC8vIERvbid0IGFsbG93IHJ1bklkIGFuZCBydW5OYW1lIHRvIGJlIGxvYWRlZCBpbXBsaWNpdGx5LCBhcyB0aGlzIGNhbiBjYXVzZVxuICAgICAgICAvLyBjaGlsZCBydW5zIHRvIGltcHJvcGVybHkgaW5oZXJpdCB0aGVpciBwYXJlbnRzJyBydW4gaWRzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgIGNvbnN0IHsgcnVuSWQsIHJ1bk5hbWUsIC4uLnJlc3QgfSA9IGltcGxpY2l0Q29uZmlnO1xuICAgICAgICBlbXB0eSA9IE9iamVjdC5lbnRyaWVzKHJlc3QpLnJlZHVjZShcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgKGN1cnJlbnRDb25maWcsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICBjdXJyZW50Q29uZmlnW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50Q29uZmlnO1xuICAgICAgICB9LCBlbXB0eSk7XG4gICAgfVxuICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgZW1wdHkgPSBPYmplY3QuZW50cmllcyhjb25maWcpLnJlZHVjZShcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgKGN1cnJlbnRDb25maWcsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICBjdXJyZW50Q29uZmlnW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50Q29uZmlnO1xuICAgICAgICB9LCBlbXB0eSk7XG4gICAgfVxuICAgIGlmIChlbXB0eT8uY29uZmlndXJhYmxlKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGVtcHR5LmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgICAgICAgIGlmIChQUklNSVRJVkVTLmhhcyh0eXBlb2YgZW1wdHkuY29uZmlndXJhYmxlW2tleV0pICYmXG4gICAgICAgICAgICAgICAgIWVtcHR5Lm1ldGFkYXRhPy5ba2V5XSkge1xuICAgICAgICAgICAgICAgIGlmICghZW1wdHkubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1wdHkubWV0YWRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZW1wdHkubWV0YWRhdGFba2V5XSA9IGVtcHR5LmNvbmZpZ3VyYWJsZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChlbXB0eS50aW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGVtcHR5LnRpbWVvdXQgPD0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGltZW91dCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRpbWVvdXRTaWduYWwgPSBBYm9ydFNpZ25hbC50aW1lb3V0KGVtcHR5LnRpbWVvdXQpO1xuICAgICAgICBpZiAoZW1wdHkuc2lnbmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChcImFueVwiIGluIEFib3J0U2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBlbXB0eS5zaWduYWwgPSBBYm9ydFNpZ25hbC5hbnkoW2VtcHR5LnNpZ25hbCwgdGltZW91dFNpZ25hbF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW1wdHkuc2lnbmFsID0gdGltZW91dFNpZ25hbDtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgZW1wdHkudGltZW91dDtcbiAgICB9XG4gICAgcmV0dXJuIGVtcHR5O1xufVxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBwYXRjaGVzIHJ1bm5hYmxlIGNvbmZpZ3Mgd2l0aCB1cGRhdGVkIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaENvbmZpZyhjb25maWcgPSB7fSwgeyBjYWxsYmFja3MsIG1heENvbmN1cnJlbmN5LCByZWN1cnNpb25MaW1pdCwgcnVuTmFtZSwgY29uZmlndXJhYmxlLCBydW5JZCwgfSA9IHt9KSB7XG4gICAgY29uc3QgbmV3Q29uZmlnID0gZW5zdXJlQ29uZmlnKGNvbmZpZyk7XG4gICAgaWYgKGNhbGxiYWNrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSdyZSByZXBsYWNpbmcgY2FsbGJhY2tzIHdlIG5lZWQgdG8gdW5zZXQgcnVuTmFtZVxuICAgICAgICAgKiBzaW5jZSB0aGF0IHNob3VsZCBhcHBseSBvbmx5IHRvIHRoZSBzYW1lIHJ1biBhcyB0aGUgb3JpZ2luYWwgY2FsbGJhY2tzXG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGUgbmV3Q29uZmlnLnJ1bk5hbWU7XG4gICAgICAgIG5ld0NvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3M7XG4gICAgfVxuICAgIGlmIChyZWN1cnNpb25MaW1pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5yZWN1cnNpb25MaW1pdCA9IHJlY3Vyc2lvbkxpbWl0O1xuICAgIH1cbiAgICBpZiAobWF4Q29uY3VycmVuY3kgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcubWF4Q29uY3VycmVuY3kgPSBtYXhDb25jdXJyZW5jeTtcbiAgICB9XG4gICAgaWYgKHJ1bk5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcucnVuTmFtZSA9IHJ1bk5hbWU7XG4gICAgfVxuICAgIGlmIChjb25maWd1cmFibGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcuY29uZmlndXJhYmxlID0geyAuLi5uZXdDb25maWcuY29uZmlndXJhYmxlLCAuLi5jb25maWd1cmFibGUgfTtcbiAgICB9XG4gICAgaWYgKHJ1bklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVsZXRlIG5ld0NvbmZpZy5ydW5JZDtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0NvbmZpZztcbn1cbiJdLCJuYW1lcyI6WyJDYWxsYmFja01hbmFnZXIiLCJlbnN1cmVIYW5kbGVyIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsIkRFRkFVTFRfUkVDVVJTSU9OX0xJTUlUIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwiY29uZmlnIiwiX2NvbmZpZ3VyZVN5bmMiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJ0YWdzIiwibWV0YWRhdGEiLCJtZXJnZUNvbmZpZ3MiLCJjb25maWdzIiwiY29weSIsIm9wdGlvbnMiLCJmaWx0ZXIiLCJjIiwia2V5IiwiT2JqZWN0Iiwia2V5cyIsImJhc2VLZXlzIiwiU2V0IiwiY29uY2F0IiwidGltZW91dCIsIk1hdGgiLCJtaW4iLCJzaWduYWwiLCJBYm9ydFNpZ25hbCIsImFueSIsImJhc2VDYWxsYmFja3MiLCJwcm92aWRlZENhbGxiYWNrcyIsIkFycmF5IiwiaXNBcnJheSIsIm1hbmFnZXIiLCJjYWxsYmFjayIsImFkZEhhbmRsZXIiLCJfcGFyZW50UnVuSWQiLCJoYW5kbGVycyIsImluaGVyaXRhYmxlSGFuZGxlcnMiLCJmcm9tIiwiaW5oZXJpdGFibGVUYWdzIiwidHlwZWRLZXkiLCJQUklNSVRJVkVTIiwiZW5zdXJlQ29uZmlnIiwiaW1wbGljaXRDb25maWciLCJnZXRSdW5uYWJsZUNvbmZpZyIsImVtcHR5IiwicmVjdXJzaW9uTGltaXQiLCJydW5JZCIsInJ1bk5hbWUiLCJyZXN0IiwiZW50cmllcyIsInJlZHVjZSIsImN1cnJlbnRDb25maWciLCJ2YWx1ZSIsImNvbmZpZ3VyYWJsZSIsImhhcyIsIkVycm9yIiwidGltZW91dFNpZ25hbCIsInBhdGNoQ29uZmlnIiwibWF4Q29uY3VycmVuY3kiLCJuZXdDb25maWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graph_mermaid.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph_mermaid.js\");\n\n\n\n\nconst MAX_DATA_DISPLAY_NAME_LENGTH = 42;\nfunction nodeDataStr(node) {\n    if (!(0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(node.id)) {\n        return node.id;\n    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        try {\n            let data = node.data.getName();\n            data = data.startsWith(\"Runnable\") ? data.slice(\"Runnable\".length) : data;\n            if (data.length > MAX_DATA_DISPLAY_NAME_LENGTH) {\n                data = `${data.substring(0, MAX_DATA_DISPLAY_NAME_LENGTH)}...`;\n            }\n            return data;\n        } catch (error) {\n            return node.data.getName();\n        }\n    } else {\n        return node.data.name ?? \"UnknownSchema\";\n    }\n}\nfunction nodeDataJson(node) {\n    // if node.data is implements Runnable\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        return {\n            type: \"runnable\",\n            data: {\n                id: node.data.lc_id,\n                name: node.data.getName()\n            }\n        };\n    } else {\n        return {\n            type: \"schema\",\n            data: {\n                ...(0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(node.data.schema),\n                title: node.data.name\n            }\n        };\n    }\n}\nclass Graph {\n    constructor(){\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    // Convert the graph to a JSON-serializable format.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const stableNodeIds = {};\n        Object.values(this.nodes).forEach((node, i)=>{\n            stableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(node.id) ? i : node.id;\n        });\n        return {\n            nodes: Object.values(this.nodes).map((node)=>({\n                    id: stableNodeIds[node.id],\n                    ...nodeDataJson(node)\n                })),\n            edges: this.edges.map((edge)=>{\n                const item = {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target]\n                };\n                if (typeof edge.data !== \"undefined\") {\n                    item.data = edge.data;\n                }\n                if (typeof edge.conditional !== \"undefined\") {\n                    item.conditional = edge.conditional;\n                }\n                return item;\n            })\n        };\n    }\n    addNode(data, id) {\n        if (id !== undefined && this.nodes[id] !== undefined) {\n            throw new Error(`Node with id ${id} already exists`);\n        }\n        const nodeId = id || (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const node = {\n            id: nodeId,\n            data\n        };\n        this.nodes[nodeId] = node;\n        return node;\n    }\n    removeNode(node) {\n        // Remove the node from the nodes map\n        delete this.nodes[node.id];\n        // Filter out edges connected to the node\n        this.edges = this.edges.filter((edge)=>edge.source !== node.id && edge.target !== node.id);\n    }\n    addEdge(source, target, data, conditional) {\n        if (this.nodes[source.id] === undefined) {\n            throw new Error(`Source node ${source.id} not in graph`);\n        }\n        if (this.nodes[target.id] === undefined) {\n            throw new Error(`Target node ${target.id} not in graph`);\n        }\n        const edge = {\n            source: source.id,\n            target: target.id,\n            data,\n            conditional\n        };\n        this.edges.push(edge);\n        return edge;\n    }\n    firstNode() {\n        const targets = new Set(this.edges.map((edge)=>edge.target));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!targets.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    lastNode() {\n        const sources = new Set(this.edges.map((edge)=>edge.source));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!sources.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    /**\n     * Add all nodes and edges from another graph.\n     * Note this doesn't check for duplicates, nor does it connect the graphs.\n     */ extend(graph, prefix = \"\") {\n        let finalPrefix = prefix;\n        const nodeIds = Object.values(graph.nodes).map((node)=>node.id);\n        if (nodeIds.every(uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])) {\n            finalPrefix = \"\";\n        }\n        const prefixed = (id)=>{\n            return finalPrefix ? `${finalPrefix}:${id}` : id;\n        };\n        Object.entries(graph.nodes).forEach(([key, value])=>{\n            this.nodes[prefixed(key)] = {\n                ...value,\n                id: prefixed(key)\n            };\n        });\n        const newEdges = graph.edges.map((edge)=>{\n            return {\n                ...edge,\n                source: prefixed(edge.source),\n                target: prefixed(edge.target)\n            };\n        });\n        // Add all edges from the other graph\n        this.edges = [\n            ...this.edges,\n            ...newEdges\n        ];\n        const first = graph.firstNode();\n        const last = graph.lastNode();\n        return [\n            first ? {\n                id: prefixed(first.id),\n                data: first.data\n            } : undefined,\n            last ? {\n                id: prefixed(last.id),\n                data: last.data\n            } : undefined\n        ];\n    }\n    trimFirstNode() {\n        const firstNode = this.firstNode();\n        if (firstNode) {\n            const outgoingEdges = this.edges.filter((edge)=>edge.source === firstNode.id);\n            if (Object.keys(this.nodes).length === 1 || outgoingEdges.length === 1) {\n                this.removeNode(firstNode);\n            }\n        }\n    }\n    trimLastNode() {\n        const lastNode = this.lastNode();\n        if (lastNode) {\n            const incomingEdges = this.edges.filter((edge)=>edge.target === lastNode.id);\n            if (Object.keys(this.nodes).length === 1 || incomingEdges.length === 1) {\n                this.removeNode(lastNode);\n            }\n        }\n    }\n    drawMermaid(params) {\n        const { withStyles, curveStyle, nodeColors = {\n            start: \"#ffdfba\",\n            end: \"#baffc9\",\n            other: \"#fad7de\"\n        }, wrapLabelNWords } = params ?? {};\n        const nodes = {};\n        for (const node of Object.values(this.nodes)){\n            nodes[node.id] = nodeDataStr(node);\n        }\n        const firstNode = this.firstNode();\n        const firstNodeLabel = firstNode ? nodeDataStr(firstNode) : undefined;\n        const lastNode = this.lastNode();\n        const lastNodeLabel = lastNode ? nodeDataStr(lastNode) : undefined;\n        return (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__.drawMermaid)(nodes, this.edges, {\n            firstNodeLabel,\n            lastNodeLabel,\n            withStyles,\n            curveStyle,\n            nodeColors,\n            wrapLabelNWords\n        });\n    }\n    async drawMermaidPng(params) {\n        const mermaidSyntax = this.drawMermaid(params);\n        return (0,_graph_mermaid_js__WEBPACK_IMPORTED_MODULE_2__.drawMermaidPng)(mermaidSyntax, {\n            backgroundColor: params?.backgroundColor\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvZ3JhcGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXFEO0FBQ0c7QUFDUDtBQUNnQjtBQUNqRSxNQUFNUSwrQkFBK0I7QUFDckMsU0FBU0MsWUFBWUMsSUFBSTtJQUNyQixJQUFJLENBQUNOLGdEQUFNQSxDQUFDTSxLQUFLQyxFQUFFLEdBQUc7UUFDbEIsT0FBT0QsS0FBS0MsRUFBRTtJQUNsQixPQUNLLElBQUlOLDhEQUFtQkEsQ0FBQ0ssS0FBS0UsSUFBSSxHQUFHO1FBQ3JDLElBQUk7WUFDQSxJQUFJQSxPQUFPRixLQUFLRSxJQUFJLENBQUNDLE9BQU87WUFDNUJELE9BQU9BLEtBQUtFLFVBQVUsQ0FBQyxjQUFjRixLQUFLRyxLQUFLLENBQUMsV0FBV0MsTUFBTSxJQUFJSjtZQUNyRSxJQUFJQSxLQUFLSSxNQUFNLEdBQUdSLDhCQUE4QjtnQkFDNUNJLE9BQU8sQ0FBQyxFQUFFQSxLQUFLSyxTQUFTLENBQUMsR0FBR1QsOEJBQThCLEdBQUcsQ0FBQztZQUNsRTtZQUNBLE9BQU9JO1FBQ1gsRUFDQSxPQUFPTSxPQUFPO1lBQ1YsT0FBT1IsS0FBS0UsSUFBSSxDQUFDQyxPQUFPO1FBQzVCO0lBQ0osT0FDSztRQUNELE9BQU9ILEtBQUtFLElBQUksQ0FBQ08sSUFBSSxJQUFJO0lBQzdCO0FBQ0o7QUFDQSxTQUFTQyxhQUFhVixJQUFJO0lBQ3RCLHNDQUFzQztJQUN0QyxJQUFJTCw4REFBbUJBLENBQUNLLEtBQUtFLElBQUksR0FBRztRQUNoQyxPQUFPO1lBQ0hTLE1BQU07WUFDTlQsTUFBTTtnQkFDRkQsSUFBSUQsS0FBS0UsSUFBSSxDQUFDVSxLQUFLO2dCQUNuQkgsTUFBTVQsS0FBS0UsSUFBSSxDQUFDQyxPQUFPO1lBQzNCO1FBQ0o7SUFDSixPQUNLO1FBQ0QsT0FBTztZQUNIUSxNQUFNO1lB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WSxJQUFJLENBQUNBLFNBQVM7UUFDaEMsTUFBTWdDLGlCQUFpQmhDLFlBQVk3QyxZQUFZNkMsYUFBYVA7UUFDNUQsTUFBTVksV0FBVyxJQUFJLENBQUNBLFFBQVE7UUFDOUIsTUFBTTRCLGdCQUFnQjVCLFdBQVdsRCxZQUFZa0QsWUFBWVo7UUFDekQsT0FBT3pDLDhEQUFXQSxDQUFDOEIsT0FBTyxJQUFJLENBQUNJLEtBQUssRUFBRTtZQUNsQzhDO1lBQ0FDO1lBQ0FSO1lBQ0FDO1lBQ0FDO1lBQ0FJO1FBQ0o7SUFDSjtJQUNBLE1BQU05RSxlQUFldUUsTUFBTSxFQUFFO1FBQ3pCLE1BQU1VLGdCQUFnQixJQUFJLENBQUNsRixXQUFXLENBQUN3RTtRQUN2QyxPQUFPdkUsaUVBQWNBLENBQUNpRixlQUFlO1lBQ2pDQyxpQkFBaUJYLFFBQVFXO1FBQzdCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzPzI5NGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcInpvZC10by1qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0LCB2YWxpZGF0ZSBhcyBpc1V1aWQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgaXNSdW5uYWJsZUludGVyZmFjZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBkcmF3TWVybWFpZCwgZHJhd01lcm1haWRQbmcgfSBmcm9tIFwiLi9ncmFwaF9tZXJtYWlkLmpzXCI7XG5jb25zdCBNQVhfREFUQV9ESVNQTEFZX05BTUVfTEVOR1RIID0gNDI7XG5mdW5jdGlvbiBub2RlRGF0YVN0cihub2RlKSB7XG4gICAgaWYgKCFpc1V1aWQobm9kZS5pZCkpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuaWQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUnVubmFibGVJbnRlcmZhY2Uobm9kZS5kYXRhKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBub2RlLmRhdGEuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgZGF0YSA9IGRhdGEuc3RhcnRzV2l0aChcIlJ1bm5hYmxlXCIpID8gZGF0YS5zbGljZShcIlJ1bm5hYmxlXCIubGVuZ3RoKSA6IGRhdGE7XG4gICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiBNQVhfREFUQV9ESVNQTEFZX05BTUVfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGAke2RhdGEuc3Vic3RyaW5nKDAsIE1BWF9EQVRBX0RJU1BMQVlfTkFNRV9MRU5HVEgpfS4uLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmRhdGEuZ2V0TmFtZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9kZS5kYXRhLm5hbWUgPz8gXCJVbmtub3duU2NoZW1hXCI7XG4gICAgfVxufVxuZnVuY3Rpb24gbm9kZURhdGFKc29uKG5vZGUpIHtcbiAgICAvLyBpZiBub2RlLmRhdGEgaXMgaW1wbGVtZW50cyBSdW5uYWJsZVxuICAgIGlmIChpc1J1bm5hYmxlSW50ZXJmYWNlKG5vZGUuZGF0YSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwicnVubmFibGVcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogbm9kZS5kYXRhLmxjX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5vZGUuZGF0YS5nZXROYW1lKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwic2NoZW1hXCIsXG4gICAgICAgICAgICBkYXRhOiB7IC4uLnpvZFRvSnNvblNjaGVtYShub2RlLmRhdGEuc2NoZW1hKSwgdGl0bGU6IG5vZGUuZGF0YS5uYW1lIH0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEdyYXBoIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibm9kZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlZGdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdGhlIGdyYXBoIHRvIGEgSlNPTi1zZXJpYWxpemFibGUgZm9ybWF0LlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBzdGFibGVOb2RlSWRzID0ge307XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykuZm9yRWFjaCgobm9kZSwgaSkgPT4ge1xuICAgICAgICAgICAgc3RhYmxlTm9kZUlkc1tub2RlLmlkXSA9IGlzVXVpZChub2RlLmlkKSA/IGkgOiBub2RlLmlkO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vZGVzOiBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLm1hcCgobm9kZSkgPT4gKHtcbiAgICAgICAgICAgICAgICBpZDogc3RhYmxlTm9kZUlkc1tub2RlLmlkXSxcbiAgICAgICAgICAgICAgICAuLi5ub2RlRGF0YUpzb24obm9kZSksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBlZGdlczogdGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHN0YWJsZU5vZGVJZHNbZWRnZS5zb3VyY2VdLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHN0YWJsZU5vZGVJZHNbZWRnZS50YXJnZXRdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlZGdlLmRhdGEgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5kYXRhID0gZWRnZS5kYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVkZ2UuY29uZGl0aW9uYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jb25kaXRpb25hbCA9IGVkZ2UuY29uZGl0aW9uYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFkZE5vZGUoZGF0YSwgaWQpIHtcbiAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ub2Rlc1tpZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb2RlIHdpdGggaWQgJHtpZH0gYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2RlSWQgPSBpZCB8fCB1dWlkdjQoKTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHsgaWQ6IG5vZGVJZCwgZGF0YSB9O1xuICAgICAgICB0aGlzLm5vZGVzW25vZGVJZF0gPSBub2RlO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgcmVtb3ZlTm9kZShub2RlKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbm9kZSBmcm9tIHRoZSBub2RlcyBtYXBcbiAgICAgICAgZGVsZXRlIHRoaXMubm9kZXNbbm9kZS5pZF07XG4gICAgICAgIC8vIEZpbHRlciBvdXQgZWRnZXMgY29ubmVjdGVkIHRvIHRoZSBub2RlXG4gICAgICAgIHRoaXMuZWRnZXMgPSB0aGlzLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS5zb3VyY2UgIT09IG5vZGUuaWQgJiYgZWRnZS50YXJnZXQgIT09IG5vZGUuaWQpO1xuICAgIH1cbiAgICBhZGRFZGdlKHNvdXJjZSwgdGFyZ2V0LCBkYXRhLCBjb25kaXRpb25hbCkge1xuICAgICAgICBpZiAodGhpcy5ub2Rlc1tzb3VyY2UuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU291cmNlIG5vZGUgJHtzb3VyY2UuaWR9IG5vdCBpbiBncmFwaGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGVzW3RhcmdldC5pZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUYXJnZXQgbm9kZSAke3RhcmdldC5pZH0gbm90IGluIGdyYXBoYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWRnZSA9IHtcbiAgICAgICAgICAgIHNvdXJjZTogc291cmNlLmlkLFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQuaWQsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgY29uZGl0aW9uYWwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZWRnZXMucHVzaChlZGdlKTtcbiAgICAgICAgcmV0dXJuIGVkZ2U7XG4gICAgfVxuICAgIGZpcnN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IG5ldyBTZXQodGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+IGVkZ2UudGFyZ2V0KSk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0YXJnZXRzLmhhcyhub2RlLmlkKSkge1xuICAgICAgICAgICAgICAgIGZvdW5kLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZm91bmRbMF07XG4gICAgfVxuICAgIGxhc3ROb2RlKCkge1xuICAgICAgICBjb25zdCBzb3VyY2VzID0gbmV3IFNldCh0aGlzLmVkZ2VzLm1hcCgoZWRnZSkgPT4gZWRnZS5zb3VyY2UpKTtcbiAgICAgICAgY29uc3QgZm91bmQgPSBbXTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZXMuaGFzKG5vZGUuaWQpKSB7XG4gICAgICAgICAgICAgICAgZm91bmQucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3VuZFswXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFsbCBub2RlcyBhbmQgZWRnZXMgZnJvbSBhbm90aGVyIGdyYXBoLlxuICAgICAqIE5vdGUgdGhpcyBkb2Vzbid0IGNoZWNrIGZvciBkdXBsaWNhdGVzLCBub3IgZG9lcyBpdCBjb25uZWN0IHRoZSBncmFwaHMuXG4gICAgICovXG4gICAgZXh0ZW5kKGdyYXBoLCBwcmVmaXggPSBcIlwiKSB7XG4gICAgICAgIGxldCBmaW5hbFByZWZpeCA9IHByZWZpeDtcbiAgICAgICAgY29uc3Qgbm9kZUlkcyA9IE9iamVjdC52YWx1ZXMoZ3JhcGgubm9kZXMpLm1hcCgobm9kZSkgPT4gbm9kZS5pZCk7XG4gICAgICAgIGlmIChub2RlSWRzLmV2ZXJ5KGlzVXVpZCkpIHtcbiAgICAgICAgICAgIGZpbmFsUHJlZml4ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmVmaXhlZCA9IChpZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsUHJlZml4ID8gYCR7ZmluYWxQcmVmaXh9OiR7aWR9YCA6IGlkO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZW50cmllcyhncmFwaC5ub2RlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW3ByZWZpeGVkKGtleSldID0geyAuLi52YWx1ZSwgaWQ6IHByZWZpeGVkKGtleSkgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG5ld0VkZ2VzID0gZ3JhcGguZWRnZXMubWFwKChlZGdlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmVkZ2UsXG4gICAgICAgICAgICAgICAgc291cmNlOiBwcmVmaXhlZChlZGdlLnNvdXJjZSksXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBwcmVmaXhlZChlZGdlLnRhcmdldCksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIGFsbCBlZGdlcyBmcm9tIHRoZSBvdGhlciBncmFwaFxuICAgICAgICB0aGlzLmVkZ2VzID0gWy4uLnRoaXMuZWRnZXMsIC4uLm5ld0VkZ2VzXTtcbiAgICAgICAgY29uc3QgZmlyc3QgPSBncmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgY29uc3QgbGFzdCA9IGdyYXBoLmxhc3ROb2RlKCk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBmaXJzdCA/IHsgaWQ6IHByZWZpeGVkKGZpcnN0LmlkKSwgZGF0YTogZmlyc3QuZGF0YSB9IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbGFzdCA/IHsgaWQ6IHByZWZpeGVkKGxhc3QuaWQpLCBkYXRhOiBsYXN0LmRhdGEgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgdHJpbUZpcnN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3QgZmlyc3ROb2RlID0gdGhpcy5maXJzdE5vZGUoKTtcbiAgICAgICAgaWYgKGZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmdFZGdlcyA9IHRoaXMuZWRnZXMuZmlsdGVyKChlZGdlKSA9PiBlZGdlLnNvdXJjZSA9PT0gZmlyc3ROb2RlLmlkKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vZGVzKS5sZW5ndGggPT09IDEgfHwgb3V0Z29pbmdFZGdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUoZmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmltTGFzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IGxhc3ROb2RlID0gdGhpcy5sYXN0Tm9kZSgpO1xuICAgICAgICBpZiAobGFzdE5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGluY29taW5nRWRnZXMgPSB0aGlzLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS50YXJnZXQgPT09IGxhc3ROb2RlLmlkKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vZGVzKS5sZW5ndGggPT09IDEgfHwgaW5jb21pbmdFZGdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUobGFzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRyYXdNZXJtYWlkKHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHdpdGhTdHlsZXMsIGN1cnZlU3R5bGUsIG5vZGVDb2xvcnMgPSB7IHN0YXJ0OiBcIiNmZmRmYmFcIiwgZW5kOiBcIiNiYWZmYzlcIiwgb3RoZXI6IFwiI2ZhZDdkZVwiIH0sIHdyYXBMYWJlbE5Xb3JkcywgfSA9IHBhcmFtcyA/PyB7fTtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykpIHtcbiAgICAgICAgICAgIG5vZGVzW25vZGUuaWRdID0gbm9kZURhdGFTdHIobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlyc3ROb2RlID0gdGhpcy5maXJzdE5vZGUoKTtcbiAgICAgICAgY29uc3QgZmlyc3ROb2RlTGFiZWwgPSBmaXJzdE5vZGUgPyBub2RlRGF0YVN0cihmaXJzdE5vZGUpIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBsYXN0Tm9kZSA9IHRoaXMubGFzdE5vZGUoKTtcbiAgICAgICAgY29uc3QgbGFzdE5vZGVMYWJlbCA9IGxhc3ROb2RlID8gbm9kZURhdGFTdHIobGFzdE5vZGUpIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gZHJhd01lcm1haWQobm9kZXMsIHRoaXMuZWRnZXMsIHtcbiAgICAgICAgICAgIGZpcnN0Tm9kZUxhYmVsLFxuICAgICAgICAgICAgbGFzdE5vZGVMYWJlbCxcbiAgICAgICAgICAgIHdpdGhTdHlsZXMsXG4gICAgICAgICAgICBjdXJ2ZVN0eWxlLFxuICAgICAgICAgICAgbm9kZUNvbG9ycyxcbiAgICAgICAgICAgIHdyYXBMYWJlbE5Xb3JkcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGRyYXdNZXJtYWlkUG5nKHBhcmFtcykge1xuICAgICAgICBjb25zdCBtZXJtYWlkU3ludGF4ID0gdGhpcy5kcmF3TWVybWFpZChwYXJhbXMpO1xuICAgICAgICByZXR1cm4gZHJhd01lcm1haWRQbmcobWVybWFpZFN5bnRheCwge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBwYXJhbXM/LmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInpvZFRvSnNvblNjaGVtYSIsInY0IiwidXVpZHY0IiwidmFsaWRhdGUiLCJpc1V1aWQiLCJpc1J1bm5hYmxlSW50ZXJmYWNlIiwiZHJhd01lcm1haWQiLCJkcmF3TWVybWFpZFBuZyIsIk1BWF9EQVRBX0RJU1BMQVlfTkFNRV9MRU5HVEgiLCJub2RlRGF0YVN0ciIsIm5vZGUiLCJpZCIsImRhdGEiLCJnZXROYW1lIiwic3RhcnRzV2l0aCIsInNsaWNlIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwiZXJyb3IiLCJuYW1lIiwibm9kZURhdGFKc29uIiwidHlwZSIsImxjX2lkIiwic2NoZW1hIiwidGl0bGUiLCJHcmFwaCIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRvSlNPTiIsInN0YWJsZU5vZGVJZHMiLCJ2YWx1ZXMiLCJub2RlcyIsImZvckVhY2giLCJpIiwibWFwIiwiZWRnZXMiLCJlZGdlIiwiaXRlbSIsInNvdXJjZSIsInRhcmdldCIsImNvbmRpdGlvbmFsIiwiYWRkTm9kZSIsInVuZGVmaW5lZCIsIkVycm9yIiwibm9kZUlkIiwicmVtb3ZlTm9kZSIsImZpbHRlciIsImFkZEVkZ2UiLCJwdXNoIiwiZmlyc3ROb2RlIiwidGFyZ2V0cyIsIlNldCIsImZvdW5kIiwiaGFzIiwibGFzdE5vZGUiLCJzb3VyY2VzIiwiZXh0ZW5kIiwiZ3JhcGgiLCJwcmVmaXgiLCJmaW5hbFByZWZpeCIsIm5vZGVJZHMiLCJldmVyeSIsInByZWZpeGVkIiwiZW50cmllcyIsImtleSIsIm5ld0VkZ2VzIiwiZmlyc3QiLCJsYXN0IiwidHJpbUZpcnN0Tm9kZSIsIm91dGdvaW5nRWRnZXMiLCJrZXlzIiwidHJpbUxhc3ROb2RlIiwiaW5jb21pbmdFZGdlcyIsInBhcmFtcyIsIndpdGhTdHlsZXMiLCJjdXJ2ZVN0eWxlIiwibm9kZUNvbG9ycyIsInN0YXJ0IiwiZW5kIiwib3RoZXIiLCJ3cmFwTGFiZWxOV29yZHMiLCJmaXJzdE5vZGVMYWJlbCIsImxhc3ROb2RlTGFiZWwiLCJtZXJtYWlkU3ludGF4IiwiYmFja2dyb3VuZENvbG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph_mermaid.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph_mermaid.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drawMermaid: () => (/* binding */ drawMermaid),\n/* harmony export */   drawMermaidPng: () => (/* binding */ drawMermaidPng)\n/* harmony export */ });\nfunction _escapeNodeLabel(nodeLabel) {\n    // Escapes the node label for Mermaid syntax.\n    return nodeLabel.replace(/[^a-zA-Z-_0-9]/g, \"_\");\n}\n// Adjusts Mermaid edge to map conditional nodes to pure nodes.\nfunction _adjustMermaidEdge(edge, nodes) {\n    const sourceNodeLabel = nodes[edge.source] ?? edge.source;\n    const targetNodeLabel = nodes[edge.target] ?? edge.target;\n    return [\n        sourceNodeLabel,\n        targetNodeLabel\n    ];\n}\nfunction _generateMermaidGraphStyles(nodeColors) {\n    let styles = \"\";\n    for (const [className, color] of Object.entries(nodeColors)){\n        styles += `\\tclassDef ${className}class fill:${color};\\n`;\n    }\n    return styles;\n}\n/**\n * Draws a Mermaid graph using the provided graph data\n */ function drawMermaid(nodes, edges, config) {\n    const { firstNodeLabel, lastNodeLabel, nodeColors, withStyles = true, curveStyle = \"linear\", wrapLabelNWords = 9 } = config ?? {};\n    // Initialize Mermaid graph configuration\n    let mermaidGraph = withStyles ? `%%{init: {'flowchart': {'curve': '${curveStyle}'}}}%%\\ngraph TD;\\n` : \"graph TD;\\n\";\n    if (withStyles) {\n        // Node formatting templates\n        const defaultClassLabel = \"default\";\n        const formatDict = {\n            [defaultClassLabel]: \"{0}([{1}]):::otherclass\"\n        };\n        if (firstNodeLabel !== undefined) {\n            formatDict[firstNodeLabel] = \"{0}[{0}]:::startclass\";\n        }\n        if (lastNodeLabel !== undefined) {\n            formatDict[lastNodeLabel] = \"{0}[{0}]:::endclass\";\n        }\n        // Add nodes to the graph\n        for (const node of Object.values(nodes)){\n            const nodeLabel = formatDict[node] ?? formatDict[defaultClassLabel];\n            const escapedNodeLabel = _escapeNodeLabel(node);\n            const nodeParts = node.split(\":\");\n            const nodeSplit = nodeParts[nodeParts.length - 1];\n            mermaidGraph += `\\t${nodeLabel.replace(/\\{0\\}/g, escapedNodeLabel).replace(/\\{1\\}/g, nodeSplit)};\\n`;\n        }\n    }\n    let subgraph = \"\";\n    // Add edges to the graph\n    for (const edge of edges){\n        const sourcePrefix = edge.source.includes(\":\") ? edge.source.split(\":\")[0] : undefined;\n        const targetPrefix = edge.target.includes(\":\") ? edge.target.split(\":\")[0] : undefined;\n        // Exit subgraph if source or target is not in the same subgraph\n        if (subgraph !== \"\" && (subgraph !== sourcePrefix || subgraph !== targetPrefix)) {\n            mermaidGraph += \"\tend\\n\";\n            subgraph = \"\";\n        }\n        // Enter subgraph if source and target are in the same subgraph\n        if (subgraph === \"\" && sourcePrefix !== undefined && sourcePrefix === targetPrefix) {\n            mermaidGraph = `\\tsubgraph ${sourcePrefix}\\n`;\n            subgraph = sourcePrefix;\n        }\n        const [source, target] = _adjustMermaidEdge(edge, nodes);\n        let edgeLabel = \"\";\n        // Add BR every wrapLabelNWords words\n        if (edge.data !== undefined) {\n            let edgeData = edge.data;\n            const words = edgeData.split(\" \");\n            // Group words into chunks of wrapLabelNWords size\n            if (words.length > wrapLabelNWords) {\n                edgeData = words.reduce((acc, word, i)=>{\n                    if (i % wrapLabelNWords === 0) acc.push(\"\");\n                    acc[acc.length - 1] += ` ${word}`;\n                    return acc;\n                }, []).join(\"<br>\");\n            }\n            if (edge.conditional) {\n                edgeLabel = ` -. ${edgeData} .-> `;\n            } else {\n                edgeLabel = ` -- ${edgeData} --> `;\n            }\n        } else {\n            if (edge.conditional) {\n                edgeLabel = ` -.-> `;\n            } else {\n                edgeLabel = ` --> `;\n            }\n        }\n        mermaidGraph += `\\t${_escapeNodeLabel(source)}${edgeLabel}${_escapeNodeLabel(target)};\\n`;\n    }\n    if (subgraph !== \"\") {\n        mermaidGraph += \"end\\n\";\n    }\n    // Add custom styles for nodes\n    if (withStyles && nodeColors !== undefined) {\n        mermaidGraph += _generateMermaidGraphStyles(nodeColors);\n    }\n    return mermaidGraph;\n}\n/**\n * Renders Mermaid graph using the Mermaid.INK API.\n */ async function drawMermaidPng(mermaidSyntax, config) {\n    let { backgroundColor = \"white\" } = config ?? {};\n    // Use btoa for compatibility, assume ASCII\n    const mermaidSyntaxEncoded = btoa(mermaidSyntax);\n    // Check if the background color is a hexadecimal color code using regex\n    if (backgroundColor !== undefined) {\n        const hexColorPattern = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n        if (!hexColorPattern.test(backgroundColor)) {\n            backgroundColor = `!${backgroundColor}`;\n        }\n    }\n    const imageUrl = `https://mermaid.ink/img/${mermaidSyntaxEncoded}?bgColor=${backgroundColor}`;\n    const res = await fetch(imageUrl);\n    if (!res.ok) {\n        throw new Error([\n            `Failed to render the graph using the Mermaid.INK API.`,\n            `Status code: ${res.status}`,\n            `Status text: ${res.statusText}`\n        ].join(\"\\n\"));\n    }\n    const content = await res.blob();\n    return content;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvZ3JhcGhfbWVybWFpZC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLFNBQVNBLGlCQUFpQkMsU0FBUztJQUMvQiw2Q0FBNkM7SUFDN0MsT0FBT0EsVUFBVUMsT0FBTyxDQUFDLG1CQUFtQjtBQUNoRDtBQUNBLCtEQUErRDtBQUMvRCxTQUFTQyxtQkFBbUJDLElBQUksRUFBRUMsS0FBSztJQUNuQyxNQUFNQyxrQkFBa0JELEtBQUssQ0FBQ0QsS0FBS0csTUFBTSxDQUFDLElBQUlILEtBQUtHLE1BQU07SUFDekQsTUFBTUMsa0JBQWtCSCxLQUFLLENBQUNELEtBQUtLLE1BQU0sQ0FBQyxJQUFJTCxLQUFLSyxNQUFNO0lBQ3pELE9BQU87UUFBQ0g7UUFBaUJFO0tBQWdCO0FBQzdDO0FBQ0EsU0FBU0UsNEJBQTRCQyxVQUFVO0lBQzNDLElBQUlDLFNBQVM7SUFDYixLQUFLLE1BQU0sQ0FBQ0MsV0FBV0MsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFlBQWE7UUFDekRDLFVBQVUsQ0FBQyxXQUFXLEVBQUVDLFVBQVUsV0FBVyxFQUFFQyxNQUFNLEdBQUcsQ0FBQztJQUM3RDtJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLFNBQVNLLFlBQVlaLEtBQUssRUFBRWEsS0FBSyxFQUFFQyxNQUFNO0lBQzVDLE1BQU0sRUFBRUMsY0FBYyxFQUFFQyxhQUFhLEVBQUVWLFVBQVUsRUFBRVcsYUFBYSxJQUFJLEVBQUVDLGFBQWEsUUFBUSxFQUFFQyxrQkFBa0IsQ0FBQyxFQUFHLEdBQUdMLFVBQVUsQ0FBQztJQUNqSSx5Q0FBeUM7SUFDekMsSUFBSU0sZUFBZUgsYUFDYixDQUFDLGtDQUFrQyxFQUFFQyxXQUFXLG1CQUFtQixDQUFDLEdBQ3BFO0lBQ04sSUFBSUQsWUFBWTtRQUNaLDRCQUE0QjtRQUM1QixNQUFNSSxvQkFBb0I7UUFDMUIsTUFBTUMsYUFBYTtZQUNmLENBQUNELGtCQUFrQixFQUFFO1FBQ3pCO1FBQ0EsSUFBSU4sbUJBQW1CUSxXQUFXO1lBQzlCRCxVQUFVLENBQUNQLGVBQWUsR0FBRztRQUNqQztRQUNBLElBQUlDLGtCQUFrQk8sV0FBVztZQUM3QkQsVUFBVSxDQUFDTixjQUFjLEdBQUc7UUFDaEM7UUFDQSx5QkFBeUI7UUFDekIsS0FBSyxNQUFNUSxRQUFRZCxPQUFPZSxNQUFNLENBQUN6QixPQUFRO1lBQ3JDLE1BQU1KLFlBQVkwQixVQUFVLENBQUNFLEtBQUssSUFBSUYsVUFBVSxDQUFDRCxrQkFBa0I7WUFDbkUsTUFBTUssbUJBQW1CL0IsaUJBQWlCNkI7WUFDMUMsTUFBTUcsWUFBWUgsS0FBS0ksS0FBSyxDQUFDO1lBQzdCLE1BQU1DLFlBQVlGLFNBQVMsQ0FBQ0EsVUFBVUcsTUFBTSxHQUFHLEVBQUU7WUFDakRWLGdCQUFnQixDQUFDLEVBQUUsRUFBRXhCLFVBQ2hCQyxPQUFPLENBQUMsVUFBVTZCLGtCQUNsQjdCLE9BQU8sQ0FBQyxVQUFVZ0MsV0FBVyxHQUFHLENBQUM7UUFDMUM7SUFDSjtJQUNBLElBQUlFLFdBQVc7SUFDZix5QkFBeUI7SUFDekIsS0FBSyxNQUFNaEMsUUFBUWMsTUFBTztRQUN0QixNQUFNbUIsZUFBZWpDLEtBQUtHLE1BQU0sQ0FBQytCLFFBQVEsQ0FBQyxPQUNwQ2xDLEtBQUtHLE1BQU0sQ0FBQzBCLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUN6Qkw7UUFDTixNQUFNVyxlQUFlbkMsS0FBS0ssTUFBTSxDQUFDNkIsUUFBUSxDQUFDLE9BQ3BDbEMsS0FBS0ssTUFBTSxDQUFDd0IsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQ3pCTDtRQUNOLGdFQUFnRTtRQUNoRSxJQUFJUSxhQUFhLE1BQ1pBLENBQUFBLGFBQWFDLGdCQUFnQkQsYUFBYUcsWUFBVyxHQUFJO1lBQzFEZCxnQkFBZ0I7WUFDaEJXLFdBQVc7UUFDZjtRQUNBLCtEQUErRDtRQUMvRCxJQUFJQSxhQUFhLE1BQ2JDLGlCQUFpQlQsYUFDakJTLGlCQUFpQkUsY0FBYztZQUMvQmQsZUFBZSxDQUFDLFdBQVcsRUFBRVksYUFBYSxFQUFFLENBQUM7WUFDN0NELFdBQVdDO1FBQ2Y7UUFDQSxNQUFNLENBQUM5QixRQUFRRSxPQUFPLEdBQUdOLG1CQUFtQkMsTUFBTUM7UUFDbEQsSUFBSW1DLFlBQVk7UUFDaEIscUNBQXFDO1FBQ3JDLElBQUlwQyxLQUFLcUMsSUFBSSxLQUFLYixXQUFXO1lBQ3pCLElBQUljLFdBQVd0QyxLQUFLcUMsSUFBSTtZQUN4QixNQUFNRSxRQUFRRCxTQUFTVCxLQUFLLENBQUM7WUFDN0Isa0RBQWtEO1lBQ2xELElBQUlVLE1BQU1SLE1BQU0sR0FBR1gsaUJBQWlCO2dCQUNoQ2tCLFdBQVdDLE1BQ05DLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxNQUFNQztvQkFDcEIsSUFBSUEsSUFBSXZCLG9CQUFvQixHQUN4QnFCLElBQUlHLElBQUksQ0FBQztvQkFDYkgsR0FBRyxDQUFDQSxJQUFJVixNQUFNLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFVyxLQUFLLENBQUM7b0JBQ2pDLE9BQU9EO2dCQUNYLEdBQUcsRUFBRSxFQUNBSSxJQUFJLENBQUM7WUFDZDtZQUNBLElBQUk3QyxLQUFLOEMsV0FBVyxFQUFFO2dCQUNsQlYsWUFBWSxDQUFDLElBQUksRUFBRUUsU0FBUyxLQUFLLENBQUM7WUFDdEMsT0FDSztnQkFDREYsWUFBWSxDQUFDLElBQUksRUFBRUUsU0FBUyxLQUFLLENBQUM7WUFDdEM7UUFDSixPQUNLO1lBQ0QsSUFBSXRDLEtBQUs4QyxXQUFXLEVBQUU7Z0JBQ2xCVixZQUFZLENBQUMsTUFBTSxDQUFDO1lBQ3hCLE9BQ0s7Z0JBQ0RBLFlBQVksQ0FBQyxLQUFLLENBQUM7WUFDdkI7UUFDSjtRQUNBZixnQkFBZ0IsQ0FBQyxFQUFFLEVBQUV6QixpQkFBaUJPLFFBQVEsRUFBRWlDLFVBQVUsRUFBRXhDLGlCQUFpQlMsUUFBUSxHQUFHLENBQUM7SUFDN0Y7SUFDQSxJQUFJMkIsYUFBYSxJQUFJO1FBQ2pCWCxnQkFBZ0I7SUFDcEI7SUFDQSw4QkFBOEI7SUFDOUIsSUFBSUgsY0FBY1gsZUFBZWlCLFdBQVc7UUFDeENILGdCQUFnQmYsNEJBQTRCQztJQUNoRDtJQUNBLE9BQU9jO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLGVBQWUwQixlQUFlQyxhQUFhLEVBQUVqQyxNQUFNO0lBQ3RELElBQUksRUFBRWtDLGtCQUFrQixPQUFPLEVBQUUsR0FBR2xDLFVBQVUsQ0FBQztJQUMvQywyQ0FBMkM7SUFDM0MsTUFBTW1DLHVCQUF1QkMsS0FBS0g7SUFDbEMsd0VBQXdFO0lBQ3hFLElBQUlDLG9CQUFvQnpCLFdBQVc7UUFDL0IsTUFBTTRCLGtCQUFrQjtRQUN4QixJQUFJLENBQUNBLGdCQUFnQkMsSUFBSSxDQUFDSixrQkFBa0I7WUFDeENBLGtCQUFrQixDQUFDLENBQUMsRUFBRUEsZ0JBQWdCLENBQUM7UUFDM0M7SUFDSjtJQUNBLE1BQU1LLFdBQVcsQ0FBQyx3QkFBd0IsRUFBRUoscUJBQXFCLFNBQVMsRUFBRUQsZ0JBQWdCLENBQUM7SUFDN0YsTUFBTU0sTUFBTSxNQUFNQyxNQUFNRjtJQUN4QixJQUFJLENBQUNDLElBQUlFLEVBQUUsRUFBRTtRQUNULE1BQU0sSUFBSUMsTUFBTTtZQUNaLENBQUMscURBQXFELENBQUM7WUFDdkQsQ0FBQyxhQUFhLEVBQUVILElBQUlJLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLENBQUMsYUFBYSxFQUFFSixJQUFJSyxVQUFVLENBQUMsQ0FBQztTQUNuQyxDQUFDZixJQUFJLENBQUM7SUFDWDtJQUNBLE1BQU1nQixVQUFVLE1BQU1OLElBQUlPLElBQUk7SUFDOUIsT0FBT0Q7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoX21lcm1haWQuanM/Yjg4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfZXNjYXBlTm9kZUxhYmVsKG5vZGVMYWJlbCkge1xuICAgIC8vIEVzY2FwZXMgdGhlIG5vZGUgbGFiZWwgZm9yIE1lcm1haWQgc3ludGF4LlxuICAgIHJldHVybiBub2RlTGFiZWwucmVwbGFjZSgvW15hLXpBLVotXzAtOV0vZywgXCJfXCIpO1xufVxuLy8gQWRqdXN0cyBNZXJtYWlkIGVkZ2UgdG8gbWFwIGNvbmRpdGlvbmFsIG5vZGVzIHRvIHB1cmUgbm9kZXMuXG5mdW5jdGlvbiBfYWRqdXN0TWVybWFpZEVkZ2UoZWRnZSwgbm9kZXMpIHtcbiAgICBjb25zdCBzb3VyY2VOb2RlTGFiZWwgPSBub2Rlc1tlZGdlLnNvdXJjZV0gPz8gZWRnZS5zb3VyY2U7XG4gICAgY29uc3QgdGFyZ2V0Tm9kZUxhYmVsID0gbm9kZXNbZWRnZS50YXJnZXRdID8/IGVkZ2UudGFyZ2V0O1xuICAgIHJldHVybiBbc291cmNlTm9kZUxhYmVsLCB0YXJnZXROb2RlTGFiZWxdO1xufVxuZnVuY3Rpb24gX2dlbmVyYXRlTWVybWFpZEdyYXBoU3R5bGVzKG5vZGVDb2xvcnMpIHtcbiAgICBsZXQgc3R5bGVzID0gXCJcIjtcbiAgICBmb3IgKGNvbnN0IFtjbGFzc05hbWUsIGNvbG9yXSBvZiBPYmplY3QuZW50cmllcyhub2RlQ29sb3JzKSkge1xuICAgICAgICBzdHlsZXMgKz0gYFxcdGNsYXNzRGVmICR7Y2xhc3NOYW1lfWNsYXNzIGZpbGw6JHtjb2xvcn07XFxuYDtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlcztcbn1cbi8qKlxuICogRHJhd3MgYSBNZXJtYWlkIGdyYXBoIHVzaW5nIHRoZSBwcm92aWRlZCBncmFwaCBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3TWVybWFpZChub2RlcywgZWRnZXMsIGNvbmZpZykge1xuICAgIGNvbnN0IHsgZmlyc3ROb2RlTGFiZWwsIGxhc3ROb2RlTGFiZWwsIG5vZGVDb2xvcnMsIHdpdGhTdHlsZXMgPSB0cnVlLCBjdXJ2ZVN0eWxlID0gXCJsaW5lYXJcIiwgd3JhcExhYmVsTldvcmRzID0gOSwgfSA9IGNvbmZpZyA/PyB7fTtcbiAgICAvLyBJbml0aWFsaXplIE1lcm1haWQgZ3JhcGggY29uZmlndXJhdGlvblxuICAgIGxldCBtZXJtYWlkR3JhcGggPSB3aXRoU3R5bGVzXG4gICAgICAgID8gYCUle2luaXQ6IHsnZmxvd2NoYXJ0JzogeydjdXJ2ZSc6ICcke2N1cnZlU3R5bGV9J319fSUlXFxuZ3JhcGggVEQ7XFxuYFxuICAgICAgICA6IFwiZ3JhcGggVEQ7XFxuXCI7XG4gICAgaWYgKHdpdGhTdHlsZXMpIHtcbiAgICAgICAgLy8gTm9kZSBmb3JtYXR0aW5nIHRlbXBsYXRlc1xuICAgICAgICBjb25zdCBkZWZhdWx0Q2xhc3NMYWJlbCA9IFwiZGVmYXVsdFwiO1xuICAgICAgICBjb25zdCBmb3JtYXREaWN0ID0ge1xuICAgICAgICAgICAgW2RlZmF1bHRDbGFzc0xhYmVsXTogXCJ7MH0oW3sxfV0pOjo6b3RoZXJjbGFzc1wiLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZmlyc3ROb2RlTGFiZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybWF0RGljdFtmaXJzdE5vZGVMYWJlbF0gPSBcInswfVt7MH1dOjo6c3RhcnRjbGFzc1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0Tm9kZUxhYmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvcm1hdERpY3RbbGFzdE5vZGVMYWJlbF0gPSBcInswfVt7MH1dOjo6ZW5kY2xhc3NcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgbm9kZXMgdG8gdGhlIGdyYXBoXG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBPYmplY3QudmFsdWVzKG5vZGVzKSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZUxhYmVsID0gZm9ybWF0RGljdFtub2RlXSA/PyBmb3JtYXREaWN0W2RlZmF1bHRDbGFzc0xhYmVsXTtcbiAgICAgICAgICAgIGNvbnN0IGVzY2FwZWROb2RlTGFiZWwgPSBfZXNjYXBlTm9kZUxhYmVsKG5vZGUpO1xuICAgICAgICAgICAgY29uc3Qgbm9kZVBhcnRzID0gbm9kZS5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICBjb25zdCBub2RlU3BsaXQgPSBub2RlUGFydHNbbm9kZVBhcnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgbWVybWFpZEdyYXBoICs9IGBcXHQke25vZGVMYWJlbFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHswXFx9L2csIGVzY2FwZWROb2RlTGFiZWwpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcezFcXH0vZywgbm9kZVNwbGl0KX07XFxuYDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3ViZ3JhcGggPSBcIlwiO1xuICAgIC8vIEFkZCBlZGdlcyB0byB0aGUgZ3JhcGhcbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgZWRnZXMpIHtcbiAgICAgICAgY29uc3Qgc291cmNlUHJlZml4ID0gZWRnZS5zb3VyY2UuaW5jbHVkZXMoXCI6XCIpXG4gICAgICAgICAgICA/IGVkZ2Uuc291cmNlLnNwbGl0KFwiOlwiKVswXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHRhcmdldFByZWZpeCA9IGVkZ2UudGFyZ2V0LmluY2x1ZGVzKFwiOlwiKVxuICAgICAgICAgICAgPyBlZGdlLnRhcmdldC5zcGxpdChcIjpcIilbMF1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAvLyBFeGl0IHN1YmdyYXBoIGlmIHNvdXJjZSBvciB0YXJnZXQgaXMgbm90IGluIHRoZSBzYW1lIHN1YmdyYXBoXG4gICAgICAgIGlmIChzdWJncmFwaCAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgKHN1YmdyYXBoICE9PSBzb3VyY2VQcmVmaXggfHwgc3ViZ3JhcGggIT09IHRhcmdldFByZWZpeCkpIHtcbiAgICAgICAgICAgIG1lcm1haWRHcmFwaCArPSBcIlxcdGVuZFxcblwiO1xuICAgICAgICAgICAgc3ViZ3JhcGggPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVudGVyIHN1YmdyYXBoIGlmIHNvdXJjZSBhbmQgdGFyZ2V0IGFyZSBpbiB0aGUgc2FtZSBzdWJncmFwaFxuICAgICAgICBpZiAoc3ViZ3JhcGggPT09IFwiXCIgJiZcbiAgICAgICAgICAgIHNvdXJjZVByZWZpeCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzb3VyY2VQcmVmaXggPT09IHRhcmdldFByZWZpeCkge1xuICAgICAgICAgICAgbWVybWFpZEdyYXBoID0gYFxcdHN1YmdyYXBoICR7c291cmNlUHJlZml4fVxcbmA7XG4gICAgICAgICAgICBzdWJncmFwaCA9IHNvdXJjZVByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbc291cmNlLCB0YXJnZXRdID0gX2FkanVzdE1lcm1haWRFZGdlKGVkZ2UsIG5vZGVzKTtcbiAgICAgICAgbGV0IGVkZ2VMYWJlbCA9IFwiXCI7XG4gICAgICAgIC8vIEFkZCBCUiBldmVyeSB3cmFwTGFiZWxOV29yZHMgd29yZHNcbiAgICAgICAgaWYgKGVkZ2UuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgZWRnZURhdGEgPSBlZGdlLmRhdGE7XG4gICAgICAgICAgICBjb25zdCB3b3JkcyA9IGVkZ2VEYXRhLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgIC8vIEdyb3VwIHdvcmRzIGludG8gY2h1bmtzIG9mIHdyYXBMYWJlbE5Xb3JkcyBzaXplXG4gICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID4gd3JhcExhYmVsTldvcmRzKSB7XG4gICAgICAgICAgICAgICAgZWRnZURhdGEgPSB3b3Jkc1xuICAgICAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHdvcmQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgJSB3cmFwTGFiZWxOV29yZHMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2MucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgYWNjW2FjYy5sZW5ndGggLSAxXSArPSBgICR7d29yZH1gO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH0sIFtdKVxuICAgICAgICAgICAgICAgICAgICAuam9pbihcIjxicj5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWRnZS5jb25kaXRpb25hbCkge1xuICAgICAgICAgICAgICAgIGVkZ2VMYWJlbCA9IGAgLS4gJHtlZGdlRGF0YX0gLi0+IGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlZGdlTGFiZWwgPSBgIC0tICR7ZWRnZURhdGF9IC0tPiBgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGVkZ2UuY29uZGl0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICBlZGdlTGFiZWwgPSBgIC0uLT4gYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVkZ2VMYWJlbCA9IGAgLS0+IGA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVybWFpZEdyYXBoICs9IGBcXHQke19lc2NhcGVOb2RlTGFiZWwoc291cmNlKX0ke2VkZ2VMYWJlbH0ke19lc2NhcGVOb2RlTGFiZWwodGFyZ2V0KX07XFxuYDtcbiAgICB9XG4gICAgaWYgKHN1YmdyYXBoICE9PSBcIlwiKSB7XG4gICAgICAgIG1lcm1haWRHcmFwaCArPSBcImVuZFxcblwiO1xuICAgIH1cbiAgICAvLyBBZGQgY3VzdG9tIHN0eWxlcyBmb3Igbm9kZXNcbiAgICBpZiAod2l0aFN0eWxlcyAmJiBub2RlQ29sb3JzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbWVybWFpZEdyYXBoICs9IF9nZW5lcmF0ZU1lcm1haWRHcmFwaFN0eWxlcyhub2RlQ29sb3JzKTtcbiAgICB9XG4gICAgcmV0dXJuIG1lcm1haWRHcmFwaDtcbn1cbi8qKlxuICogUmVuZGVycyBNZXJtYWlkIGdyYXBoIHVzaW5nIHRoZSBNZXJtYWlkLklOSyBBUEkuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkcmF3TWVybWFpZFBuZyhtZXJtYWlkU3ludGF4LCBjb25maWcpIHtcbiAgICBsZXQgeyBiYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCIgfSA9IGNvbmZpZyA/PyB7fTtcbiAgICAvLyBVc2UgYnRvYSBmb3IgY29tcGF0aWJpbGl0eSwgYXNzdW1lIEFTQ0lJXG4gICAgY29uc3QgbWVybWFpZFN5bnRheEVuY29kZWQgPSBidG9hKG1lcm1haWRTeW50YXgpO1xuICAgIC8vIENoZWNrIGlmIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGlzIGEgaGV4YWRlY2ltYWwgY29sb3IgY29kZSB1c2luZyByZWdleFxuICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBoZXhDb2xvclBhdHRlcm4gPSAvXiMoPzpbMC05YS1mQS1GXXszfSl7MSwyfSQvO1xuICAgICAgICBpZiAoIWhleENvbG9yUGF0dGVybi50ZXN0KGJhY2tncm91bmRDb2xvcikpIHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IGAhJHtiYWNrZ3JvdW5kQ29sb3J9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBpbWFnZVVybCA9IGBodHRwczovL21lcm1haWQuaW5rL2ltZy8ke21lcm1haWRTeW50YXhFbmNvZGVkfT9iZ0NvbG9yPSR7YmFja2dyb3VuZENvbG9yfWA7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goaW1hZ2VVcmwpO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihbXG4gICAgICAgICAgICBgRmFpbGVkIHRvIHJlbmRlciB0aGUgZ3JhcGggdXNpbmcgdGhlIE1lcm1haWQuSU5LIEFQSS5gLFxuICAgICAgICAgICAgYFN0YXR1cyBjb2RlOiAke3Jlcy5zdGF0dXN9YCxcbiAgICAgICAgICAgIGBTdGF0dXMgdGV4dDogJHtyZXMuc3RhdHVzVGV4dH1gLFxuICAgICAgICBdLmpvaW4oXCJcXG5cIikpO1xuICAgIH1cbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzLmJsb2IoKTtcbiAgICByZXR1cm4gY29udGVudDtcbn1cbiJdLCJuYW1lcyI6WyJfZXNjYXBlTm9kZUxhYmVsIiwibm9kZUxhYmVsIiwicmVwbGFjZSIsIl9hZGp1c3RNZXJtYWlkRWRnZSIsImVkZ2UiLCJub2RlcyIsInNvdXJjZU5vZGVMYWJlbCIsInNvdXJjZSIsInRhcmdldE5vZGVMYWJlbCIsInRhcmdldCIsIl9nZW5lcmF0ZU1lcm1haWRHcmFwaFN0eWxlcyIsIm5vZGVDb2xvcnMiLCJzdHlsZXMiLCJjbGFzc05hbWUiLCJjb2xvciIsIk9iamVjdCIsImVudHJpZXMiLCJkcmF3TWVybWFpZCIsImVkZ2VzIiwiY29uZmlnIiwiZmlyc3ROb2RlTGFiZWwiLCJsYXN0Tm9kZUxhYmVsIiwid2l0aFN0eWxlcyIsImN1cnZlU3R5bGUiLCJ3cmFwTGFiZWxOV29yZHMiLCJtZXJtYWlkR3JhcGgiLCJkZWZhdWx0Q2xhc3NMYWJlbCIsImZvcm1hdERpY3QiLCJ1bmRlZmluZWQiLCJub2RlIiwidmFsdWVzIiwiZXNjYXBlZE5vZGVMYWJlbCIsIm5vZGVQYXJ0cyIsInNwbGl0Iiwibm9kZVNwbGl0IiwibGVuZ3RoIiwic3ViZ3JhcGgiLCJzb3VyY2VQcmVmaXgiLCJpbmNsdWRlcyIsInRhcmdldFByZWZpeCIsImVkZ2VMYWJlbCIsImRhdGEiLCJlZGdlRGF0YSIsIndvcmRzIiwicmVkdWNlIiwiYWNjIiwid29yZCIsImkiLCJwdXNoIiwiam9pbiIsImNvbmRpdGlvbmFsIiwiZHJhd01lcm1haWRQbmciLCJtZXJtYWlkU3ludGF4IiwiYmFja2dyb3VuZENvbG9yIiwibWVybWFpZFN5bnRheEVuY29kZWQiLCJidG9hIiwiaGV4Q29sb3JQYXR0ZXJuIiwidGVzdCIsImltYWdlVXJsIiwicmVzIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImNvbnRlbnQiLCJibG9iIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/graph_mermaid.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/iter.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/iter.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   consumeAsyncIterableInContext: () => (/* binding */ consumeAsyncIterableInContext),\n/* harmony export */   consumeIteratorInContext: () => (/* binding */ consumeIteratorInContext),\n/* harmony export */   isAsyncIterable: () => (/* binding */ isAsyncIterable),\n/* harmony export */   isIterableIterator: () => (/* binding */ isIterableIterator),\n/* harmony export */   isIterator: () => (/* binding */ isIterator)\n/* harmony export */ });\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/singletons/index.js\");\n\nfunction isIterableIterator(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.iterator] === \"function\" && // avoid detecting array/set as iterator\n    typeof thing.next === \"function\";\n}\nconst isIterator = (x)=>x != null && typeof x === \"object\" && \"next\" in x && typeof x.next === \"function\";\nfunction isAsyncIterable(thing) {\n    return typeof thing === \"object\" && thing !== null && typeof thing[Symbol.asyncIterator] === \"function\";\n}\nfunction* consumeIteratorInContext(context, iter) {\n    while(true){\n        const { value, done } = _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig(context, iter.next.bind(iter), true);\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\nasync function* consumeAsyncIterableInContext(context, iter) {\n    const iterator = iter[Symbol.asyncIterator]();\n    while(true){\n        const { value, done } = await _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig(context, iterator.next.bind(iter), true);\n        if (done) {\n            break;\n        } else {\n            yield value;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvaXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEU7QUFDckUsU0FBU0MsbUJBQW1CQyxLQUFLO0lBQ3BDLE9BQVEsT0FBT0EsVUFBVSxZQUNyQkEsVUFBVSxRQUNWLE9BQU9BLEtBQUssQ0FBQ0MsT0FBT0MsUUFBUSxDQUFDLEtBQUssY0FDbEMsd0NBQXdDO0lBQ3hDLE9BQU9GLE1BQU1HLElBQUksS0FBSztBQUM5QjtBQUNPLE1BQU1DLGFBQWEsQ0FBQ0MsSUFBTUEsS0FBSyxRQUNsQyxPQUFPQSxNQUFNLFlBQ2IsVUFBVUEsS0FDVixPQUFPQSxFQUFFRixJQUFJLEtBQUssV0FBVztBQUMxQixTQUFTRyxnQkFBZ0JOLEtBQUs7SUFDakMsT0FBUSxPQUFPQSxVQUFVLFlBQ3JCQSxVQUFVLFFBQ1YsT0FBT0EsS0FBSyxDQUFDQyxPQUFPTSxhQUFhLENBQUMsS0FDOUI7QUFDWjtBQUNPLFVBQVVDLHlCQUF5QkMsT0FBTyxFQUFFQyxJQUFJO0lBQ25ELE1BQU8sS0FBTTtRQUNULE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUUsR0FBR2Qsb0ZBQWtDQSxDQUFDZSxhQUFhLENBQUNKLFNBQVNDLEtBQUtQLElBQUksQ0FBQ1csSUFBSSxDQUFDSixPQUFPO1FBQ3hHLElBQUlFLE1BQU07WUFDTjtRQUNKLE9BQ0s7WUFDRCxNQUFNRDtRQUNWO0lBQ0o7QUFDSjtBQUNPLGdCQUFnQkksOEJBQThCTixPQUFPLEVBQUVDLElBQUk7SUFDOUQsTUFBTVIsV0FBV1EsSUFBSSxDQUFDVCxPQUFPTSxhQUFhLENBQUM7SUFDM0MsTUFBTyxLQUFNO1FBQ1QsTUFBTSxFQUFFSSxLQUFLLEVBQUVDLElBQUksRUFBRSxHQUFHLE1BQU1kLG9GQUFrQ0EsQ0FBQ2UsYUFBYSxDQUFDSixTQUFTUCxTQUFTQyxJQUFJLENBQUNXLElBQUksQ0FBQ0osT0FBTztRQUNsSCxJQUFJRSxNQUFNO1lBQ047UUFDSixPQUNLO1lBQ0QsTUFBTUQ7UUFDVjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9pdGVyLmpzP2NlMjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNJdGVyYWJsZUl0ZXJhdG9yKHRoaW5nKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdGhpbmcgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgdGhpbmcgIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nW1N5bWJvbC5pdGVyYXRvcl0gPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAvLyBhdm9pZCBkZXRlY3RpbmcgYXJyYXkvc2V0IGFzIGl0ZXJhdG9yXG4gICAgICAgIHR5cGVvZiB0aGluZy5uZXh0ID09PSBcImZ1bmN0aW9uXCIpO1xufVxuZXhwb3J0IGNvbnN0IGlzSXRlcmF0b3IgPSAoeCkgPT4geCAhPSBudWxsICYmXG4gICAgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiZcbiAgICBcIm5leHRcIiBpbiB4ICYmXG4gICAgdHlwZW9mIHgubmV4dCA9PT0gXCJmdW5jdGlvblwiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXN5bmNJdGVyYWJsZSh0aGluZykge1xuICAgIHJldHVybiAodHlwZW9mIHRoaW5nID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHRoaW5nICE9PSBudWxsICYmXG4gICAgICAgIHR5cGVvZiB0aGluZ1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPT09XG4gICAgICAgICAgICBcImZ1bmN0aW9uXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uKiBjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQoY29udGV4dCwgaXRlcikge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhjb250ZXh0LCBpdGVyLm5leHQuYmluZChpdGVyKSwgdHJ1ZSk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBjb25zdW1lQXN5bmNJdGVyYWJsZUluQ29udGV4dChjb250ZXh0LCBpdGVyKSB7XG4gICAgY29uc3QgaXRlcmF0b3IgPSBpdGVyW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyhjb250ZXh0LCBpdGVyYXRvci5uZXh0LmJpbmQoaXRlciksIHRydWUpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwiaXNJdGVyYWJsZUl0ZXJhdG9yIiwidGhpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJpc0l0ZXJhdG9yIiwieCIsImlzQXN5bmNJdGVyYWJsZSIsImFzeW5jSXRlcmF0b3IiLCJjb25zdW1lSXRlcmF0b3JJbkNvbnRleHQiLCJjb250ZXh0IiwiaXRlciIsInZhbHVlIiwiZG9uZSIsInJ1bldpdGhDb25maWciLCJiaW5kIiwiY29uc3VtZUFzeW5jSXRlcmFibGVJbkNvbnRleHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/iter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/utils.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/utils.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableInterface(thing) {\n    return thing ? thing.lc_runnable : false;\n}\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4REFBOEQ7QUFDdkQsU0FBU0Esb0JBQW9CQyxLQUFLO0lBQ3JDLE9BQU9BLFFBQVFBLE1BQU1DLFdBQVcsR0FBRztBQUN2QztBQUNBOzs7Ozs7Q0FNQyxHQUNNLE1BQU1DO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsWUFBWSxHQUFHUCxPQUFPTyxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsWUFBWSxHQUFHUixPQUFPUSxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsV0FBVyxHQUFHVCxPQUFPUyxXQUFXO1FBQ3JDLElBQUksQ0FBQ0MsWUFBWSxHQUFHVixPQUFPVSxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsWUFBWSxHQUFHWCxPQUFPVyxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsV0FBVyxHQUFHWixPQUFPWSxXQUFXO0lBQ3pDO0lBQ0FDLGFBQWFDLEtBQUssRUFBRUMsUUFBUSxFQUFFO1FBQzFCLElBQUlDLFVBQVUsSUFBSSxDQUFDVCxZQUFZLEtBQUtVLGFBQ2hDLElBQUksQ0FBQ1QsWUFBWSxLQUFLUyxhQUN0QixJQUFJLENBQUNSLFdBQVcsS0FBS1E7UUFDekIsTUFBTUMsWUFBWUosTUFBTUssSUFBSSxJQUFJLEVBQUU7UUFDbEMsSUFBSSxJQUFJLENBQUNaLFlBQVksS0FBS1UsV0FBVztZQUNqQ0QsVUFBVUEsV0FBVyxJQUFJLENBQUNULFlBQVksQ0FBQ2EsUUFBUSxDQUFDTixNQUFNTyxJQUFJO1FBQzlEO1FBQ0EsSUFBSSxJQUFJLENBQUNiLFlBQVksS0FBS1MsV0FBVztZQUNqQ0QsVUFBVUEsV0FBVyxJQUFJLENBQUNSLFlBQVksQ0FBQ1ksUUFBUSxDQUFDTDtRQUNwRDtRQUNBLElBQUksSUFBSSxDQUFDTixXQUFXLEtBQUtRLFdBQVc7WUFDaENELFVBQ0lBLFdBQVdFLFVBQVVJLElBQUksQ0FBQyxDQUFDQyxNQUFRLElBQUksQ0FBQ2QsV0FBVyxFQUFFVyxTQUFTRztRQUN0RTtRQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEtBQUtPLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNOLFlBQVksQ0FBQ1UsUUFBUSxDQUFDTixNQUFNTyxJQUFJO1FBQy9EO1FBQ0EsSUFBSSxJQUFJLENBQUNWLFlBQVksS0FBS00sV0FBVztZQUNqQ0QsVUFBVUEsV0FBVyxDQUFDLElBQUksQ0FBQ0wsWUFBWSxDQUFDUyxRQUFRLENBQUNMO1FBQ3JEO1FBQ0EsSUFBSSxJQUFJLENBQUNILFdBQVcsS0FBS0ssV0FBVztZQUNoQ0QsVUFDSUEsV0FBV0UsVUFBVU0sS0FBSyxDQUFDLENBQUNELE1BQVEsQ0FBQyxJQUFJLENBQUNYLFdBQVcsRUFBRVEsU0FBU0c7UUFDeEU7UUFDQSxPQUFPUDtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy91dGlscy5qcz81YTgzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gaXNSdW5uYWJsZUludGVyZmFjZSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyA/IHRoaW5nLmxjX3J1bm5hYmxlIDogZmFsc2U7XG59XG4vKipcbiAqIFV0aWxpdHkgdG8gZmlsdGVyIHRoZSByb290IGV2ZW50IGluIHRoZSBzdHJlYW1FdmVudHMgaW1wbGVtZW50YXRpb24uXG4gKiBUaGlzIGlzIHNpbXBseSBiaW5kaW5nIHRoZSBhcmd1bWVudHMgdG8gdGhlIG5hbWVzcGFjZSB0byBtYWtlIHNhdmUgb25cbiAqIGEgYml0IG9mIHR5cGluZyBpbiB0aGUgc3RyZWFtRXZlbnRzIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRPRE86IFJlZmFjdG9yIGFuZCByZW1vdmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBfUm9vdEV2ZW50RmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzLmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHMuaW5jbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID0gZmllbGRzLmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzLmV4Y2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5leGNsdWRlVGFncyA9IGZpZWxkcy5leGNsdWRlVGFncztcbiAgICB9XG4gICAgaW5jbHVkZUV2ZW50KGV2ZW50LCByb290VHlwZSkge1xuICAgICAgICBsZXQgaW5jbHVkZSA9IHRoaXMuaW5jbHVkZU5hbWVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgZXZlbnRUYWdzID0gZXZlbnQudGFncyA/PyBbXTtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhyb290VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fCBldmVudFRhZ3Muc29tZSgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgZXZlbnRUYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNSdW5uYWJsZUludGVyZmFjZSIsInRoaW5nIiwibGNfcnVubmFibGUiLCJfUm9vdEV2ZW50RmlsdGVyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsImluY2x1ZGVFdmVudCIsImV2ZW50Iiwicm9vdFR5cGUiLCJpbmNsdWRlIiwidW5kZWZpbmVkIiwiZXZlbnRUYWdzIiwidGFncyIsImluY2x1ZGVzIiwibmFtZSIsInNvbWUiLCJ0YWciLCJldmVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/wrappers.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/wrappers.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToHttpEventStream: () => (/* binding */ convertToHttpEventStream)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/stream.js\");\n\nfunction convertToHttpEventStream(stream) {\n    const encoder = new TextEncoder();\n    const finalStream = new ReadableStream({\n        async start (controller) {\n            for await (const chunk of stream){\n                controller.enqueue(encoder.encode(`event: data\\ndata: ${JSON.stringify(chunk)}\\n\\n`));\n            }\n            controller.enqueue(encoder.encode(\"event: end\\n\\n\"));\n            controller.close();\n        }\n    });\n    return _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.IterableReadableStream.fromReadableStream(finalStream);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvd3JhcHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEQ7QUFDckQsU0FBU0MseUJBQXlCQyxNQUFNO0lBQzNDLE1BQU1DLFVBQVUsSUFBSUM7SUFDcEIsTUFBTUMsY0FBYyxJQUFJQyxlQUFlO1FBQ25DLE1BQU1DLE9BQU1DLFVBQVU7WUFDbEIsV0FBVyxNQUFNQyxTQUFTUCxPQUFRO2dCQUM5Qk0sV0FBV0UsT0FBTyxDQUFDUCxRQUFRUSxNQUFNLENBQUMsQ0FBQyxtQkFBbUIsRUFBRUMsS0FBS0MsU0FBUyxDQUFDSixPQUFPLElBQUksQ0FBQztZQUN2RjtZQUNBRCxXQUFXRSxPQUFPLENBQUNQLFFBQVFRLE1BQU0sQ0FBQztZQUNsQ0gsV0FBV00sS0FBSztRQUNwQjtJQUNKO0lBQ0EsT0FBT2Qsb0VBQXNCQSxDQUFDZSxrQkFBa0IsQ0FBQ1Y7QUFDckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy93cmFwcGVycy5qcz9kMzlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvSHR0cEV2ZW50U3RyZWFtKHN0cmVhbSkge1xuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICBjb25zdCBmaW5hbFN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgIGFzeW5jIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKGBldmVudDogZGF0YVxcbmRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoY2h1bmspfVxcblxcbmApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShcImV2ZW50OiBlbmRcXG5cXG5cIikpO1xuICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbShmaW5hbFN0cmVhbSk7XG59XG4iXSwibmFtZXMiOlsiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsImNvbnZlcnRUb0h0dHBFdmVudFN0cmVhbSIsInN0cmVhbSIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsImZpbmFsU3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJjaHVuayIsImVucXVldWUiLCJlbmNvZGUiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xvc2UiLCJmcm9tUmVhZGFibGVTdHJlYW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/runnables/wrappers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/singletons/index.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/singletons/index.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* eslint-disable @typescript-eslint/no-explicit-any */ \n\nclass MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        return callback();\n    }\n}\nconst mockAsyncLocalStorage = new MockAsyncLocalStorage();\nconst TRACING_ALS_KEY = Symbol.for(\"ls:tracing_async_local_storage\");\nconst LC_CHILD_KEY = Symbol.for(\"lc:child_config\");\nclass AsyncLocalStorageProvider {\n    getInstance() {\n        return globalThis[TRACING_ALS_KEY] ?? mockAsyncLocalStorage;\n    }\n    getRunnableConfig() {\n        const storage = this.getInstance();\n        // this has the runnable config\n        // which means that we should also have an instance of a LangChainTracer\n        // with the run map prepopulated\n        return storage.getStore()?.extra?.[LC_CHILD_KEY];\n    }\n    runWithConfig(config, callback, avoidCreatingRootRunTree) {\n        const callbackManager = _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager._configureSync(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n        const storage = this.getInstance();\n        const parentRunId = callbackManager?.getParentRunId();\n        const langChainTracer = callbackManager?.handlers?.find((handler)=>handler?.name === \"langchain_tracer\");\n        let runTree;\n        if (langChainTracer && parentRunId) {\n            runTree = langChainTracer.convertToRunTree(parentRunId);\n        } else if (!avoidCreatingRootRunTree) {\n            runTree = new langsmith__WEBPACK_IMPORTED_MODULE_0__.RunTree({\n                name: \"<runnable_lambda>\",\n                tracingEnabled: false\n            });\n        }\n        if (runTree) {\n            runTree.extra = {\n                ...runTree.extra,\n                [LC_CHILD_KEY]: config\n            };\n        }\n        return storage.run(runTree, callback);\n    }\n    initializeGlobalInstance(instance) {\n        if (globalThis[TRACING_ALS_KEY] === undefined) {\n            globalThis[TRACING_ALS_KEY] = instance;\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxxREFBcUQsR0FDakI7QUFDc0I7QUFDbkQsTUFBTUU7SUFDVEMsV0FBVztRQUNQLE9BQU9DO0lBQ1g7SUFDQUMsSUFBSUMsTUFBTSxFQUFFQyxRQUFRLEVBQUU7UUFDbEIsT0FBT0E7SUFDWDtBQUNKO0FBQ0EsTUFBTUMsd0JBQXdCLElBQUlOO0FBQ2xDLE1BQU1PLGtCQUFrQkMsT0FBT0MsR0FBRyxDQUFDO0FBQ25DLE1BQU1DLGVBQWVGLE9BQU9DLEdBQUcsQ0FBQztBQUNoQyxNQUFNRTtJQUNGQyxjQUFjO1FBQ1YsT0FBT0MsVUFBVSxDQUFDTixnQkFBZ0IsSUFBSUQ7SUFDMUM7SUFDQVEsb0JBQW9CO1FBQ2hCLE1BQU1DLFVBQVUsSUFBSSxDQUFDSCxXQUFXO1FBQ2hDLCtCQUErQjtRQUMvQix3RUFBd0U7UUFDeEUsZ0NBQWdDO1FBQ2hDLE9BQU9HLFFBQVFkLFFBQVEsSUFBSWUsT0FBTyxDQUFDTixhQUFhO0lBQ3BEO0lBQ0FPLGNBQWNDLE1BQU0sRUFBRWIsUUFBUSxFQUFFYyx3QkFBd0IsRUFBRTtRQUN0RCxNQUFNQyxrQkFBa0JyQixrRUFBZUEsQ0FBQ3NCLGNBQWMsQ0FBQ0gsUUFBUUksV0FBV3BCLFdBQVdnQixRQUFRSyxNQUFNckIsV0FBV2dCLFFBQVFNO1FBQ3RILE1BQU1ULFVBQVUsSUFBSSxDQUFDSCxXQUFXO1FBQ2hDLE1BQU1hLGNBQWNMLGlCQUFpQk07UUFDckMsTUFBTUMsa0JBQWtCUCxpQkFBaUJRLFVBQVVDLEtBQUssQ0FBQ0MsVUFBWUEsU0FBU0MsU0FBUztRQUN2RixJQUFJQztRQUNKLElBQUlMLG1CQUFtQkYsYUFBYTtZQUNoQ08sVUFBVUwsZ0JBQWdCTSxnQkFBZ0IsQ0FBQ1I7UUFDL0MsT0FDSyxJQUFJLENBQUNOLDBCQUEwQjtZQUNoQ2EsVUFBVSxJQUFJbEMsOENBQU9BLENBQUM7Z0JBQ2xCaUMsTUFBTTtnQkFDTkcsZ0JBQWdCO1lBQ3BCO1FBQ0o7UUFDQSxJQUFJRixTQUFTO1lBQ1RBLFFBQVFoQixLQUFLLEdBQUc7Z0JBQUUsR0FBR2dCLFFBQVFoQixLQUFLO2dCQUFFLENBQUNOLGFBQWEsRUFBRVE7WUFBTztRQUMvRDtRQUNBLE9BQU9ILFFBQVFaLEdBQUcsQ0FBQzZCLFNBQVMzQjtJQUNoQztJQUNBOEIseUJBQXlCQyxRQUFRLEVBQUU7UUFDL0IsSUFBSXZCLFVBQVUsQ0FBQ04sZ0JBQWdCLEtBQUtMLFdBQVc7WUFDM0NXLFVBQVUsQ0FBQ04sZ0JBQWdCLEdBQUc2QjtRQUNsQztJQUNKO0FBQ0o7QUFDQSxNQUFNQyxxQ0FBcUMsSUFBSTFCO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvaW5kZXguanM/MWFmOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5pbXBvcnQgeyBSdW5UcmVlIH0gZnJvbSBcImxhbmdzbWl0aFwiO1xuaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5leHBvcnQgY2xhc3MgTW9ja0FzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcnVuKF9zdG9yZSwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuY29uc3QgbW9ja0FzeW5jTG9jYWxTdG9yYWdlID0gbmV3IE1vY2tBc3luY0xvY2FsU3RvcmFnZSgpO1xuY29uc3QgVFJBQ0lOR19BTFNfS0VZID0gU3ltYm9sLmZvcihcImxzOnRyYWNpbmdfYXN5bmNfbG9jYWxfc3RvcmFnZVwiKTtcbmNvbnN0IExDX0NISUxEX0tFWSA9IFN5bWJvbC5mb3IoXCJsYzpjaGlsZF9jb25maWdcIik7XG5jbGFzcyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyIHtcbiAgICBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXNbVFJBQ0lOR19BTFNfS0VZXSA/PyBtb2NrQXN5bmNMb2NhbFN0b3JhZ2U7XG4gICAgfVxuICAgIGdldFJ1bm5hYmxlQ29uZmlnKCkge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5nZXRJbnN0YW5jZSgpO1xuICAgICAgICAvLyB0aGlzIGhhcyB0aGUgcnVubmFibGUgY29uZmlnXG4gICAgICAgIC8vIHdoaWNoIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIGFsc28gaGF2ZSBhbiBpbnN0YW5jZSBvZiBhIExhbmdDaGFpblRyYWNlclxuICAgICAgICAvLyB3aXRoIHRoZSBydW4gbWFwIHByZXBvcHVsYXRlZFxuICAgICAgICByZXR1cm4gc3RvcmFnZS5nZXRTdG9yZSgpPy5leHRyYT8uW0xDX0NISUxEX0tFWV07XG4gICAgfVxuICAgIHJ1bldpdGhDb25maWcoY29uZmlnLCBjYWxsYmFjaywgYXZvaWRDcmVhdGluZ1Jvb3RSdW5UcmVlKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlciA9IENhbGxiYWNrTWFuYWdlci5fY29uZmlndXJlU3luYyhjb25maWc/LmNhbGxiYWNrcywgdW5kZWZpbmVkLCBjb25maWc/LnRhZ3MsIHVuZGVmaW5lZCwgY29uZmlnPy5tZXRhZGF0YSk7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSB0aGlzLmdldEluc3RhbmNlKCk7XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1bklkID0gY2FsbGJhY2tNYW5hZ2VyPy5nZXRQYXJlbnRSdW5JZCgpO1xuICAgICAgICBjb25zdCBsYW5nQ2hhaW5UcmFjZXIgPSBjYWxsYmFja01hbmFnZXI/LmhhbmRsZXJzPy5maW5kKChoYW5kbGVyKSA9PiBoYW5kbGVyPy5uYW1lID09PSBcImxhbmdjaGFpbl90cmFjZXJcIik7XG4gICAgICAgIGxldCBydW5UcmVlO1xuICAgICAgICBpZiAobGFuZ0NoYWluVHJhY2VyICYmIHBhcmVudFJ1bklkKSB7XG4gICAgICAgICAgICBydW5UcmVlID0gbGFuZ0NoYWluVHJhY2VyLmNvbnZlcnRUb1J1blRyZWUocGFyZW50UnVuSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFhdm9pZENyZWF0aW5nUm9vdFJ1blRyZWUpIHtcbiAgICAgICAgICAgIHJ1blRyZWUgPSBuZXcgUnVuVHJlZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCI8cnVubmFibGVfbGFtYmRhPlwiLFxuICAgICAgICAgICAgICAgIHRyYWNpbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5UcmVlKSB7XG4gICAgICAgICAgICBydW5UcmVlLmV4dHJhID0geyAuLi5ydW5UcmVlLmV4dHJhLCBbTENfQ0hJTERfS0VZXTogY29uZmlnIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0b3JhZ2UucnVuKHJ1blRyZWUsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZUdsb2JhbEluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgICAgIGlmIChnbG9iYWxUaGlzW1RSQUNJTkdfQUxTX0tFWV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZ2xvYmFsVGhpc1tUUkFDSU5HX0FMU19LRVldID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uID0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIoKTtcbmV4cG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfTtcbiJdLCJuYW1lcyI6WyJSdW5UcmVlIiwiQ2FsbGJhY2tNYW5hZ2VyIiwiTW9ja0FzeW5jTG9jYWxTdG9yYWdlIiwiZ2V0U3RvcmUiLCJ1bmRlZmluZWQiLCJydW4iLCJfc3RvcmUiLCJjYWxsYmFjayIsIm1vY2tBc3luY0xvY2FsU3RvcmFnZSIsIlRSQUNJTkdfQUxTX0tFWSIsIlN5bWJvbCIsImZvciIsIkxDX0NISUxEX0tFWSIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIiLCJnZXRJbnN0YW5jZSIsImdsb2JhbFRoaXMiLCJnZXRSdW5uYWJsZUNvbmZpZyIsInN0b3JhZ2UiLCJleHRyYSIsInJ1bldpdGhDb25maWciLCJjb25maWciLCJhdm9pZENyZWF0aW5nUm9vdFJ1blRyZWUiLCJjYWxsYmFja01hbmFnZXIiLCJfY29uZmlndXJlU3luYyIsImNhbGxiYWNrcyIsInRhZ3MiLCJtZXRhZGF0YSIsInBhcmVudFJ1bklkIiwiZ2V0UGFyZW50UnVuSWQiLCJsYW5nQ2hhaW5UcmFjZXIiLCJoYW5kbGVycyIsImZpbmQiLCJoYW5kbGVyIiwibmFtZSIsInJ1blRyZWUiLCJjb252ZXJ0VG9SdW5UcmVlIiwidHJhY2luZ0VuYWJsZWQiLCJpbml0aWFsaXplR2xvYmFsSW5zdGFuY2UiLCJpbnN0YW5jZSIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tools/utils.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tools/utils.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolInputParsingException: () => (/* binding */ ToolInputParsingException),\n/* harmony export */   _isToolCall: () => (/* binding */ _isToolCall)\n/* harmony export */ });\nfunction _isToolCall(toolCall) {\n    return !!(toolCall && typeof toolCall === \"object\" && \"type\" in toolCall && toolCall.type === \"tool_call\");\n}\n/**\n * Custom error class used to handle exceptions related to tool input parsing.\n * It extends the built-in `Error` class and adds an optional `output`\n * property that can hold the output that caused the exception.\n */ class ToolInputParsingException extends Error {\n    constructor(message, output){\n        super(message);\n        Object.defineProperty(this, \"output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.output = output;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90b29scy91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLFNBQVNBLFlBQVlDLFFBQVE7SUFDaEMsT0FBTyxDQUFDLENBQUVBLENBQUFBLFlBQ04sT0FBT0EsYUFBYSxZQUNwQixVQUFVQSxZQUNWQSxTQUFTQyxJQUFJLEtBQUssV0FBVTtBQUNwQztBQUNBOzs7O0NBSUMsR0FDTSxNQUFNQyxrQ0FBa0NDO0lBQzNDQyxZQUFZQyxPQUFPLEVBQUVDLE1BQU0sQ0FBRTtRQUN6QixLQUFLLENBQUNEO1FBQ05FLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTixNQUFNLEdBQUdBO0lBQ2xCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Rvb2xzL3V0aWxzLmpzP2ZiNWQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIF9pc1Rvb2xDYWxsKHRvb2xDYWxsKSB7XG4gICAgcmV0dXJuICEhKHRvb2xDYWxsICYmXG4gICAgICAgIHR5cGVvZiB0b29sQ2FsbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBcInR5cGVcIiBpbiB0b29sQ2FsbCAmJlxuICAgICAgICB0b29sQ2FsbC50eXBlID09PSBcInRvb2xfY2FsbFwiKTtcbn1cbi8qKlxuICogQ3VzdG9tIGVycm9yIGNsYXNzIHVzZWQgdG8gaGFuZGxlIGV4Y2VwdGlvbnMgcmVsYXRlZCB0byB0b29sIGlucHV0IHBhcnNpbmcuXG4gKiBJdCBleHRlbmRzIHRoZSBidWlsdC1pbiBgRXJyb3JgIGNsYXNzIGFuZCBhZGRzIGFuIG9wdGlvbmFsIGBvdXRwdXRgXG4gKiBwcm9wZXJ0eSB0aGF0IGNhbiBob2xkIHRoZSBvdXRwdXQgdGhhdCBjYXVzZWQgdGhlIGV4Y2VwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3V0cHV0KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvdXRwdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIl9pc1Rvb2xDYWxsIiwidG9vbENhbGwiLCJ0eXBlIiwiVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwib3V0cHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tools/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer),\n/* harmony export */   isBaseTracer: () => (/* binding */ isBaseTracer)\n/* harmony export */ });\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/callbacks/base.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction convertToDottedOrderFormat(epoch, runId, executionOrder) {\n    const paddedOrder = executionOrder.toFixed(0).slice(0, 3).padStart(3, \"0\");\n    return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}${paddedOrder}Z`) + runId;\n}\nfunction isBaseTracer(x) {\n    return typeof x._addRunToRunMap === \"function\";\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    copy() {\n        return this;\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    _addRunToRunMap(run) {\n        const currentDottedOrder = convertToDottedOrderFormat(run.start_time, run.id, run.execution_order);\n        const storedRun = {\n            ...run\n        };\n        if (storedRun.parent_run_id !== undefined) {\n            const parentRun = this.runMap.get(storedRun.parent_run_id);\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n        }\n        this.runMap.set(storedRun.id, storedRun);\n        return storedRun;\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.runMap.get(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        this.runMap.delete(run.id);\n        await this.onRunUpdate?.(run);\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.runMap.get(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    /**\n     * Create and add a run to the run map for LLM start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for chat model start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for chain start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name);\n        await this.onRunCreate?.(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    /**\n     * Create and add a run to the run map for tool start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForToolStart(tool, input, runId, parentRunId, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleToolEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    /**\n     * Create and add a run to the run map for retriever start events.\n     * This must sometimes be done synchronously to avoid race conditions\n     * when callbacks are backgrounded, so we expose it as a separate method here.\n     */ _createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        return this._addRunToRunMap(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const run = this.runMap.get(runId) ?? this._createRunForRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name);\n        await this.onRunCreate?.(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTREO0FBQzVELDhEQUE4RDtBQUM5RCxTQUFTQyxjQUFjQyxLQUFLLEVBQUVDLFVBQVU7SUFDcEMsT0FBT0QsU0FBUyxDQUFDRSxNQUFNQyxPQUFPLENBQUNILFVBQVUsT0FBT0EsVUFBVSxXQUNwREEsUUFDQTtRQUFFLENBQUNDLFdBQVcsRUFBRUQ7SUFBTTtBQUNoQztBQUNBLFNBQVNJLHFCQUFxQkMsS0FBSztJQUMvQixPQUFPQSxNQUFNQyxPQUFPLENBQUMsVUFBVTtBQUNuQztBQUNBLFNBQVNDLDJCQUEyQkMsS0FBSyxFQUFFQyxLQUFLLEVBQUVDLGNBQWM7SUFDNUQsTUFBTUMsY0FBY0QsZUFBZUUsT0FBTyxDQUFDLEdBQUdDLEtBQUssQ0FBQyxHQUFHLEdBQUdDLFFBQVEsQ0FBQyxHQUFHO0lBQ3RFLE9BQVFWLHFCQUFxQixDQUFDLEVBQUUsSUFBSVcsS0FBS1AsT0FBT1EsV0FBVyxHQUFHSCxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRUYsWUFBWSxDQUFDLENBQUMsSUFBSUY7QUFDbkc7QUFDTyxTQUFTUSxhQUFhQyxDQUFDO0lBQzFCLE9BQU8sT0FBT0EsRUFBRUMsZUFBZSxLQUFLO0FBQ3hDO0FBQ08sTUFBTUMsbUJBQW1CdEIsbUVBQW1CQTtJQUMvQ3VCLFlBQVlDLE9BQU8sQ0FBRTtRQUNqQixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVjVCLE9BQU8sSUFBSTZCO1FBQ2Y7SUFDSjtJQUNBQyxPQUFPO1FBQ0gsT0FBTyxJQUFJO0lBQ2Y7SUFDQUMsZUFBZUMsS0FBSyxFQUFFO1FBQ2xCLHVEQUF1RDtRQUN2RCxJQUFJQSxp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LENBQUNDLE1BQU0sR0FBRzNGO0lBQ3hCO0lBQ0EsTUFBTTRGLGtCQUFrQkMsS0FBSyxFQUFFQyxHQUFHLEVBQUU5SCxLQUFLLEVBQUUwRixZQUFZLEVBQUVDLEtBQUssRUFBRW9DLE1BQU0sRUFBRTtRQUNwRSxNQUFNL0YsTUFBTSxJQUFJLENBQUNRLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDekM7UUFDNUIsSUFBSSxDQUFDZ0MsT0FBT0EsS0FBS3FDLGFBQWEsT0FBTztZQUNqQyxNQUFNLElBQUk3QyxNQUFNLENBQUMseURBQXlELENBQUM7UUFDL0U7UUFDQVEsSUFBSWtDLE1BQU0sQ0FBQ25DLElBQUksQ0FBQztZQUNaOEIsTUFBTTtZQUNOTSxNQUFNLElBQUk3RCxPQUFPQyxXQUFXO1lBQzVCcUYsUUFBUTtnQkFBRWlDO2dCQUFPQztnQkFBS0UsT0FBT0QsUUFBUUM7WUFBTTtRQUMvQztRQUNBLE1BQU0sSUFBSSxDQUFDQyxhQUFhLEdBQUdqRyxLQUFLNkYsT0FBTztZQUFFRyxPQUFPRCxRQUFRQztRQUFNO1FBQzlELE9BQU9oRztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvYmFzZS5qcz82NzU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9iYXNlLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbmZ1bmN0aW9uIHN0cmlwTm9uQWxwaGFudW1lcmljKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1stOi5dL2csIFwiXCIpO1xufVxuZnVuY3Rpb24gY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQoZXBvY2gsIHJ1bklkLCBleGVjdXRpb25PcmRlcikge1xuICAgIGNvbnN0IHBhZGRlZE9yZGVyID0gZXhlY3V0aW9uT3JkZXIudG9GaXhlZCgwKS5zbGljZSgwLCAzKS5wYWRTdGFydCgzLCBcIjBcIik7XG4gICAgcmV0dXJuIChzdHJpcE5vbkFscGhhbnVtZXJpYyhgJHtuZXcgRGF0ZShlcG9jaCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtMSl9JHtwYWRkZWRPcmRlcn1aYCkgKyBydW5JZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlVHJhY2VyKHgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHguX2FkZFJ1blRvUnVuTWFwID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgY2xhc3MgQmFzZVRyYWNlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKF9maWVsZHMpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdHJpbmdpZnlFcnJvcihlcnJvcikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSArIChlcnJvcj8uc3RhY2sgPyBgXFxuXFxuJHtlcnJvci5zdGFja31gIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtlcnJvcn1gO1xuICAgIH1cbiAgICBfYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBjaGlsZFJ1bikge1xuICAgICAgICBwYXJlbnRSdW4uY2hpbGRfcnVucy5wdXNoKGNoaWxkUnVuKTtcbiAgICB9XG4gICAgX2FkZFJ1blRvUnVuTWFwKHJ1bikge1xuICAgICAgICBjb25zdCBjdXJyZW50RG90dGVkT3JkZXIgPSBjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdChydW4uc3RhcnRfdGltZSwgcnVuLmlkLCBydW4uZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgY29uc3Qgc3RvcmVkUnVuID0geyAuLi5ydW4gfTtcbiAgICAgICAgaWYgKHN0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHRoaXMucnVuTWFwLmdldChzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBzdG9yZWRSdW4pO1xuICAgICAgICAgICAgICAgIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgPSBNYXRoLm1heChwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLCBzdG9yZWRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBwYXJlbnRSdW4udHJhY2VfaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UnVuLmRvdHRlZF9vcmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREb3R0ZWRPcmRlcixcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBuYXR1cmFsbHkgZm9yIGNhbGxiYWNrcyBhZGRlZCB3aXRoaW4gYSBydW5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhgUGFyZW50IHJ1biB3aXRoIFVVSUQgJHtzdG9yZWRSdW4ucGFyZW50X3J1bl9pZH0gaGFzIG5vIGRvdHRlZCBvcmRlci5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gbmF0dXJhbGx5IGZvciBjYWxsYmFja3MgYWRkZWQgd2l0aGluIGEgcnVuXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAvLyAgIGBQYXJlbnQgcnVuIHdpdGggVVVJRCAke3N0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkfSBub3QgZm91bmQuYFxuICAgICAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBzdG9yZWRSdW4uaWQ7XG4gICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gY3VycmVudERvdHRlZE9yZGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuTWFwLnNldChzdG9yZWRSdW4uaWQsIHN0b3JlZFJ1bik7XG4gICAgICAgIHJldHVybiBzdG9yZWRSdW47XG4gICAgfVxuICAgIGFzeW5jIF9lbmRUcmFjZShydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcnVuLnBhcmVudF9ydW5faWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ1bk1hcC5nZXQocnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyID0gTWF0aC5tYXgocGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciwgcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RSdW4ocnVuKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bk1hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1blVwZGF0ZT8uKHJ1bik7XG4gICAgfVxuICAgIF9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCkge1xuICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSBwYXJlbnRSdW5JZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnVuTWFwLmdldChwYXJlbnRSdW5JZCk7XG4gICAgICAgIC8vIElmIGEgcnVuIGhhcyBubyBwYXJlbnQgdGhlbiBleGVjdXRpb24gb3JkZXIgaXMgMVxuICAgICAgICBpZiAoIXBhcmVudFJ1bikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgKyAxO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgTExNIHN0YXJ0IGV2ZW50cy5cbiAgICAgKiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgKiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cbiAgICAgKi9cbiAgICBfY3JlYXRlUnVuRm9yTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBmaW5hbEV4dHJhUGFyYW1zID0gbWV0YWRhdGFcbiAgICAgICAgICAgID8geyAuLi5leHRyYVBhcmFtcywgbWV0YWRhdGEgfVxuICAgICAgICAgICAgOiBleHRyYVBhcmFtcztcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBsbG0uaWRbbGxtLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogbGxtLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcHJvbXB0cyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpID8/XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSdW5Gb3JMTE1TdGFydChsbG0sIHByb21wdHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgcnVuIHRvIHRoZSBydW4gbWFwIGZvciBjaGF0IG1vZGVsIHN0YXJ0IGV2ZW50cy5cbiAgICAgKiBUaGlzIG11c3Qgc29tZXRpbWVzIGJlIGRvbmUgc3luY2hyb25vdXNseSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnNcbiAgICAgKiB3aGVuIGNhbGxiYWNrcyBhcmUgYmFja2dyb3VuZGVkLCBzbyB3ZSBleHBvc2UgaXQgYXMgYSBzZXBhcmF0ZSBtZXRob2QgaGVyZS5cbiAgICAgKi9cbiAgICBfY3JlYXRlUnVuRm9yQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZmluYWxFeHRyYVBhcmFtcyA9IG1ldGFkYXRhXG4gICAgICAgICAgICA/IHsgLi4uZXh0cmFQYXJhbXMsIG1ldGFkYXRhIH1cbiAgICAgICAgICAgIDogZXh0cmFQYXJhbXM7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IG1lc3NhZ2VzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZmluYWxFeHRyYVBhcmFtcyA/PyB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpID8/XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVSdW5Gb3JDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FbmQob3V0cHV0LCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBMTE0gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSBvdXRwdXQ7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBMTE0gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIHJ1biB0byB0aGUgcnVuIG1hcCBmb3IgY2hhaW4gc3RhcnQgZXZlbnRzLlxuICAgICAqIFRoaXMgbXVzdCBzb21ldGltZXMgYmUgZG9uZSBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAqIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQsIHNvIHdlIGV4cG9zZSBpdCBhcyBhIHNlcGFyYXRlIG1ldGhvZCBoZXJlLlxuICAgICAqL1xuICAgIF9jcmVhdGVSdW5Gb3JDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIHJ1blR5cGUsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBjaGFpbi5pZFtjaGFpbi5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGNoYWluLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHMsXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBydW5UeXBlID8/IFwiY2hhaW5cIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkUnVuVG9SdW5NYXAocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBydW5UeXBlLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCkgPz9cbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVJ1bkZvckNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgcnVuVHlwZSwgbmFtZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRW5kKG91dHB1dHMsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYWluIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0gX2NvZXJjZVRvRGljdChvdXRwdXRzLCBcIm91dHB1dFwiKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoa3dhcmdzPy5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVuLmlucHV0cyA9IF9jb2VyY2VUb0RpY3Qoa3dhcmdzLmlucHV0cywgXCJpbnB1dFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5FbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVycm9yLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbiBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChrd2FyZ3M/LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBydW4uaW5wdXRzID0gX2NvZXJjZVRvRGljdChrd2FyZ3MuaW5wdXRzLCBcImlucHV0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpbkVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBhZGQgYSBydW4gdG8gdGhlIHJ1biBtYXAgZm9yIHRvb2wgc3RhcnQgZXZlbnRzLlxuICAgICAqIFRoaXMgbXVzdCBzb21ldGltZXMgYmUgZG9uZSBzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAqIHdoZW4gY2FsbGJhY2tzIGFyZSBiYWNrZ3JvdW5kZWQsIHNvIHdlIGV4cG9zZSBpdCBhcyBhIHNlcGFyYXRlIG1ldGhvZCBoZXJlLlxuICAgICAqL1xuICAgIF9jcmVhdGVSdW5Gb3JUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyB0b29sLmlkW3Rvb2wuaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiB0b29sLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgaW5wdXQgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwidG9vbFwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRSdW5Ub1J1bk1hcChydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKSA/P1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlUnVuRm9yVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFbmQob3V0cHV0LCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInRvb2xcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdG9vbCBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0geyBvdXRwdXQgfTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbEVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFcnJvcihlcnJvciwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEFjdGlvbihhY3Rpb24sIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFnZW50UnVuID0gcnVuO1xuICAgICAgICBhZ2VudFJ1bi5hY3Rpb25zID0gYWdlbnRSdW4uYWN0aW9ucyB8fCBbXTtcbiAgICAgICAgYWdlbnRSdW4uYWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgIGFnZW50UnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiYWdlbnRfYWN0aW9uXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgYWN0aW9uIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQWdlbnRBY3Rpb24/LihydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEVuZChhY3Rpb24sIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImFnZW50X2VuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IGFjdGlvbiB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkFnZW50RW5kPy4ocnVuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBhZGQgYSBydW4gdG8gdGhlIHJ1biBtYXAgZm9yIHJldHJpZXZlciBzdGFydCBldmVudHMuXG4gICAgICogVGhpcyBtdXN0IHNvbWV0aW1lcyBiZSBkb25lIHN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gICAgICogd2hlbiBjYWxsYmFja3MgYXJlIGJhY2tncm91bmRlZCwgc28gd2UgZXhwb3NlIGl0IGFzIGEgc2VwYXJhdGUgbWV0aG9kIGhlcmUuXG4gICAgICovXG4gICAgX2NyZWF0ZVJ1bkZvclJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyByZXRyaWV2ZXIuaWRbcmV0cmlldmVyLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogcmV0cmlldmVyLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcXVlcnkgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwicmV0cmlldmVyXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZFJ1blRvUnVuTWFwKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKSA/P1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlUnVuRm9yUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFbmQoZG9jdW1lbnRzLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInJldHJpZXZlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXRyaWV2ZXIgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IHsgZG9jdW1lbnRzIH07XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlckVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInJldHJpZXZlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXRyaWV2ZXIgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJFcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRleHQodGV4dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwidGV4dFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IHRleHQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25UZXh0Py4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4sIGlkeCwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgXCJydW5JZFwiIHByb3ZpZGVkIHRvIFwiaGFuZGxlTExNTmV3VG9rZW5cIiBjYWxsYmFjay5gKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJuZXdfdG9rZW5cIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyB0b2tlbiwgaWR4LCBjaHVuazogZmllbGRzPy5jaHVuayB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTU5ld1Rva2VuPy4ocnVuLCB0b2tlbiwgeyBjaHVuazogZmllbGRzPy5jaHVuayB9KTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZUNhbGxiYWNrSGFuZGxlciIsIl9jb2VyY2VUb0RpY3QiLCJ2YWx1ZSIsImRlZmF1bHRLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJzdHJpcE5vbkFscGhhbnVtZXJpYyIsImlucHV0IiwicmVwbGFjZSIsImNvbnZlcnRUb0RvdHRlZE9yZGVyRm9ybWF0IiwiZXBvY2giLCJydW5JZCIsImV4ZWN1dGlvbk9yZGVyIiwicGFkZGVkT3JkZXIiLCJ0b0ZpeGVkIiwic2xpY2UiLCJwYWRTdGFydCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImlzQmFzZVRyYWNlciIsIngiLCJfYWRkUnVuVG9SdW5NYXAiLCJCYXNlVHJhY2VyIiwiY29uc3RydWN0b3IiLCJfZmllbGRzIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJNYXAiLCJjb3B5Iiwic3RyaW5naWZ5RXJyb3IiLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInN0YWNrIiwiX2FkZENoaWxkUnVuIiwicGFyZW50UnVuIiwiY2hpbGRSdW4iLCJjaGlsZF9ydW5zIiwicHVzaCIsInJ1biIsImN1cnJlbnREb3R0ZWRPcmRlciIsInN0YXJ0X3RpbWUiLCJpZCIsImV4ZWN1dGlvbl9vcmRlciIsInN0b3JlZFJ1biIsInBhcmVudF9ydW5faWQiLCJ1bmRlZmluZWQiLCJydW5NYXAiLCJnZXQiLCJjaGlsZF9leGVjdXRpb25fb3JkZXIiLCJNYXRoIiwibWF4IiwidHJhY2VfaWQiLCJkb3R0ZWRfb3JkZXIiLCJqb2luIiwic2V0IiwiX2VuZFRyYWNlIiwicGVyc2lzdFJ1biIsImRlbGV0ZSIsIm9uUnVuVXBkYXRlIiwiX2dldEV4ZWN1dGlvbk9yZGVyIiwicGFyZW50UnVuSWQiLCJfY3JlYXRlUnVuRm9yTExNU3RhcnQiLCJsbG0iLCJwcm9tcHRzIiwiZXh0cmFQYXJhbXMiLCJ0YWdzIiwibWV0YWRhdGEiLCJuYW1lIiwibm93IiwiZmluYWxFeHRyYVBhcmFtcyIsImxlbmd0aCIsInNlcmlhbGl6ZWQiLCJldmVudHMiLCJ0aW1lIiwiaW5wdXRzIiwicnVuX3R5cGUiLCJleHRyYSIsImhhbmRsZUxMTVN0YXJ0Iiwib25SdW5DcmVhdGUiLCJvbkxMTVN0YXJ0IiwiX2NyZWF0ZVJ1bkZvckNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJoYW5kbGVDaGF0TW9kZWxTdGFydCIsImhhbmRsZUxMTUVuZCIsIm91dHB1dCIsImVuZF90aW1lIiwib3V0cHV0cyIsIm9uTExNRW5kIiwiaGFuZGxlTExNRXJyb3IiLCJvbkxMTUVycm9yIiwiX2NyZWF0ZVJ1bkZvckNoYWluU3RhcnQiLCJjaGFpbiIsInJ1blR5cGUiLCJoYW5kbGVDaGFpblN0YXJ0Iiwib25DaGFpblN0YXJ0IiwiaGFuZGxlQ2hhaW5FbmQiLCJfcGFyZW50UnVuSWQiLCJfdGFncyIsImt3YXJncyIsIm9uQ2hhaW5FbmQiLCJoYW5kbGVDaGFpbkVycm9yIiwib25DaGFpbkVycm9yIiwiX2NyZWF0ZVJ1bkZvclRvb2xTdGFydCIsInRvb2wiLCJoYW5kbGVUb29sU3RhcnQiLCJvblRvb2xTdGFydCIsImhhbmRsZVRvb2xFbmQiLCJvblRvb2xFbmQiLCJoYW5kbGVUb29sRXJyb3IiLCJvblRvb2xFcnJvciIsImhhbmRsZUFnZW50QWN0aW9uIiwiYWN0aW9uIiwiYWdlbnRSdW4iLCJhY3Rpb25zIiwib25BZ2VudEFjdGlvbiIsImhhbmRsZUFnZW50RW5kIiwib25BZ2VudEVuZCIsIl9jcmVhdGVSdW5Gb3JSZXRyaWV2ZXJTdGFydCIsInJldHJpZXZlciIsInF1ZXJ5IiwiaGFuZGxlUmV0cmlldmVyU3RhcnQiLCJvblJldHJpZXZlclN0YXJ0IiwiaGFuZGxlUmV0cmlldmVyRW5kIiwiZG9jdW1lbnRzIiwib25SZXRyaWV2ZXJFbmQiLCJoYW5kbGVSZXRyaWV2ZXJFcnJvciIsIm9uUmV0cmlldmVyRXJyb3IiLCJoYW5kbGVUZXh0IiwidGV4dCIsIm9uVGV4dCIsImhhbmRsZUxMTU5ld1Rva2VuIiwidG9rZW4iLCJpZHgiLCJmaWVsZHMiLCJjaHVuayIsIm9uTExNTmV3VG9rZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/console.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/console.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction formatKVMapItem(value) {\n    if (typeof value === \"string\") {\n        return value.trim();\n    }\n    if (value === null || value === undefined) {\n        return value;\n    }\n    return tryJsonStringify(value, value.toString());\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${formatKVMapItem(run.inputs.input)}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${formatKVMapItem(run.outputs?.output)}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2NvbnNvbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ007QUFDdkMsU0FBU0UsS0FBS0MsS0FBSyxFQUFFQyxJQUFJO0lBQ3JCLE9BQU8sQ0FBQyxFQUFFRCxNQUFNRSxJQUFJLENBQUMsRUFBRUQsS0FBSyxFQUFFRCxNQUFNRyxLQUFLLENBQUMsQ0FBQztBQUMvQztBQUNBLFNBQVNDLGlCQUFpQkMsR0FBRyxFQUFFQyxRQUFRO0lBQ25DLElBQUk7UUFDQSxPQUFPQyxLQUFLQyxTQUFTLENBQUNILEtBQUssTUFBTTtJQUNyQyxFQUNBLE9BQU9JLEtBQUs7UUFDUixPQUFPSDtJQUNYO0FBQ0o7QUFDQSxTQUFTSSxnQkFBZ0JDLEtBQUs7SUFDMUIsSUFBSSxPQUFPQSxVQUFVLFVBQVU7UUFDM0IsT0FBT0EsTUFBTUMsSUFBSTtJQUNyQjtJQUNBLElBQUlELFVBQVUsUUFBUUEsVUFBVUUsV0FBVztRQUN2QyxPQUFPRjtJQUNYO0lBQ0EsT0FBT1AsaUJBQWlCTyxPQUFPQSxNQUFNRyxRQUFRO0FBQ2pEO0FBQ0EsU0FBU0MsUUFBUUMsR0FBRztJQUNoQixJQUFJLENBQUNBLElBQUlDLFFBQVEsRUFDYixPQUFPO0lBQ1gsTUFBTUYsVUFBVUMsSUFBSUMsUUFBUSxHQUFHRCxJQUFJRSxVQUFVO0lBQzdDLElBQUlILFVBQVUsTUFBTTtRQUNoQixPQUFPLENBQUMsRUFBRUEsUUFBUSxFQUFFLENBQUM7SUFDekI7SUFDQSxPQUFPLENBQUMsRUFBRSxDQUFDQSxVQUFVLElBQUcsRUFBR0ksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVDO0FBQ0EsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR3ZCLHdDQUFNQTtBQUN4Qjs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUNNLE1BQU13QiwrQkFBK0J2QixnREFBVUE7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QUN6QjtRQUNuQ3dDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUxRCxLQUFLcUIsTUFBTTRDLEdBQUcsRUFBRSxxQkFBcUIsRUFBRSxFQUFFVCxPQUFPLEdBQUcsRUFBRXhDLFFBQVFDLEtBQUssb0NBQW9DLEVBQUVaLGlCQUFpQlksSUFBSWlELEtBQUssRUFBRSxXQUFXLENBQUM7SUFDbks7SUFDQTs7OztLQUlDLEdBQ0RjLGNBQWMvRCxHQUFHLEVBQUU7UUFDZixNQUFNZ0UsV0FBV2hFO1FBQ2pCLE1BQU11QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDekI7UUFDbkN3QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFMUQsS0FBS3FCLE1BQU02RCxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsRUFBRTFCLE9BQU8seUJBQXlCLEVBQUVuRCxpQkFBaUI0RSxTQUFTRSxPQUFPLENBQUNGLFNBQVNFLE9BQU8sQ0FBQ2hDLE1BQU0sR0FBRyxFQUFFLEVBQUUsWUFBWSxDQUFDO0lBQ3pLO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvY29uc29sZS5qcz8zNjU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdHlsZXMgZnJvbSBcImFuc2ktc3R5bGVzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZnVuY3Rpb24gd3JhcChzdHlsZSwgdGV4dCkge1xuICAgIHJldHVybiBgJHtzdHlsZS5vcGVufSR7dGV4dH0ke3N0eWxlLmNsb3NlfWA7XG59XG5mdW5jdGlvbiB0cnlKc29uU3RyaW5naWZ5KG9iaiwgZmFsbGJhY2spIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0S1ZNYXBJdGVtKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB0cnlKc29uU3RyaW5naWZ5KHZhbHVlLCB2YWx1ZS50b1N0cmluZygpKTtcbn1cbmZ1bmN0aW9uIGVsYXBzZWQocnVuKSB7XG4gICAgaWYgKCFydW4uZW5kX3RpbWUpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBydW4uZW5kX3RpbWUgLSBydW4uc3RhcnRfdGltZTtcbiAgICBpZiAoZWxhcHNlZCA8IDEwMDApIHtcbiAgICAgICAgcmV0dXJuIGAke2VsYXBzZWR9bXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7KGVsYXBzZWQgLyAxMDAwKS50b0ZpeGVkKDIpfXNgO1xufVxuY29uc3QgeyBjb2xvciB9ID0gc3R5bGVzO1xuLyoqXG4gKiBBIHRyYWNlciB0aGF0IGxvZ3MgYWxsIGV2ZW50cyB0byB0aGUgY29uc29sZS4gSXQgZXh0ZW5kcyBmcm9tIHRoZVxuICogYEJhc2VUcmFjZXJgIGNsYXNzIGFuZCBvdmVycmlkZXMgaXRzIG1ldGhvZHMgdG8gcHJvdmlkZSBjdXN0b20gbG9nZ2luZ1xuICogZnVuY3Rpb25hbGl0eS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKlxuICogY29uc3QgbGxtID0gbmV3IENoYXRBbnRocm9waWMoe1xuICogICB0ZW1wZXJhdHVyZTogMCxcbiAqICAgdGFnczogW1wiZXhhbXBsZVwiLCBcImNhbGxiYWNrc1wiLCBcImNvbnN0cnVjdG9yXCJdLFxuICogICBjYWxsYmFja3M6IFtuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpXSxcbiAqIH0pO1xuICpcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBwZXJzaXN0IHRoZSBydW4uIEluIHRoaXMgY2FzZSwgaXQgc2ltcGx5IHJldHVybnMgYVxuICAgICAqIHJlc29sdmVkIHByb21pc2UgYXMgdGhlcmUncyBubyBwZXJzaXN0ZW5jZSBsb2dpYy5cbiAgICAgKiBAcGFyYW0gX3J1biBUaGUgcnVuIHRvIHBlcnNpc3QuXG4gICAgICogQHJldHVybnMgQSByZXNvbHZlZCBwcm9taXNlLlxuICAgICAqL1xuICAgIHBlcnNpc3RSdW4oX3J1bikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8vIHV0aWxpdHkgbWV0aG9kc1xuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGdldCBhbGwgdGhlIHBhcmVudCBydW5zIG9mIGEgZ2l2ZW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBwYXJlbnRzIGFyZSB0byBiZSByZXRyaWV2ZWQuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgcGFyZW50IHJ1bnMuXG4gICAgICovXG4gICAgZ2V0UGFyZW50cyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudFJ1biA9IHJ1bjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5ydW5NYXAuZ2V0KGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFJ1biA9IHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBnZXQgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bidzIGxpbmVhZ2UsIHdoaWNoXG4gICAgICogaXMgdXNlZCBpbiBsb2dnaW5nLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBsaW5lYWdlIGlzIHRvIGJlIHJldHJpZXZlZC5cbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVuJ3MgbGluZWFnZS5cbiAgICAgKi9cbiAgICBnZXRCcmVhZGNydW1icyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuZ2V0UGFyZW50cyhydW4pLnJldmVyc2UoKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gWy4uLnBhcmVudHMsIHJ1bl1cbiAgICAgICAgICAgIC5tYXAoKHBhcmVudCwgaSwgYXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7cGFyZW50LmV4ZWN1dGlvbl9vcmRlcn06JHtwYXJlbnQucnVuX3R5cGV9OiR7cGFyZW50Lm5hbWV9YDtcbiAgICAgICAgICAgIHJldHVybiBpID09PSBhcnIubGVuZ3RoIC0gMSA/IHdyYXAoc3R5bGVzLmJvbGQsIG5hbWUpIDogbmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiID4gXCIpO1xuICAgICAgICByZXR1cm4gd3JhcChjb2xvci5ncmV5LCBzdHJpbmcpO1xuICAgIH1cbiAgICAvLyBsb2dnaW5nIG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbY2hhaW4vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBDaGFpbiBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2NoYWluL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgQ2hhaW4gcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltjaGFpbi9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIENoYWluIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBcInByb21wdHNcIiBpbiBydW4uaW5wdXRzXG4gICAgICAgICAgICA/IHsgcHJvbXB0czogcnVuLmlucHV0cy5wcm9tcHRzLm1hcCgocCkgPT4gcC50cmltKCkpIH1cbiAgICAgICAgICAgIDogcnVuLmlucHV0cztcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbbGxtL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgTExNIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkoaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbbGxtL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgTExNIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltyZXNwb25zZV1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGFuIExMTSBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgTExNIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTUVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltsbG0vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBMTE0gcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbdG9vbC9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFRvb2wgcnVuIHdpdGggaW5wdXQ6IFwiJHtmb3JtYXRLVk1hcEl0ZW0ocnVuLmlucHV0cy5pbnB1dCl9XCJgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYSB0b29sIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSB0b29sIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbdG9vbC9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFRvb2wgcnVuIHdpdGggb3V0cHV0OiBcIiR7Zm9ybWF0S1ZNYXBJdGVtKHJ1bi5vdXRwdXRzPy5vdXRwdXQpfVwiYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3Rvb2wvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBUb29sIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlclN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3JldHJpZXZlci9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFJldHJpZXZlciBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlckVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3JldHJpZXZlci9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFJldHJpZXZlciBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbb3V0cHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uUmV0cmlldmVyRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3JldHJpZXZlci9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIFJldHJpZXZlciBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgYWN0aW9uIHNlbGVjdGVkIGJ5IHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gaW4gd2hpY2ggdGhlIGFnZW50IGFjdGlvbiBvY2N1cnJlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25BZ2VudEFjdGlvbihydW4pIHtcbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ibHVlLCBcIlthZ2VudC9hY3Rpb25dXCIpfSBbJHtjcnVtYnN9XSBBZ2VudCBzZWxlY3RlZCBhY3Rpb246ICR7dHJ5SnNvblN0cmluZ2lmeShhZ2VudFJ1bi5hY3Rpb25zW2FnZW50UnVuLmFjdGlvbnMubGVuZ3RoIC0gMV0sIFwiW2FjdGlvbl1cIil9YCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInN0eWxlcyIsIkJhc2VUcmFjZXIiLCJ3cmFwIiwic3R5bGUiLCJ0ZXh0Iiwib3BlbiIsImNsb3NlIiwidHJ5SnNvblN0cmluZ2lmeSIsIm9iaiIsImZhbGxiYWNrIiwiSlNPTiIsInN0cmluZ2lmeSIsImVyciIsImZvcm1hdEtWTWFwSXRlbSIsInZhbHVlIiwidHJpbSIsInVuZGVmaW5lZCIsInRvU3RyaW5nIiwiZWxhcHNlZCIsInJ1biIsImVuZF90aW1lIiwic3RhcnRfdGltZSIsInRvRml4ZWQiLCJjb2xvciIsIkNvbnNvbGVDYWxsYmFja0hhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldFBhcmVudHMiLCJwYXJlbnRzIiwiY3VycmVudFJ1biIsInBhcmVudF9ydW5faWQiLCJwYXJlbnQiLCJydW5NYXAiLCJnZXQiLCJwdXNoIiwiZ2V0QnJlYWRjcnVtYnMiLCJyZXZlcnNlIiwic3RyaW5nIiwibWFwIiwiaSIsImFyciIsIm5hbWUiLCJleGVjdXRpb25fb3JkZXIiLCJydW5fdHlwZSIsImxlbmd0aCIsImJvbGQiLCJqb2luIiwiZ3JleSIsIm9uQ2hhaW5TdGFydCIsImNydW1icyIsImNvbnNvbGUiLCJsb2ciLCJncmVlbiIsImlucHV0cyIsIm9uQ2hhaW5FbmQiLCJjeWFuIiwib3V0cHV0cyIsIm9uQ2hhaW5FcnJvciIsInJlZCIsImVycm9yIiwib25MTE1TdGFydCIsInByb21wdHMiLCJwIiwib25MTE1FbmQiLCJvbkxMTUVycm9yIiwib25Ub29sU3RhcnQiLCJpbnB1dCIsIm9uVG9vbEVuZCIsIm91dHB1dCIsIm9uVG9vbEVycm9yIiwib25SZXRyaWV2ZXJTdGFydCIsIm9uUmV0cmlldmVyRW5kIiwib25SZXRyaWV2ZXJFcnJvciIsIm9uQWdlbnRBY3Rpb24iLCJhZ2VudFJ1biIsImJsdWUiLCJhY3Rpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/event_stream.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/event_stream.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventStreamCallbackHandler: () => (/* binding */ EventStreamCallbackHandler),\n/* harmony export */   isStreamEventsHandler: () => (/* binding */ isStreamEventsHandler)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/ai.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/outputs.js\");\n\n\n\n\nfunction assignName({ name, serialized }) {\n    if (name !== undefined) {\n        return name;\n    }\n    if (serialized?.name !== undefined) {\n        return serialized.name;\n    } else if (serialized?.id !== undefined && Array.isArray(serialized?.id)) {\n        return serialized.id[serialized.id.length - 1];\n    }\n    return \"Unnamed\";\n}\nconst isStreamEventsHandler = (handler)=>handler.name === \"event_stream_tracer\";\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class EventStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"runInfoMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"tappedPromises\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"event_stream_tracer\"\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_1__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.runType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.runType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, outputStream) {\n        const firstChunk = await outputStream.next();\n        if (firstChunk.done) {\n            return;\n        }\n        const runInfo = this.runInfoMap.get(runId);\n        // Run has finished, don't issue any stream events.\n        // An example of this is for runnables that use the default\n        // implementation of .stream(), which delegates to .invoke()\n        // and calls .onChainEnd() before passing it to the iterator.\n        if (runInfo === undefined) {\n            yield firstChunk.value;\n            return;\n        }\n        // Match format from handlers below\n        function _formatOutputChunk(eventType, data) {\n            if (eventType === \"llm\" && typeof data === \"string\") {\n                return new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({\n                    text: data\n                });\n            }\n            return data;\n        }\n        let tappedPromise = this.tappedPromises.get(runId);\n        // if we are the first to tap, issue stream events\n        if (tappedPromise === undefined) {\n            let tappedPromiseResolver;\n            tappedPromise = new Promise((resolve)=>{\n                tappedPromiseResolver = resolve;\n            });\n            this.tappedPromises.set(runId, tappedPromise);\n            try {\n                const event = {\n                    event: `on_${runInfo.runType}_stream`,\n                    run_id: runId,\n                    name: runInfo.name,\n                    tags: runInfo.tags,\n                    metadata: runInfo.metadata,\n                    data: {}\n                };\n                await this.send({\n                    ...event,\n                    data: {\n                        chunk: _formatOutputChunk(runInfo.runType, firstChunk.value)\n                    }\n                }, runInfo);\n                yield firstChunk.value;\n                for await (const chunk of outputStream){\n                    // Don't yield tool and retriever stream events\n                    if (runInfo.runType !== \"tool\" && runInfo.runType !== \"retriever\") {\n                        await this.send({\n                            ...event,\n                            data: {\n                                chunk: _formatOutputChunk(runInfo.runType, chunk)\n                            }\n                        }, runInfo);\n                    }\n                    yield chunk;\n                }\n            } finally{\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                tappedPromiseResolver();\n            // Don't delete from the promises map to keep track of which runs have been tapped.\n            }\n        } else {\n            // otherwise just pass through\n            yield firstChunk.value;\n            for await (const chunk of outputStream){\n                yield chunk;\n            }\n        }\n    }\n    async send(payload, run) {\n        if (this._includeRun(run)) {\n            await this.writer.write(payload);\n        }\n    }\n    async sendEndEvent(payload, run) {\n        const tappedPromise = this.tappedPromises.get(payload.run_id);\n        if (tappedPromise !== undefined) {\n            void tappedPromise.then(()=>{\n                void this.send(payload, run);\n            });\n        } else {\n            await this.send(payload, run);\n        }\n    }\n    async onLLMStart(run) {\n        const runName = assignName(run);\n        const runType = run.inputs.messages !== undefined ? \"chat_model\" : \"llm\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType,\n            inputs: run.inputs\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        const eventName = `on_${runType}_start`;\n        await this.send({\n            event: eventName,\n            data: {\n                input: run.inputs\n            },\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onLLMNewToken(run, token, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    kwargs) {\n        const runInfo = this.runInfoMap.get(run.id);\n        let chunk;\n        let eventName;\n        if (runInfo === undefined) {\n            throw new Error(`onLLMNewToken: Run ID ${run.id} not found in run map.`);\n        }\n        // Top-level streaming events are covered by tapOutputIterable\n        if (this.runInfoMap.size === 1) {\n            return;\n        }\n        if (runInfo.runType === \"chat_model\") {\n            eventName = \"on_chat_model_stream\";\n            if (kwargs?.chunk === undefined) {\n                chunk = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n                    content: token,\n                    id: `run-${run.id}`\n                });\n            } else {\n                chunk = kwargs.chunk.message;\n            }\n        } else if (runInfo.runType === \"llm\") {\n            eventName = \"on_llm_stream\";\n            if (kwargs?.chunk === undefined) {\n                chunk = new _outputs_js__WEBPACK_IMPORTED_MODULE_3__.GenerationChunk({\n                    text: token\n                });\n            } else {\n                chunk = kwargs.chunk;\n            }\n        } else {\n            throw new Error(`Unexpected run type ${runInfo.runType}`);\n        }\n        await this.send({\n            event: eventName,\n            data: {\n                chunk\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onLLMEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        let eventName;\n        if (runInfo === undefined) {\n            throw new Error(`onLLMEnd: Run ID ${run.id} not found in run map.`);\n        }\n        const generations = run.outputs?.generations;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let output;\n        if (runInfo.runType === \"chat_model\") {\n            for (const generation of generations ?? []){\n                if (output !== undefined) {\n                    break;\n                }\n                output = generation[0]?.message;\n            }\n            eventName = \"on_chat_model_end\";\n        } else if (runInfo.runType === \"llm\") {\n            output = {\n                generations: generations?.map((generation)=>{\n                    return generation.map((chunk)=>{\n                        return {\n                            text: chunk.text,\n                            generationInfo: chunk.generationInfo\n                        };\n                    });\n                }),\n                llmOutput: run.outputs?.llmOutput ?? {}\n            };\n            eventName = \"on_llm_end\";\n        } else {\n            throw new Error(`onLLMEnd: Unexpected run type: ${runInfo.runType}`);\n        }\n        await this.sendEndEvent({\n            event: eventName,\n            data: {\n                output,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onChainStart(run) {\n        const runName = assignName(run);\n        const runType = run.run_type ?? \"chain\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType: run.run_type\n        };\n        let eventData = {};\n        // Workaround Runnable core code not sending input when transform streaming.\n        if (run.inputs.input === \"\" && Object.keys(run.inputs).length === 1) {\n            eventData = {};\n            runInfo.inputs = {};\n        } else if (run.inputs.input !== undefined) {\n            eventData.input = run.inputs.input;\n            runInfo.inputs = run.inputs.input;\n        } else {\n            eventData.input = run.inputs;\n            runInfo.inputs = run.inputs;\n        }\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: `on_${runType}_start`,\n            data: eventData,\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onChainEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onChainEnd: Run ID ${run.id} not found in run map.`);\n        }\n        const eventName = `on_${run.run_type}_end`;\n        const inputs = run.inputs ?? runInfo.inputs ?? {};\n        const outputs = run.outputs?.output ?? run.outputs;\n        const data = {\n            output: outputs,\n            input: inputs\n        };\n        if (inputs.input && Object.keys(inputs).length === 1) {\n            data.input = inputs.input;\n            runInfo.inputs = inputs.input;\n        }\n        await this.sendEndEvent({\n            event: eventName,\n            data,\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata ?? {}\n        }, runInfo);\n    }\n    async onToolStart(run) {\n        const runName = assignName(run);\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType: \"tool\",\n            inputs: run.inputs ?? {}\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: \"on_tool_start\",\n            data: {\n                input: run.inputs ?? {}\n            },\n            name: runName,\n            run_id: run.id,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onToolEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onToolEnd: Run ID ${run.id} not found in run map.`);\n        }\n        if (runInfo.inputs === undefined) {\n            throw new Error(`onToolEnd: Run ID ${run.id} is a tool call, and is expected to have traced inputs.`);\n        }\n        const output = run.outputs?.output === undefined ? run.outputs : run.outputs.output;\n        await this.sendEndEvent({\n            event: \"on_tool_end\",\n            data: {\n                output,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    async onRetrieverStart(run) {\n        const runName = assignName(run);\n        const runType = \"retriever\";\n        const runInfo = {\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            name: runName,\n            runType,\n            inputs: {\n                query: run.inputs.query\n            }\n        };\n        this.runInfoMap.set(run.id, runInfo);\n        await this.send({\n            event: \"on_retriever_start\",\n            data: {\n                input: {\n                    query: run.inputs.query\n                }\n            },\n            name: runName,\n            tags: run.tags ?? [],\n            run_id: run.id,\n            metadata: run.extra?.metadata ?? {}\n        }, runInfo);\n    }\n    async onRetrieverEnd(run) {\n        const runInfo = this.runInfoMap.get(run.id);\n        this.runInfoMap.delete(run.id);\n        if (runInfo === undefined) {\n            throw new Error(`onRetrieverEnd: Run ID ${run.id} not found in run map.`);\n        }\n        await this.sendEndEvent({\n            event: \"on_retriever_end\",\n            data: {\n                output: run.outputs?.documents ?? run.outputs,\n                input: runInfo.inputs\n            },\n            run_id: run.id,\n            name: runInfo.name,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata\n        }, runInfo);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async handleCustomEvent(eventName, data, runId) {\n        const runInfo = this.runInfoMap.get(runId);\n        if (runInfo === undefined) {\n            throw new Error(`handleCustomEvent: Run ID ${runId} not found in run map.`);\n        }\n        await this.send({\n            event: \"on_custom_event\",\n            run_id: runId,\n            name: eventName,\n            tags: runInfo.tags,\n            metadata: runInfo.metadata,\n            data\n        }, runInfo);\n    }\n    async finish() {\n        const pendingPromises = [\n            ...this.tappedPromises.values()\n        ];\n        void Promise.all(pendingPromises).finally(()=>{\n            void this.writer.close();\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2V2ZW50X3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUM7QUFDcUI7QUFDVDtBQUNIO0FBQ2hELFNBQVNJLFdBQVcsRUFBRUMsSUFBSSxFQUFFQyxVQUFVLEVBQUc7SUFDckMsSUFBSUQsU0FBU0UsV0FBVztRQUNwQixPQUFPRjtJQUNYO0lBQ0EsSUFBSUMsWUFBWUQsU0FBU0UsV0FBVztRQUNoQyxPQUFPRCxXQUFXRCxJQUFJO0lBQzFCLE9BQ0ssSUFBSUMsWUFBWUUsT0FBT0QsYUFBYUUsTUFBTUMsT0FBTyxDQUFDSixZQUFZRSxLQUFLO1FBQ3BFLE9BQU9GLFdBQVdFLEVBQUUsQ0FBQ0YsV0FBV0UsRUFBRSxDQUFDRyxNQUFNLEdBQUcsRUFBRTtJQUNsRDtJQUNBLE9BQU87QUFDWDtBQUNPLE1BQU1DLHdCQUF3QixDQUFDQyxVQUFZQSxRQUFRUixJQUFJLEtBQUssc0JBQXNCO0FBQ3pGOzs7OztDQUtDLEdBQ00sTUFBTVMsbUNBQW1DZCxnREFBVUE7SUFDdERlLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUM7WUFBRUMsZUFBZTtZQUFNLEdBQUdELE1BQU07UUFBQztRQUN2Q0UsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9B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TXdELGtCQUFrQjdCLFNBQVMsRUFBRXRCLElBQUksRUFBRVYsS0FBSyxFQUFFO1FBQzVDLE1BQU1LLFVBQVUsSUFBSSxDQUFDQyxVQUFVLENBQUNDLEdBQUcsQ0FBQ1A7UUFDcEMsSUFBSUssWUFBWXBELFdBQVc7WUFDdkIsTUFBTSxJQUFJb0YsTUFBTSxDQUFDLDBCQUEwQixFQUFFckMsTUFBTSxzQkFBc0IsQ0FBQztRQUM5RTtRQUNBLE1BQU0sSUFBSSxDQUFDcUIsSUFBSSxDQUFDO1lBQ1pILE9BQU87WUFDUEMsUUFBUW5CO1lBQ1JqRCxNQUFNaUY7WUFDTnhDLE1BQU1hLFFBQVFiLElBQUk7WUFDbEI0QixVQUFVZixRQUFRZSxRQUFRO1lBQzFCVjtRQUNKLEdBQUdMO0lBQ1A7SUFDQSxNQUFNeUQsU0FBUztRQUNYLE1BQU1DLGtCQUFrQjtlQUFJLElBQUksQ0FBQ2xELGNBQWMsQ0FBQ21ELE1BQU07U0FBRztRQUN6RCxLQUFLakQsUUFBUWtELEdBQUcsQ0FBQ0YsaUJBQWlCRyxPQUFPLENBQUM7WUFDdEMsS0FBSyxJQUFJLENBQUN0RixNQUFNLENBQUN1RixLQUFLO1FBQzFCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9ldmVudF9zdHJlYW0uanM/YmJlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2FpLmpzXCI7XG5pbXBvcnQgeyBHZW5lcmF0aW9uQ2h1bmsgfSBmcm9tIFwiLi4vb3V0cHV0cy5qc1wiO1xuZnVuY3Rpb24gYXNzaWduTmFtZSh7IG5hbWUsIHNlcmlhbGl6ZWQsIH0pIHtcbiAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgICBpZiAoc2VyaWFsaXplZD8ubmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVkLm5hbWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNlcmlhbGl6ZWQ/LmlkICE9PSB1bmRlZmluZWQgJiYgQXJyYXkuaXNBcnJheShzZXJpYWxpemVkPy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQuaWRbc2VyaWFsaXplZC5pZC5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIFwiVW5uYW1lZFwiO1xufVxuZXhwb3J0IGNvbnN0IGlzU3RyZWFtRXZlbnRzSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwiZXZlbnRfc3RyZWFtX3RyYWNlclwiO1xuLyoqXG4gKiBDbGFzcyB0aGF0IGV4dGVuZHMgdGhlIGBCYXNlVHJhY2VyYCBjbGFzcyBmcm9tIHRoZVxuICogYGxhbmdjaGFpbi5jYWxsYmFja3MudHJhY2Vycy5iYXNlYCBtb2R1bGUuIEl0IHJlcHJlc2VudHMgYSBjYWxsYmFja1xuICogaGFuZGxlciB0aGF0IGxvZ3MgdGhlIGV4ZWN1dGlvbiBvZiBydW5zIGFuZCBlbWl0cyBgUnVuTG9nYCBpbnN0YW5jZXMgdG8gYVxuICogYFJ1bkxvZ1N0cmVhbWAuXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmVudFN0cmVhbUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUsIC4uLmZpZWxkcyB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b0Nsb3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuSW5mb01hcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YXBwZWRQcm9taXNlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFuc2Zvcm1TdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid3JpdGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlY2VpdmVTdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJldmVudF9zdHJlYW1fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXV0b0Nsb3NlID0gZmllbGRzPy5hdXRvQ2xvc2UgPz8gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbmNsdWRlTmFtZXMgPSBmaWVsZHM/LmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHM/LmluY2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcz8uaW5jbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMuZXhjbHVkZU5hbWVzID0gZmllbGRzPy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzPy5leGNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHM/LmV4Y2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVN0cmVhbSA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oKTtcbiAgICAgICAgdGhpcy53cml0ZXIgPSB0aGlzLnRyYW5zZm9ybVN0cmVhbS53cml0YWJsZS5nZXRXcml0ZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlU3RyZWFtID0gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0odGhpcy50cmFuc2Zvcm1TdHJlYW0ucmVhZGFibGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlU3RyZWFtO1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG4gICAgICAgIC8vIGFuZCBpcyB0aGVyZWZvcmUgbm90IHVzZWZ1bCBoZXJlXG4gICAgfVxuICAgIF9pbmNsdWRlUnVuKHJ1bikge1xuICAgICAgICBjb25zdCBydW5UYWdzID0gcnVuLnRhZ3MgPz8gW107XG4gICAgICAgIGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fFxuICAgICAgICAgICAgICAgICAgICBydW5UYWdzLmZpbmQoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSkgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKHJ1bi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJ1bi5ydW5UeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlICYmIHJ1blRhZ3MuZXZlcnkoKHRhZykgPT4gIXRoaXMuZXhjbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNsdWRlO1xuICAgIH1cbiAgICBhc3luYyAqdGFwT3V0cHV0SXRlcmFibGUocnVuSWQsIG91dHB1dFN0cmVhbSkge1xuICAgICAgICBjb25zdCBmaXJzdENodW5rID0gYXdhaXQgb3V0cHV0U3RyZWFtLm5leHQoKTtcbiAgICAgICAgaWYgKGZpcnN0Q2h1bmsuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgLy8gUnVuIGhhcyBmaW5pc2hlZCwgZG9uJ3QgaXNzdWUgYW55IHN0cmVhbSBldmVudHMuXG4gICAgICAgIC8vIEFuIGV4YW1wbGUgb2YgdGhpcyBpcyBmb3IgcnVubmFibGVzIHRoYXQgdXNlIHRoZSBkZWZhdWx0XG4gICAgICAgIC8vIGltcGxlbWVudGF0aW9uIG9mIC5zdHJlYW0oKSwgd2hpY2ggZGVsZWdhdGVzIHRvIC5pbnZva2UoKVxuICAgICAgICAvLyBhbmQgY2FsbHMgLm9uQ2hhaW5FbmQoKSBiZWZvcmUgcGFzc2luZyBpdCB0byB0aGUgaXRlcmF0b3IuXG4gICAgICAgIGlmIChydW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHlpZWxkIGZpcnN0Q2h1bmsudmFsdWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWF0Y2ggZm9ybWF0IGZyb20gaGFuZGxlcnMgYmVsb3dcbiAgICAgICAgZnVuY3Rpb24gX2Zvcm1hdE91dHB1dENodW5rKGV2ZW50VHlwZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gXCJsbG1cIiAmJiB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGlvbkNodW5rKHsgdGV4dDogZGF0YSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YXBwZWRQcm9taXNlID0gdGhpcy50YXBwZWRQcm9taXNlcy5nZXQocnVuSWQpO1xuICAgICAgICAvLyBpZiB3ZSBhcmUgdGhlIGZpcnN0IHRvIHRhcCwgaXNzdWUgc3RyZWFtIGV2ZW50c1xuICAgICAgICBpZiAodGFwcGVkUHJvbWlzZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgdGFwcGVkUHJvbWlzZVJlc29sdmVyO1xuICAgICAgICAgICAgdGFwcGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGFwcGVkUHJvbWlzZVJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50YXBwZWRQcm9taXNlcy5zZXQocnVuSWQsIHRhcHBlZFByb21pc2UpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3J1bkluZm8ucnVuVHlwZX1fc3RyZWFtYCxcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBydW5JZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiBydW5JbmZvLnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIC4uLmV2ZW50LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuazogX2Zvcm1hdE91dHB1dENodW5rKHJ1bkluZm8ucnVuVHlwZSwgZmlyc3RDaHVuay52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSwgcnVuSW5mbyk7XG4gICAgICAgICAgICAgICAgeWllbGQgZmlyc3RDaHVuay52YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG91dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCB5aWVsZCB0b29sIGFuZCByZXRyaWV2ZXIgc3RyZWFtIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgICBpZiAocnVuSW5mby5ydW5UeXBlICE9PSBcInRvb2xcIiAmJiBydW5JbmZvLnJ1blR5cGUgIT09IFwicmV0cmlldmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuazogX2Zvcm1hdE91dHB1dENodW5rKHJ1bkluZm8ucnVuVHlwZSwgY2h1bmspLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBydW5JbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIHRhcHBlZFByb21pc2VSZXNvbHZlcigpO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGRlbGV0ZSBmcm9tIHRoZSBwcm9taXNlcyBtYXAgdG8ga2VlcCB0cmFjayBvZiB3aGljaCBydW5zIGhhdmUgYmVlbiB0YXBwZWQuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UganVzdCBwYXNzIHRocm91Z2hcbiAgICAgICAgICAgIHlpZWxkIGZpcnN0Q2h1bmsudmFsdWU7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG91dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmQocGF5bG9hZCwgcnVuKSB7XG4gICAgICAgIGlmICh0aGlzLl9pbmNsdWRlUnVuKHJ1bikpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmRFbmRFdmVudChwYXlsb2FkLCBydW4pIHtcbiAgICAgICAgY29uc3QgdGFwcGVkUHJvbWlzZSA9IHRoaXMudGFwcGVkUHJvbWlzZXMuZ2V0KHBheWxvYWQucnVuX2lkKTtcbiAgICAgICAgaWYgKHRhcHBlZFByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdm9pZCB0YXBwZWRQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5zZW5kKHBheWxvYWQsIHJ1bik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkLCBydW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uTExNU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSBhc3NpZ25OYW1lKHJ1bik7XG4gICAgICAgIGNvbnN0IHJ1blR5cGUgPSBydW4uaW5wdXRzLm1lc3NhZ2VzICE9PSB1bmRlZmluZWQgPyBcImNoYXRfbW9kZWxcIiA6IFwibGxtXCI7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB7XG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICAgICAgbmFtZTogcnVuTmFtZSxcbiAgICAgICAgICAgIHJ1blR5cGUsXG4gICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5zZXQocnVuLmlkLCBydW5JbmZvKTtcbiAgICAgICAgY29uc3QgZXZlbnROYW1lID0gYG9uXyR7cnVuVHlwZX1fc3RhcnRgO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcnVuLmlucHV0cyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25MTE1OZXdUb2tlbihydW4sIHRva2VuLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW4uaWQpO1xuICAgICAgICBsZXQgY2h1bms7XG4gICAgICAgIGxldCBldmVudE5hbWU7XG4gICAgICAgIGlmIChydW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb25MTE1OZXdUb2tlbjogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUb3AtbGV2ZWwgc3RyZWFtaW5nIGV2ZW50cyBhcmUgY292ZXJlZCBieSB0YXBPdXRwdXRJdGVyYWJsZVxuICAgICAgICBpZiAodGhpcy5ydW5JbmZvTWFwLnNpemUgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnVuSW5mby5ydW5UeXBlID09PSBcImNoYXRfbW9kZWxcIikge1xuICAgICAgICAgICAgZXZlbnROYW1lID0gXCJvbl9jaGF0X21vZGVsX3N0cmVhbVwiO1xuICAgICAgICAgICAgaWYgKGt3YXJncz8uY2h1bmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNodW5rID0gbmV3IEFJTWVzc2FnZUNodW5rKHsgY29udGVudDogdG9rZW4sIGlkOiBgcnVuLSR7cnVuLmlkfWAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IGt3YXJncy5jaHVuay5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bkluZm8ucnVuVHlwZSA9PT0gXCJsbG1cIikge1xuICAgICAgICAgICAgZXZlbnROYW1lID0gXCJvbl9sbG1fc3RyZWFtXCI7XG4gICAgICAgICAgICBpZiAoa3dhcmdzPy5jaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2h1bmsgPSBuZXcgR2VuZXJhdGlvbkNodW5rKHsgdGV4dDogdG9rZW4gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHVuayA9IGt3YXJncy5jaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBydW4gdHlwZSAke3J1bkluZm8ucnVuVHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjaHVuayxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bkluZm8ubmFtZSxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bkluZm8udGFncyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhLFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25MTE1FbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bi5pZCk7XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgbGV0IGV2ZW50TmFtZTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvbkxMTUVuZDogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IHJ1bi5vdXRwdXRzPy5nZW5lcmF0aW9ucztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgaWYgKHJ1bkluZm8ucnVuVHlwZSA9PT0gXCJjaGF0X21vZGVsXCIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ2VuZXJhdGlvbiBvZiBnZW5lcmF0aW9ucyA/PyBbXSkge1xuICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gZ2VuZXJhdGlvblswXT8ubWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50TmFtZSA9IFwib25fY2hhdF9tb2RlbF9lbmRcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW5JbmZvLnJ1blR5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IHtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogZ2VuZXJhdGlvbnM/Lm1hcCgoZ2VuZXJhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGlvbi5tYXAoKGNodW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGNodW5rLnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm86IGNodW5rLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0OiBydW4ub3V0cHV0cz8ubGxtT3V0cHV0ID8/IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGV2ZW50TmFtZSA9IFwib25fbGxtX2VuZFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvbkxMTUVuZDogVW5leHBlY3RlZCBydW4gdHlwZTogJHtydW5JbmZvLnJ1blR5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kRW5kRXZlbnQoe1xuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHJ1bkluZm8uaW5wdXRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSBhc3NpZ25OYW1lKHJ1bik7XG4gICAgICAgIGNvbnN0IHJ1blR5cGUgPSBydW4ucnVuX3R5cGUgPz8gXCJjaGFpblwiO1xuICAgICAgICBjb25zdCBydW5JbmZvID0ge1xuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIG5hbWU6IHJ1bk5hbWUsXG4gICAgICAgICAgICBydW5UeXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBldmVudERhdGEgPSB7fTtcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBSdW5uYWJsZSBjb3JlIGNvZGUgbm90IHNlbmRpbmcgaW5wdXQgd2hlbiB0cmFuc2Zvcm0gc3RyZWFtaW5nLlxuICAgICAgICBpZiAocnVuLmlucHV0cy5pbnB1dCA9PT0gXCJcIiAmJiBPYmplY3Qua2V5cyhydW4uaW5wdXRzKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50RGF0YSA9IHt9O1xuICAgICAgICAgICAgcnVuSW5mby5pbnB1dHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW4uaW5wdXRzLmlucHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV2ZW50RGF0YS5pbnB1dCA9IHJ1bi5pbnB1dHMuaW5wdXQ7XG4gICAgICAgICAgICBydW5JbmZvLmlucHV0cyA9IHJ1bi5pbnB1dHMuaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBldmVudERhdGEuaW5wdXQgPSBydW4uaW5wdXRzO1xuICAgICAgICAgICAgcnVuSW5mby5pbnB1dHMgPSBydW4uaW5wdXRzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5zZXQocnVuLmlkLCBydW5JbmZvKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgIGV2ZW50OiBgb25fJHtydW5UeXBlfV9zdGFydGAsXG4gICAgICAgICAgICBkYXRhOiBldmVudERhdGEsXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHRoaXMucnVuSW5mb01hcC5nZXQocnVuLmlkKTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLmRlbGV0ZShydW4uaWQpO1xuICAgICAgICBpZiAocnVuSW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uQ2hhaW5FbmQ6IFJ1biBJRCAke3J1bi5pZH0gbm90IGZvdW5kIGluIHJ1biBtYXAuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnROYW1lID0gYG9uXyR7cnVuLnJ1bl90eXBlfV9lbmRgO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBydW4uaW5wdXRzID8/IHJ1bkluZm8uaW5wdXRzID8/IHt9O1xuICAgICAgICBjb25zdCBvdXRwdXRzID0gcnVuLm91dHB1dHM/Lm91dHB1dCA/PyBydW4ub3V0cHV0cztcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIG91dHB1dDogb3V0cHV0cyxcbiAgICAgICAgICAgIGlucHV0OiBpbnB1dHMsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChpbnB1dHMuaW5wdXQgJiYgT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBpbnB1dHMuaW5wdXQ7XG4gICAgICAgICAgICBydW5JbmZvLmlucHV0cyA9IGlucHV0cy5pbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvblRvb2xTdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgcnVuTmFtZSA9IGFzc2lnbk5hbWUocnVuKTtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHtcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgcnVuVHlwZTogXCJ0b29sXCIsXG4gICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMgPz8ge30sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5zZXQocnVuLmlkLCBydW5JbmZvKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgIGV2ZW50OiBcIm9uX3Rvb2xfc3RhcnRcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcnVuLmlucHV0cyA/PyB7fSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgcnVuX2lkOiBydW4uaWQsXG4gICAgICAgICAgICB0YWdzOiBydW4udGFncyA/PyBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25Ub29sRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBydW5JbmZvID0gdGhpcy5ydW5JbmZvTWFwLmdldChydW4uaWQpO1xuICAgICAgICB0aGlzLnJ1bkluZm9NYXAuZGVsZXRlKHJ1bi5pZCk7XG4gICAgICAgIGlmIChydW5JbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgb25Ub29sRW5kOiBSdW4gSUQgJHtydW4uaWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5JbmZvLmlucHV0cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uVG9vbEVuZDogUnVuIElEICR7cnVuLmlkfSBpcyBhIHRvb2wgY2FsbCwgYW5kIGlzIGV4cGVjdGVkIHRvIGhhdmUgdHJhY2VkIGlucHV0cy5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvdXRwdXQgPSBydW4ub3V0cHV0cz8ub3V0cHV0ID09PSB1bmRlZmluZWQgPyBydW4ub3V0cHV0cyA6IHJ1bi5vdXRwdXRzLm91dHB1dDtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kRW5kRXZlbnQoe1xuICAgICAgICAgICAgZXZlbnQ6IFwib25fdG9vbF9lbmRcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHJ1bkluZm8uaW5wdXRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuLmlkLFxuICAgICAgICAgICAgbmFtZTogcnVuSW5mby5uYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuSW5mby50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bkluZm8ubWV0YWRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBvblJldHJpZXZlclN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBydW5OYW1lID0gYXNzaWduTmFtZShydW4pO1xuICAgICAgICBjb25zdCBydW5UeXBlID0gXCJyZXRyaWV2ZXJcIjtcbiAgICAgICAgY29uc3QgcnVuSW5mbyA9IHtcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgcnVuVHlwZSxcbiAgICAgICAgICAgIGlucHV0czoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBydW4uaW5wdXRzLnF1ZXJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ydW5JbmZvTWFwLnNldChydW4uaWQsIHJ1bkluZm8pO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgZXZlbnQ6IFwib25fcmV0cmlldmVyX3N0YXJ0XCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHJ1bi5pbnB1dHMucXVlcnksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBydW5OYW1lLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW4uZXh0cmE/Lm1ldGFkYXRhID8/IHt9LFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgYXN5bmMgb25SZXRyaWV2ZXJFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bi5pZCk7XG4gICAgICAgIHRoaXMucnVuSW5mb01hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBvblJldHJpZXZlckVuZDogUnVuIElEICR7cnVuLmlkfSBub3QgZm91bmQgaW4gcnVuIG1hcC5gKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRFbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogXCJvbl9yZXRyaWV2ZXJfZW5kXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgb3V0cHV0OiBydW4ub3V0cHV0cz8uZG9jdW1lbnRzID8/IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgICAgIGlucHV0OiBydW5JbmZvLmlucHV0cyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBydW5faWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bkluZm8ubmFtZSxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bkluZm8udGFncyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBydW5JbmZvLm1ldGFkYXRhLFxuICAgICAgICB9LCBydW5JbmZvKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhc3luYyBoYW5kbGVDdXN0b21FdmVudChldmVudE5hbWUsIGRhdGEsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1bkluZm8gPSB0aGlzLnJ1bkluZm9NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKHJ1bkluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBoYW5kbGVDdXN0b21FdmVudDogUnVuIElEICR7cnVuSWR9IG5vdCBmb3VuZCBpbiBydW4gbWFwLmApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICBldmVudDogXCJvbl9jdXN0b21fZXZlbnRcIixcbiAgICAgICAgICAgIHJ1bl9pZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBldmVudE5hbWUsXG4gICAgICAgICAgICB0YWdzOiBydW5JbmZvLnRhZ3MsXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuSW5mby5tZXRhZGF0YSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH0sIHJ1bkluZm8pO1xuICAgIH1cbiAgICBhc3luYyBmaW5pc2goKSB7XG4gICAgICAgIGNvbnN0IHBlbmRpbmdQcm9taXNlcyA9IFsuLi50aGlzLnRhcHBlZFByb21pc2VzLnZhbHVlcygpXTtcbiAgICAgICAgdm9pZCBQcm9taXNlLmFsbChwZW5kaW5nUHJvbWlzZXMpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgdm9pZCB0aGlzLndyaXRlci5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVRyYWNlciIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJBSU1lc3NhZ2VDaHVuayIsIkdlbmVyYXRpb25DaHVuayIsImFzc2lnbk5hbWUiLCJuYW1lIiwic2VyaWFsaXplZCIsInVuZGVmaW5lZCIsImlkIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiaXNTdHJlYW1FdmVudHNIYW5kbGVyIiwiaGFuZGxlciIsIkV2ZW50U3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJfYXdhaXRIYW5kbGVyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIk1hcCIsImF1dG9DbG9zZSIsImluY2x1ZGVOYW1lcyIsImluY2x1ZGVUeXBlcyIsImluY2x1ZGVUYWdzIiwiZXhjbHVkZU5hbWVzIiwiZXhjbHVkZVR5cGVzIiwiZXhjbHVkZVRhZ3MiLCJ0cmFuc2Zvcm1TdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJnZXRXcml0ZXIiLCJyZWNlaXZlU3RyZWFtIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwicmVhZGFibGUiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJfaW5jbHVkZVJ1biIsInJ1biIsInJ1blRhZ3MiLCJ0YWdzIiwiaW5jbHVkZSIsImluY2x1ZGVzIiwicnVuVHlwZSIsImZpbmQiLCJ0YWciLCJldmVyeSIsInRhcE91dHB1dEl0ZXJhYmxlIiwicnVuSWQiLCJvdXRwdXRTdHJlYW0iLCJmaXJzdENodW5rIiwibmV4dCIsImRvbmUiLCJydW5JbmZvIiwicnVuSW5mb01hcCIsImdldCIsIl9mb3JtYXRPdXRwdXRDaHVuayIsImV2ZW50VHlwZSIsImRhdGEiLCJ0ZXh0IiwidGFwcGVkUHJvbWlzZSIsInRhcHBlZFByb21pc2VzIiwidGFwcGVkUHJvbWlzZVJlc29sdmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXQiLCJldmVudCIsInJ1bl9pZCIsIm1ldGFkYXRhIiwic2VuZCIsImNodW5rIiwicGF5bG9hZCIsIndyaXRlIiwic2VuZEVuZEV2ZW50IiwidGhlbiIsIm9uTExNU3RhcnQiLCJydW5OYW1lIiwiaW5wdXRzIiwibWVzc2FnZXMiLCJleHRyYSIsImV2ZW50TmFtZSIsImlucHV0Iiwib25MTE1OZXdUb2tlbiIsInRva2VuIiwia3dhcmdzIiwiRXJyb3IiLCJzaXplIiwiY29udGVudCIsIm1lc3NhZ2UiLCJvbkxMTUVuZCIsImRlbGV0ZSIsImdlbmVyYXRpb25zIiwib3V0cHV0cyIsIm91dHB1dCIsImdlbmVyYXRpb24iLCJtYXAiLCJnZW5lcmF0aW9uSW5mbyIsImxsbU91dHB1dCIsIm9uQ2hhaW5TdGFydCIsInJ1bl90eXBlIiwiZXZlbnREYXRhIiwia2V5cyIsIm9uQ2hhaW5FbmQiLCJvblRvb2xTdGFydCIsIm9uVG9vbEVuZCIsIm9uUmV0cmlldmVyU3RhcnQiLCJxdWVyeSIsIm9uUmV0cmlldmVyRW5kIiwiZG9jdW1lbnRzIiwiaGFuZGxlQ3VzdG9tRXZlbnQiLCJmaW5pc2giLCJwZW5kaW5nUHJvbWlzZXMiLCJ2YWx1ZXMiLCJhbGwiLCJmaW5hbGx5IiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/event_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch),\n/* harmony export */   isLogStreamHandler: () => (/* binding */ isLogStreamHandler)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/ai.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/messages/ai.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nconst isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_ai_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk({\n                    id: `run-${run.id}`,\n                    content: token\n                });\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2xvZ19zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBZ0U7QUFDekI7QUFDcUI7QUFDVDtBQUNuRDs7Ozs7O0NBTUMsR0FDTSxNQUFNSTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxHQUFHLEdBQUdQLE9BQU9PLEdBQUcsSUFBSSxFQUFFO0lBQy9CO0lBQ0FDLE9BQU9DLEtBQUssRUFBRTtRQUNWLE1BQU1GLE1BQU0sSUFBSSxDQUFDQSxHQUFHLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTUYsR0FBRztRQUNyQyxNQUFNRyxTQUFTaEIsMkVBQVVBLENBQUMsQ0FBQyxHQUFHYTtRQUM5QixtRUFBbUU7UUFDbkUsT0FBTyxJQUFJSSxPQUFPO1lBQ2RKO1lBQ0FLLE9BQU9GLE1BQU0sQ0FBQ0EsT0FBT0csTUFBTSxHQUFHLEVBQUUsQ0FBQ0MsV0FBVztRQUNoRDtJQUNKO0FBQ0o7QUFDTyxNQUFNSCxlQUFlYjtJQUN4QkMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNNLEtBQUssR0FBR1osT0FBT1ksS0FBSztJQUM3QjtJQUNBSixPQUFPQyxLQUFLLEVBQUU7UUFDVixNQUFNRixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU1GLEdBQUc7UUFDckMsTUFBTUcsU0FBU2hCLDJFQUFVQSxDQUFDLElBQUksQ0FBQ2tCLEtBQUssRUFBRUgsTUFBTUYsR0FBRztRQUMvQyxPQUFPLElBQUlJLE9BQU87WUFBRUo7WUFBS0ssT0FBT0YsTUFBTSxDQUFDQSxPQUFPRyxNQUFNLEdBQUcsRUFBRSxDQUFDQyxXQUFXO1FBQUM7SUFDMUU7SUFDQSxPQUFPQyxnQkFBZ0JDLEtBQUssRUFBRTtRQUMxQixNQUFNTixTQUFTaEIsMkVBQVVBLENBQUMsQ0FBQyxHQUFHc0IsTUFBTVQsR0FBRztRQUN2QyxtRUFBbUU7UUFDbkUsT0FBTyxJQUFJSSxPQUFPO1lBQ2RKLEtBQUtTLE1BQU1ULEdBQUc7WUFDZEssT0FBT0YsTUFBTSxDQUFDQSxPQUFPRyxNQUFNLEdBQUcsRUFBRSxDQUFDQyxXQUFXO1FBQ2hEO0lBQ0o7QUFDSjtBQUNPLE1BQU1HLHFCQUFxQixDQUFDQyxVQUFZQSxRQUFRQyxJQUFJLEtBQUssb0JBQW9CO0FBQ3BGOzs7Ozs7Ozs7OztDQVdDLEdBQ0QsZUFBZUMsdUJBQXVCQyxHQUFHLEVBQUVDLFlBQVk7SUFDbkQsSUFBSUEsaUJBQWlCLFlBQVk7UUFDN0IsTUFBTSxJQUFJQyxNQUFNLHFFQUNaLGtFQUNBO0lBQ1I7SUFDQSxNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHSDtJQUNuQixJQUFJO1FBQUM7UUFBYTtRQUFPO0tBQVMsQ0FBQ0ksUUFBUSxDQUFDSixJQUFJSyxRQUFRLEdBQUc7UUFDdkQsT0FBT0Y7SUFDWDtJQUNBLElBQUl2QixPQUFPMEIsSUFBSSxDQUFDSCxRQUFRWCxNQUFNLEtBQUssS0FBS1csUUFBUUksVUFBVSxJQUFJO1FBQzFELE9BQU9DO0lBQ1g7SUFDQSxtQkFBbUI7SUFDbkIsd0VBQXdFO0lBQ3hFLDBFQUEwRTtJQUMxRSwrREFBK0Q7SUFDL0QsK0RBQStEO0lBQy9ELFFBQVE7SUFDUixPQUFPTCxPQUFPSSxLQUFLO0FBQ3ZCO0FBQ0EsZUFBZUUsd0JBQXdCVCxHQUFHLEVBQUVDLFlBQVk7SUFDcEQsTUFBTSxFQUFFUyxPQUFPLEVBQUUsR0FBR1Y7SUFDcEIsSUFBSUMsaUJBQWlCLFlBQVk7UUFDN0Isd0RBQXdEO1FBQ3hELE9BQU9TO0lBQ1g7SUFDQSxJQUFJO1FBQUM7UUFBYTtRQUFPO0tBQVMsQ0FBQ04sUUFBUSxDQUFDSixJQUFJSyxRQUFRLEdBQUc7UUFDdkQsT0FBT0s7SUFDWDtJQUNBLGdDQUFnQztJQUNoQyxJQUFJQSxZQUFZRixhQUNaNUIsT0FBTzBCLElBQUksQ0FBQ0ksU0FBU2xCLE1BQU0sS0FBSyxLQUNoQ2tCLFNBQVNDLFdBQVdILFdBQVc7UUFDL0IsT0FBT0UsUUFBUUMsTUFBTTtJQUN6QjtJQUNBLE9BQU9EO0FBQ1g7QUFDQSxTQUFTRSxzQkFBc0JDLENBQUM7SUFDNUIsT0FBT0EsTUFBTUwsYUFBYUssRUFBRUMsT0FBTyxLQUFLTjtBQUM1QztBQUNBOzs7OztDQUtDLEdBQ00sTUFBTU8saUNBQWlDekMsZ0RBQVVBO0lBQ3BESSxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDO1lBQUVxQyxlQUFlO1lBQU0sR0FBR3JDLE1BQU07UUFBQztRQUN2Q0MsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLENBQUM7UUFDWjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHVCQUF1QjtZQUMvQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxDQUFDO1FBQ1o7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsSUFBSSxDQUFDZ0MsU0FBUyxHQUFHdEMsUUFBUXNDLGFBQWE7UUFDdEMsSUFBSSxDQUFDQyxZQUFZLEdBQUd2QyxRQUFRdUM7UUFDNUIsSUFBSSxDQUFDQyxZQUFZLEdBQUd4QyxRQUFRd0M7UUFDNUIsSUFBSSxDQUFDQyxXQUFXLEdBQUd6QyxRQUFReUM7UUFDM0IsSUFBSSxDQUFDQyxZQUFZLEdBQUcxQyxRQUFRMEM7UUFDNUIsSUFBSSxDQUFDQyxZQUFZLEdBQUczQyxRQUFRMkM7UUFDNUIsSUFBSSxDQUFDQyxXQUFXLEdBQUc1QyxRQUFRNEM7UUFDM0IsSUFBSSxDQUFDQyxhQUFhLEdBQUc3QyxRQUFRNkMsaUJBQWlCLElBQUksQ0FBQ0EsYUFBYTtRQUNoRSxJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJQztRQUMzQixJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJLENBQUNGLGVBQWUsQ0FBQ3pDLFFBQVEsQ0FBQzRDLFNBQVM7UUFDckQsSUFBSSxDQUFDQyxhQUFhLEdBQUd0RCxvRUFBc0JBLENBQUN1RCxrQkFBa0IsQ0FBQyxJQUFJLENBQUNMLGVBQWUsQ0FBQ00sUUFBUTtJQUNoRztJQUNBLENBQUNDLE9BQU9DLGFBQWEsQ0FBQyxHQUFHO1FBQ3JCLE9BQU8sSUFBSSxDQUFDSixhQUFhO0lBQzdCO0lBQ0EsTUFBTUssV0FBV0MsSUFBSSxFQUFFO0lBQ25CLGtFQUFrRTtJQUNsRSxtQ0FBbUM7SUFDdkM7SUFDQUMsWUFBWXBDLEdBQUcsRUFBRTtRQUNiLElBQUlBLElBQUlxQyxFQUFFLEtBQUssSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDeEIsT0FBTztRQUNYO1FBQ0EsTUFBTUMsVUFBVXZDLElBQUl3QyxJQUFJLElBQUksRUFBRTtRQUM5QixJQUFJQyxVQUFVLElBQUksQ0FBQ3ZCLFlBQVksS0FBS1YsYUFDaEMsSUFBSSxDQUFDWSxXQUFXLEtBQUtaLGFBQ3JCLElBQUksQ0FBQ1csWUFBWSxLQUFLWDtRQUMxQixJQUFJLElBQUksQ0FBQ1UsWUFBWSxLQUFLVixXQUFXO1lBQ2pDaUMsVUFBVUEsV0FBVyxJQUFJLENBQUN2QixZQUFZLENBQUNkLFFBQVEsQ0FBQ0osSUFBSUYsSUFBSTtRQUM1RDtRQUNBLElBQUksSUFBSSxDQUFDcUIsWUFBWSxLQUFLWCxXQUFXO1lBQ2pDaUMsVUFBVUEsV0FBVyxJQUFJLENBQUN0QixZQUFZLENBQUNmLFFBQVEsQ0FBQ0osSUFBSUssUUFBUTtRQUNoRTtRQUNBLElBQUksSUFBSSxDQUFDZSxXQUFXLEtBQUtaLFdBQVc7WUFDaENpQyxVQUNJQSxXQUNJRixRQUFRRyxJQUFJLENBQUMsQ0FBQ0MsTUFBUSxJQUFJLENBQUN2QixXQUFXLEVBQUVoQixTQUFTdUMsVUFBVW5DO1FBQ3ZFO1FBQ0EsSUFBSSxJQUFJLENBQUNhLFlBQVksS0FBS2IsV0FBVztZQUNqQ2lDLFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNwQixZQUFZLENBQUNqQixRQUFRLENBQUNKLElBQUlGLElBQUk7UUFDN0Q7UUFDQSxJQUFJLElBQUksQ0FBQ3dCLFlBQVksS0FBS2QsV0FBVztZQUNqQ2lDLFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNuQixZQUFZLENBQUNsQixRQUFRLENBQUNKLElBQUlLLFFBQVE7UUFDakU7UUFDQSxJQUFJLElBQUksQ0FBQ2tCLFdBQVcsS0FBS2YsV0FBVztZQUNoQ2lDLFVBQ0lBLFdBQVdGLFFBQVFLLEtBQUssQ0FBQyxDQUFDRCxNQUFRLENBQUMsSUFBSSxDQUFDcEIsV0FBVyxFQUFFbkIsU0FBU3VDO1FBQ3RFO1FBQ0EsT0FBT0Y7SUFDWDtJQUNBLE9BQU9JLGtCQUFrQkMsS0FBSyxFQUFFbkMsTUFBTSxFQUFFO1FBQ3BDLGdFQUFnRTtRQUNoRSxXQUFXLE1BQU1vQyxTQUFTcEMsT0FBUTtZQUM5QixzQ0FBc0M7WUFDdEMsSUFBSW1DLFVBQVUsSUFBSSxDQUFDUixNQUFNLEVBQUU7Z0JBQ3ZCLDJDQUEyQztnQkFDM0Msa0RBQWtEO2dCQUNsRCxNQUFNVSxNQUFNLElBQUksQ0FBQ0MsYUFBYSxDQUFDSCxNQUFNO2dCQUNyQyxJQUFJRSxLQUFLO29CQUNMLE1BQU0sSUFBSSxDQUFDckIsTUFBTSxDQUFDdUIsS0FBSyxDQUFDLElBQUl6RSxZQUFZO3dCQUNwQ1MsS0FBSzs0QkFDRDtnQ0FDSWlFLElBQUk7Z0NBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVKLElBQUksa0JBQWtCLENBQUM7Z0NBQ3RDL0QsT0FBTzhEOzRCQUNYO3lCQUNIO29CQUNMO2dCQUNKO1lBQ0o7WUFDQSxNQUFNQTtRQUNWO0lBQ0o7SUFDQSxNQUFNTSxZQUFZckQsR0FBRyxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDc0MsTUFBTSxLQUFLOUIsV0FBVztZQUMzQixJQUFJLENBQUM4QixNQUFNLEdBQUd0QyxJQUFJcUMsRUFBRTtZQUNwQixNQUFNLElBQUksQ0FBQ1YsTUFBTSxDQUFDdUIsS0FBSyxDQUFDLElBQUl6RSxZQUFZO2dCQUNwQ1MsS0FBSztvQkFDRDt3QkFDSWlFLElBQUk7d0JBQ0pDLE1BQU07d0JBQ05uRSxPQUFPOzRCQUNIb0QsSUFBSXJDLElBQUlxQyxFQUFFOzRCQUNWdkMsTUFBTUUsSUFBSUYsSUFBSTs0QkFDZHdELE1BQU10RCxJQUFJSyxRQUFROzRCQUNsQmtELGlCQUFpQixFQUFFOzRCQUNuQkMsY0FBY2hEOzRCQUNkaUQsTUFBTSxDQUFDO3dCQUNYO29CQUNKO2lCQUNIO1lBQ0w7UUFDSjtRQUNBLElBQUksQ0FBQyxJQUFJLENBQUNyQixXQUFXLENBQUNwQyxNQUFNO1lBQ3hCO1FBQ0o7UUFDQSxJQUFJLElBQUksQ0FBQzBELG1CQUFtQixDQUFDMUQsSUFBSUYsSUFBSSxDQUFDLEtBQUtVLFdBQVc7WUFDbEQsSUFBSSxDQUFDa0QsbUJBQW1CLENBQUMxRCxJQUFJRixJQUFJLENBQUMsR0FBRztRQUN6QztRQUNBLElBQUksQ0FBQzRELG1CQUFtQixDQUFDMUQsSUFBSUYsSUFBSSxDQUFDLElBQUk7UUFDdEMsTUFBTTZELFFBQVEsSUFBSSxDQUFDRCxtQkFBbUIsQ0FBQzFELElBQUlGLElBQUksQ0FBQztRQUNoRCxJQUFJLENBQUNtRCxhQUFhLENBQUNqRCxJQUFJcUMsRUFBRSxDQUFDLEdBQ3RCc0IsVUFBVSxJQUFJM0QsSUFBSUYsSUFBSSxHQUFHLENBQUMsRUFBRUUsSUFBSUYsSUFBSSxDQUFDLENBQUMsRUFBRTZELE1BQU0sQ0FBQztRQUNuRCxNQUFNQyxXQUFXO1lBQ2J2QixJQUFJckMsSUFBSXFDLEVBQUU7WUFDVnZDLE1BQU1FLElBQUlGLElBQUk7WUFDZHdELE1BQU10RCxJQUFJSyxRQUFRO1lBQ2xCbUMsTUFBTXhDLElBQUl3QyxJQUFJLElBQUksRUFBRTtZQUNwQnFCLFVBQVU3RCxJQUFJOEQsS0FBSyxFQUFFRCxZQUFZLENBQUM7WUFDbENFLFlBQVksSUFBSUMsS0FBS2hFLElBQUkrRCxVQUFVLEVBQUVFLFdBQVc7WUFDaERWLGlCQUFpQixFQUFFO1lBQ25CVyxxQkFBcUIsRUFBRTtZQUN2QlYsY0FBY2hEO1lBQ2QyRCxVQUFVM0Q7UUFDZDtRQUNBLElBQUksSUFBSSxDQUFDZ0IsYUFBYSxLQUFLLG9CQUFvQjtZQUMzQ29DLFNBQVN6RCxNQUFNLEdBQUcsTUFBTUosdUJBQXVCQyxLQUFLLElBQUksQ0FBQ3dCLGFBQWE7UUFDMUU7UUFDQSxNQUFNLElBQUksQ0FBQ0csTUFBTSxDQUFDdUIsS0FBSyxDQUFDLElBQUl6RSxZQUFZO1lBQ3BDUyxLQUFLO2dCQUNEO29CQUNJaUUsSUFBSTtvQkFDSkMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUNILGFBQWEsQ0FBQ2pELElBQUlxQyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUMzQ3BELE9BQU8yRTtnQkFDWDthQUNIO1FBQ0w7SUFDSjtJQUNBLE1BQU1RLFlBQVlwRSxHQUFHLEVBQUU7UUFDbkIsSUFBSTtZQUNBLE1BQU1xRSxVQUFVLElBQUksQ0FBQ3BCLGFBQWEsQ0FBQ2pELElBQUlxQyxFQUFFLENBQUM7WUFDMUMsSUFBSWdDLFlBQVk3RCxXQUFXO2dCQUN2QjtZQUNKO1lBQ0EsTUFBTXRCLE1BQU0sRUFBRTtZQUNkLElBQUksSUFBSSxDQUFDc0MsYUFBYSxLQUFLLG9CQUFvQjtnQkFDM0N0QyxJQUFJb0YsSUFBSSxDQUFDO29CQUNMbkIsSUFBSTtvQkFDSkMsTUFBTSxDQUFDLE1BQU0sRUFBRWlCLFFBQVEsT0FBTyxDQUFDO29CQUMvQnBGLE9BQU8sTUFBTWMsdUJBQXVCQyxLQUFLLElBQUksQ0FBQ3dCLGFBQWE7Z0JBQy9EO1lBQ0o7WUFDQXRDLElBQUlvRixJQUFJLENBQUM7Z0JBQ0xuQixJQUFJO2dCQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxhQUFhLENBQUM7Z0JBQ3JDcEYsT0FBTyxNQUFNd0Isd0JBQXdCVCxLQUFLLElBQUksQ0FBQ3dCLGFBQWE7WUFDaEU7WUFDQSxJQUFJeEIsSUFBSW1FLFFBQVEsS0FBSzNELFdBQVc7Z0JBQzVCdEIsSUFBSW9GLElBQUksQ0FBQztvQkFDTG5CLElBQUk7b0JBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVpQixRQUFRLFNBQVMsQ0FBQztvQkFDakNwRixPQUFPLElBQUkrRSxLQUFLaEUsSUFBSW1FLFFBQVEsRUFBRUYsV0FBVztnQkFDN0M7WUFDSjtZQUNBLE1BQU10RSxRQUFRLElBQUlsQixZQUFZO2dCQUFFUztZQUFJO1lBQ3BDLE1BQU0sSUFBSSxDQUFDeUMsTUFBTSxDQUFDdUIsS0FBSyxDQUFDdkQ7UUFDNUIsU0FDUTtZQUNKLElBQUlLLElBQUlxQyxFQUFFLEtBQUssSUFBSSxDQUFDQyxNQUFNLEVBQUU7Z0JBQ3hCLE1BQU0zQyxRQUFRLElBQUlsQixZQUFZO29CQUMxQlMsS0FBSzt3QkFDRDs0QkFDSWlFLElBQUk7NEJBQ0pDLE1BQU07NEJBQ05uRSxPQUFPLE1BQU13Qix3QkFBd0JULEtBQUssSUFBSSxDQUFDd0IsYUFBYTt3QkFDaEU7cUJBQ0g7Z0JBQ0w7Z0JBQ0EsTUFBTSxJQUFJLENBQUNHLE1BQU0sQ0FBQ3VCLEtBQUssQ0FBQ3ZEO2dCQUN4QixJQUFJLElBQUksQ0FBQ3NCLFNBQVMsRUFBRTtvQkFDaEIsTUFBTSxJQUFJLENBQUNVLE1BQU0sQ0FBQzRDLEtBQUs7Z0JBQzNCO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsTUFBTUMsY0FBY3hFLEdBQUcsRUFBRXlFLEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQ3BDLE1BQU1MLFVBQVUsSUFBSSxDQUFDcEIsYUFBYSxDQUFDakQsSUFBSXFDLEVBQUUsQ0FBQztRQUMxQyxJQUFJZ0MsWUFBWTdELFdBQVc7WUFDdkI7UUFDSjtRQUNBLG9CQUFvQjtRQUNwQixNQUFNbUUsY0FBYzNFLElBQUlHLE1BQU0sQ0FBQ3lFLFFBQVEsS0FBS3BFO1FBQzVDLElBQUlxRTtRQUNKLElBQUlGLGFBQWE7WUFDYixJQUFJL0Qsc0JBQXNCOEQsUUFBUTNCLFFBQVE7Z0JBQ3RDOEIsc0JBQXNCSCxRQUFRM0I7WUFDbEMsT0FDSztnQkFDRDhCLHNCQUFzQixJQUFJckcsMkRBQWNBLENBQUM7b0JBQ3JDNkQsSUFBSSxDQUFDLElBQUksRUFBRXJDLElBQUlxQyxFQUFFLENBQUMsQ0FBQztvQkFDbkJ5QyxTQUFTTDtnQkFDYjtZQUNKO1FBQ0osT0FDSztZQUNESSxzQkFBc0JKO1FBQzFCO1FBQ0EsTUFBTTlFLFFBQVEsSUFBSWxCLFlBQVk7WUFDMUJTLEtBQUs7Z0JBQ0Q7b0JBQ0lpRSxJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxzQkFBc0IsQ0FBQztvQkFDOUNwRixPQUFPd0Y7Z0JBQ1g7Z0JBQ0E7b0JBQ0l0QixJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxrQkFBa0IsQ0FBQztvQkFDMUNwRixPQUFPNEY7Z0JBQ1g7YUFDSDtRQUNMO1FBQ0EsTUFBTSxJQUFJLENBQUNsRCxNQUFNLENBQUN1QixLQUFLLENBQUN2RDtJQUM1QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2xvZ19zdHJlYW0uanM/NzFjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcHBseVBhdGNoLCB9IGZyb20gXCIuLi91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi4vbWVzc2FnZXMvYWkuanNcIjtcbi8qKlxuICogTGlzdCBvZiBqc29ucGF0Y2ggSlNPTlBhdGNoT3BlcmF0aW9ucywgd2hpY2ggZGVzY3JpYmUgaG93IHRvIGNyZWF0ZSB0aGUgcnVuIHN0YXRlXG4gKiBmcm9tIGFuIGVtcHR5IGRpY3QuIFRoaXMgaXMgdGhlIG1pbmltYWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGxvZywgZGVzaWduZWQgdG9cbiAqIGJlIHNlcmlhbGl6ZWQgYXMgSlNPTiBhbmQgc2VudCBvdmVyIHRoZSB3aXJlIHRvIHJlY29uc3RydWN0IHRoZSBsb2cgb24gdGhlIG90aGVyXG4gKiBzaWRlLiBSZWNvbnN0cnVjdGlvbiBvZiB0aGUgc3RhdGUgY2FuIGJlIGRvbmUgd2l0aCBhbnkganNvbnBhdGNoLWNvbXBsaWFudCBsaWJyYXJ5LFxuICogc2VlIGh0dHBzOi8vanNvbnBhdGNoLmNvbSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkxvZ1BhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BzID0gZmllbGRzLm9wcyA/PyBbXTtcbiAgICB9XG4gICAgY29uY2F0KG90aGVyKSB7XG4gICAgICAgIGNvbnN0IG9wcyA9IHRoaXMub3BzLmNvbmNhdChvdGhlci5vcHMpO1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBvcHMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHtcbiAgICAgICAgICAgIG9wcyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTG9nIGV4dGVuZHMgUnVuTG9nUGF0Y2gge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlID0gZmllbGRzLnN0YXRlO1xuICAgIH1cbiAgICBjb25jYXQob3RoZXIpIHtcbiAgICAgICAgY29uc3Qgb3BzID0gdGhpcy5vcHMuY29uY2F0KG90aGVyLm9wcyk7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2godGhpcy5zdGF0ZSwgb3RoZXIub3BzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coeyBvcHMsIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50IH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVJ1bkxvZ1BhdGNoKHBhdGNoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2goe30sIHBhdGNoLm9wcyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coe1xuICAgICAgICAgICAgb3BzOiBwYXRjaC5vcHMsXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGlzTG9nU3RyZWFtSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcbi8qKlxuICogRXh0cmFjdCBzdGFuZGFyZGl6ZWQgaW5wdXRzIGZyb20gYSBydW4uXG4gKlxuICogU3RhbmRhcmRpemVzIHRoZSBpbnB1dHMgYmFzZWQgb24gdGhlIHR5cGUgb2YgdGhlIHJ1bm5hYmxlIHVzZWQuXG4gKlxuICogQHBhcmFtIHJ1biAtIFJ1biBvYmplY3RcbiAqIEBwYXJhbSBzY2hlbWFGb3JtYXQgLSBUaGUgc2NoZW1hIGZvcm1hdCB0byB1c2UuXG4gKlxuICogQHJldHVybnMgVmFsaWQgaW5wdXRzIGFyZSBvbmx5IGRpY3QuIEJ5IGNvbnZlbnRpb25zLCBpbnB1dHMgYWx3YXlzIHJlcHJlc2VudGVkXG4gKiBpbnZvY2F0aW9uIHVzaW5nIG5hbWVkIGFyZ3VtZW50cy5cbiAqIEEgbnVsbCBtZWFucyB0aGF0IHRoZSBpbnB1dCBpcyBub3QgeWV0IGtub3duIVxuICovXG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG4gICAgaWYgKHNjaGVtYUZvcm1hdCA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRvIG5vdCBhc3NpZ24gaW5wdXRzIHdpdGggb3JpZ2luYWwgc2NoZW1hIGRyb3AgdGhlIGtleSBmb3Igbm93LiBcIiArXG4gICAgICAgICAgICBcIldoZW4gaW5wdXRzIGFyZSBhZGRlZCB0byBzdHJlYW1Mb2cgdGhleSBzaG91bGQgYmUgYWRkZWQgd2l0aCBcIiArXG4gICAgICAgICAgICBcInN0YW5kYXJkaXplZCBzY2hlbWEgZm9yIHN0cmVhbWluZyBldmVudHMuXCIpO1xuICAgIH1cbiAgICBjb25zdCB7IGlucHV0cyB9ID0gcnVuO1xuICAgIGlmIChbXCJyZXRyaWV2ZXJcIiwgXCJsbG1cIiwgXCJwcm9tcHRcIl0uaW5jbHVkZXMocnVuLnJ1bl90eXBlKSkge1xuICAgICAgICByZXR1cm4gaW5wdXRzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEgJiYgaW5wdXRzPy5pbnB1dCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBuZXcgc3R5bGUgY2hhaW5zXG4gICAgLy8gVGhlc2UgbmVzdCBhbiBhZGRpdGlvbmFsICdpbnB1dCcga2V5IGluc2lkZSB0aGUgJ2lucHV0cycgdG8gbWFrZSBzdXJlXG4gICAgLy8gdGhlIGlucHV0IGlzIGFsd2F5cyBhIGRpY3QuIFdlIG5lZWQgdG8gdW5wYWNrIGFuZCB1c2VyIHRoZSBpbm5lciB2YWx1ZS5cbiAgICAvLyBXZSBzaG91bGQgdHJ5IHRvIGZpeCB0aGlzIGluIFJ1bm5hYmxlcyBhbmQgY2FsbGJhY2tzL3RyYWNlcnNcbiAgICAvLyBSdW5uYWJsZXMgc2hvdWxkIGJlIHVzaW5nIGEgbnVsbCB0eXBlIGhlcmUgbm90IGEgcGxhY2Vob2xkZXJcbiAgICAvLyBkaWN0LlxuICAgIHJldHVybiBpbnB1dHMuaW5wdXQ7XG59XG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHNjaGVtYUZvcm1hdCkge1xuICAgIGNvbnN0IHsgb3V0cHV0cyB9ID0gcnVuO1xuICAgIGlmIChzY2hlbWFGb3JtYXQgPT09IFwib3JpZ2luYWxcIikge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIG9sZCBzY2hlbWEsIHdpdGhvdXQgc3RhbmRhcmRpemluZyBhbnl0aGluZ1xuICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICB9XG4gICAgaWYgKFtcInJldHJpZXZlclwiLCBcImxsbVwiLCBcInByb21wdFwiXS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBoYWNreSBjaGVja1xuICAgIGlmIChvdXRwdXRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgT2JqZWN0LmtleXMob3V0cHV0cykubGVuZ3RoID09PSAxICYmXG4gICAgICAgIG91dHB1dHM/Lm91dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzLm91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dHM7XG59XG5mdW5jdGlvbiBpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoeCkge1xuICAgIHJldHVybiB4ICE9PSB1bmRlZmluZWQgJiYgeC5tZXNzYWdlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgYEJhc2VUcmFjZXJgIGNsYXNzIGZyb20gdGhlXG4gKiBgbGFuZ2NoYWluLmNhbGxiYWNrcy50cmFjZXJzLmJhc2VgIG1vZHVsZS4gSXQgcmVwcmVzZW50cyBhIGNhbGxiYWNrXG4gKiBoYW5kbGVyIHRoYXQgbG9ncyB0aGUgZXhlY3V0aW9uIG9mIHJ1bnMgYW5kIGVtaXRzIGBSdW5Mb2dgIGluc3RhbmNlcyB0byBhXG4gKiBgUnVuTG9nU3RyZWFtYC5cbiAqL1xuZXhwb3J0IGNsYXNzIExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUsIC4uLmZpZWxkcyB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b0Nsb3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3NjaGVtYUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJvcmlnaW5hbFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb290SWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2V5TWFwQnlSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvdW50ZXJNYXBCeVJ1bk5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFuc2Zvcm1TdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid3JpdGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlY2VpdmVTdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsb2dfc3RyZWFtX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmF1dG9DbG9zZSA9IGZpZWxkcz8uYXV0b0Nsb3NlID8/IHRydWU7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzPy5pbmNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID0gZmllbGRzPy5pbmNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPSBmaWVsZHM/LmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcz8uZXhjbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUeXBlcyA9IGZpZWxkcz8uZXhjbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUYWdzID0gZmllbGRzPy5leGNsdWRlVGFncztcbiAgICAgICAgdGhpcy5fc2NoZW1hRm9ybWF0ID0gZmllbGRzPy5fc2NoZW1hRm9ybWF0ID8/IHRoaXMuX3NjaGVtYUZvcm1hdDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1TdHJlYW0gPSBuZXcgVHJhbnNmb3JtU3RyZWFtKCk7XG4gICAgICAgIHRoaXMud3JpdGVyID0gdGhpcy50cmFuc2Zvcm1TdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZVN0cmVhbSA9IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtKHRoaXMudHJhbnNmb3JtU3RyZWFtLnJlYWRhYmxlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZVN0cmVhbTtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBsZWdhY3kgbWV0aG9kIG9ubHkgY2FsbGVkIG9uY2UgZm9yIGFuIGVudGlyZSBydW4gdHJlZVxuICAgICAgICAvLyBhbmQgaXMgdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuICAgIH1cbiAgICBfaW5jbHVkZVJ1bihydW4pIHtcbiAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5UYWdzID0gcnVuLnRhZ3MgPz8gW107XG4gICAgICAgIGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgfHxcbiAgICAgICAgICAgICAgICAgICAgcnVuVGFncy5maW5kKCh0YWcpID0+IHRoaXMuaW5jbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgcnVuVGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxuICAgIGFzeW5jICp0YXBPdXRwdXRJdGVyYWJsZShydW5JZCwgb3V0cHV0KSB7XG4gICAgICAgIC8vIFRhcCBhbiBvdXRwdXQgYXN5bmMgaXRlcmF0b3IgdG8gc3RyZWFtIGl0cyB2YWx1ZXMgdG8gdGhlIGxvZy5cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBvdXRwdXQpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgcnVuIGlzIGhhbmRsZWQgaW4gLnN0cmVhbUxvZygpXG4gICAgICAgICAgICBpZiAocnVuSWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgY2FuJ3QgZmluZCB0aGUgcnVuIHNpbGVudGx5IGlnbm9yZVxuICAgICAgICAgICAgICAgIC8vIGVnLiBiZWNhdXNlIHRoaXMgcnVuIHdhc24ndCBpbmNsdWRlZCBpbiB0aGUgbG9nXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bklkXTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtrZXl9L3N0cmVhbWVkX291dHB1dC8tYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcnVuLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pbmNsdWRlUnVuKHJ1bikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdICs9IDE7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXTtcbiAgICAgICAgdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF0gPVxuICAgICAgICAgICAgY291bnQgPT09IDEgPyBydW4ubmFtZSA6IGAke3J1bi5uYW1lfToke2NvdW50fWA7XG4gICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bi5uYW1lLFxuICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKHJ1bi5zdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0OiBbXSxcbiAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dF9zdHI6IFtdLFxuICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRfdGltZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5fc2NoZW1hRm9ybWF0ID09PSBcInN0cmVhbWluZ19ldmVudHNcIikge1xuICAgICAgICAgICAgbG9nRW50cnkuaW5wdXRzID0gYXdhaXQgX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3RoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdfWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBsb2dFbnRyeSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgICAgIGlmIChydW5OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY2hlbWFGb3JtYXQgPT09IFwic3RyZWFtaW5nX2V2ZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2lucHV0c2AsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9maW5hbF9vdXRwdXRgLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChydW4uZW5kX3RpbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2VuZF90aW1lYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHsgb3BzIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9maW5hbF9vdXRwdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uTExNTmV3VG9rZW4ocnVuLCB0b2tlbiwga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgaWYgKHJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBoYWNrXG4gICAgICAgIGNvbnN0IGlzQ2hhdE1vZGVsID0gcnVuLmlucHV0cy5tZXNzYWdlcyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc3RyZWFtZWRPdXRwdXRWYWx1ZTtcbiAgICAgICAgaWYgKGlzQ2hhdE1vZGVsKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGF0R2VuZXJhdGlvbkNodW5rKGt3YXJncz8uY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IGt3YXJncz8uY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGBydW4tJHtydW4uaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdG9rZW4sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0X3N0ci8tYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRva2VuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0Ly1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RyZWFtZWRPdXRwdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiYXBwbHlQYXRjaCIsIkJhc2VUcmFjZXIiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiQUlNZXNzYWdlQ2h1bmsiLCJSdW5Mb2dQYXRjaCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm9wcyIsImNvbmNhdCIsIm90aGVyIiwic3RhdGVzIiwiUnVuTG9nIiwic3RhdGUiLCJsZW5ndGgiLCJuZXdEb2N1bWVudCIsImZyb21SdW5Mb2dQYXRjaCIsInBhdGNoIiwiaXNMb2dTdHJlYW1IYW5kbGVyIiwiaGFuZGxlciIsIm5hbWUiLCJfZ2V0U3RhbmRhcmRpemVkSW5wdXRzIiwicnVuIiwic2NoZW1hRm9ybWF0IiwiRXJyb3IiLCJpbnB1dHMiLCJpbmNsdWRlcyIsInJ1bl90eXBlIiwia2V5cyIsImlucHV0IiwidW5kZWZpbmVkIiwiX2dldFN0YW5kYXJkaXplZE91dHB1dHMiLCJvdXRwdXRzIiwib3V0cHV0IiwiaXNDaGF0R2VuZXJhdGlvbkNodW5rIiwieCIsIm1lc3NhZ2UiLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJfYXdhaXRIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsIl9zY2hlbWFGb3JtYXQiLCJ0cmFuc2Zvcm1TdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJnZXRXcml0ZXIiLCJyZWNlaXZlU3RyZWFtIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwicmVhZGFibGUiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJfaW5jbHVkZVJ1biIsImlkIiwicm9vdElkIiwicnVuVGFncyIsInRhZ3MiLCJpbmNsdWRlIiwiZmluZCIsInRhZyIsImV2ZXJ5IiwidGFwT3V0cHV0SXRlcmFibGUiLCJydW5JZCIsImNodW5rIiwia2V5Iiwia2V5TWFwQnlSdW5JZCIsIndyaXRlIiwib3AiLCJwYXRoIiwib25SdW5DcmVhdGUiLCJ0eXBlIiwic3RyZWFtZWRfb3V0cHV0IiwiZmluYWxfb3V0cHV0IiwibG9ncyIsImNvdW50ZXJNYXBCeVJ1bk5hbWUiLCJjb3VudCIsImxvZ0VudHJ5IiwibWV0YWRhdGEiLCJleHRyYSIsInN0YXJ0X3RpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdHJlYW1lZF9vdXRwdXRfc3RyIiwiZW5kX3RpbWUiLCJvblJ1blVwZGF0ZSIsInJ1bk5hbWUiLCJwdXNoIiwiY2xvc2UiLCJvbkxMTU5ld1Rva2VuIiwidG9rZW4iLCJrd2FyZ3MiLCJpc0NoYXRNb2RlbCIsIm1lc3NhZ2VzIiwic3RyZWFtZWRPdXRwdXRWYWx1ZSIsImNvbnRlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super({\n            _awaitHandler: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            if (this.argOnStart.length === 1) {\n                await this.argOnStart(run);\n            } else if (this.argOnStart.length === 2) {\n                await this.argOnStart(run, this.config);\n            }\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                if (this.argOnEnd.length === 1) {\n                    await this.argOnEnd(run);\n                } else if (this.argOnEnd.length === 2) {\n                    await this.argOnEnd(run, this.config);\n                }\n            }\n        } else if (this.argOnError) {\n            if (this.argOnError.length === 1) {\n                await this.argOnError(run);\n            } else if (this.argOnError.length === 2) {\n                await this.argOnError(run, this.config);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3Jvb3RfbGlzdGVuZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUM7QUFDaEMsTUFBTUMsNEJBQTRCRCxnREFBVUE7SUFDL0NFLFlBQVksRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFHLENBQUU7UUFDOUMsS0FBSyxDQUFDO1lBQUVDLGVBQWU7UUFBSztRQUM1QkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSw0QkFBNEIsR0FDNUJMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDVixNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDVyxVQUFVLEdBQUdWO1FBQ2xCLElBQUksQ0FBQ1csUUFBUSxHQUFHVjtRQUNoQixJQUFJLENBQUNXLFVBQVUsR0FBR1Y7SUFDdEI7SUFDQTs7OztLQUlDLEdBQ0RXLFdBQVdDLENBQUMsRUFBRTtRQUNWLE9BQU9DLFFBQVFDLE9BQU87SUFDMUI7SUFDQSxNQUFNQyxZQUFZQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxJQUFJLENBQUNDLE1BQU0sRUFBRTtZQUNiO1FBQ0o7UUFDQSxJQUFJLENBQUNBLE1BQU0sR0FBR0QsSUFBSUUsRUFBRTtRQUNwQixJQUFJLElBQUksQ0FBQ1YsVUFBVSxFQUFFO1lBQ2pCLElBQUksSUFBSSxDQUFDQSxVQUFVLENBQUNXLE1BQU0sS0FBSyxHQUFHO2dCQUM5QixNQUFNLElBQUksQ0FBQ1gsVUFBVSxDQUFDUTtZQUMxQixPQUNLLElBQUksSUFBSSxDQUFDUixVQUFVLENBQUNXLE1BQU0sS0FBSyxHQUFHO2dCQUNuQyxNQUFNLElBQUksQ0FBQ1gsVUFBVSxDQUFDUSxLQUFLLElBQUksQ0FBQ25CLE1BQU07WUFDMUM7UUFDSjtJQUNKO0lBQ0EsTUFBTXVCLFlBQVlKLEdBQUcsRUFBRTtRQUNuQixJQUFJQSxJQUFJRSxFQUFFLEtBQUssSUFBSSxDQUFDRCxNQUFNLEVBQUU7WUFDeEI7UUFDSjtRQUNBLElBQUksQ0FBQ0QsSUFBSUssS0FBSyxFQUFFO1lBQ1osSUFBSSxJQUFJLENBQUNaLFFBQVEsRUFBRTtnQkFDZixJQUFJLElBQUksQ0FBQ0EsUUFBUSxDQUFDVSxNQUFNLEtBQUssR0FBRztvQkFDNUIsTUFBTSxJQUFJLENBQUNWLFFBQVEsQ0FBQ087Z0JBQ3hCLE9BQ0ssSUFBSSxJQUFJLENBQUNQLFFBQVEsQ0FBQ1UsTUFBTSxLQUFLLEdBQUc7b0JBQ2pDLE1BQU0sSUFBSSxDQUFDVixRQUFRLENBQUNPLEtBQUssSUFBSSxDQUFDbkIsTUFBTTtnQkFDeEM7WUFDSjtRQUNKLE9BQ0ssSUFBSSxJQUFJLENBQUNhLFVBQVUsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQ0EsVUFBVSxDQUFDUyxNQUFNLEtBQUssR0FBRztnQkFDOUIsTUFBTSxJQUFJLENBQUNULFVBQVUsQ0FBQ007WUFDMUIsT0FDSyxJQUFJLElBQUksQ0FBQ04sVUFBVSxDQUFDUyxNQUFNLEtBQUssR0FBRztnQkFDbkMsTUFBTSxJQUFJLENBQUNULFVBQVUsQ0FBQ00sS0FBSyxJQUFJLENBQUNuQixNQUFNO1lBQzFDO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3Jvb3RfbGlzdGVuZXIuanM/YjVhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IGNsYXNzIFJvb3RMaXN0ZW5lcnNUcmFjZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNvbmZpZywgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgc3VwZXIoeyBfYXdhaXRIYW5kbGVyOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlJvb3RMaXN0ZW5lcnNUcmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBSdW4ncyBJRC4gVHlwZSBVVUlEICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvb3RJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnT25TdGFydFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPbkVuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPbkVycm9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmFyZ09uU3RhcnQgPSBvblN0YXJ0O1xuICAgICAgICB0aGlzLmFyZ09uRW5kID0gb25FbmQ7XG4gICAgICAgIHRoaXMuYXJnT25FcnJvciA9IG9uRXJyb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgYSBsZWdhY3kgbWV0aG9kIG9ubHkgY2FsbGVkIG9uY2UgZm9yIGFuIGVudGlyZSBydW4gdHJlZVxuICAgICAqIHRoZXJlZm9yZSBub3QgdXNlZnVsIGhlcmVcbiAgICAgKiBAcGFyYW0ge1J1bn0gXyBOb3QgdXNlZFxuICAgICAqL1xuICAgIHBlcnNpc3RSdW4oXykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBpZiAodGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcbiAgICAgICAgaWYgKHRoaXMuYXJnT25TdGFydCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25TdGFydC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYXJnT25TdGFydC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIGlmIChydW4uaWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW4uZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uRW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25FbmQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FbmQocnVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVuZC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVuZChydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcmdPbkVycm9yLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVycm9yLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlVHJhY2VyIiwiUm9vdExpc3RlbmVyc1RyYWNlciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsIl9hd2FpdEhhbmRsZXIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXJnT25TdGFydCIsImFyZ09uRW5kIiwiYXJnT25FcnJvciIsInBlcnNpc3RSdW4iLCJfIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvblJ1bkNyZWF0ZSIsInJ1biIsInJvb3RJZCIsImlkIiwibGVuZ3RoIiwib25SdW5VcGRhdGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var langsmith_run_trees__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! langsmith/run_trees */ \"(rsc)/./node_modules/langsmith/run_trees.js\");\n/* harmony import */ var langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! langsmith/singletons/traceable */ \"(rsc)/./node_modules/langsmith/singletons/traceable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_4__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName = projectName ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_PROJECT\") ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client({});\n        const traceableTree = LangChainTracer.getTraceableRunTree();\n        if (traceableTree) {\n            this.updateFromRunTree(traceableTree);\n        }\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_3__.getRuntimeEnvironment)()\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id\n        };\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async onRunUpdate(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n            inputs: run.inputs,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            parent_run_id: run.parent_run_id\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    getRun(id) {\n        return this.runMap.get(id);\n    }\n    updateFromRunTree(runTree) {\n        let rootRun = runTree;\n        const visited = new Set();\n        while(rootRun.parent_run){\n            if (visited.has(rootRun.id)) break;\n            visited.add(rootRun.id);\n            if (!rootRun.parent_run) break;\n            rootRun = rootRun.parent_run;\n        }\n        visited.clear();\n        const queue = [\n            rootRun\n        ];\n        while(queue.length > 0){\n            const current = queue.shift();\n            if (!current || visited.has(current.id)) continue;\n            visited.add(current.id);\n            // @ts-expect-error Types of property 'events' are incompatible.\n            this.runMap.set(current.id, current);\n            if (current.child_runs) {\n                queue.push(...current.child_runs);\n            }\n        }\n        this.client = runTree.client ?? this.client;\n        this.projectName = runTree.project_name ?? this.projectName;\n        this.exampleId = runTree.reference_example_id ?? this.exampleId;\n    }\n    convertToRunTree(id) {\n        const runTreeMap = {};\n        const runTreeList = [];\n        for (const [id, run] of this.runMap){\n            // by converting the run map to a run tree, we are doing a copy\n            // thus, any mutation performed on the run tree will not be reflected\n            // back in the run map\n            // TODO: Stop using `this.runMap` in favour of LangSmith's `RunTree`\n            const runTree = new langsmith_run_trees__WEBPACK_IMPORTED_MODULE_1__.RunTree({\n                ...run,\n                child_runs: [],\n                parent_run: undefined,\n                // inherited properties\n                client: this.client,\n                project_name: this.projectName,\n                reference_example_id: this.exampleId,\n                tracingEnabled: true\n            });\n            runTreeMap[id] = runTree;\n            runTreeList.push([\n                id,\n                run.dotted_order\n            ]);\n        }\n        runTreeList.sort((a, b)=>{\n            if (!a[1] || !b[1]) return 0;\n            return a[1].localeCompare(b[1]);\n        });\n        for (const [id] of runTreeList){\n            const run = this.runMap.get(id);\n            const runTree = runTreeMap[id];\n            if (!run || !runTree) continue;\n            if (run.parent_run_id) {\n                const parentRunTree = runTreeMap[run.parent_run_id];\n                if (parentRunTree) {\n                    parentRunTree.child_runs.push(runTree);\n                    runTree.parent_run = parentRunTree;\n                }\n            }\n        }\n        return runTreeMap[id];\n    }\n    static getTraceableRunTree() {\n        try {\n            return (0,langsmith_singletons_traceable__WEBPACK_IMPORTED_MODULE_2__.getCurrentRunTree)();\n        } catch  {\n            return undefined;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3RyYWNlcl9sYW5nY2hhaW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW1DO0FBQ1c7QUFDcUI7QUFDYTtBQUN6QztBQUNoQyxNQUFNTSx3QkFBd0JELGdEQUFVQTtJQUMzQ0UsWUFBWUMsU0FBUyxDQUFDLENBQUMsQ0FBRTtRQUNyQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFdBQVcsRUFBRUMsTUFBTSxFQUFFLEdBQUdUO1FBQzNDLElBQUksQ0FBQ1EsV0FBVyxHQUNaQSxlQUNJYixxRUFBc0JBLENBQUMsd0JBQ3ZCQSxxRUFBc0JBLENBQUM7UUFDL0IsSUFBSSxDQUFDWSxTQUFTLEdBQUdBO1FBQ2pCLElBQUksQ0FBQ0UsTUFBTSxHQUFHQSxVQUFVLElBQUlqQiw2Q0FBTUEsQ0FBQyxDQUFDO1FBQ3BDLE1BQU1rQixnQkFBZ0JaLGdCQUFnQmEsbUJBQW1CO1FBQ3pELElBQUlELGVBQWU7WUFDZixJQUFJLENBQUNFLGlC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QUFPc0I7UUFDWDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qcz9iZjZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gXCJsYW5nc21pdGhcIjtcbmltcG9ydCB7IFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3J1bl90cmVlc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFJ1blRyZWUgfSBmcm9tIFwibGFuZ3NtaXRoL3NpbmdsZXRvbnMvdHJhY2VhYmxlXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlLCBnZXRSdW50aW1lRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IGNsYXNzIExhbmdDaGFpblRyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibGFuZ2NoYWluX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9qZWN0TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgZXhhbXBsZUlkLCBwcm9qZWN0TmFtZSwgY2xpZW50IH0gPSBmaWVsZHM7XG4gICAgICAgIHRoaXMucHJvamVjdE5hbWUgPVxuICAgICAgICAgICAgcHJvamVjdE5hbWUgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1BST0pFQ1RcIikgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1NFU1NJT05cIik7XG4gICAgICAgIHRoaXMuZXhhbXBsZUlkID0gZXhhbXBsZUlkO1xuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudCA/PyBuZXcgQ2xpZW50KHt9KTtcbiAgICAgICAgY29uc3QgdHJhY2VhYmxlVHJlZSA9IExhbmdDaGFpblRyYWNlci5nZXRUcmFjZWFibGVSdW5UcmVlKCk7XG4gICAgICAgIGlmICh0cmFjZWFibGVUcmVlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZyb21SdW5UcmVlKHRyYWNlYWJsZVRyZWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF9jb252ZXJ0VG9DcmVhdGUocnVuLCBleGFtcGxlX2lkID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5ydW4sXG4gICAgICAgICAgICBleHRyYToge1xuICAgICAgICAgICAgICAgIC4uLnJ1bi5leHRyYSxcbiAgICAgICAgICAgICAgICBydW50aW1lOiBhd2FpdCBnZXRSdW50aW1lRW52aXJvbm1lbnQoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZXNzaW9uX25hbWU6IHRoaXMucHJvamVjdE5hbWUsXG4gICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZV9pZDogcnVuLnBhcmVudF9ydW5faWQgPyB1bmRlZmluZWQgOiBleGFtcGxlX2lkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHsgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBjb25zdCBwZXJzaXN0ZWRSdW4gPSBhd2FpdCB0aGlzLl9jb252ZXJ0VG9DcmVhdGUocnVuLCB0aGlzLmV4YW1wbGVJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmNyZWF0ZVJ1bihwZXJzaXN0ZWRSdW4pO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgY29uc3QgcnVuVXBkYXRlID0ge1xuICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgIGVycm9yOiBydW4uZXJyb3IsXG4gICAgICAgICAgICBvdXRwdXRzOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgIGV2ZW50czogcnVuLmV2ZW50cyxcbiAgICAgICAgICAgIGlucHV0czogcnVuLmlucHV0cyxcbiAgICAgICAgICAgIHRyYWNlX2lkOiBydW4udHJhY2VfaWQsXG4gICAgICAgICAgICBkb3R0ZWRfb3JkZXI6IHJ1bi5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBydW4ucGFyZW50X3J1bl9pZCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQudXBkYXRlUnVuKHJ1bi5pZCwgcnVuVXBkYXRlKTtcbiAgICB9XG4gICAgZ2V0UnVuKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bk1hcC5nZXQoaWQpO1xuICAgIH1cbiAgICB1cGRhdGVGcm9tUnVuVHJlZShydW5UcmVlKSB7XG4gICAgICAgIGxldCByb290UnVuID0gcnVuVHJlZTtcbiAgICAgICAgY29uc3QgdmlzaXRlZCA9IG5ldyBTZXQoKTtcbiAgICAgICAgd2hpbGUgKHJvb3RSdW4ucGFyZW50X3J1bikge1xuICAgICAgICAgICAgaWYgKHZpc2l0ZWQuaGFzKHJvb3RSdW4uaWQpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgdmlzaXRlZC5hZGQocm9vdFJ1bi5pZCk7XG4gICAgICAgICAgICBpZiAoIXJvb3RSdW4ucGFyZW50X3J1bilcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHJvb3RSdW4gPSByb290UnVuLnBhcmVudF9ydW47XG4gICAgICAgIH1cbiAgICAgICAgdmlzaXRlZC5jbGVhcigpO1xuICAgICAgICBjb25zdCBxdWV1ZSA9IFtyb290UnVuXTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50IHx8IHZpc2l0ZWQuaGFzKGN1cnJlbnQuaWQpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdmlzaXRlZC5hZGQoY3VycmVudC5pZCk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFR5cGVzIG9mIHByb3BlcnR5ICdldmVudHMnIGFyZSBpbmNvbXBhdGlibGUuXG4gICAgICAgICAgICB0aGlzLnJ1bk1hcC5zZXQoY3VycmVudC5pZCwgY3VycmVudCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudC5jaGlsZF9ydW5zKSB7XG4gICAgICAgICAgICAgICAgcXVldWUucHVzaCguLi5jdXJyZW50LmNoaWxkX3J1bnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpZW50ID0gcnVuVHJlZS5jbGllbnQgPz8gdGhpcy5jbGllbnQ7XG4gICAgICAgIHRoaXMucHJvamVjdE5hbWUgPSBydW5UcmVlLnByb2plY3RfbmFtZSA/PyB0aGlzLnByb2plY3ROYW1lO1xuICAgICAgICB0aGlzLmV4YW1wbGVJZCA9IHJ1blRyZWUucmVmZXJlbmNlX2V4YW1wbGVfaWQgPz8gdGhpcy5leGFtcGxlSWQ7XG4gICAgfVxuICAgIGNvbnZlcnRUb1J1blRyZWUoaWQpIHtcbiAgICAgICAgY29uc3QgcnVuVHJlZU1hcCA9IHt9O1xuICAgICAgICBjb25zdCBydW5UcmVlTGlzdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgcnVuXSBvZiB0aGlzLnJ1bk1hcCkge1xuICAgICAgICAgICAgLy8gYnkgY29udmVydGluZyB0aGUgcnVuIG1hcCB0byBhIHJ1biB0cmVlLCB3ZSBhcmUgZG9pbmcgYSBjb3B5XG4gICAgICAgICAgICAvLyB0aHVzLCBhbnkgbXV0YXRpb24gcGVyZm9ybWVkIG9uIHRoZSBydW4gdHJlZSB3aWxsIG5vdCBiZSByZWZsZWN0ZWRcbiAgICAgICAgICAgIC8vIGJhY2sgaW4gdGhlIHJ1biBtYXBcbiAgICAgICAgICAgIC8vIFRPRE86IFN0b3AgdXNpbmcgYHRoaXMucnVuTWFwYCBpbiBmYXZvdXIgb2YgTGFuZ1NtaXRoJ3MgYFJ1blRyZWVgXG4gICAgICAgICAgICBjb25zdCBydW5UcmVlID0gbmV3IFJ1blRyZWUoe1xuICAgICAgICAgICAgICAgIC4uLnJ1bixcbiAgICAgICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgICAgICBwYXJlbnRfcnVuOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgLy8gaW5oZXJpdGVkIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBjbGllbnQ6IHRoaXMuY2xpZW50LFxuICAgICAgICAgICAgICAgIHByb2plY3RfbmFtZTogdGhpcy5wcm9qZWN0TmFtZSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZV9pZDogdGhpcy5leGFtcGxlSWQsXG4gICAgICAgICAgICAgICAgdHJhY2luZ0VuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJ1blRyZWVNYXBbaWRdID0gcnVuVHJlZTtcbiAgICAgICAgICAgIHJ1blRyZWVMaXN0LnB1c2goW2lkLCBydW4uZG90dGVkX29yZGVyXSk7XG4gICAgICAgIH1cbiAgICAgICAgcnVuVHJlZUxpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKCFhWzFdIHx8ICFiWzFdKVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgcmV0dXJuIGFbMV0ubG9jYWxlQ29tcGFyZShiWzFdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAoY29uc3QgW2lkXSBvZiBydW5UcmVlTGlzdCkge1xuICAgICAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KGlkKTtcbiAgICAgICAgICAgIGNvbnN0IHJ1blRyZWUgPSBydW5UcmVlTWFwW2lkXTtcbiAgICAgICAgICAgIGlmICghcnVuIHx8ICFydW5UcmVlKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHJ1bi5wYXJlbnRfcnVuX2lkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50UnVuVHJlZSA9IHJ1blRyZWVNYXBbcnVuLnBhcmVudF9ydW5faWRdO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRSdW5UcmVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFJ1blRyZWUuY2hpbGRfcnVucy5wdXNoKHJ1blRyZWUpO1xuICAgICAgICAgICAgICAgICAgICBydW5UcmVlLnBhcmVudF9ydW4gPSBwYXJlbnRSdW5UcmVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVuVHJlZU1hcFtpZF07XG4gICAgfVxuICAgIHN0YXRpYyBnZXRUcmFjZWFibGVSdW5UcmVlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEN1cnJlbnRSdW5UcmVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJDbGllbnQiLCJSdW5UcmVlIiwiZ2V0Q3VycmVudFJ1blRyZWUiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiZ2V0UnVudGltZUVudmlyb25tZW50IiwiQmFzZVRyYWNlciIsIkxhbmdDaGFpblRyYWNlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImV4YW1wbGVJZCIsInByb2plY3ROYW1lIiwiY2xpZW50IiwidHJhY2VhYmxlVHJlZSIsImdldFRyYWNlYWJsZVJ1blRyZWUiLCJ1cGRhdGVGcm9tUnVuVHJlZSIsIl9jb252ZXJ0VG9DcmVhdGUiLCJydW4iLCJleGFtcGxlX2lkIiwidW5kZWZpbmVkIiwiZXh0cmEiLCJydW50aW1lIiwiY2hpbGRfcnVucyIsInNlc3Npb25fbmFtZSIsInJlZmVyZW5jZV9leGFtcGxlX2lkIiwicGFyZW50X3J1bl9pZCIsInBlcnNpc3RSdW4iLCJfcnVuIiwib25SdW5DcmVhdGUiLCJwZXJzaXN0ZWRSdW4iLCJjcmVhdGVSdW4iLCJvblJ1blVwZGF0ZSIsInJ1blVwZGF0ZSIsImVuZF90aW1lIiwiZXJyb3IiLCJvdXRwdXRzIiwiZXZlbnRzIiwiaW5wdXRzIiwidHJhY2VfaWQiLCJkb3R0ZWRfb3JkZXIiLCJ1cGRhdGVSdW4iLCJpZCIsImdldFJ1biIsInJ1bk1hcCIsImdldCIsInJ1blRyZWUiLCJyb290UnVuIiwidmlzaXRlZCIsIlNldCIsInBhcmVudF9ydW4iLCJoYXMiLCJhZGQiLCJjbGVhciIsInF1ZXVlIiwibGVuZ3RoIiwiY3VycmVudCIsInNoaWZ0Iiwic2V0IiwicHVzaCIsInByb2plY3RfbmFtZSIsImNvbnZlcnRUb1J1blRyZWUiLCJydW5UcmVlTWFwIiwicnVuVHJlZUxpc3QiLCJ0cmFjaW5nRW5hYmxlZCIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJwYXJlbnRSdW5UcmVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/async_caller.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9hc3luY19jYWxsZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZCO0FBQ0c7QUFDaEMsTUFBTUUsa0JBQWtCO0lBQ3BCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0QsOERBQThEO0FBQzlELE1BQU1DLDhCQUE4QixDQUFDQztJQUNqQyxJQUFJQSxNQUFNQyxPQUFPLENBQUNDLFVBQVUsQ0FBQyxhQUN6QkYsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQUMsaUJBQ3pCRixNQUFNRyxJQUFJLEtBQUssY0FBYztRQUM3QixNQUFNSDtJQUNWO0lBQ0EsOERBQThEO0lBQzlELElBQUlBLE9BQU9JLFNBQVMsZ0JBQWdCO1FBQ2hDLE1BQU1KO0lBQ1Y7SUFDQSxNQUFNSyxTQUNOLDhEQUE4RDtJQUM5REwsT0FBT00sVUFBVUQsVUFBVUwsT0FBT0s7SUFDbEMsSUFBSUEsVUFBVVAsZ0JBQWdCUyxRQUFRLENBQUMsQ0FBQ0YsU0FBUztRQUM3QyxNQUFNTDtJQUNWO0lBQ0EsOERBQThEO0lBQzlELElBQUlBLE9BQU9BLE9BQU9JLFNBQVMsc0JBQXNCO1FBQzdDLE1BQU1JLE1BQU0sSUFBSUMsTUFBTVQsT0FBT0M7UUFDN0JPLElBQUlMLElBQUksR0FBRztRQUNYLE1BQU1LO0lBQ1Y7QUFDSjtBQUNBOzs7Ozs7Ozs7Ozs7Q0FZQyxHQUNNLE1BQU1FO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxjQUFjLEdBQUdQLE9BQU9PLGNBQWMsSUFBSUM7UUFDL0MsSUFBSSxDQUFDQyxVQUFVLEdBQUdULE9BQU9TLFVBQVUsSUFBSTtRQUN2QyxJQUFJLENBQUNDLGVBQWUsR0FDaEJWLE9BQU9VLGVBQWUsSUFBSXZCO1FBQzlCLE1BQU13QixTQUFTLEtBQXNCMUIsR0FBR0EsK0NBQWlCLEdBQUdBLG9DQUFTQTtRQUNyRSxJQUFJLENBQUM0QixLQUFLLEdBQUcsSUFBSUYsT0FBTztZQUFFRyxhQUFhLElBQUksQ0FBQ1AsY0FBYztRQUFDO0lBQy9EO0lBQ0EsOERBQThEO0lBQzlEUSxLQUFLQyxRQUFRLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQ3BCLE9BQU8sSUFBSSxDQUFDSixLQUFLLENBQUNLLEdBQUcsQ0FBQyxJQUFNbEMsb0NBQU1BLENBQUMsSUFBTWdDLFlBQVlDLE1BQU1FLEtBQUssQ0FBQyxDQUFDL0I7b0JBQzlELHVEQUF1RDtvQkFDdkQsSUFBSUEsaUJBQWlCUyxPQUFPO3dCQUN4QixNQUFNVDtvQkFDVixPQUNLO3dCQUNELE1BQU0sSUFBSVMsTUFBTVQ7b0JBQ3BCO2dCQUNKLElBQUk7Z0JBQ0FzQixpQkFBaUIsSUFBSSxDQUFDQSxlQUFlO2dCQUNyQ1UsU0FBUyxJQUFJLENBQUNYLFVBQVU7Z0JBQ3hCWSxXQUFXO1lBR2YsSUFBSTtZQUFFQyxnQkFBZ0I7UUFBSztJQUMvQjtJQUNBLDhEQUE4RDtJQUM5REMsZ0JBQWdCQyxPQUFPLEVBQUVSLFFBQVEsRUFBRSxHQUFHQyxJQUFJLEVBQUU7UUFDeEMsbURBQW1EO1FBQ25ELHdFQUF3RTtRQUN4RSxJQUFJTyxRQUFRQyxNQUFNLEVBQUU7WUFDaEIsT0FBT0MsUUFBUUMsSUFBSSxDQUFDO2dCQUNoQixJQUFJLENBQUNaLElBQUksQ0FBQ0MsYUFBYUM7Z0JBQ3ZCLElBQUlTLFFBQVEsQ0FBQ0UsR0FBR0M7b0JBQ1pMLFFBQVFDLE1BQU0sRUFBRUssaUJBQWlCLFNBQVM7d0JBQ3RDRCxPQUFPLElBQUloQyxNQUFNO29CQUNyQjtnQkFDSjthQUNIO1FBQ0w7UUFDQSxPQUFPLElBQUksQ0FBQ2tCLElBQUksQ0FBQ0MsYUFBYUM7SUFDbEM7SUFDQWMsTUFBTSxHQUFHZCxJQUFJLEVBQUU7UUFDWCxPQUFPLElBQUksQ0FBQ0YsSUFBSSxDQUFDLElBQU1nQixTQUFTZCxNQUFNZSxJQUFJLENBQUMsQ0FBQ0MsTUFBU0EsSUFBSUMsRUFBRSxHQUFHRCxNQUFNUCxRQUFRRyxNQUFNLENBQUNJO0lBQ3ZGO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcz8yNTI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmNvbnN0IFNUQVRVU19OT19SRVRSWSA9IFtcbiAgICA0MDAsXG4gICAgNDAxLFxuICAgIDQwMixcbiAgICA0MDMsXG4gICAgNDA0LFxuICAgIDQwNSxcbiAgICA0MDYsXG4gICAgNDA3LFxuICAgIDQwOSwgLy8gQ29uZmxpY3Rcbl07XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyID0gKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJBYm9ydEVycm9yXCIpIHx8XG4gICAgICAgIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uY29kZSA9PT0gXCJFQ09OTkFCT1JURURcIikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdHVzID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBlcnJvcj8ucmVzcG9uc2U/LnN0YXR1cyA/PyBlcnJvcj8uc3RhdHVzO1xuICAgIGlmIChzdGF0dXMgJiYgU1RBVFVTX05PX1JFVFJZLmluY2x1ZGVzKCtzdGF0dXMpKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uZXJyb3I/LmNvZGUgPT09IFwiaW5zdWZmaWNpZW50X3F1b3RhXCIpIHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGVycm9yPy5tZXNzYWdlKTtcbiAgICAgICAgZXJyLm5hbWUgPSBcIkluc3VmZmljaWVudFF1b3RhRXJyb3JcIjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn07XG4vKipcbiAqIEEgY2xhc3MgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIGFzeW5jIGNhbGxzIHdpdGggY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBtYWtpbmcgY2FsbHMgdG8gYW55IGtpbmQgb2YgXCJleHBlbnNpdmVcIiBleHRlcm5hbCByZXNvdXJjZSxcbiAqIGJlIGl0IGJlY2F1c2UgaXQncyByYXRlLWxpbWl0ZWQsIHN1YmplY3QgdG8gbmV0d29yayBpc3N1ZXMsIGV0Yy5cbiAqXG4gKiBDb25jdXJyZW50IGNhbGxzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4Q29uY3VycmVuY3lgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHNcbiAqIHRvIGBJbmZpbml0eWAuIFRoaXMgbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBhbGwgY2FsbHMgd2lsbCBiZSBtYWRlIGluIHBhcmFsbGVsLlxuICpcbiAqIFJldHJpZXMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhSZXRyaWVzYCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzIHRvIDYuIFRoaXNcbiAqIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgZWFjaCBjYWxsIHdpbGwgYmUgcmV0cmllZCB1cCB0byA2IHRpbWVzLCB3aXRoIGFuXG4gKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuICovXG5leHBvcnQgY2xhc3MgQXN5bmNDYWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhDb25jdXJyZW5jeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhSZXRyaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJxdWV1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heENvbmN1cnJlbmN5ID0gcGFyYW1zLm1heENvbmN1cnJlbmN5ID8/IEluZmluaXR5O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwYXJhbXMubWF4UmV0cmllcyA/PyA2O1xuICAgICAgICB0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9XG4gICAgICAgICAgICBwYXJhbXMub25GYWlsZWRBdHRlbXB0ID8/IGRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlcjtcbiAgICAgICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgICAgIHRoaXMucXVldWUgPSBuZXcgUFF1ZXVlKHsgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3kgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbChjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5hZGQoKCkgPT4gcFJldHJ5KCgpID0+IGNhbGxhYmxlKC4uLmFyZ3MpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCB7XG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IHRoaXMub25GYWlsZWRBdHRlbXB0LFxuICAgICAgICAgICAgcmV0cmllczogdGhpcy5tYXhSZXRyaWVzLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgLy8gSWYgbmVlZGVkIHdlIGNhbiBjaGFuZ2Ugc29tZSBvZiB0aGUgZGVmYXVsdHMgaGVyZSxcbiAgICAgICAgICAgIC8vIGJ1dCB0aGV5J3JlIHF1aXRlIHNlbnNpYmxlLlxuICAgICAgICB9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsV2l0aE9wdGlvbnMob3B0aW9ucywgY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gTm90ZSB0aGlzIGRvZXNuJ3QgY2FuY2VsIHRoZSB1bmRlcmx5aW5nIHJlcXVlc3QsXG4gICAgICAgIC8vIHdoZW4gYXZhaWxhYmxlIHByZWZlciB0byB1c2UgdGhlIHNpZ25hbCBvcHRpb24gb2YgdGhlIHVuZGVybHlpbmcgY2FsbFxuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyksXG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJBYm9ydEVycm9yXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZmV0Y2goLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKCgpID0+IGZldGNoKC4uLmFyZ3MpLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcyA6IFByb21pc2UucmVqZWN0KHJlcykpKSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBSZXRyeSIsIlBRdWV1ZU1vZCIsIlNUQVRVU19OT19SRVRSWSIsImRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlciIsImVycm9yIiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJuYW1lIiwiY29kZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiaW5jbHVkZXMiLCJlcnIiLCJFcnJvciIsIkFzeW5jQ2FsbGVyIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibWF4Q29uY3VycmVuY3kiLCJJbmZpbml0eSIsIm1heFJldHJpZXMiLCJvbkZhaWxlZEF0dGVtcHQiLCJQUXVldWUiLCJkZWZhdWx0IiwicXVldWUiLCJjb25jdXJyZW5jeSIsImNhbGwiLCJjYWxsYWJsZSIsImFyZ3MiLCJhZGQiLCJjYXRjaCIsInJldHJpZXMiLCJyYW5kb21pemUiLCJ0aHJvd09uVGltZW91dCIsImNhbGxXaXRoT3B0aW9ucyIsIm9wdGlvbnMiLCJzaWduYWwiLCJQcm9taXNlIiwicmFjZSIsIl8iLCJyZWplY3QiLCJhZGRFdmVudExpc3RlbmVyIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/callbacks.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/callbacks.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isTracingEnabled: () => (/* binding */ isTracingEnabled)\n/* harmony export */ });\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/env.js\");\n\nconst isTracingEnabled = (tracingEnabled)=>{\n    if (tracingEnabled !== undefined) {\n        return tracingEnabled;\n    }\n    const envVars = [\n        \"LANGSMITH_TRACING_V2\",\n        \"LANGCHAIN_TRACING_V2\",\n        \"LANGSMITH_TRACING\",\n        \"LANGCHAIN_TRACING\"\n    ];\n    return !!envVars.find((envVar)=>(0,_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(envVar) === \"true\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9jYWxsYmFja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0Q7QUFDM0MsTUFBTUMsbUJBQW1CLENBQUNDO0lBQzdCLElBQUlBLG1CQUFtQkMsV0FBVztRQUM5QixPQUFPRDtJQUNYO0lBQ0EsTUFBTUUsVUFBVTtRQUNaO1FBQ0E7UUFDQTtRQUNBO0tBQ0g7SUFDRCxPQUFPLENBQUMsQ0FBQ0EsUUFBUUMsSUFBSSxDQUFDLENBQUNDLFNBQVdOLCtEQUFzQkEsQ0FBQ00sWUFBWTtBQUN6RSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9jYWxsYmFja3MuanM/ODgwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4vZW52LmpzXCI7XG5leHBvcnQgY29uc3QgaXNUcmFjaW5nRW5hYmxlZCA9ICh0cmFjaW5nRW5hYmxlZCkgPT4ge1xuICAgIGlmICh0cmFjaW5nRW5hYmxlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0cmFjaW5nRW5hYmxlZDtcbiAgICB9XG4gICAgY29uc3QgZW52VmFycyA9IFtcbiAgICAgICAgXCJMQU5HU01JVEhfVFJBQ0lOR19WMlwiLFxuICAgICAgICBcIkxBTkdDSEFJTl9UUkFDSU5HX1YyXCIsXG4gICAgICAgIFwiTEFOR1NNSVRIX1RSQUNJTkdcIixcbiAgICAgICAgXCJMQU5HQ0hBSU5fVFJBQ0lOR1wiLFxuICAgIF07XG4gICAgcmV0dXJuICEhZW52VmFycy5maW5kKChlbnZWYXIpID0+IGdldEVudmlyb25tZW50VmFyaWFibGUoZW52VmFyKSA9PT0gXCJ0cnVlXCIpO1xufTtcbiJdLCJuYW1lcyI6WyJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiaXNUcmFjaW5nRW5hYmxlZCIsInRyYWNpbmdFbmFibGVkIiwidW5kZWZpbmVkIiwiZW52VmFycyIsImZpbmQiLCJlbnZWYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/callbacks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/env.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/env.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\"));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nasync function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\" ? process.env?.[name] : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBTyxNQUFNQSxZQUFZLElBQU0sTUFBNkIsSUFBSSxDQUFzQyxDQUFDO0FBQ2hHLE1BQU1HLGNBQWMsSUFBTSxPQUFPQyxlQUFlLFlBQ25EQSxXQUFXQyxXQUFXLElBQ3RCRCxXQUFXQyxXQUFXLENBQUNDLElBQUksS0FBSyw2QkFBNkI7QUFDMUQsTUFBTUMsVUFBVSxJQUFNLE1BQTBELElBQ2xGLE9BQU9DLGNBQWMsZUFDakJBLENBQUFBLFVBQVVDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDLGNBQzFCRixVQUFVQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxRQUFPLEVBQUk7QUFDcEQseURBQXlEO0FBQ3pELDZCQUE2QjtBQUN0QixNQUFNQyxTQUFTLElBQU0sT0FBT0MsU0FBUyxZQUFZO0FBQ3hELGdEQUFnRDtBQUN6QyxNQUFNQyxTQUFTLElBQU0sT0FBT0MsWUFBWSxlQUMzQyxPQUFPQSxRQUFRQyxRQUFRLEtBQUssZUFDNUIsT0FBT0QsUUFBUUMsUUFBUSxDQUFDQyxJQUFJLEtBQUssZUFDakMsQ0FBQ0wsU0FBUztBQUNQLE1BQU1NLFNBQVM7SUFDbEIsSUFBSUM7SUFDSixJQUFJbEIsYUFBYTtRQUNia0IsTUFBTTtJQUNWLE9BQ0ssSUFBSUwsVUFBVTtRQUNmSyxNQUFNO0lBQ1YsT0FDSyxJQUFJZixlQUFlO1FBQ3BCZSxNQUFNO0lBQ1YsT0FDSyxJQUFJWCxXQUFXO1FBQ2hCVyxNQUFNO0lBQ1YsT0FDSyxJQUFJUCxVQUFVO1FBQ2ZPLE1BQU07SUFDVixPQUNLO1FBQ0RBLE1BQU07SUFDVjtJQUNBLE9BQU9BO0FBQ1gsRUFBRTtBQUNGLElBQUlDO0FBQ0csZUFBZUM7SUFDbEIsSUFBSUQsdUJBQXVCRSxXQUFXO1FBQ2xDLE1BQU1ILE1BQU1EO1FBQ1pFLHFCQUFxQjtZQUNqQkcsU0FBUztZQUNUQyxTQUFTTDtRQUNiO0lBQ0o7SUFDQSxPQUFPQztBQUNYO0FBQ08sU0FBU0ssdUJBQXVCbEIsSUFBSTtJQUN2QyxxRkFBcUY7SUFDckYsMERBQTBEO0lBQzFELElBQUk7UUFDQSxPQUFPLE9BQU9RLFlBQVksY0FFbEJBLFFBQVFJLEdBQUcsRUFBRSxDQUFDWixLQUFLLEdBQ3JCZTtJQUNWLEVBQ0EsT0FBT0ksR0FBRztRQUNOLE9BQU9KO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzPzI3MDUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzQnJvd3NlciA9ICgpID0+IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbmV4cG9ydCBjb25zdCBpc1dlYldvcmtlciA9ICgpID0+IHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3RvciAmJlxuICAgIGdsb2JhbFRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gXCJEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZVwiO1xuZXhwb3J0IGNvbnN0IGlzSnNEb20gPSAoKSA9PiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubmFtZSA9PT0gXCJub2RlanNcIikgfHxcbiAgICAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk5vZGUuanNcIikgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJqc2RvbVwiKSkpO1xuLy8gU3VwYWJhc2UgRWRnZSBGdW5jdGlvbiBwcm92aWRlcyBhIGBEZW5vYCBnbG9iYWwgb2JqZWN0XG4vLyB3aXRob3V0IGB2ZXJzaW9uYCBwcm9wZXJ0eVxuZXhwb3J0IGNvbnN0IGlzRGVubyA9ICgpID0+IHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiO1xuLy8gTWFyayBub3QtYXMtbm9kZSBpZiBpbiBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uXG5leHBvcnQgY29uc3QgaXNOb2RlID0gKCkgPT4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAhaXNEZW5vKCk7XG5leHBvcnQgY29uc3QgZ2V0RW52ID0gKCkgPT4ge1xuICAgIGxldCBlbnY7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgIGVudiA9IFwiYnJvd3NlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc05vZGUoKSkge1xuICAgICAgICBlbnYgPSBcIm5vZGVcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNXZWJXb3JrZXIoKSkge1xuICAgICAgICBlbnYgPSBcIndlYndvcmtlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0pzRG9tKCkpIHtcbiAgICAgICAgZW52ID0gXCJqc2RvbVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Rlbm8oKSkge1xuICAgICAgICBlbnYgPSBcImRlbm9cIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVudiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcmV0dXJuIGVudjtcbn07XG5sZXQgcnVudGltZUVudmlyb25tZW50O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJ1bnRpbWVFbnZpcm9ubWVudCgpIHtcbiAgICBpZiAocnVudGltZUVudmlyb25tZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZW52ID0gZ2V0RW52KCk7XG4gICAgICAgIHJ1bnRpbWVFbnZpcm9ubWVudCA9IHtcbiAgICAgICAgICAgIGxpYnJhcnk6IFwibGFuZ2NoYWluLWpzXCIsXG4gICAgICAgICAgICBydW50aW1lOiBlbnYsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBydW50aW1lRW52aXJvbm1lbnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShuYW1lKSB7XG4gICAgLy8gQ2VydGFpbiBEZW5vIHNldHVwcyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHlvdSB0cnkgdG8gYWNjZXNzIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5nY2hhaW4tYWkvbGFuZ2NoYWluanMvaXNzdWVzLzE0MTJcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnY/LltuYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzQnJvd3NlciIsIndpbmRvdyIsImRvY3VtZW50IiwiaXNXZWJXb3JrZXIiLCJnbG9iYWxUaGlzIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNKc0RvbSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluY2x1ZGVzIiwiaXNEZW5vIiwiRGVubyIsImlzTm9kZSIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJnZXRFbnYiLCJlbnYiLCJydW50aW1lRW52aXJvbm1lbnQiLCJnZXRSdW50aW1lRW52aXJvbm1lbnQiLCJ1bmRlZmluZWQiLCJsaWJyYXJ5IiwicnVudGltZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4QjtBQUNFO0FBQ3NHO0FBQ3RJOztDQUVDLEdBQ3FDO0FBQ2dHO0FBQ3RJLGlFQUFlO0lBQ1gsR0FBR00seUNBQUk7SUFDUCxhQUFhO0lBQ2JMLGNBQWNBLHlEQUFBQTtJQUNkRSxTQUFTQSx5REFBQUE7SUFDVEMsbUJBQW1CQSxrRUFBQUE7SUFDbkJDLHFCQUFxQkEsb0VBQUFBO0FBQ3pCLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzPzg4NzkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vc3JjL2NvcmUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9kdXBsZXguanNcIjtcbmV4cG9ydCB7IFBhdGNoRXJyb3IgYXMgSnNvblBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUgYXMgZGVlcENsb25lLCBlc2NhcGVQYXRoQ29tcG9uZW50LCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIH0gZnJvbSBcIi4vc3JjL2hlbHBlcnMuanNcIjtcbi8qKlxuICogRGVmYXVsdCBleHBvcnQgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqL1xuaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi9zcmMvY29yZS5qc1wiO1xuaW1wb3J0IHsgUGF0Y2hFcnJvciBhcyBKc29uUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSBhcyBkZWVwQ2xvbmUsIGVzY2FwZVBhdGhDb21wb25lbnQsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgfSBmcm9tIFwiLi9zcmMvaGVscGVycy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC4uLmNvcmUsXG4gICAgLy8gLi4uZHVwbGV4LFxuICAgIEpzb25QYXRjaEVycm9yLFxuICAgIGRlZXBDbG9uZSxcbiAgICBlc2NhcGVQYXRoQ29tcG9uZW50LFxuICAgIHVuZXNjYXBlUGF0aENvbXBvbmVudCxcbn07XG4iXSwibmFtZXMiOlsiUGF0Y2hFcnJvciIsIkpzb25QYXRjaEVycm9yIiwiX2RlZXBDbG9uZSIsImRlZXBDbG9uZSIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJjb3JlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2NvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLGNBQWM7QUFDeUY7QUFDaEcsTUFBTUssaUJBQWlCTCxtREFBVUEsQ0FBQztBQUNsQyxNQUFNTSxZQUFZTCxtREFBVUEsQ0FBQztBQUNwQzs7Ozs7Q0FLQyxHQUNELDBDQUEwQyxHQUMxQyxNQUFNTSxTQUFTO0lBQ1hDLEtBQUssU0FBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDN0JGLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHLElBQUksQ0FBQ0UsS0FBSztRQUNyQixPQUFPO1lBQUVDLGFBQWFGO1FBQVM7SUFDbkM7SUFDQUcsUUFBUSxTQUFVTCxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsUUFBUTtRQUNoQyxJQUFJSSxVQUFVTixHQUFHLENBQUNDLElBQUk7UUFDdEIsT0FBT0QsR0FBRyxDQUFDQyxJQUFJO1FBQ2YsT0FBTztZQUFFRyxhQUFhRjtZQUFVSTtRQUFRO0lBQzVDO0lBQ0FDLFNBQVMsU0FBVVAsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDakMsSUFBSUksVUFBVU4sR0FBRyxDQUFDQyxJQUFJO1FBQ3RCRCxHQUFHLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNFLEtBQUs7UUFDckIsT0FBTztZQUFFQyxhQUFhRjtZQUFVSTtRQUFRO0lBQzVDO0lBQ0FFLE1BQU0sU0FBVVIsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDOUI7O29DQUU0QixHQUM1QixJQUFJSSxVQUFVRyxrQkFBa0JQLFVBQVUsSUFBSSxDQUFDUSxJQUFJO1FBQ25ELElBQUlKLFNBQVM7WUFDVEEsVUFBVWQsdURBQVVBLENBQUNjO1FBQ3pCO1FBQ0EsTUFBTUssZ0JBQWdCQyxlQUFlVixVQUFVO1lBQzND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LE1BQU1BLEtBQUtDLE1BQU1BO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2NvcmUuanM/MGViYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSwgaXNJbnRlZ2VyLCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIGhhc1VuZGVmaW5lZCwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5leHBvcnQgY29uc3QgSnNvblBhdGNoRXJyb3IgPSBQYXRjaEVycm9yO1xuZXhwb3J0IGNvbnN0IGRlZXBDbG9uZSA9IF9kZWVwQ2xvbmU7XG4vKiBXZSB1c2UgYSBKYXZhc2NyaXB0IGhhc2ggdG8gc3RvcmUgZWFjaFxuIGZ1bmN0aW9uLiBFYWNoIGhhc2ggZW50cnkgKHByb3BlcnR5KSB1c2VzXG4gdGhlIG9wZXJhdGlvbiBpZGVudGlmaWVycyBzcGVjaWZpZWQgaW4gcmZjNjkwMi5cbiBJbiB0aGlzIHdheSwgd2UgY2FuIG1hcCBlYWNoIHBhdGNoIG9wZXJhdGlvblxuIHRvIGl0cyBkZWRpY2F0ZWQgZnVuY3Rpb24gaW4gZWZmaWNpZW50IHdheS5cbiAqL1xuLyogVGhlIG9wZXJhdGlvbnMgYXBwbGljYWJsZSB0byBhbiBvYmplY3QgKi9cbmNvbnN0IG9iak9wcyA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgb2JqW2tleV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgcmVwbGFjZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBvYmpba2V5XSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICAvKiBpbiBjYXNlIG1vdmUgdGFyZ2V0IG92ZXJ3cml0ZXMgYW4gZXhpc3RpbmcgdmFsdWUsXG4gICAgICAgIHJldHVybiB0aGUgcmVtb3ZlZCB2YWx1ZSwgdGhpcyBjYW4gYmUgdGF4aW5nIHBlcmZvcm1hbmNlLXdpc2UsXG4gICAgICAgIGFuZCBpcyBwb3RlbnRpYWxseSB1bm5lZWRlZCAqL1xuICAgICAgICBsZXQgcmVtb3ZlZCA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCB0aGlzLnBhdGgpO1xuICAgICAgICBpZiAocmVtb3ZlZCkge1xuICAgICAgICAgICAgcmVtb3ZlZCA9IF9kZWVwQ2xvbmUocmVtb3ZlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxWYWx1ZSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuZnJvbSxcbiAgICAgICAgfSkucmVtb3ZlZDtcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IG9yaWdpbmFsVmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIGNvcHk6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdmFsdWVUb0NvcHkgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgdGhpcy5mcm9tKTtcbiAgICAgICAgLy8gZW5mb3JjZSBjb3B5IGJ5IHZhbHVlIHNvIGZ1cnRoZXIgb3BlcmF0aW9ucyBkb24ndCBhZmZlY3Qgc291cmNlIChzZWUgaXNzdWUgIzE3NylcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUodmFsdWVUb0NvcHkpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbiAgICB0ZXN0OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgdGVzdDogX2FyZUVxdWFscyhvYmpba2V5XSwgdGhpcy52YWx1ZSkgfTtcbiAgICB9LFxuICAgIF9nZXQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxufTtcbi8qIFRoZSBvcGVyYXRpb25zIGFwcGxpY2FibGUgdG8gYW4gYXJyYXkuIE1hbnkgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgb2JqZWN0ICovXG52YXIgYXJyT3BzID0ge1xuICAgIGFkZDogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKGlzSW50ZWdlcihpKSkge1xuICAgICAgICAgICAgYXJyLnNwbGljZShpLCAwLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFycmF5IHByb3BzXG4gICAgICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgbWF5IGJlIG5lZWRlZCB3aGVuIHVzaW5nICctJyBpbiBhbiBhcnJheVxuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIGluZGV4OiBpIH07XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkTGlzdCA9IGFyci5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZDogcmVtb3ZlZExpc3RbMF0gfTtcbiAgICB9LFxuICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gYXJyW2ldO1xuICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIG1vdmU6IG9iak9wcy5tb3ZlLFxuICAgIGNvcHk6IG9iak9wcy5jb3B5LFxuICAgIHRlc3Q6IG9iak9wcy50ZXN0LFxuICAgIF9nZXQ6IG9iak9wcy5fZ2V0LFxufTtcbi8qKlxuICogUmV0cmlldmVzIGEgdmFsdWUgZnJvbSBhIEpTT04gZG9jdW1lbnQgYnkgYSBKU09OIHBvaW50ZXIuXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIGdldCB0aGUgdmFsdWUgZnJvbVxuICogQHBhcmFtIHBvaW50ZXIgYW4gZXNjYXBlZCBKU09OIHBvaW50ZXJcbiAqIEByZXR1cm4gVGhlIHJldHJpZXZlZCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHBvaW50ZXIpIHtcbiAgICBpZiAocG9pbnRlciA9PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9XG4gICAgdmFyIGdldE9yaWdpbmFsRGVzdGluYXRpb24gPSB7IG9wOiBcIl9nZXRcIiwgcGF0aDogcG9pbnRlciB9O1xuICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBnZXRPcmlnaW5hbERlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbi52YWx1ZTtcbn1cbi8qKlxuICogQXBwbHkgYSBzaW5nbGUgSlNPTiBQYXRjaCBPcGVyYXRpb24gb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBvcGVyYXRpb24uXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBhbmQgYG9wZXJhdGlvbmAgb2JqZWN0cyAtIGl0IGdldHMgdGhlIHZhbHVlcyBieSByZWZlcmVuY2UuXG4gKiBJZiB5b3Ugd291bGQgbGlrZSB0byBhdm9pZCB0b3VjaGluZyB5b3VyIHZhbHVlcywgY2xvbmUgdGhlbTpcbiAqIGBqc29ucGF0Y2guYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKG9wZXJhdGlvbikpYC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBvcGVyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24sIHZhbGlkYXRlT3BlcmF0aW9uID0gZmFsc2UsIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUsIGluZGV4ID0gMCkge1xuICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVPcGVyYXRpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgb3BlcmF0aW9uLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdG9yKG9wZXJhdGlvbiwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogUk9PVCBPUEVSQVRJT05TICovXG4gICAgaWYgKG9wZXJhdGlvbi5wYXRoID09PSBcIlwiKSB7XG4gICAgICAgIGxldCByZXR1cm5WYWx1ZSA9IHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50OyAvL2RvY3VtZW50IHdlIHJlbW92ZWRcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpIHtcbiAgICAgICAgICAgIC8vIGl0J3MgYSBtb3ZlIG9yIGNvcHkgdG8gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgb3BlcmF0aW9uLmZyb20pOyAvLyBnZXQgdGhlIHZhbHVlIGJ5IGpzb24tcG9pbnRlciBpbiBgZnJvbWAgZmllbGRcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlbW92ZWQgaXRlbVxuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS50ZXN0ID0gX2FyZUVxdWFscyhkb2N1bWVudCwgb3BlcmF0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIikge1xuICAgICAgICAgICAgLy8gYSByZW1vdmUgb24gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJfZ2V0XCIpIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbi52YWx1ZSA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLyogYmFkIG9wZXJhdGlvbiAqL1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IC8qIEVORCBST09UIE9QRVJBVElPTlMgKi9cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICAgICAgZG9jdW1lbnQgPSBfZGVlcENsb25lKGRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gb3BlcmF0aW9uLnBhdGggfHwgXCJcIjtcbiAgICAgICAgY29uc3Qga2V5cyA9IHBhdGguc3BsaXQoXCIvXCIpO1xuICAgICAgICBsZXQgb2JqID0gZG9jdW1lbnQ7XG4gICAgICAgIGxldCB0ID0gMTsgLy9za2lwIGVtcHR5IGVsZW1lbnQgLSBodHRwOi8vanNwZXJmLmNvbS90by1zaGlmdC1vci1ub3QtdG8tc2hpZnRcbiAgICAgICAgbGV0IGxlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBsZXQgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBrZXk7XG4gICAgICAgIGxldCB2YWxpZGF0ZUZ1bmN0aW9uO1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRlT3BlcmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRvcjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAga2V5ID0ga2V5c1t0XTtcbiAgICAgICAgICAgIGlmIChrZXkgJiYga2V5LmluZGV4T2YoXCJ+XCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gdW5lc2NhcGVQYXRoQ29tcG9uZW50KGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyAmJlxuICAgICAgICAgICAgICAgIChrZXkgPT0gXCJfX3Byb3RvX19cIiB8fFxuICAgICAgICAgICAgICAgICAgICAoa2V5ID09IFwicHJvdG90eXBlXCIgJiYgdCA+IDAgJiYga2V5c1t0IC0gMV0gPT0gXCJjb25zdHJ1Y3RvclwiKSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSlNPTi1QYXRjaDogbW9kaWZ5aW5nIGBfX3Byb3RvX19gIG9yIGBjb25zdHJ1Y3Rvci9wcm90b3R5cGVgIHByb3AgaXMgYmFubmVkIGZvciBzZWN1cml0eSByZWFzb25zLCBpZiB0aGlzIHdhcyBvbiBwdXJwb3NlLCBwbGVhc2Ugc2V0IGBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zYCBmbGFnIGZhbHNlIGFuZCBwYXNzIGl0IHRvIHRoaXMgZnVuY3Rpb24uIE1vcmUgaW5mbyBpbiBmYXN0LWpzb24tcGF0Y2ggUkVBRE1FXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0ga2V5cy5zbGljZSgwLCB0KS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0gb3BlcmF0aW9uLnBhdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCsrO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IG9iai5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgIWlzSW50ZWdlcihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJFeHBlY3RlZCBhbiB1bnNpZ25lZCBiYXNlLTEwIGludGVnZXIgdmFsdWUsIG1ha2luZyB0aGUgbmV3IHJlZmVyZW5jZWQgdmFsdWUgdGhlIGFycmF5IGVsZW1lbnQgd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleFwiLCBcIk9QRVJBVElPTl9QQVRIX0lMTEVHQUxfQVJSQVlfSU5ERVhcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IC8vIG9ubHkgcGFyc2Uga2V5IHdoZW4gaXQncyBhbiBpbnRlZ2VyIGZvciBgYXJyLnByb3BgIHRvIHdvcmtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnRlZ2VyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IH5+a2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0ID49IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgb3BlcmF0aW9uLm9wID09PSBcImFkZFwiICYmIGtleSA+IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRoZSBzcGVjaWZpZWQgaW5kZXggTVVTVCBOT1QgYmUgZ3JlYXRlciB0aGFuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGFycmF5XCIsIFwiT1BFUkFUSU9OX1ZBTFVFX09VVF9PRl9CT1VORFNcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gYXJyT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gb2JqT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vcmUga2V5cyBpbiB0aGUgcGF0aCwgYnV0IHRoZSBuZXh0IHZhbHVlIGlzbid0IGEgbm9uLW51bGwgb2JqZWN0LFxuICAgICAgICAgICAgLy8gdGhyb3cgYW4gT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFIGVycm9yIGluc3RlYWQgb2YgaXRlcmF0aW5nIGFnYWluLlxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmIHQgPCBsZW4gJiYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFwcGx5IGEgZnVsbCBKU09OIFBhdGNoIGFycmF5IG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHtuZXdEb2N1bWVudCwgcmVzdWx0fSBvZiB0aGUgcGF0Y2guXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBvYmplY3QgYW5kIGBwYXRjaGAgLSBpdCBnZXRzIHRoZSB2YWx1ZXMgYnkgcmVmZXJlbmNlLlxuICogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4gKiBganNvbnBhdGNoLmFwcGx5UGF0Y2goZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKHBhdGNoKSlgLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBwYXRjaCBUaGUgcGF0Y2ggdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIEFuIGFycmF5IG9mIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBwYXRjaFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQYXRjaChkb2N1bWVudCwgcGF0Y2gsIHZhbGlkYXRlT3BlcmF0aW9uLCBtdXRhdGVEb2N1bWVudCA9IHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgPSB0cnVlKSB7XG4gICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwYXRjaCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlBhdGNoIHNlcXVlbmNlIG11c3QgYmUgYW4gYXJyYXlcIiwgXCJTRVFVRU5DRV9OT1RfQU5fQVJSQVlcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICBkb2N1bWVudCA9IF9kZWVwQ2xvbmUoZG9jdW1lbnQpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KHBhdGNoLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHBhdGNoLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtdXRhdGVEb2N1bWVudCBhcmd1bWVudCBiZWNhdXNlIGlmIGl0IHdhcyB0cnVlLCB3ZSBhbHJlYWR5IGRlZXAgY2xvbmVkIHRoZSBvYmplY3QsIHdlJ2xsIGp1c3QgcGFzcyBgdHJ1ZWBcbiAgICAgICAgcmVzdWx0c1tpXSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBwYXRjaFtpXSwgdmFsaWRhdGVPcGVyYXRpb24sIHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMsIGkpO1xuICAgICAgICBkb2N1bWVudCA9IHJlc3VsdHNbaV0ubmV3RG9jdW1lbnQ7IC8vIGluIGNhc2Ugcm9vdCB3YXMgcmVwbGFjZWRcbiAgICB9XG4gICAgcmVzdWx0cy5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBBcHBseSBhIHNpbmdsZSBKU09OIFBhdGNoIE9wZXJhdGlvbiBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIGRvY3VtZW50LlxuICogU3VpdGFibGUgYXMgYSByZWR1Y2VyLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiB0byBhcHBseVxuICogQHJldHVybiBUaGUgdXBkYXRlZCBkb2N1bWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlSZWR1Y2VyKGRvY3VtZW50LCBvcGVyYXRpb24sIGluZGV4KSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uUmVzdWx0ID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIG9wZXJhdGlvbik7XG4gICAgaWYgKG9wZXJhdGlvblJlc3VsdC50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAvLyBmYWlsZWQgdGVzdFxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0aW9uUmVzdWx0Lm5ld0RvY3VtZW50O1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgYSBzaW5nbGUgb3BlcmF0aW9uLiBDYWxsZWQgZnJvbSBganNvbnBhdGNoLnZhbGlkYXRlYC4gVGhyb3dzIGBKc29uUGF0Y2hFcnJvcmAgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcGVyYXRpb24gLSBvcGVyYXRpb24gb2JqZWN0IChwYXRjaClcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIGluZGV4IG9mIG9wZXJhdGlvbiBpbiB0aGUgc2VxdWVuY2VcbiAqIEBwYXJhbSB7b2JqZWN0fSBbZG9jdW1lbnRdIC0gb2JqZWN0IHdoZXJlIHRoZSBvcGVyYXRpb24gaXMgc3VwcG9zZWQgdG8gYmUgYXBwbGllZFxuICogQHBhcmFtIHtzdHJpbmd9IFtleGlzdGluZ1BhdGhGcmFnbWVudF0gLSBjb21lcyBhbG9uZyB3aXRoIGBkb2N1bWVudGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRvcihvcGVyYXRpb24sIGluZGV4LCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpIHtcbiAgICBpZiAodHlwZW9mIG9wZXJhdGlvbiAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICBvcGVyYXRpb24gPT09IG51bGwgfHxcbiAgICAgICAgQXJyYXkuaXNBcnJheShvcGVyYXRpb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBpcyBub3QgYW4gb2JqZWN0XCIsIFwiT1BFUkFUSU9OX05PVF9BTl9PQkpFQ1RcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghb2JqT3BzW29wZXJhdGlvbi5vcF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBvcGVyYXRpb24ucGF0aCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHBhdGhgIHByb3BlcnR5IGlzIG5vdCBhIHN0cmluZ1wiLCBcIk9QRVJBVElPTl9QQVRIX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvcGVyYXRpb24ucGF0aC5pbmRleE9mKFwiL1wiKSAhPT0gMCAmJiBvcGVyYXRpb24ucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIHBhdGhzIHRoYXQgYXJlbid0IGVtcHR5IHN0cmluZyBzaG91bGQgc3RhcnQgd2l0aCBcIi9cIlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoJ09wZXJhdGlvbiBgcGF0aGAgcHJvcGVydHkgbXVzdCBzdGFydCB3aXRoIFwiL1wiJywgXCJPUEVSQVRJT05fUEFUSF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikgJiZcbiAgICAgICAgdHlwZW9mIG9wZXJhdGlvbi5mcm9tICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgZnJvbWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYG1vdmVgIGFuZCBgY29weWAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fRlJPTV9SRVFVSVJFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSAmJlxuICAgICAgICBvcGVyYXRpb24udmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHZhbHVlYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgYWRkYCwgYHJlcGxhY2VgIGFuZCBgdGVzdGAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fVkFMVUVfUkVRVUlSRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcImFkZFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikgJiZcbiAgICAgICAgaGFzVW5kZWZpbmVkKG9wZXJhdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGB2YWx1ZWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYGFkZGAsIGByZXBsYWNlYCBhbmQgYHRlc3RgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX1ZBTFVFX0NBTk5PVF9DT05UQUlOX1VOREVGSU5FRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT0gXCJhZGRcIikge1xuICAgICAgICAgICAgdmFyIHBhdGhMZW4gPSBvcGVyYXRpb24ucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nUGF0aExlbiA9IGV4aXN0aW5nUGF0aEZyYWdtZW50LnNwbGl0KFwiL1wiKS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocGF0aExlbiAhPT0gZXhpc3RpbmdQYXRoTGVuICsgMSAmJiBwYXRoTGVuICE9PSBleGlzdGluZ1BhdGhMZW4pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBhbiBgYWRkYCBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX0NBTk5PVF9BRERcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIiB8fFxuICAgICAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcIl9nZXRcIikge1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5wYXRoICE9PSBleGlzdGluZ1BhdGhGcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gYXQgYSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3RcIiwgXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgb3A6IFwiX2dldFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IG9wZXJhdGlvbi5mcm9tLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGUoW2V4aXN0aW5nVmFsdWVdLCBkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gZnJvbSBhIHBhdGggdGhhdCBkb2VzIG5vdCBleGlzdFwiLCBcIk9QRVJBVElPTl9GUk9NX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyBhIHNlcXVlbmNlIG9mIG9wZXJhdGlvbnMuIElmIGBkb2N1bWVudGAgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLCB0aGUgc2VxdWVuY2UgaXMgYWRkaXRpb25hbGx5IHZhbGlkYXRlZCBhZ2FpbnN0IHRoZSBvYmplY3QgZG9jdW1lbnQuXG4gKiBJZiBlcnJvciBpcyBlbmNvdW50ZXJlZCwgcmV0dXJucyBhIEpzb25QYXRjaEVycm9yIG9iamVjdFxuICogQHBhcmFtIHNlcXVlbmNlXG4gKiBAcGFyYW0gZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtKc29uUGF0Y2hFcnJvcnx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZShzZXF1ZW5jZSwgZG9jdW1lbnQsIGV4dGVybmFsVmFsaWRhdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIC8vY2xvbmUgZG9jdW1lbnQgYW5kIHNlcXVlbmNlIHNvIHRoYXQgd2UgY2FuIHNhZmVseSB0cnkgYXBwbHlpbmcgb3BlcmF0aW9uc1xuICAgICAgICAgICAgYXBwbHlQYXRjaChfZGVlcENsb25lKGRvY3VtZW50KSwgX2RlZXBDbG9uZShzZXF1ZW5jZSksIGV4dGVybmFsVmFsaWRhdG9yIHx8IHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3IgPSBleHRlcm5hbFZhbGlkYXRvciB8fCB2YWxpZGF0b3I7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcXVlbmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3Ioc2VxdWVuY2VbaV0sIGksIGRvY3VtZW50LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgSnNvblBhdGNoRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9lcG9iZXJlemtpbi9mYXN0LWRlZXAtZXF1YWxcbi8vIE1JVCBMaWNlbnNlXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTcgRXZnZW55IFBvYmVyZXpraW5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuLy8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbi8vIFNPRlRXQVJFLlxuZXhwb3J0IGZ1bmN0aW9uIF9hcmVFcXVhbHMoYSwgYikge1xuICAgIGlmIChhID09PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIgPT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgYXJyQSA9IEFycmF5LmlzQXJyYXkoYSksIGFyckIgPSBBcnJheS5pc0FycmF5KGIpLCBpLCBsZW5ndGgsIGtleTtcbiAgICAgICAgaWYgKGFyckEgJiYgYXJyQikge1xuICAgICAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgICAgICBpZiAoIV9hcmVFcXVhbHMoYVtpXSwgYltpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJBICE9IGFyckIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgIGlmICghYi5oYXNPd25Qcm9wZXJ0eShrZXlzW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGlmICghX2FyZUVxdWFscyhhW2tleV0sIGJba2V5XSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xufVxuIl0sIm5hbWVzIjpbIlBhdGNoRXJyb3IiLCJfZGVlcENsb25lIiwiaXNJbnRlZ2VyIiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiaGFzVW5kZWZpbmVkIiwiSnNvblBhdGNoRXJyb3IiLCJkZWVwQ2xvbmUiLCJvYmpPcHMiLCJhZGQiLCJvYmoiLCJrZXkiLCJkb2N1bWVudCIsInZhbHVlIiwibmV3RG9jdW1lbnQiLCJyZW1vdmUiLCJyZW1vdmVkIiwicmVwbGFjZSIsIm1vdmUiLCJnZXRWYWx1ZUJ5UG9pbnRlciIsInBhdGgiLCJvcmlnaW5hbFZhbHVlIiwiYXBwbHlPcGVyYXRpb24iLCJvcCIsImZyb20iLCJjb3B5IiwidmFsdWVUb0NvcHkiLCJ0ZXN0IiwiX2FyZUVxdWFscyIsIl9nZXQiLCJhcnJPcHMiLCJhcnIiLCJpIiwic3BsaWNlIiwiaW5kZXgiLCJyZW1vdmVkTGlzdCIsInBvaW50ZXIiLCJnZXRPcmlnaW5hbERlc3RpbmF0aW9uIiwib3BlcmF0aW9uIiwidmFsaWRhdGVPcGVyYXRpb24iLCJtdXRhdGVEb2N1bWVudCIsImJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMiLCJ2YWxpZGF0b3IiLCJyZXR1cm5WYWx1ZSIsImtleXMiLCJzcGxpdCIsInQiLCJsZW4iLCJsZW5ndGgiLCJleGlzdGluZ1BhdGhGcmFnbWVudCIsInVuZGVmaW5lZCIsInZhbGlkYXRlRnVuY3Rpb24iLCJpbmRleE9mIiwiVHlwZUVycm9yIiwic2xpY2UiLCJqb2luIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbCIsImFwcGx5UGF0Y2giLCJwYXRjaCIsInJlc3VsdHMiLCJhcHBseVJlZHVjZXIiLCJvcGVyYXRpb25SZXN1bHQiLCJwYXRoTGVuIiwiZXhpc3RpbmdQYXRoTGVuIiwiZXhpc3RpbmdWYWx1ZSIsImVycm9yIiwidmFsaWRhdGUiLCJuYW1lIiwic2VxdWVuY2UiLCJleHRlcm5hbFZhbGlkYXRvciIsImUiLCJhIiwiYiIsImFyckEiLCJhcnJCIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2R1cGxleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsdUNBQXVDO0FBQ3ZDOzs7O0NBSUMsR0FDNEY7QUFDdEQ7QUFDdkMsSUFBSUssYUFBYSxJQUFJQztBQUNyQixNQUFNQztJQUNGQyxZQUFZQyxHQUFHLENBQUU7UUFDYkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxPQUFPO1lBQy9CQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLElBQUlDO1FBQ2Y7UUFDQU4sT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNOLEdBQUcsR0FBR0E7SUFDZjtBQUNKO0FBQ0EsTUFBTVE7SUFDRlQsWUFBWVUsUUFBUSxFQUFFQyxRQUFRLENBQUU7UUFDNUJULE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDRyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsUUFBUSxHQUFHQTtJQUNwQjtBQUNKO0FBQ0EsU0FBU0MsVUFBVVgsR0FBRztJ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YXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvZHVwbGV4LmpzPzE3NDUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgYmVjYXVzZSBvZiBFU00gaW1wb3J0IGlzc3Vlc1xuLyohXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU3RhcmNvdW50ZXItSmFjay9KU09OLVBhdGNoXG4gKiAoYykgMjAxMy0yMDIxIEpvYWNoaW0gV2VzdGVyXG4gKiBNSVQgbGljZW5zZVxuICovXG5pbXBvcnQgeyBfZGVlcENsb25lLCBfb2JqZWN0S2V5cywgZXNjYXBlUGF0aENvbXBvbmVudCwgaGFzT3duUHJvcGVydHksIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgYXBwbHlQYXRjaCB9IGZyb20gXCIuL2NvcmUuanNcIjtcbnZhciBiZWZvcmVEaWN0ID0gbmV3IFdlYWtNYXAoKTtcbmNsYXNzIE1pcnJvciB7XG4gICAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ialwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYnNlcnZlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNYXAoKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgfVxufVxuY2xhc3MgT2JzZXJ2ZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgb2JzZXJ2ZXIpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGJhY2tcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzZXJ2ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TWlycm9yKG9iaikge1xuICAgIHJldHVybiBiZWZvcmVEaWN0LmdldChvYmopO1xufVxuZnVuY3Rpb24gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gbWlycm9yLm9ic2VydmVycy5nZXQoY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpIHtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlci5jYWxsYmFjayk7XG59XG4vKipcbiAqIERldGFjaCBhbiBvYnNlcnZlciBmcm9tIGFuIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5vYnNlcnZlKHJvb3QsIG9ic2VydmVyKSB7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlKCk7XG59XG4vKipcbiAqIE9ic2VydmVzIGNoYW5nZXMgbWFkZSB0byBhbiBvYmplY3QsIHdoaWNoIGNhbiB0aGVuIGJlIHJldHJpZXZlZCB1c2luZyBnZW5lcmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZShvYmosIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBhdGNoZXMgPSBbXTtcbiAgICB2YXIgb2JzZXJ2ZXI7XG4gICAgdmFyIG1pcnJvciA9IGdldE1pcnJvcihvYmopO1xuICAgIGlmICghbWlycm9yKSB7XG4gICAgICAgIG1pcnJvciA9IG5ldyBNaXJyb3Iob2JqKTtcbiAgICAgICAgYmVmb3JlRGljdC5zZXQob2JqLCBtaXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXJJbmZvID0gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spO1xuICAgICAgICBvYnNlcnZlciA9IG9ic2VydmVySW5mbyAmJiBvYnNlcnZlckluZm8ub2JzZXJ2ZXI7XG4gICAgfVxuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIG9ic2VydmVyID0ge307XG4gICAgbWlycm9yLnZhbHVlID0gX2RlZXBDbG9uZShvYmopO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBvYnNlcnZlci5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBvYnNlcnZlci5uZXh0ID0gbnVsbDtcbiAgICAgICAgdmFyIGRpcnR5Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmYXN0Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQob2JzZXJ2ZXIubmV4dCk7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gc2V0VGltZW91dChkaXJ0eUNoZWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIC8vbm90IE5vZGVcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYnNlcnZlci5wYXRjaGVzID0gcGF0Y2hlcztcbiAgICBvYnNlcnZlci5vYmplY3QgPSBvYmo7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlID0gKCkgPT4ge1xuICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIGNsZWFyVGltZW91dChvYnNlcnZlci5uZXh0KTtcbiAgICAgICAgcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmYXN0Q2hlY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLnNldChjYWxsYmFjaywgbmV3IE9ic2VydmVySW5mbyhjYWxsYmFjaywgb2JzZXJ2ZXIpKTtcbiAgICByZXR1cm4gb2JzZXJ2ZXI7XG59XG4vKipcbiAqIEdlbmVyYXRlIGFuIGFycmF5IG9mIHBhdGNoZXMgZnJvbSBhbiBvYnNlcnZlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGUob2JzZXJ2ZXIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBtaXJyb3IgPSBiZWZvcmVEaWN0LmdldChvYnNlcnZlci5vYmplY3QpO1xuICAgIF9nZW5lcmF0ZShtaXJyb3IudmFsdWUsIG9ic2VydmVyLm9iamVjdCwgb2JzZXJ2ZXIucGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgaWYgKG9ic2VydmVyLnBhdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGFwcGx5UGF0Y2gobWlycm9yLnZhbHVlLCBvYnNlcnZlci5wYXRjaGVzKTtcbiAgICB9XG4gICAgdmFyIHRlbXAgPSBvYnNlcnZlci5wYXRjaGVzO1xuICAgIGlmICh0ZW1wLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb2JzZXJ2ZXIucGF0Y2hlcyA9IFtdO1xuICAgICAgICBpZiAob2JzZXJ2ZXIuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmNhbGxiYWNrKHRlbXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZW1wO1xufVxuLy8gRGlydHkgY2hlY2sgaWYgb2JqIGlzIGRpZmZlcmVudCBmcm9tIG1pcnJvciwgZ2VuZXJhdGUgcGF0Y2hlcyBhbmQgdXBkYXRlIG1pcnJvclxuZnVuY3Rpb24gX2dlbmVyYXRlKG1pcnJvciwgb2JqLCBwYXRjaGVzLCBwYXRoLCBpbnZlcnRpYmxlKSB7XG4gICAgaWYgKG9iaiA9PT0gbWlycm9yKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmoudG9KU09OID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb2JqID0gb2JqLnRvSlNPTigpO1xuICAgIH1cbiAgICB2YXIgbmV3S2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgdmFyIG9sZEtleXMgPSBfb2JqZWN0S2V5cyhtaXJyb3IpO1xuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIGRlbGV0ZWQgPSBmYWxzZTtcbiAgICAvL2lmIGV2ZXIgXCJtb3ZlXCIgb3BlcmF0aW9uIGlzIGltcGxlbWVudGVkIGhlcmUsIG1ha2Ugc3VyZSB0aGlzIHRlc3QgcnVucyBPSzogXCJzaG91bGQgbm90IGdlbmVyYXRlIHRoZSBzYW1lIHBhdGNoIHR3aWNlIChtb3ZlKVwiXG4gICAgZm9yICh2YXIgdCA9IG9sZEtleXMubGVuZ3RoIC0gMTsgdCA+PSAwOyB0LS0pIHtcbiAgICAgICAgdmFyIGtleSA9IG9sZEtleXNbdF07XG4gICAgICAgIHZhciBvbGRWYWwgPSBtaXJyb3Jba2V5XTtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwga2V5KSAmJlxuICAgICAgICAgICAgIShvYmpba2V5XSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgb2xkVmFsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9iaikgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbGRWYWwgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIG9sZFZhbCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIG5ld1ZhbCA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgbmV3VmFsICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9sZFZhbCkgPT09IEFycmF5LmlzQXJyYXkobmV3VmFsKSkge1xuICAgICAgICAgICAgICAgIF9nZW5lcmF0ZShvbGRWYWwsIG5ld1ZhbCwgcGF0Y2hlcywgcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLCBpbnZlcnRpYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwidGVzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvbGRWYWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG5ld1ZhbCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1pcnJvcikgPT09IEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2xkVmFsKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGVkID0gdHJ1ZTsgLy8gcHJvcGVydHkgaGFzIGJlZW4gZGVsZXRlZFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJ0ZXN0XCIsIHBhdGgsIHZhbHVlOiBtaXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJyZXBsYWNlXCIsIHBhdGgsIHZhbHVlOiBvYmogfSk7XG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWRlbGV0ZWQgJiYgbmV3S2V5cy5sZW5ndGggPT0gb2xkS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IG5ld0tleXMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgdmFyIGtleSA9IG5ld0tleXNbdF07XG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkobWlycm9yLCBrZXkpICYmIG9ialtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9ialtrZXldKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGUgYW4gYXJyYXkgb2YgcGF0Y2hlcyBmcm9tIHRoZSBkaWZmZXJlbmNlcyBpbiB0d28gb2JqZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZSh0cmVlMSwgdHJlZTIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBwYXRjaGVzID0gW107XG4gICAgX2dlbmVyYXRlKHRyZWUxLCB0cmVlMiwgcGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgcmV0dXJuIHBhdGNoZXM7XG59XG4iXSwibmFtZXMiOlsiX2RlZXBDbG9uZSIsIl9vYmplY3RLZXlzIiwiZXNjYXBlUGF0aENvbXBvbmVudCIsImhhc093blByb3BlcnR5IiwiYXBwbHlQYXRjaCIsImJlZm9yZURpY3QiLCJXZWFrTWFwIiwiTWlycm9yIiwiY29uc3RydWN0b3IiLCJvYmoiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiTWFwIiwiT2JzZXJ2ZXJJbmZvIiwiY2FsbGJhY2siLCJvYnNlcnZlciIsImdldE1pcnJvciIsImdldCIsImdldE9ic2VydmVyRnJvbU1pcnJvciIsIm1pcnJvciIsIm9ic2VydmVycyIsInJlbW92ZU9ic2VydmVyRnJvbU1pcnJvciIsImRlbGV0ZSIsInVub2JzZXJ2ZSIsInJvb3QiLCJvYnNlcnZlIiwicGF0Y2hlcyIsInNldCIsIm9ic2VydmVySW5mbyIsIm5leHQiLCJkaXJ0eUNoZWNrIiwiZ2VuZXJhdGUiLCJmYXN0Q2hlY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9iamVjdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbnZlcnRpYmxlIiwiX2dlbmVyYXRlIiwibGVuZ3RoIiwidGVtcCIsInBhdGgiLCJ0b0pTT04iLCJuZXdLZXlzIiwib2xkS2V5cyIsImNoYW5nZWQiLCJkZWxldGVkIiwidCIsImtleSIsIm9sZFZhbCIsInVuZGVmaW5lZCIsIkFycmF5IiwiaXNBcnJheSIsIm5ld1ZhbCIsInB1c2giLCJvcCIsImNvbXBhcmUiLCJ0cmVlMSIsInRyZWUyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLGNBQWM7QUFDZCx1Q0FBdUM7QUFDdkM7Ozs7Q0FJQyxHQUNELE1BQU1BLGtCQUFrQkMsT0FBT0MsU0FBUyxDQUFDQyxjQUFjO0FBQ2hELFNBQVNBLGVBQWVDLEdBQUcsRUFBRUMsR0FBRztJQUNuQyxPQUFPTCxnQkFBZ0JNLElBQUksQ0FBQ0YsS0FBS0M7QUFDckM7QUFDTyxTQUFTRSxZQUFZSCxHQUFHO0lBQzNCLElBQUlJLE1BQU1DLE9BQU8sQ0FBQ0wsTUFBTTtRQUNwQixNQUFNTSxPQUFPLElBQUlGLE1BQU1KLElBQUlPLE1BQU07UUFDakMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlGLEtBQUtDLE1BQU0sRUFBRUMsSUFBSztZQUNsQ0YsSUFBSSxDQUFDRSxFQUFFLEdBQUcsS0FBS0E7UUFDbkI7UUFDQSxPQUFPRjtJQUNYO0lBQ0EsSUFBSVQsT0FBT1MsSUFBSSxFQUFFO1FBQ2IsT0FBT1QsT0FBT1MsSUFBSSxDQUFDTjtJQUN2QjtJQUNBLElBQUlNLE9BQU8sRUFBRTtJQUNiLElBQUssSUFBSUcsS0FBS1QsSUFBSztRQUNmLElBQUlELGVBQWVDLEtBQUtTLElBQUk7WUFDeEJILEtBQUtJLElBQUksQ0FBQ0Q7UUFDZDtJQUNKO0lBQ0EsT0FBT0g7QUFDWDtBQUNBOzs7OztDQUtDLEdBQ00sU0FBU0ssV0FBV1gsR0FBRztJQUMxQixPQUFRLE9BQU9BO1FBQ1gsS0FBSztZQUNELE9BQU9ZLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsU0FBUyxDQUFDZCxPQUFPLHFFQUFxRTtRQUNqSCxLQUFLO1lBQ0QsT0FBTyxNQUFNLG9EQUFvRDtRQUNyRTtZQUNJLE9BQU9BLEtBQUssNkJBQTZCO0lBQ2pEO0FBQ0o7QUFDQSx5Q0FBeUM7QUFDbEMsU0FBU2UsVUFBVUMsR0FBRztJQUN6QixJQUFJUCxJQUFJO0lBQ1IsTUFBTVEsTUFBTUQsSUFBSVQsTUFBTTtJQUN0QixJQUFJVztJQUNKLE1BQU9ULElBQUlRLElBQUs7UUFDWkMsV0FBV0YsSUFBSUcsVUFBVSxDQUFDVjtRQUMxQixJQUFJUyxZQUFZLE1BQU1BLFlBQVksSUFBSTtZQUNsQ1Q7WUFDQTtRQUNKO1FBQ0EsT0FBTztJQUNYO0lBQ0EsT0FBTztBQUNYO0FBQ0E7Ozs7Q0FJQyxHQUNNLFNBQVNXLG9CQUFvQkMsSUFBSTtJQUNwQyxJQUFJQSxLQUFLQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUtELEtBQUtDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FDbkQsT0FBT0Q7SUFDWCxPQUFPQSxLQUFLRSxPQUFPLENBQUMsTUFBTSxNQUFNQSxPQUFPLENBQUMsT0FBTztBQUNuRDtBQUNBOzs7O0NBSUMsR0FDTSxTQUFTQyxzQkFBc0JILElBQUk7SUFDdEMsT0FBT0EsS0FBS0UsT0FBTyxDQUFDLE9BQU8sS0FBS0EsT0FBTyxDQUFDLE9BQU87QUFDbkQ7QUFDTyxTQUFTRSxrQkFBa0JDLElBQUksRUFBRTFCLEdBQUc7SUFDdkMsSUFBSTJCO0lBQ0osSUFBSyxJQUFJMUIsT0FBT3lCLEtBQU07UUFDbEIsSUFBSTNCLGVBQWUyQixNQUFNekIsTUFBTTtZQUMzQixJQUFJeUIsSUFBSSxDQUFDekIsSUFBSSxLQUFLRCxLQUFLO2dCQUNuQixPQUFPb0Isb0JBQW9CbkIsT0FBTztZQUN0QyxPQUNLLElBQUksT0FBT3lCLElBQUksQ0FBQ3pCLElBQUksS0FBSyxVQUFVO2dCQUNwQzBCLFFBQVFGLGtCQUFrQkMsSUFBSSxDQUFDekIsSUFBSSxFQUFFRDtnQkFDckMsSUFBSTJCLFNBQVMsSUFBSTtvQkFDYixPQUFPUCxvQkFBb0JuQixPQUFPLE1BQU0wQjtnQkFDNUM7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPO0FBQ1g7QUFDTyxTQUFTQyxRQUFRRixJQUFJLEVBQUUxQixHQUFHO0lBQzdCLElBQUkwQixTQUFTMUIsS0FBSztRQUNkLE9BQU87SUFDWDtJQUNBLE1BQU1xQixPQUFPSSxrQkFBa0JDLE1BQU0xQjtJQUNyQyxJQUFJcUIsU0FBUyxJQUFJO1FBQ2IsTUFBTSxJQUFJUSxNQUFNO0lBQ3BCO0lBQ0EsT0FBTyxDQUFDLENBQUMsRUFBRVIsS0FBSyxDQUFDO0FBQ3JCO0FBQ0E7O0NBRUMsR0FDTSxTQUFTUyxhQUFhOUIsR0FBRztJQUM1QixJQUFJQSxRQUFRK0IsV0FBVztRQUNuQixPQUFPO0lBQ1g7SUFDQSxJQUFJL0IsS0FBSztRQUNMLElBQUlJLE1BQU1DLE9BQU8sQ0FBQ0wsTUFBTTtZQUNwQixJQUFLLElBQUlTLElBQUksR0FBR1EsTUFBTWpCLElBQUlPLE1BQU0sRUFBRUUsSUFBSVEsS0FBS1IsSUFBSztnQkFDNUMsSUFBSXFCLGFBQWE5QixHQUFHLENBQUNTLEVBQUUsR0FBRztvQkFDdEIsT0FBTztnQkFDWDtZQUNKO1FBQ0osT0FDSyxJQUFJLE9BQU9ULFFBQVEsVUFBVTtZQUM5QixNQUFNZ0MsVUFBVTdCLFlBQVlIO1lBQzVCLE1BQU1pQyxnQkFBZ0JELFFBQVF6QixNQUFNO1lBQ3BDLElBQUssSUFBSUUsSUFBSSxHQUFHQSxJQUFJd0IsZUFBZXhCLElBQUs7Z0JBQ3BDLElBQUlxQixhQUFhOUIsR0FBRyxDQUFDZ0MsT0FBTyxDQUFDdkIsRUFBRSxDQUFDLEdBQUc7b0JBQy9CLE9BQU87Z0JBQ1g7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPO0FBQ1g7QUFDQSxTQUFTeUIsMkJBQTJCQyxPQUFPLEVBQUVDLElBQUk7SUFDN0MsTUFBTUMsZUFBZTtRQUFDRjtLQUFRO0lBQzlCLElBQUssTUFBTWxDLE9BQU9tQyxLQUFNO1FBQ3BCLE1BQU1FLFFBQVEsT0FBT0YsSUFBSSxDQUFDbkMsSUFBSSxLQUFLLFdBQzdCVyxLQUFLRSxTQUFTLENBQUNzQixJQUFJLENBQUNuQyxJQUFJLEVBQUUsTUFBTSxLQUNoQ21DLElBQUksQ0FBQ25DLElBQUksRUFBRSxlQUFlO1FBQ2hDLElBQUksT0FBT3FDLFVBQVUsYUFBYTtZQUM5QkQsYUFBYTNCLElBQUksQ0FBQyxDQUFDLEVBQUVULElBQUksRUFBRSxFQUFFcUMsTUFBTSxDQUFDO1FBQ3hDO0lBQ0o7SUFDQSxPQUFPRCxhQUFhRSxJQUFJLENBQUM7QUFDN0I7QUFDTyxNQUFNQyxtQkFBbUJYO0lBQzVCWSxZQUFZTixPQUFPLEVBQUVPLElBQUksRUFBRUMsS0FBSyxFQUFFQyxTQUFTLEVBQUVDLElBQUksQ0FBRTtRQUMvQyxLQUFLLENBQUNYLDJCQUEyQkMsU0FBUztZQUFFTztZQUFNQztZQUFPQztZQUFXQztRQUFLO1FBQ3pFaEQsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT0k7UUFDWDtRQUNBN0MsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT0s7UUFDWDtRQUNBOUMsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT007UUFDWDtRQUNBL0MsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT087UUFDWDtRQUNBaEQsT0FBT3FELGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBV3BELFNBQVMsR0FBRyxvRUFBb0U7UUFDdkgsSUFBSSxDQUFDcUMsT0FBTyxHQUFHRCwyQkFBMkJDLFNBQVM7WUFDL0NPO1lBQ0FDO1lBQ0FDO1lBQ0FDO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMuanM/MzJiYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCBiZWNhdXNlIG9mIEVTTSBpbXBvcnQgaXNzdWVzXG4vKiFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9TdGFyY291bnRlci1KYWNrL0pTT04tUGF0Y2hcbiAqIChjKSAyMDE3LTIwMjIgSm9hY2hpbSBXZXN0ZXJcbiAqIE1JVCBsaWNlbnNlZFxuICovXG5jb25zdCBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfb2JqZWN0S2V5cyhvYmopIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBuZXcgQXJyYXkob2JqLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAga2V5c1trXSA9IFwiXCIgKyBrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaik7XG4gICAgfVxuICAgIGxldCBrZXlzID0gW107XG4gICAgZm9yIChsZXQgaSBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwgaSkpIHtcbiAgICAgICAgICAgIGtleXMucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn1cbi8qKlxuICogRGVlcGx5IGNsb25lIHRoZSBvYmplY3QuXG4gKiBodHRwczovL2pzcGVyZi5jb20vZGVlcC1jb3B5LXZzLWpzb24tc3RyaW5naWZ5LWpzb24tcGFyc2UvMjUgKHJlY3Vyc2l2ZURlZXBDb3B5KVxuICogQHBhcmFtICB7YW55fSBvYmogdmFsdWUgdG8gY2xvbmVcbiAqIEByZXR1cm4ge2FueX0gY2xvbmVkIG9ialxuICovXG5leHBvcnQgZnVuY3Rpb24gX2RlZXBDbG9uZShvYmopIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBvYmopIHtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7IC8vRmFzdGVyIHRoYW4gRVM1IGNsb25lIC0gaHR0cDovL2pzcGVyZi5jb20vZGVlcC1jbG9uaW5nLW9mLW9iamVjdHMvNVxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy90aGlzIGlzIGhvdyBKU09OLnN0cmluZ2lmeSBiZWhhdmVzIGZvciBhcnJheSBpdGVtc1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG9iajsgLy9ubyBuZWVkIHRvIGNsb25lIHByaW1pdGl2ZXNcbiAgICB9XG59XG4vLzN4IGZhc3RlciB0aGFuIGNhY2hlZCAvXlxcZCskLy50ZXN0KHN0cilcbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVnZXIoc3RyKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGxlbiA9IHN0ci5sZW5ndGg7XG4gICAgbGV0IGNoYXJDb2RlO1xuICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgIGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nykge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgcmF3IHBvaW50ZXJcbiAqIEByZXR1cm4gdGhlIEVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUGF0aENvbXBvbmVudChwYXRoKSB7XG4gICAgaWYgKHBhdGguaW5kZXhPZihcIi9cIikgPT09IC0xICYmIHBhdGguaW5kZXhPZihcIn5cIikgPT09IC0xKVxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+L2csIFwifjBcIikucmVwbGFjZSgvXFwvL2csIFwifjFcIik7XG59XG4vKipcbiAqIFVuZXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgZXNjYXBlZCBwb2ludGVyXG4gKiBAcmV0dXJuIFRoZSB1bmVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5lc2NhcGVQYXRoQ29tcG9uZW50KHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+MS9nLCBcIi9cIikucmVwbGFjZSgvfjAvZywgXCJ+XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRQYXRoUmVjdXJzaXZlKHJvb3QsIG9iaikge1xuICAgIGxldCBmb3VuZDtcbiAgICBmb3IgKGxldCBrZXkgaW4gcm9vdCkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkocm9vdCwga2V5KSkge1xuICAgICAgICAgICAgaWYgKHJvb3Rba2V5XSA9PT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSArIFwiL1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJvb3Rba2V5XSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdFtrZXldLCBvYmopO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZCAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSkgKyBcIi9cIiArIGZvdW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXRoKHJvb3QsIG9iaikge1xuICAgIGlmIChyb290ID09PSBvYmopIHtcbiAgICAgICAgcmV0dXJuIFwiL1wiO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdCwgb2JqKTtcbiAgICBpZiAocGF0aCA9PT0gXCJcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3Qgbm90IGZvdW5kIGluIHJvb3RcIik7XG4gICAgfVxuICAgIHJldHVybiBgLyR7cGF0aH1gO1xufVxuLyoqXG4gKiBSZWN1cnNpdmVseSBjaGVja3Mgd2hldGhlciBhbiBvYmplY3QgaGFzIGFueSB1bmRlZmluZWQgdmFsdWVzIGluc2lkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1VuZGVmaW5lZChvYmopIHtcbiAgICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvYmopIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc3Qgb2JqS2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgICAgICAgICBjb25zdCBvYmpLZXlzTGVuZ3RoID0gb2JqS2V5cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iaktleXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW29iaktleXNbaV1dKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gcGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwgYXJncykge1xuICAgIGNvbnN0IG1lc3NhZ2VQYXJ0cyA9IFttZXNzYWdlXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIGFyZ3Nba2V5XSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShhcmdzW2tleV0sIG51bGwsIDIpXG4gICAgICAgICAgICA6IGFyZ3Nba2V5XTsgLy8gcHJldHR5IHByaW50XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VQYXJ0cy5wdXNoKGAke2tleX06ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2VQYXJ0cy5qb2luKFwiXFxuXCIpO1xufVxuZXhwb3J0IGNsYXNzIFBhdGNoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgbmFtZSwgaW5kZXgsIG9wZXJhdGlvbiwgdHJlZSkge1xuICAgICAgICBzdXBlcihwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7IG5hbWUsIGluZGV4LCBvcGVyYXRpb24sIHRyZWUgfSkpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wZXJhdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3BlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cmVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpOyAvLyByZXN0b3JlIHByb3RvdHlwZSBjaGFpbiwgc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODM0MjM1OVxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICB0cmVlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiX2hhc093blByb3BlcnR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJjYWxsIiwiX29iamVjdEtleXMiLCJBcnJheSIsImlzQXJyYXkiLCJrZXlzIiwibGVuZ3RoIiwiayIsImkiLCJwdXNoIiwiX2RlZXBDbG9uZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImlzSW50ZWdlciIsInN0ciIsImxlbiIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJwYXRoIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJfZ2V0UGF0aFJlY3Vyc2l2ZSIsInJvb3QiLCJmb3VuZCIsImdldFBhdGgiLCJFcnJvciIsImhhc1VuZGVmaW5lZCIsInVuZGVmaW5lZCIsIm9iaktleXMiLCJvYmpLZXlzTGVuZ3RoIiwicGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIiLCJtZXNzYWdlIiwiYXJncyIsIm1lc3NhZ2VQYXJ0cyIsInZhbHVlIiwiam9pbiIsIlBhdGNoRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpbmRleCIsIm9wZXJhdGlvbiIsInRyZWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInNldFByb3RvdHlwZU9mIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/json.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/json.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n    // eslint-disable-next-line no-param-reassign\n    s = s.trim();\n    const match = /```(json)?(.*)```/s.exec(s);\n    if (!match) {\n        return parser(s);\n    } else {\n        return parser(match[2]);\n    }\n}\n// Adapted from https://github.com/KillianLucas/open-interpreter/blob/main/interpreter/core/llm/utils/parse_partial_json.py\n// MIT License\nfunction parsePartialJson(s) {\n    // If the input is undefined, return null to indicate failure.\n    if (typeof s === \"undefined\") {\n        return null;\n    }\n    // Attempt to parse the string as-is.\n    try {\n        return JSON.parse(s);\n    } catch (error) {\n    // Pass\n    }\n    // Initialize variables.\n    let new_s = \"\";\n    const stack = [];\n    let isInsideString = false;\n    let escaped = false;\n    // Process each character in the string one at a time.\n    for (let char of s){\n        if (isInsideString) {\n            if (char === '\"' && !escaped) {\n                isInsideString = false;\n            } else if (char === \"\\n\" && !escaped) {\n                char = \"\\\\n\"; // Replace the newline character with the escape sequence.\n            } else if (char === \"\\\\\") {\n                escaped = !escaped;\n            } else {\n                escaped = false;\n            }\n        } else {\n            if (char === '\"') {\n                isInsideString = true;\n                escaped = false;\n            } else if (char === \"{\") {\n                stack.push(\"}\");\n            } else if (char === \"[\") {\n                stack.push(\"]\");\n            } else if (char === \"}\" || char === \"]\") {\n                if (stack && stack[stack.length - 1] === char) {\n                    stack.pop();\n                } else {\n                    // Mismatched closing character; the input is malformed.\n                    return null;\n                }\n            }\n        }\n        // Append the processed character to the new string.\n        new_s += char;\n    }\n    // If we're still inside a string at the end of processing,\n    // we need to close the string.\n    if (isInsideString) {\n        new_s += '\"';\n    }\n    // Close any remaining open structures in the reverse order that they were opened.\n    for(let i = stack.length - 1; i >= 0; i -= 1){\n        new_s += stack[i];\n    }\n    // Attempt to parse the modified string as JSON.\n    try {\n        return JSON.parse(new_s);\n    } catch (error) {\n        // If we still can't parse the string as JSON, return null to indicate failure.\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9qc29uLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sU0FBU0Esa0JBQWtCQyxDQUFDLEVBQUVDLFNBQVNDLGdCQUFnQjtJQUMxRCw2Q0FBNkM7SUFDN0NGLElBQUlBLEVBQUVHLElBQUk7SUFDVixNQUFNQyxRQUFRLHFCQUFxQkMsSUFBSSxDQUFDTDtJQUN4QyxJQUFJLENBQUNJLE9BQU87UUFDUixPQUFPSCxPQUFPRDtJQUNsQixPQUNLO1FBQ0QsT0FBT0MsT0FBT0csS0FBSyxDQUFDLEVBQUU7SUFDMUI7QUFDSjtBQUNBLDJIQUEySDtBQUMzSCxjQUFjO0FBQ1AsU0FBU0YsaUJBQWlCRixDQUFDO0lBQzlCLDhEQUE4RDtJQUM5RCxJQUFJLE9BQU9BLE1BQU0sYUFBYTtRQUMxQixPQUFPO0lBQ1g7SUFDQSxxQ0FBcUM7SUFDckMsSUFBSTtRQUNBLE9BQU9NLEtBQUtDLEtBQUssQ0FBQ1A7SUFDdEIsRUFDQSxPQUFPUSxPQUFPO0lBQ1YsT0FBTztJQUNYO0lBQ0Esd0JBQXdCO0lBQ3hCLElBQUlDLFFBQVE7SUFDWixNQUFNQyxRQUFRLEVBQUU7SUFDaEIsSUFBSUMsaUJBQWlCO0lBQ3JCLElBQUlDLFVBQVU7SUFDZCxzREFBc0Q7SUFDdEQsS0FBSyxJQUFJQyxRQUFRYixFQUFHO1FBQ2hCLElBQUlXLGdCQUFnQjtZQUNoQixJQUFJRSxTQUFTLE9BQU8sQ0FBQ0QsU0FBUztnQkFDMUJELGlCQUFpQjtZQUNyQixPQUNLLElBQUlFLFNBQVMsUUFBUSxDQUFDRCxTQUFTO2dCQUNoQ0MsT0FBTyxPQUFPLDBEQUEwRDtZQUM1RSxPQUNLLElBQUlBLFNBQVMsTUFBTTtnQkFDcEJELFVBQVUsQ0FBQ0E7WUFDZixPQUNLO2dCQUNEQSxVQUFVO1lBQ2Q7UUFDSixPQUNLO1lBQ0QsSUFBSUMsU0FBUyxLQUFLO2dCQUNkRixpQkFBaUI7Z0JBQ2pCQyxVQUFVO1lBQ2QsT0FDSyxJQUFJQyxTQUFTLEtBQUs7Z0JBQ25CSCxNQUFNSSxJQUFJLENBQUM7WUFDZixPQUNLLElBQUlELFNBQVMsS0FBSztnQkFDbkJILE1BQU1JLElBQUksQ0FBQztZQUNmLE9BQ0ssSUFBSUQsU0FBUyxPQUFPQSxTQUFTLEtBQUs7Z0JBQ25DLElBQUlILFNBQVNBLEtBQUssQ0FBQ0EsTUFBTUssTUFBTSxHQUFHLEVBQUUsS0FBS0YsTUFBTTtvQkFDM0NILE1BQU1NLEdBQUc7Z0JBQ2IsT0FDSztvQkFDRCx3REFBd0Q7b0JBQ3hELE9BQU87Z0JBQ1g7WUFDSjtRQUNKO1FBQ0Esb0RBQW9EO1FBQ3BEUCxTQUFTSTtJQUNiO0lBQ0EsMkRBQTJEO0lBQzNELCtCQUErQjtJQUMvQixJQUFJRixnQkFBZ0I7UUFDaEJGLFNBQVM7SUFDYjtJQUNBLGtGQUFrRjtJQUNsRixJQUFLLElBQUlRLElBQUlQLE1BQU1LLE1BQU0sR0FBRyxHQUFHRSxLQUFLLEdBQUdBLEtBQUssRUFBRztRQUMzQ1IsU0FBU0MsS0FBSyxDQUFDTyxFQUFFO0lBQ3JCO0lBQ0EsZ0RBQWdEO0lBQ2hELElBQUk7UUFDQSxPQUFPWCxLQUFLQyxLQUFLLENBQUNFO0lBQ3RCLEVBQ0EsT0FBT0QsT0FBTztRQUNWLCtFQUErRTtRQUMvRSxPQUFPO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhcmR3YXJlLWRvYy1jaGF0Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vdGV4dHNwbGl0dGVycy9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcz9hNTZiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwYXJzZUpzb25NYXJrZG93bihzLCBwYXJzZXIgPSBwYXJzZVBhcnRpYWxKc29uKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcyA9IHMudHJpbSgpO1xuICAgIGNvbnN0IG1hdGNoID0gL2BgYChqc29uKT8oLiopYGBgL3MuZXhlYyhzKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIocyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyc2VyKG1hdGNoWzJdKTtcbiAgICB9XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0tpbGxpYW5MdWNhcy9vcGVuLWludGVycHJldGVyL2Jsb2IvbWFpbi9pbnRlcnByZXRlci9jb3JlL2xsbS91dGlscy9wYXJzZV9wYXJ0aWFsX2pzb24ucHlcbi8vIE1JVCBMaWNlbnNlXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQYXJ0aWFsSnNvbihzKSB7XG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCwgcmV0dXJuIG51bGwgdG8gaW5kaWNhdGUgZmFpbHVyZS5cbiAgICBpZiAodHlwZW9mIHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgdGhlIHN0cmluZyBhcy1pcy5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFBhc3NcbiAgICB9XG4gICAgLy8gSW5pdGlhbGl6ZSB2YXJpYWJsZXMuXG4gICAgbGV0IG5ld19zID0gXCJcIjtcbiAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgIGxldCBpc0luc2lkZVN0cmluZyA9IGZhbHNlO1xuICAgIGxldCBlc2NhcGVkID0gZmFsc2U7XG4gICAgLy8gUHJvY2VzcyBlYWNoIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nIG9uZSBhdCBhIHRpbWUuXG4gICAgZm9yIChsZXQgY2hhciBvZiBzKSB7XG4gICAgICAgIGlmIChpc0luc2lkZVN0cmluZykge1xuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicgJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICBpc0luc2lkZVN0cmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJcXG5cIiAmJiAhZXNjYXBlZCkge1xuICAgICAgICAgICAgICAgIGNoYXIgPSBcIlxcXFxuXCI7IC8vIFJlcGxhY2UgdGhlIG5ld2xpbmUgY2hhcmFjdGVyIHdpdGggdGhlIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiXFxcXFwiKSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicpIHtcbiAgICAgICAgICAgICAgICBpc0luc2lkZVN0cmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJ7XCIpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFwifVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiW1wiKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChcIl1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIn1cIiB8fCBjaGFyID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgIGlmIChzdGFjayAmJiBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9PT0gY2hhcikge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1pc21hdGNoZWQgY2xvc2luZyBjaGFyYWN0ZXI7IHRoZSBpbnB1dCBpcyBtYWxmb3JtZWQuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBcHBlbmQgdGhlIHByb2Nlc3NlZCBjaGFyYWN0ZXIgdG8gdGhlIG5ldyBzdHJpbmcuXG4gICAgICAgIG5ld19zICs9IGNoYXI7XG4gICAgfVxuICAgIC8vIElmIHdlJ3JlIHN0aWxsIGluc2lkZSBhIHN0cmluZyBhdCB0aGUgZW5kIG9mIHByb2Nlc3NpbmcsXG4gICAgLy8gd2UgbmVlZCB0byBjbG9zZSB0aGUgc3RyaW5nLlxuICAgIGlmIChpc0luc2lkZVN0cmluZykge1xuICAgICAgICBuZXdfcyArPSAnXCInO1xuICAgIH1cbiAgICAvLyBDbG9zZSBhbnkgcmVtYWluaW5nIG9wZW4gc3RydWN0dXJlcyBpbiB0aGUgcmV2ZXJzZSBvcmRlciB0aGF0IHRoZXkgd2VyZSBvcGVuZWQuXG4gICAgZm9yIChsZXQgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgIG5ld19zICs9IHN0YWNrW2ldO1xuICAgIH1cbiAgICAvLyBBdHRlbXB0IHRvIHBhcnNlIHRoZSBtb2RpZmllZCBzdHJpbmcgYXMgSlNPTi5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShuZXdfcyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBJZiB3ZSBzdGlsbCBjYW4ndCBwYXJzZSB0aGUgc3RyaW5nIGFzIEpTT04sIHJldHVybiBudWxsIHRvIGluZGljYXRlIGZhaWx1cmUuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwYXJzZUpzb25NYXJrZG93biIsInMiLCJwYXJzZXIiLCJwYXJzZVBhcnRpYWxKc29uIiwidHJpbSIsIm1hdGNoIiwiZXhlYyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwibmV3X3MiLCJzdGFjayIsImlzSW5zaWRlU3RyaW5nIiwiZXNjYXBlZCIsImNoYXIiLCJwdXNoIiwibGVuZ3RoIiwicG9wIiwiaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/signal.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/signal.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   raceWithSignal: () => (/* binding */ raceWithSignal)\n/* harmony export */ });\nasync function raceWithSignal(promise, signal) {\n    if (signal === undefined) {\n        return promise;\n    }\n    let listener;\n    return Promise.race([\n        promise.catch((err)=>{\n            if (!signal?.aborted) {\n                throw err;\n            } else {\n                return undefined;\n            }\n        }),\n        new Promise((_, reject)=>{\n            listener = ()=>{\n                reject(new Error(\"Aborted\"));\n            };\n            signal.addEventListener(\"abort\", listener);\n            // Must be here inside the promise to avoid a race condition\n            if (signal.aborted) {\n                reject(new Error(\"Aborted\"));\n            }\n        })\n    ]).finally(()=>signal.removeEventListener(\"abort\", listener));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zaWduYWwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLGVBQWVBLGVBQWVDLE9BQU8sRUFBRUMsTUFBTTtJQUNoRCxJQUFJQSxXQUFXQyxXQUFXO1FBQ3RCLE9BQU9GO0lBQ1g7SUFDQSxJQUFJRztJQUNKLE9BQU9DLFFBQVFDLElBQUksQ0FBQztRQUNoQkwsUUFBUU0sS0FBSyxDQUFDLENBQUNDO1lBQ1gsSUFBSSxDQUFDTixRQUFRTyxTQUFTO2dCQUNsQixNQUFNRDtZQUNWLE9BQ0s7Z0JBQ0QsT0FBT0w7WUFDWDtRQUNKO1FBQ0EsSUFBSUUsUUFBUSxDQUFDSyxHQUFHQztZQUNaUCxXQUFXO2dCQUNQTyxPQUFPLElBQUlDLE1BQU07WUFDckI7WUFDQVYsT0FBT1csZ0JBQWdCLENBQUMsU0FBU1Q7WUFDakMsNERBQTREO1lBQzVELElBQUlGLE9BQU9PLE9BQU8sRUFBRTtnQkFDaEJFLE9BQU8sSUFBSUMsTUFBTTtZQUNyQjtRQUNKO0tBQ0gsRUFBRUUsT0FBTyxDQUFDLElBQU1aLE9BQU9hLG1CQUFtQixDQUFDLFNBQVNYO0FBQ3pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zaWduYWwuanM/ODBiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmFjZVdpdGhTaWduYWwocHJvbWlzZSwgc2lnbmFsKSB7XG4gICAgaWYgKHNpZ25hbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBsZXQgbGlzdGVuZXI7XG4gICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgIHByb21pc2UuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKCFzaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkFib3J0ZWRcIikpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgLy8gTXVzdCBiZSBoZXJlIGluc2lkZSB0aGUgcHJvbWlzZSB0byBhdm9pZCBhIHJhY2UgY29uZGl0aW9uXG4gICAgICAgICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQWJvcnRlZFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgIF0pLmZpbmFsbHkoKCkgPT4gc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBsaXN0ZW5lcikpO1xufVxuIl0sIm5hbWVzIjpbInJhY2VXaXRoU2lnbmFsIiwicHJvbWlzZSIsInNpZ25hbCIsInVuZGVmaW5lZCIsImxpc3RlbmVyIiwiUHJvbWlzZSIsInJhY2UiLCJjYXRjaCIsImVyciIsImFib3J0ZWQiLCJfIiwicmVqZWN0IiwiRXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZmluYWxseSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/signal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/stream.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/stream.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _signal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./signal.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/signal.js\");\n\n\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore Not present in Node 18 types, required in latest Node 22\n    async [Symbol.asyncDispose]() {\n        await this.return();\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(params){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"signal\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = params.generator;\n        this.config = params.config;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.signal = params.signal ?? this.config?.signal;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig(params.config, async ()=>{\n                this.firstResult = params.generator.next();\n                if (params.startSetup) {\n                    this.firstResult.then(params.startSetup).then(resolve, reject);\n                } else {\n                    this.firstResult.then((_result)=>resolve(undefined), reject);\n                }\n            }, true);\n        });\n    }\n    async next(...args) {\n        this.signal?.throwIfAborted();\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return _singletons_index_js__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorageProviderSingleton.runWithConfig(this.config, this.signal ? async ()=>{\n            return (0,_signal_js__WEBPACK_IMPORTED_MODULE_1__.raceWithSignal)(this.generator.next(...args), this.signal);\n        } : async ()=>{\n            return this.generator.next(...args);\n        }, true);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore Not present in Node 18 types, required in latest Node 22\n    async [Symbol.asyncDispose]() {\n        await this.return();\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, signal, ...args) {\n    const gen = new AsyncGeneratorWithSetup({\n        generator,\n        startSetup,\n        signal\n    });\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE0RTtBQUMvQjtBQUM3Qzs7O0NBR0MsR0FDTSxNQUFNRSwrQkFBK0JDO0lBQ3hDQyxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0FDLGVBQWU7UUFDWCxJQUFJLENBQUMsSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDZCxJQUFJLENBQUNBLE1BQU0sR0FBRyxJQUFJLENBQUNDLFNBQVM7UUFDaEM7SUFDSjtJQUNBLE1BQU1DLE9BQU87UUFDVCxJQUFJLENBQUNILFlBQVk7UUFDakIsSUFBSTtZQUNBLE1BQU1JLFNBQVMsTUFBTSxJQUFJLENBQUNILE1BQU0sQ0FBQ0ksSUFBSTtZQUNyQyxJQUFJRCxPQUFPRSxJQUFJLEVBQUU7Z0JBQ2IsSUFBSSxDQUFDTCxNQUFNLENBQUNNLFdBQVcsSUFBSSwwQ0FBMEM7Z0JBQ3JFLE9BQU87b0JBQ0hELE1BQU07b0JBQ05QLE9BQU9TO2dCQUNYO1lBQ0osT0FDSztnQkFDRCxPQUFPO29CQUNIRixNQUFNO29CQUNOUCxPQUFPSyxPQUFPTCxLQUFLO2dCQUN2QjtZQUNKO1FBQ0osRUFDQSxPQUFPVSxHQUFHO1lBQ04sSUFBSSxDQUFDUixNQUFNLENBQUNNLFdBQVcsSUFBSSwyQ0FBMkM7WUFDdEUsTUFBTUU7UUFDVjtJQUNKO0lBQ0EsTUFBTUMsU0FBUztRQUNYLElBQUksQ0FBQ1YsWUFBWTtRQUNqQix5REFBeUQ7UUFDekQsSUFBSSxJQUFJLENBQUNXLE1BQU0sRUFBRTtZQUNiLE1BQU1DLGdCQUFnQixJQUFJLENBQUNYLE1BQU0sQ0FBQ1ks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SUFDSjtJQUNBLE1BQU1DLFFBQVEsTUFBTWEsSUFBSWIsS0FBSztJQUM3QixPQUFPO1FBQUVjLFFBQVFGLEdBQUdDLEtBQUtiLFVBQVVRO1FBQU9SO0lBQU07QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3N0cmVhbS5qcz85NmI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcmFjZVdpdGhTaWduYWwgfSBmcm9tIFwiLi9zaWduYWwuanNcIjtcbi8qXG4gKiBTdXBwb3J0IGFzeW5jIGl0ZXJhdG9yIHN5bnRheCBmb3IgUmVhZGFibGVTdHJlYW1zIGluIGFsbCBlbnZpcm9ubWVudHMuXG4gKiBTb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0aWFzQnVlbGVucy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9wdWxsLzEyMiNpc3N1ZWNvbW1lbnQtMTYyNzM1NDQ5MFxuICovXG5leHBvcnQgY2xhc3MgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSBleHRlbmRzIFJlYWRhYmxlU3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVhZGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVuc3VyZVJlYWRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRlcikge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXIgPSB0aGlzLmdldFJlYWRlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBjbG9zZWRcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBlcnJvcmVkXG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHJldHVybigpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSZWFkZXIoKTtcbiAgICAgICAgLy8gSWYgd3JhcHBlZCBpbiBhIE5vZGUgc3RyZWFtLCBjYW5jZWwgaXMgYWxyZWFkeSBjYWxsZWQuXG4gICAgICAgIGlmICh0aGlzLmxvY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHRoaXMucmVhZGVyLmNhbmNlbCgpOyAvLyBjYW5jZWwgZmlyc3QsIGJ1dCBkb24ndCBhd2FpdCB5ZXRcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayBmaXJzdFxuICAgICAgICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTsgLy8gbm93IGF3YWl0IGl0XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIHRocm93KGUpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSZWFkZXIoKTtcbiAgICAgICAgaWYgKHRoaXMubG9ja2VkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxQcm9taXNlID0gdGhpcy5yZWFkZXIuY2FuY2VsKCk7IC8vIGNhbmNlbCBmaXJzdCwgYnV0IGRvbid0IGF3YWl0IHlldFxuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIGZpcnN0XG4gICAgICAgICAgICBhd2FpdCBjYW5jZWxQcm9taXNlOyAvLyBub3cgYXdhaXQgaXRcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgIC8vIEB0cy1pZ25vcmUgTm90IHByZXNlbnQgaW4gTm9kZSAxOCB0eXBlcywgcmVxdWlyZWQgaW4gbGF0ZXN0IE5vZGUgMjJcbiAgICBhc3luYyBbU3ltYm9sLmFzeW5jRGlzcG9zZV0oKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmV0dXJuKCk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICAgIC8vIEZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1N0cmVhbXNfQVBJL1VzaW5nX3JlYWRhYmxlX3N0cmVhbXMjcmVhZGluZ190aGVfc3RyZWFtXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHB1bXAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4oKHsgZG9uZSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBubyBtb3JlIGRhdGEgbmVlZHMgdG8gYmUgY29uc3VtZWQsIGNsb3NlIHRoZSBzdHJlYW1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVucXVldWUgdGhlIG5leHQgZGF0YSBjaHVuayBpbnRvIG91ciB0YXJnZXQgc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUFzeW5jR2VuZXJhdG9yKGdlbmVyYXRvcikge1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgYXN5bmMgcHVsbChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgZ2VuZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIG5vIG1vcmUgZGF0YSBuZWVkcyB0byBiZSBjb25zdW1lZCwgY2xvc2UgdGhlIHN0cmVhbVxuICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRml4OiBgZWxzZSBpZiAodmFsdWUpYCB3aWxsIGhhbmcgdGhlIHN0cmVhbWluZyB3aGVuIG51bGxpc2ggdmFsdWUgKGUuZy4gZW1wdHkgc3RyaW5nKSBpcyBwdWxsZWRcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jIGNhbmNlbChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0b3IucmV0dXJuKHJlYXNvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXRlZShpdGVyLCBsZW5ndGggPSAyKSB7XG4gICAgY29uc3QgYnVmZmVycyA9IEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gW10pO1xuICAgIHJldHVybiBidWZmZXJzLm1hcChhc3luYyBmdW5jdGlvbiogbWFrZUl0ZXIoYnVmZmVyKSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGl0ZXIubmV4dCgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYnVmZmVyIG9mIGJ1ZmZlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChidWZmZXJbMF0uZG9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgeWllbGQgYnVmZmVyLnNoaWZ0KCkudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoZmlyc3QsIHNlY29uZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZpcnN0KSAmJiBBcnJheS5pc0FycmF5KHNlY29uZCkpIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gKGZpcnN0ICsgc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIChmaXJzdCArIHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJjb25jYXRcIiBpbiBmaXJzdCAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0eXBlb2YgZmlyc3QuY29uY2F0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBjaHVuayA9IHsgLi4uZmlyc3QgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2Vjb25kKSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiBjaHVuayAmJiAhQXJyYXkuaXNBcnJheShjaHVua1trZXldKSkge1xuICAgICAgICAgICAgICAgIGNodW5rW2tleV0gPSBjb25jYXQoY2h1bmtba2V5XSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2h1bmtba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaHVuaztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbmNhdCAke3R5cGVvZiBmaXJzdH0gYW5kICR7dHlwZW9mIHNlY29uZH1gKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZW5lcmF0b3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2V0dXBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNpZ25hbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaXJzdFJlc3VsdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaXJzdFJlc3VsdFVzZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdlbmVyYXRvciA9IHBhcmFtcy5nZW5lcmF0b3I7XG4gICAgICAgIHRoaXMuY29uZmlnID0gcGFyYW1zLmNvbmZpZztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdGhpcy5zaWduYWwgPSBwYXJhbXMuc2lnbmFsID8/IHRoaXMuY29uZmlnPy5zaWduYWw7XG4gICAgICAgIC8vIHNldHVwIGlzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9ubHkgYWZ0ZXIgdGhlIGZpcnN0IGl0ZXJhdG9yIHZhbHVlXG4gICAgICAgIC8vIGlzIGF2YWlsYWJsZS4gdGhpcyBpcyB1c2VmdWwgd2hlbiBzZXR1cCBvZiBzZXZlcmFsIHBpcGVkIGdlbmVyYXRvcnNcbiAgICAgICAgLy8gbmVlZHMgdG8gaGFwcGVuIGluIGxvZ2ljYWwgb3JkZXIsIGllLiBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggaW5wdXQgdG9cbiAgICAgICAgLy8gdG8gZWFjaCBnZW5lcmF0b3IgaXMgYXZhaWxhYmxlLlxuICAgICAgICB0aGlzLnNldHVwID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLnJ1bldpdGhDb25maWcocGFyYW1zLmNvbmZpZywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQgPSBwYXJhbXMuZ2VuZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnN0YXJ0U2V0dXApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdC50aGVuKHBhcmFtcy5zdGFydFNldHVwKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0LnRoZW4oKF9yZXN1bHQpID0+IHJlc29sdmUodW5kZWZpbmVkKSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIG5leHQoLi4uYXJncykge1xuICAgICAgICB0aGlzLnNpZ25hbD8udGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0UmVzdWx0VXNlZCkge1xuICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdFVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24ucnVuV2l0aENvbmZpZyh0aGlzLmNvbmZpZywgdGhpcy5zaWduYWxcbiAgICAgICAgICAgID8gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByYWNlV2l0aFNpZ25hbCh0aGlzLmdlbmVyYXRvci5uZXh0KC4uLmFyZ3MpLCB0aGlzLnNpZ25hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IubmV4dCguLi5hcmdzKTtcbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgIH1cbiAgICBhc3luYyByZXR1cm4odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yLnJldHVybih2YWx1ZSk7XG4gICAgfVxuICAgIGFzeW5jIHRocm93KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yLnRocm93KGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgIC8vIEB0cy1pZ25vcmUgTm90IHByZXNlbnQgaW4gTm9kZSAxOCB0eXBlcywgcmVxdWlyZWQgaW4gbGF0ZXN0IE5vZGUgMjJcbiAgICBhc3luYyBbU3ltYm9sLmFzeW5jRGlzcG9zZV0oKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmV0dXJuKCk7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodG8sIGdlbmVyYXRvciwgc3RhcnRTZXR1cCwgc2lnbmFsLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgZ2VuID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHtcbiAgICAgICAgZ2VuZXJhdG9yLFxuICAgICAgICBzdGFydFNldHVwLFxuICAgICAgICBzaWduYWwsXG4gICAgfSk7XG4gICAgY29uc3Qgc2V0dXAgPSBhd2FpdCBnZW4uc2V0dXA7XG4gICAgcmV0dXJuIHsgb3V0cHV0OiB0byhnZW4sIHNldHVwLCAuLi5hcmdzKSwgc2V0dXAgfTtcbn1cbiJdLCJuYW1lcyI6WyJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwicmFjZVdpdGhTaWduYWwiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJlbnN1cmVSZWFkZXIiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJuZXh0IiwicmVzdWx0IiwicmVhZCIsImRvbmUiLCJyZWxlYXNlTG9jayIsInVuZGVmaW5lZCIsImUiLCJyZXR1cm4iLCJsb2NrZWQiLCJjYW5jZWxQcm9taXNlIiwiY2FuY2VsIiwidGhyb3ciLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwiYXN5bmNEaXNwb3NlIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwic3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwicHVtcCIsInRoZW4iLCJjbG9zZSIsImVucXVldWUiLCJmcm9tQXN5bmNHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJwdWxsIiwicmVhc29uIiwiYXRlZSIsIml0ZXIiLCJsZW5ndGgiLCJidWZmZXJzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwibWFrZUl0ZXIiLCJidWZmZXIiLCJwdXNoIiwic2hpZnQiLCJjb25jYXQiLCJmaXJzdCIsInNlY29uZCIsImlzQXJyYXkiLCJjaHVuayIsImtleSIsImVudHJpZXMiLCJFcnJvciIsIkFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIiwicGFyYW1zIiwiY29uZmlnIiwic2lnbmFsIiwic2V0dXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJ1bldpdGhDb25maWciLCJmaXJzdFJlc3VsdCIsInN0YXJ0U2V0dXAiLCJfcmVzdWx0IiwiYXJncyIsInRocm93SWZBYm9ydGVkIiwiZmlyc3RSZXN1bHRVc2VkIiwicGlwZUdlbmVyYXRvcldpdGhTZXR1cCIsInRvIiwiZ2VuIiwib3V0cHV0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90aWt0b2tlbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNFO0FBQ3RCO0FBQ2hELE1BQU1HLFFBQVEsQ0FBQztBQUNmLE1BQU1DLFNBQVMsYUFBYSxHQUFHLElBQUlGLHlEQUFXQSxDQUFDLENBQUM7QUFDekMsZUFBZUcsWUFBWUMsUUFBUTtJQUN0QyxJQUFJLENBQUVBLENBQUFBLFlBQVlILEtBQUksR0FBSTtRQUN0QkEsS0FBSyxDQUFDRyxTQUFTLEdBQUdGLE9BQ2JHLEtBQUssQ0FBQyxDQUFDLDhCQUE4QixFQUFFRCxTQUFTLEtBQUssQ0FBQyxFQUN0REUsSUFBSSxDQUFDLENBQUNDLE1BQVFBLElBQUlDLElBQUksSUFDdEJGLElBQUksQ0FBQyxDQUFDRyxPQUFTLElBQUlYLHNEQUFRQSxDQUFDVyxPQUM1QkMsS0FBSyxDQUFDLENBQUNDO1lBQ1IsT0FBT1YsS0FBSyxDQUFDRyxTQUFTO1lBQ3RCLE1BQU1PO1FBQ1Y7SUFDSjtJQUNBLE9BQU8sTUFBTVYsS0FBSyxDQUFDRyxTQUFTO0FBQ2hDO0FBQ08sZUFBZVEsaUJBQWlCQyxLQUFLO0lBQ3hDLE9BQU9WLFlBQVlKLHlFQUF1QkEsQ0FBQ2M7QUFDL0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzPzUxM2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGlrdG9rZW4sIGdldEVuY29kaW5nTmFtZUZvck1vZGVsLCB9IGZyb20gXCJqcy10aWt0b2tlbi9saXRlXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL2FzeW5jX2NhbGxlci5qc1wiO1xuY29uc3QgY2FjaGUgPSB7fTtcbmNvbnN0IGNhbGxlciA9IC8qICNfX1BVUkVfXyAqLyBuZXcgQXN5bmNDYWxsZXIoe30pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVuY29kaW5nKGVuY29kaW5nKSB7XG4gICAgaWYgKCEoZW5jb2RpbmcgaW4gY2FjaGUpKSB7XG4gICAgICAgIGNhY2hlW2VuY29kaW5nXSA9IGNhbGxlclxuICAgICAgICAgICAgLmZldGNoKGBodHRwczovL3Rpa3Rva2VuLnBhZ2VzLmRldi9qcy8ke2VuY29kaW5nfS5qc29uYClcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gbmV3IFRpa3Rva2VuKGRhdGEpKVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbZW5jb2RpbmddO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBjYWNoZVtlbmNvZGluZ107XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5jb2RpbmdGb3JNb2RlbChtb2RlbCkge1xuICAgIHJldHVybiBnZXRFbmNvZGluZyhnZXRFbmNvZGluZ05hbWVGb3JNb2RlbChtb2RlbCkpO1xufVxuIl0sIm5hbWVzIjpbIlRpa3Rva2VuIiwiZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwiLCJBc3luY0NhbGxlciIsImNhY2hlIiwiY2FsbGVyIiwiZ2V0RW5jb2RpbmciLCJlbmNvZGluZyIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiY2F0Y2giLCJlIiwiZW5jb2RpbmdGb3JNb2RlbCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/documents.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/documents.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/documents/index.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/documents/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZG9jdW1lbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYXJkd2FyZS1kb2MtY2hhdGJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL3RleHRzcGxpdHRlcnMvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kb2N1bWVudHMuanM/Mzg3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/documents.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/utils/tiktoken.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@langchain/textsplitters/node_modules/@langchain/core/utils/tiktoken.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* reexport safe */ _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__.encodingForModel),\n/* harmony export */   getEncoding: () => (/* reexport safe */ _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__.getEncoding)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/dist/utils/tiktoken.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFyZHdhcmUtZG9jLWNoYXRib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi90ZXh0c3BsaXR0ZXJzL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvdGlrdG9rZW4uanM/OWM4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/textsplitters/node_modules/@langchain/core/utils/tiktoken.js\n");

/***/ })

};
;